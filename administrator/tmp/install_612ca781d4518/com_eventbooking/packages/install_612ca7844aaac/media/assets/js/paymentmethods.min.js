function PaymentMethod(e,t,a,n,i){this.name=e,this.creditCard=t,this.cardType=a,this.cardCvv=n,this.cardHolderName=i}function PaymentMethods(){this.length=0,this.methods=[]}function removeSpace(e){e.value=e.value.replace(/\s/g,"")}PaymentMethod.prototype.getName=function(){return this.name},PaymentMethod.prototype.getCreditCard=function(){return this.creditCard},PaymentMethod.prototype.getCardType=function(){return this.cardType},PaymentMethod.prototype.getCardCvv=function(){return this.cardCvv},PaymentMethod.prototype.getCardHolderName=function(){return this.cardHolderName},PaymentMethods.prototype.Add=function(e){this.methods[this.length]=e,this.length=this.length+1},PaymentMethods.prototype.Find=function(e){for(var t=0;t<this.length;t++)if(this.methods[t].name==e)return this.methods[t];return null},function(m){updatePaymentMethod=function(){var e,t;e=m("input:radio[name^=payment_method]").length?m("input:radio[name^=payment_method]:checked").val():m("input[name^=payment_method]").val(),(t=methods.Find(e))&&(t.getCreditCard()?(m("#tr_card_number").show(),m("#tr_exp_date").show(),m("#tr_cvv_code").show(),t.getCardType()?m("#tr_card_type").show():m("#tr_card_type").hide(),t.getCardHolderName()?m("#tr_card_holder_name").show():m("#tr_card_holder_name").hide()):(m("#tr_card_number").hide(),m("#tr_exp_date").hide(),m("#tr_cvv_code").hide(),m("#tr_card_type").hide(),m("#tr_card_holder_name").hide()),"os_squareup"==e?m("#sq_field_zipcode").show():m("#sq_field_zipcode").hide(),"undefined"!=typeof stripe&&(0==e.indexOf("os_stripe")?m("#stripe-card-form").show():m("#stripe-card-form").hide()))},calculateRegistrationFee=function(){if(updatePaymentMethod(),1==document.adminForm.show_payment_fee.value){var e,t=m("#registrant_id").val(),n=m("#btn-submit"),i=m("#ajax-loading-animation");n.attr("disabled","disabled"),i.show(),e=m("input:radio[name^=payment_method]").length?m("input:radio[name^=payment_method]:checked").val():m("input[name^=payment_method]").val(),m.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=register.calculate_registration_fee&payment_method="+e+"&registrant_id="+t,dataType:"json",success:function(e,t,a){n.removeAttr("disabled"),i.hide(),m("#amount").length&&m("#total_amount").val(e.amount),m("#payment_processing_fee").val(e.payment_processing_fee),m("#gross_amount").val(e.gross_amount)},error:function(e,t,a){alert(t)}})}},calculateRemainderFee=function(){if(updatePaymentMethod(),1==document.adminForm.show_payment_fee.value){var e,t=m("#registrant_id").val(),n=m("#btn-submit"),i=m("#ajax-loading-animation");n.attr("disabled","disabled"),i.show(),e=m("input:radio[name^=payment_method]").length?m("input:radio[name^=payment_method]:checked").val():m("input[name^=payment_method]").val(),m.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=register.calculate_remainder_fee&payment_method="+e+"&registrant_id="+t,dataType:"json",success:function(e,t,a){n.removeAttr("disabled"),i.hide(),m("#amount").length&&m("#total_amount").val(e.amount),m("#payment_processing_fee").val(e.payment_processing_fee),m("#gross_amount").val(e.gross_amount)},error:function(e,t,a){alert(t)}})}},changePaymentMethod=function(e){updatePaymentMethod(),1==document.adminForm.show_payment_fee.value&&("individual"==e?calculateIndividualRegistrationFee:"group"==e?calculateGroupRegistrationFee:calculateCartRegistrationFee)()},calculateIndividualRegistrationFee=function(n){var i=m("#btn-submit"),o=m("#ajax-loading-animation"),d=m("#total_amount"),r=m("#amount");i.attr("disabled","disabled"),o.show();var l=Joomla.getOptions("euVatNumberField"),e='select.ticket_type_quantity, #adminForm input[name="event_id"], #adminForm input[name="coupon_code"], #adminForm .payment-calculation input[type="text"], #adminForm .payment-calculation input[type="number"], #adminForm .payment-calculation input[type="checkbox"]:checked, #adminForm .payment-calculation input[type="radio"]:checked, #adminForm .payment-calculation select, #adminForm input.eb-hidden-field:hidden, #tickets_members_information :input, #adminForm select[name="country"], #adminForm select[name="state"]';l&&(e=e+', #adminForm input[name="'+l+'"]');var t=Joomla.getOptions("calculateIndividualRegistrationFeeUrl");t=t||siteUrl+"index.php?option=com_eventbooking&task=register.calculate_individual_registration_fee"+langLinkForAjax,m("input:radio[name^=payment_method]").length?e+=", input:radio[name^=payment_method]:checked":e+=", input[name^=payment_method]",m.ajax({type:"POST",url:t,data:m(e),dataType:"json",success:function(e,t,a){i.removeAttr("disabled"),o.hide(),d.val(e.total_amount),m("#discount_amount").val(e.discount_amount),m("#tax_amount").val(e.tax_amount),m("#payment_processing_fee").val(e.payment_processing_fee),r.val(e.amount),m("#deposit_amount").val(e.deposit_amount),(r.length||d.length)&&0==e.payment_amount?m(".payment_information").css("display","none"):(m(".payment_information").css("display",""),updatePaymentMethod()),1==e.coupon_valid?m("#coupon_validate_msg").hide():(i.attr("disabled","disabled"),m("#coupon_validate_msg").show()),1==m("#payment_type").val()?m("#deposit_amount_container").show():m("#deposit_amount_container").hide(),void 0!==n&&m("#tickets_members_information").html(e.tickets_members),l&&(1==e.show_vat_number_field?m("#field_"+l).show():m("#field_"+l).hide(),1==e.vat_number_valid?m("#vatnumber_validate_msg").hide():m("#vatnumber_validate_msg").show())},error:function(e,t,a){alert(t)}})},calculateGroupRegistrationFee=function(){var n=m("#btn-process-group-billing"),i=m("#ajax-loading-animation"),o=m("#total_amount"),d=m("#amount");n.attr("disabled","disabled"),i.show();var r=Joomla.getOptions("euVatNumberField"),e='#adminForm input[name="event_id"], #adminForm input[name="coupon_code"], #adminForm .payment-calculation input[type="text"], #adminForm .payment-calculation input[type="number"], #adminForm .payment-calculation input[type="checkbox"]:checked, #adminForm .payment-calculation input[type="radio"]:checked, #adminForm .payment-calculation select, #adminForm input.eb-hidden-field:hidden, #adminForm select[name="country"], #adminForm select[name="state"]';r&&(e=e+', #adminForm input[name="'+r+'"]'),m("input:radio[name^=payment_method]").length?e+=", input:radio[name^=payment_method]:checked":e+=", input[name^=payment_method]";var t=Joomla.getOptions("calculateGroupRegistrationFeeUrl");t=t||siteUrl+"index.php?option=com_eventbooking&task=register.calculate_group_registration_fee"+langLinkForAjax,m.ajax({type:"POST",url:t,data:m(e),dataType:"json",success:function(e,t,a){n.removeAttr("disabled"),i.hide(),o.val(e.total_amount),m("#discount_amount").val(e.discount_amount),m("#tax_amount").val(e.tax_amount),m("#payment_processing_fee").val(e.payment_processing_fee),d.val(e.amount),m("#deposit_amount").val(e.deposit_amount),(d.length||o.length)&&0==e.payment_amount?m(".payment_information").css("display","none"):(m(".payment_information").css("display",""),updatePaymentMethod()),1==e.coupon_valid?m("#coupon_validate_msg").hide():(n.attr("disabled","disabled"),m("#coupon_validate_msg").show()),1==m("#payment_type").val()?m("#deposit_amount_container").show():m("#deposit_amount_container").hide(),r&&(1==e.show_vat_number_field?m("#field_"+r).show():m("#field_"+r).hide(),1==e.vat_number_valid?m("#vatnumber_validate_msg").hide():m("#vatnumber_validate_msg").show())},error:function(e,t,a){alert(t)}})},calculateCartRegistrationFee=function(){var n=m("#btn-submit"),i=m("#ajax-loading-animation"),o=m("#total_amount"),d=m("#amount");n.attr("disabled","disabled"),i.show();var r=Joomla.getOptions("euVatNumberField"),e='#adminForm input[name="coupon_code"], #adminForm .payment-calculation input[type="text"], #adminForm .payment-calculation input[type="number"], #adminForm .payment-calculation input[type="checkbox"]:checked, #adminForm .payment-calculation input[type="radio"]:checked, #adminForm .payment-calculation select, #adminForm input.eb-hidden-field:hidden, #adminForm select[name="country"], #adminForm select[name="state"]';r&&(e=e+', #adminForm input[name="'+r+'"]'),m("input:radio[name^=payment_method]").length?e+=", input:radio[name^=payment_method]:checked":e+=", input[name^=payment_method]";var t=Joomla.getOptions("calculateCartRegistrationFeeUrl");t=t||siteUrl+"index.php?option=com_eventbooking&task=cart.calculate_cart_registration_fee"+langLinkForAjax,m.ajax({type:"POST",url:t,data:m(e),dataType:"json",success:function(e,t,a){n.removeAttr("disabled"),i.hide(),o.val(e.total_amount),m("#discount_amount").val(e.discount_amount),m("#tax_amount").val(e.tax_amount),m("#payment_processing_fee").val(e.payment_processing_fee),d.val(e.amount),m("#deposit_amount").val(e.deposit_amount),(d.length||o.length)&&0==e.payment_amount?m(".payment_information").css("display","none"):(m(".payment_information").css("display",""),updatePaymentMethod()),1==e.coupon_valid?m("#coupon_validate_msg").hide():(n.attr("disabled","disabled"),m("#coupon_validate_msg").show()),r&&(1==e.show_vat_number_field?m("#field_"+r).show():m("#field_"+r).hide(),1==e.vat_number_valid?m("#vatnumber_validate_msg").hide():m("#vatnumber_validate_msg").show())},error:function(e,t,a){alert(t)}})},showHideDependFields=function(e,t,a,n){var i,d=m("#ajax-loading-animation");d.show(),i=n?".master-field-"+n+" input[type='checkbox']:checked, .master-field-"+n+" input[type='radio']:checked, .master-field-"+n+" select":".master-field input[type='checkbox']:checked, .master-field input[type='radio']:checked, .master-field select",m.ajax({type:"POST",url:siteUrl+"index.php?option=com_eventbooking&task=get_depend_fields_status&field_id="+e+"&field_suffix="+n+langLinkForAjax,data:m(i),dataType:"json",success:function(e,t,a){d.hide();var n,i=[],o=[];for(0<e.hide_fields.length&&(i=e.hide_fields.split(",")),0<e.show_fields.length&&(o=e.show_fields.split(",")),n=0;n<i.length;n++)m("#"+i[n]).hide();for(n=0;n<o.length;n++)m("#"+o[n]).show();"undefined"==typeof eb_current_page||("default"==eb_current_page?calculateIndividualRegistrationFee():"group_billing"==eb_current_page?calculateGroupRegistrationFee():"cart"==eb_current_page&&calculateCartRegistrationFee())},error:function(e,t,a){alert(t)}})},buildStateField=function(t,e,a){var n=m("#"+e),i=m("#"+t);if(i.length&&i.is("select")){var o="";n.length&&(o=n.val()),m.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=get_states&country_name="+o+"&field_name="+t+"&state_name="+a+langLinkForAjax,success:function(e){m("#field_"+t+" .controls").length?m("#field_"+t+" .controls").html(e):m("#field_"+t+" .col-sm-9").length?m("#field_"+t+" .col-sm-9").html(e):m("#field_"+t+" .col-md9").length?m("#field_"+t+" .col-md-9").html(e):m("#field_"+t+" .uk-form-controls").html(e)},error:function(e,t,a){alert(t)}}),n.length&&n.change(function(){m.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=get_states&country_name="+m(this).val()+"&field_name="+t+"&state_name="+a+langLinkForAjax,success:function(e){m("#field_"+t+" .controls").length?m("#field_"+t+" .controls").html(e):m("#field_"+t+" .col-sm-9").length?m("#field_"+t+" .col-sm-9").html(e):m("#field_"+t+" .col-md-9").length?m("#field_"+t+" .col-md-9").html(e):m("#field_"+t+" .uk-form-controls").html(e)},error:function(e,t,a){alert(t)}})})}},buildStateFields=function(t,e,a){var n=m("#"+e),i=m("#"+t);n.length&&i.length&&i.is("select")&&n.change(function(){m.ajax({type:"GET",url:siteUrl+"index.php?option=com_eventbooking&task=get_states&country_name="+m(this).val()+"&field_name="+t+"&state_name="+a+langLinkForAjax,success:function(e){m("#field_"+t+" .controls").length?m("#field_"+t+" .controls").html(e):m("#field_"+t+" .col-sm-9").length?m("#field_"+t+" .col-sm-9").html(e):m("#field_"+t+" .col-md-9").length?m("#field_"+t+" .col-md-9").html(e):m("#field_"+t+" .uk-form-controls").html(e)},error:function(e,t,a){alert(t)}})})},showDepositAmount=function(e){1==m(e).val()?m("#deposit_amount_container").show():m("#deposit_amount_container").hide()},stripeResponseHandler=function(e,t){var a=m("#adminForm");if(t.error)alert(t.error.message),a.find("#btn-submit").prop("disabled",!1),a.find("#btn-process-group-billing").prop("disabled",!1);else{var n=t.id;m("#x_card_num").val(""),m("#x_card_code").val(""),m("#card_holder_name").val(""),a.append(m('<input type="hidden" name="stripeToken" />').val(n)),a.get(0).submit()}},stripeTokenHandler=function(e){var t=document.getElementById("adminForm"),a=document.createElement("input");a.setAttribute("type","hidden"),a.setAttribute("name","stripeToken"),a.setAttribute("value",e.id),t.appendChild(a),t.submit()},EBInitReCaptcha2=function(){var e,t=document.getElementById("eb_dynamic_recaptcha_1"),a=["sitekey","theme","size","tabindex","callback","expired-callback","error-callback"],n={};if(t.dataset)n=t.dataset;else for(var i=0;i<a.length;i++)e="data-"+a[i],t.hasAttribute(e)&&(n[a[i]]=t.getAttribute(e));t.setAttribute("data-recaptcha-widget-id",grecaptcha.render(t,n))},EBInitReCaptchaInvisible=function(){var e,t=document.getElementById("eb_dynamic_recaptcha_1"),a=["sitekey","badge","size","tabindex","callback","expired-callback","error-callback"],n={};if(t.dataset)n=t.dataset;else for(var i=0;i<a.length;i++)e="data-"+a[i],t.hasAttribute(e)&&(n[a[i]]=t.getAttribute(e));t.setAttribute("data-recaptcha-widget-id",grecaptcha.render(t,n)),grecaptcha.execute(t.getAttribute("data-recaptcha-widget-id"))}}(Eb.jQuery);
!function(i,r){r(i).ready(function(){var a=Joomla.getOptions("coordinates"),e=Joomla.getOptions("zoomLevel"),o=Joomla.getOptions("baseUri"),t=L.map("map-canvas",{center:[a[0],a[1]],zoom:e,zoomControl:!0,attributionControl:!1,scrollWheelZoom:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{id:"mapbox.streets"}).addTo(t);var n=L.marker([a[0],a[1]],{draggable:!0}).addTo(t);n.on("dragend",function(a){var e=a.target.getLatLng();r("#coordinates").val(e.lat+","+e.lng);var o="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+e.lat+"&lon="+e.lng;r.ajax({type:"GET",url:o,dataType:"json",success:function(a,e,o){r("#address").val(a.display_name)},error:function(a,e,o){alert(e)}})}),r("#address").autocomplete({serviceUrl:o+"/index.php?option=com_eventbooking&task=location.search",minChars:3,onSelect:function(a){var e=i.adminForm;a.name&&""===e.name.value&&(e.name.value=a.name),a.coordinates&&(e.coordinates.value=a.coordinates),a.city&&r("#city").val(a.city),a.state&&r("#state").val(a.state);var o=L.latLng(a.lat,a.long);n.setLatLng(o),t.panTo(o)}}),r("#adminForm").validationEngine("attach",{onValidationComplete:function(a,e){return 1==e&&r.ajax({type:"POST",data:r("#adminForm input[type='radio']:checked, #adminForm input[type='checkbox']:checked, #adminForm input[type='text'], #adminForm input[type='hidden'],  #adminForm select"),dataType:"json",url:o+"/index.php?option=com_eventbooking&task=location.save_ajax",beforeSend:function(){r("#save_location").prop("disabled",!0)},success:function(a){r("#adminForm").before('<div class="alert alert-success"><h4 class="alert-heading">Message</h4><div class="alert-message">'+a.message+"</div></div>"),r("#save_location").prop("disabled",!1);var e=parent.jQuery;e("#location_id").append(e("<option>",{value:a.id,text:a.name})),e("#location_id").val(a.id),e.colorbox.close(),e("#location_id").trigger("liszt:updated")}}),!1}})})}(document,Eb.jQuery);
!function(r,l){Joomla.submitbutton=function(a){var o=r.adminForm;if("cancel"===a)Joomla.submitform(a);else{if(""===o.name.value)return alert(Joomla.JText._("EB_ENTER_LOCATION")),void o.name.focus();Joomla.submitform(a)}},l(r).ready(function(){var a=Joomla.getOptions("coordinates"),o=Joomla.getOptions("zoomLevel"),t=Joomla.getOptions("baseUri"),e=L.map("map-canvas",{center:[a[0],a[1]],zoom:o,zoomControl:!0,attributionControl:!1,scrollWheelZoom:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{id:"mapbox.streets"}).addTo(e);var n=L.marker([a[0],a[1]],{draggable:!0}).addTo(e);n.on("dragend",function(a){var o=a.target.getLatLng();l("#coordinates").val(o.lat+","+o.lng);var t="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+o.lat+"&lon="+o.lng;l.ajax({type:"GET",url:t,dataType:"json",success:function(a,o,t){l("#address").val(a.display_name)},error:function(a,o,t){alert(o)}})}),l("#address").autocomplete({serviceUrl:t+"/index.php?option=com_eventbooking&task=location.search",minChars:3,onSelect:function(a){var o=r.adminForm;a.name&&""===o.name.value&&(o.name.value=a.name),a.coordinates&&(o.coordinates.value=a.coordinates),a.city&&l("#city").val(a.city),a.state&&l("#state").val(a.state);var t=L.latLng(a.lat,a.long);n.setLatLng(t),e.panTo(t)}})})}(document,jQuery);
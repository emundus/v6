UPDATE `jos_fabrik_elements` JOIN `jos_fabrik_groups` SET `filter_type` = 'range' WHERE `jos_fabrik_elements`.`name`='_year' AND `jos_fabrik_groups`.`name`='jos_emundus_stats_nombre_comptes';

UPDATE `jos_fabrik_lists` SET `params` = '{\"show-table-filters\":\"1\",\"advanced-filter\":\"0\",\"advanced-filter-default-statement\":\"=\",\"search-mode\":\"0\",\"search-mode-advanced\":\"0\",\"search-mode-advanced-default\":\"all\",\"search_elements\":\"\",\"list_search_elements\":\"null\",\"search-all-label\":\"All\",\"require-filter\":\"0\",\"require-filter-msg\":\"\",\"filter-dropdown-method\":\"0\",\"toggle_cols\":\"0\",\"list_filter_cols\":\"1\",\"empty_data_msg\":\"\",\"outro\":\"\",\"list_ajax\":\"0\",\"show-table-add\":\"1\",\"show-table-nav\":\"1\",\"show_displaynum\":\"1\",\"showall-records\":\"0\",\"show-total\":\"0\",\"sef-slug\":\"\",\"show-table-picker\":\"1\",\"admin_template\":\"\",\"show-title\":\"1\",\"pdf\":\"\",\"pdf_template\":\"\",\"pdf_orientation\":\"portrait\",\"pdf_size\":\"a4\",\"pdf_include_bootstrap\":\"1\",\"bootstrap_stripped_class\":\"1\",\"bootstrap_bordered_class\":\"0\",\"bootstrap_condensed_class\":\"0\",\"bootstrap_hover_class\":\"1\",\"responsive_elements\":\"\",\"responsive_class\":\"\",\"list_responsive_elements\":\"null\",\"tabs_field\":\"\",\"tabs_max\":\"10\",\"tabs_all\":\"1\",\"list_ajax_links\":\"0\",\"actionMethod\":\"default\",\"detailurl\":\"\",\"detaillabel\":\"\",\"list_detail_link_icon\":\"search\",\"list_detail_link_target\":\"_self\",\"editurl\":\"\",\"editlabel\":\"\",\"list_edit_link_icon\":\"edit\",\"checkboxLocation\":\"end\",\"addurl\":\"\",\"addlabel\":\"\",\"list_add_icon\":\"plus\",\"list_delete_icon\":\"delete\",\"popup_width\":\"\",\"popup_height\":\"\",\"popup_offset_x\":\"\",\"popup_offset_y\":\"\",\"note\":\"\",\"alter_existing_db_cols\":\"0\",\"process-jplugins\":\"1\",\"cloak_emails\":\"0\",\"enable_single_sorting\":\"default\",\"collation\":\"latin1_swedish_ci\",\"force_collate\":\"\",\"list_disable_caching\":\"0\",\"distinct\":\"1\",\"group_by_raw\":\"1\",\"group_by_access\":\"1\",\"group_by_order\":\"\",\"group_by_template\":\"\",\"group_by_template_extra\":\"\",\"group_by_order_dir\":\"ASC\",\"group_by_start_collapsed\":\"0\",\"group_by_collapse_others\":\"0\",\"group_by_show_count\":\"1\",\"filter-join\":[\"\"],\"filter-fields\":[\"jos_emundus_stats_nombre_comptes._year\"],\"filter-conditions\":[\"in\"],\"filter-value\":[\"SELECT DISTINCT(R)\\r\\nFROM (SELECT (substring_index(substring_index(`jos_emundus_setup_campaigns`.`year`, \'-\', 1), \'-\', -1) + seq) AS R, (substring_index(substring_index(`jos_emundus_setup_campaigns`.`year`, \'-\', 1), \'-\', -1) + seq) <= substring_index(substring_index(`jos_emundus_setup_campaigns`.`year`, \'-\', 2), \'-\', -1) AS p FROM seq_0_to_50,\\r\\n(`jos_emundus_setup_groups_repeat_course`\\r\\nLEFT JOIN `jos_emundus_setup_campaigns` ON (`jos_emundus_setup_campaigns`.`training` = `jos_emundus_setup_groups_repeat_course`.`course`)\\r\\nLEFT JOIN `jos_emundus_groups` ON (`jos_emundus_setup_groups_repeat_course`.`parent_id` = `jos_emundus_groups`.`group_id`)) WHERE `jos_emundus_groups`.`user_id` = {$my->id}) AS innerTable\\r\\nWHERE p = 1\"],\"filter-eval\":[\"2\"],\"filter-access\":[\"1\"],\"filter-grouped\":[\"0\"],\"menu_module_prefilters_override\":\"1\",\"prefilter_query\":\"\",\"join-display\":\"default\",\"delete-joined-rows\":\"0\",\"show_related_add\":\"0\",\"show_related_info\":\"0\",\"rss\":\"0\",\"feed_title\":\"\",\"feed_date\":\"\",\"feed_image_src\":\"\",\"rsslimit\":\"150\",\"rsslimitmax\":\"2500\",\"csv_import_frontend\":\"10\",\"csv_export_frontend\":\"7\",\"csvfullname\":\"0\",\"csv_export_step\":\"100\",\"newline_csv_export\":\"nl2br\",\"csv_clean_html\":\"leave\",\"csv_multi_join_split\":\",\",\"csv_custom_qs\":\"\",\"csv_frontend_selection\":\"0\",\"incfilters\":\"0\",\"csv_format\":\"0\",\"csv_which_elements\":\"selected\",\"show_in_csv\":\"\",\"csv_elements\":\"null\",\"csv_include_data\":\"1\",\"csv_include_raw_data\":\"0\",\"csv_include_calculations\":\"0\",\"csv_filename\":\"\",\"csv_encoding\":\"\",\"csv_double_quote\":\"1\",\"csv_local_delimiter\":\"\",\"csv_end_of_line\":\"n\",\"open_archive_active\":\"0\",\"open_archive_set_spec\":\"\",\"open_archive_timestamp\":\"\",\"open_archive_license\":\"http:\\/\\/creativecommons.org\\/licenses\\/by-nd\\/2.0\\/rdf\",\"dublin_core_element\":\"\",\"dublin_core_type\":\"dc:description.abstract\",\"raw\":\"0\",\"open_archive_elements\":\"null\",\"search_use\":\"0\",\"search_title\":\"\",\"search_description\":\"\",\"search_date\":\"\",\"search_link_type\":\"details\",\"dashboard\":\"0\",\"dashboard_icon\":\"\",\"allow_view_details\":\"10\",\"allow_edit_details\":\"10\",\"allow_edit_details2\":\"\",\"allow_add\":\"10\",\"allow_delete\":\"10\",\"allow_delete2\":\"\",\"allow_drop\":\"10\",\"menu_access_only\":\"0\",\"isview\":\"1\"}' WHERE `jos_fabrik_lists`.`db_table_name` = 'jos_emundus_stats_nombre_comptes';

CREATE OR REPLACE VIEW `jos_emundus_stats_candidature_create`  AS  select count(`jos_emundus_campaign_candidature`.`fnum`) AS `countCandidature`,cast(`jos_emundus_campaign_candidature`.`date_time` as date) AS `date`,`jos_emundus_setup_campaigns`.`label` AS `campaign` from (`jos_emundus_campaign_candidature` left join `jos_emundus_setup_campaigns` on(`jos_emundus_campaign_candidature`.`campaign_id` = `jos_emundus_setup_campaigns`.`id`)) where `jos_emundus_campaign_candidature`.`published` != -1 AND cast(`jos_emundus_campaign_candidature`.`date_time` as date) <> '0000-00-00' group by `date`, `campaign` order by `date` ;

CREATE OR REPLACE VIEW `jos_emundus_stats_candidature_submit`  AS  select count(`jos_emundus_campaign_candidature`.`fnum`) AS `countCandidature`,cast(`jos_emundus_campaign_candidature`.`date_submitted` as date) AS `date`,`jos_emundus_setup_campaigns`.`label` AS `campaign` from (`jos_emundus_campaign_candidature` left join `jos_emundus_setup_campaigns` on(`jos_emundus_campaign_candidature`.`campaign_id` = `jos_emundus_setup_campaigns`.`id`)) where `jos_emundus_campaign_candidature`.`published` != -1 AND cast(`jos_emundus_campaign_candidature`.`date_submitted` as date) <> '0000-00-00' group by `date`, `campaign` order by `date` ;

CREATE OR REPLACE VIEW `jos_emundus_stats_files_graph` AS select `ecc`.`id` AS `id`,count(distinct `ecc`.`fnum`) AS `nb`,`esc`.`year` AS `schoolyear`,`esc`.`label` AS `campaign`,`esc`.`training` AS `course`,`ecc`.`submitted` AS `submitted`,`ecc`.`status` AS `status`,`ess`.`value` AS `value`,`ecc`.`campaign_id` AS `campaign_id`,`ecc`.`published` AS `published` from (((`jos_emundus_campaign_candidature` `ecc` left join `jos_emundus_setup_campaigns` `esc` on(`esc`.`id` = `ecc`.`campaign_id`)) left join `jos_emundus_setup_status` `ess` on(`ess`.`step` = `ecc`.`status`)) left join `jos_users` `u` on(`u`.`id` = `ecc`.`user_id`)) where `ecc`.`published` <> -1 group by `ecc`.`campaign_id`,`ecc`.`status`,`ecc`.`id`;
/*! Fabrik */

define(["jquery","admin/pluginmanager"],function(n,t){return new Class({Extends:t,Implements:[Options,Events],options:{},initialize:function(n,t){this.setOptions(n),this.watchSelector()},watchSelector:function(){void 0!==n?n("#jform_plugin").bind("change",function(n){this.changePlugin(n)}.bind(this)):document.id("jform_plugin").addEvent("change",function(n){n.stop(),this.changePlugin(n)}.bind(this))},changePlugin:function(n){new Request({url:"index.php",evalResponse:!1,evalScripts:function(n,t){this.script=n}.bind(this),data:{option:"com_fabrik",task:"visualization.getPluginHTML",format:"raw",plugin:n.target.get("value")},update:document.id("plugin-container"),onComplete:function(n){document.id("plugin-container").set("html",n),Browser.exec(this.script),this.updateBootStrap()}.bind(this)}).send()}})});
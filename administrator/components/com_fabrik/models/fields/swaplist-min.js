/*! Fabrik */

var SwapList=new Class({initialize:function(t,i,o,n,e,s){this.from=document.id(t),this.to=document.id(i),"null"!==typeOf(document.id(o))&&(document.id(o).addEvent("click",function(t){t.stop(),document.id("jform__createGroup0").checked=!0,this.addSelectedToList(this.from,this.to),this.delSelectedFromList(this.from)}.bind(this)),document.id(n).addEvent("click",function(t){t.stop(),this.addSelectedToList(this.to,this.from),this.delSelectedFromList(this.to)}.bind(this)),document.id(e).addEvent("click",function(t){t.stop(),this.moveInList(-1)}.bind(this)),document.id(s).addEvent("click",function(t){t.stop(),this.moveInList(1)}.bind(this)),document.id("adminForm").onsubmit=function(t){return this.to.getElements("option").each(function(t){t.selected=!0}),!0}.bind(this))},addSelectedToList:function(t,i){var o,n=t.length,e="x";for(o=i.length-1;-1<o;o--)e+=","+i.options[o].value+",";for(o=0;o<n;o++)t.options[o].selected&&-1===e.indexOf(","+t.options[o].value+",")&&(opt=new Option(t.options[o].text,t.options[o].value),i.options[i.length]=opt)},delSelectedFromList:function(t){for(var i=t.length-1;-1<i;i--)t.options[i].selected&&(t.options[i]=null)},moveInList:function(t){var o=this.to,n=this.to.selectedIndex,e=o.options.length-1;if(-1===n)return!1;if(1===t&&n===e)return!1;if(-1===t&&0===n)return!1;var s=[],d=[];for(i=e;0<=i;i--)s[i]=o.options[i].text,d[i]=o.options[i].value;for(i=e;0<=i;i--)n===i?(o.options[i+t]=new Option(s[i],d[i],0,1),o.options[i]=new Option(s[i+t],d[i+t]),i--):o.options[i]=new Option(s[i],d[i]);return o.focus(),!0}});
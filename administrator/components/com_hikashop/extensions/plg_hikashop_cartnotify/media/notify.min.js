/* Notify.js - http://notifyjs.com/ Copyright (c) 2015 MIT */
/* v0.4.2 / Customized by Obsidev and minified */
!function(a){
	if(window.jQuery && typeof(jQuery.noConflict) == "function" && !window.hkjQuery)
		window.hkjQuery = jQuery.noConflict();
	a(window.hkjQuery);
}(function(a){function C(b,c,e){"string"==typeof e&&(e={className:e}),this.options=u(t,a.isPlainObject(e)?e:{}),this.loadHTML(),this.wrapper=a(m.html),this.options.clickToHide&&this.wrapper.addClass(d+"-hidable"),this.wrapper.data(d,this),this.arrow=this.wrapper.find("."+d+"-arrow"),this.container=this.wrapper.find("."+d+"-container"),this.container.append(this.userContainer),b&&b.length&&(this.elementType=b.attr("type"),this.originalElement=b,this.elem=y(b),this.elem.data(d,this),this.elem.before(this.wrapper)),this.container.hide(),this.run(c)}var b=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},c="notify",d=c+"js",e=c+"!blank",f={t:"top",m:"middle",b:"bottom",l:"left",c:"center",r:"right"},g=["l","c","r"],h=["t","m","b"],i=["t","b","l","r"],j={t:"b",m:null,b:"t",l:"r",c:null,r:"l"},k=function(b){var c;return c=[],a.each(b.split(/\W+/),function(a,b){var d;if(d=b.toLowerCase().charAt(0),f[d])return c.push(d)}),c},l={},m={name:"core",html:'<div class="'+d+'-wrapper"><div class="'+d+'-arrow"></div><div class="'+d+'-container"></div></div>',css:"."+d+"-corner {position: fixed;margin: 5px;z-index: 10050;\n}\n."+d+"-corner ."+d+"-wrapper,\n."+d+"-corner ."+d+"-container {position:relative;display:block;height:inherit;width:inherit;margin:3px;}\n."+d+"-wrapper{z-index:1;position:absolute;display:inline-block;height:0;width:0;}\n."+d+"-container{display:none;z-index:1;position:absolute;}\n."+d+"-hidable{cursor:pointer;}\n[data-notify-text],[data-notify-html] {position:relative;}\n."+d+"-arrow {position:absolute;z-index:2;width:0;height:0;}"},n={"border-radius":["-webkit-","-moz-"]},o=function(a){return l[a]},p=function(b,e){if(!b)throw"Missing Style name";if(!e)throw"Missing Style definition";if(!e.html)throw"Missing Style HTML";var f=l[b];f&&f.cssElem&&(window.console&&console.warn(c+": overwriting style '"+b+"'"),l[b].cssElem.remove()),e.name=b,l[b]=e;var g="";e.classes&&a.each(e.classes,function(b,c){return g+="."+d+"-"+e.name+"-"+b+" {\n",a.each(c,function(b,c){return n[b]&&a.each(n[b],function(a,d){return g+="\t"+d+b+": "+c+";\n"}),g+="\t"+b+": "+c+";\n"}),g+="}\n"}),e.css&&(g+="/* styles for "+e.name+" */\n"+e.css),g&&(e.cssElem=q(g),e.cssElem.attr("id","notify-"+e.name));var h={},i=a(e.html);r("html",i,h),r("text",i,h),e.fields=h},q=function(b){var d;d=w("style"),d.attr("type","text/css"),a("head").append(d);try{d.html(b)}catch(a){d[0].styleSheet.cssText=b}return d},r=function(b,c,d){var f;return"html"!==b&&(b="text"),f="data-notify-"+b,s(c,"["+f+"]").each(function(){var c;c=a(this).attr(f),c||(c=e),d[c]=b})},s=function(a,b){return a.is(b)?a:a.find(b)},t={clickToHide:!0,autoHide:!0,autoHideDelay:5e3,arrowShow:!0,arrowSize:5,breakNewLines:!0,elementPosition:"bottom",globalPosition:"top right",style:"bootstrap",className:"error",showAnimation:"slideDown",showDuration:400,hideAnimation:"slideUp",hideDuration:200,gap:5},u=function(b,c){var d;return d=function(){},d.prototype=b,a.extend(!0,new d,c)},v=function(b){return a.extend(t,b)},w=function(b){return a("<"+b+"></"+b+">")},x={},y=function(b){var c;return b.is("[type=radio]")&&(c=b.parents("form:first").find("[type=radio]").filter(function(c,d){return a(d).attr("name")===b.attr("name")}),b=c.first()),b},z=function(a,b,c){var d,e;if("string"==typeof c)c=parseInt(c,10);else if("number"!=typeof c)return;if(!isNaN(c))return d=f[j[b.charAt(0)]],e=b,void 0!==a[d]&&(b=f[d.charAt(0)],c=-c),void 0===a[b]?a[b]=c:a[b]+=c,null},A=function(a,b,c){if("l"===a||"t"===a)return 0;if("c"===a||"m"===a)return c/2-b/2;if("r"===a||"b"===a)return c-b;throw"Invalid alignment"},B=function(a){return B.e=B.e||w("div"),B.e.text(a).html()};C.prototype.loadHTML=function(){var b;b=this.getStyle(),this.userContainer=a(b.html),this.userFields=b.fields},C.prototype.show=function(a,b){var c,d,e,f,g;if(d=function(c){return function(){if(a||c.elem||c.destroy(),b)return b()}}(this),g=this.container.parent().parents(":hidden").length>0,e=this.container.add(this.arrow),c=[],g&&a)f="show";else if(g&&!a)f="hide";else if(!g&&a)f=this.options.showAnimation,c.push(this.options.showDuration);else{if(g||a)return d();f=this.options.hideAnimation,c.push(this.options.hideDuration)}return c.push(d),e[f].apply(e,c)},C.prototype.setGlobalPosition=function(){var b=this.getPosition(),c=b[0],e=b[1],g=f[c],h=f[e],i=c+"|"+e,j=x[i];if(!j){j=x[i]=w("div");var k={};k[g]=0,"middle"===h?k.top="45%":"center"===h?k.left="45%":k[h]=0,j.css(k).addClass(d+"-corner"),a("body").append(j)}return j.prepend(this.wrapper)},C.prototype.setElementPosition=function(){var c,d,e,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,B,C,D,E,F,G,H,I,J,K,L;for(J=this.getPosition(),G=J[0],E=J[1],F=J[2],r=this.elem.position(),o=this.elem.outerHeight(),s=this.elem.outerWidth(),p=this.elem.innerHeight(),q=this.elem.innerWidth(),L=this.wrapper.position(),l=this.container.height(),m=this.container.width(),y=f[G],C=j[G],D=f[C],n={},n[D]="b"===G?o:"r"===G?s:0,z(n,"top",r.top-L.top),z(n,"left",r.left-L.left),K=["top","left"],u=0,w=K.length;u<w;u++)H=K[u],B=parseInt(this.elem.css("margin-"+H),10),B&&z(n,H,B);if(t=Math.max(0,this.options.gap-(this.options.arrowShow?e:0)),z(n,D,t),this.options.arrowShow){for(e=this.options.arrowSize,d=a.extend({},n),c=this.userContainer.css("border-color")||this.userContainer.css("border-top-color")||this.userContainer.css("background-color")||"white",v=0,x=i.length;v<x;v++)H=i[v],I=f[H],H!==C&&(k=I===y?c:"transparent",d["border-"+I]=e+"px solid "+k);z(n,f[C],e),b.call(i,E)>=0&&z(d,f[E],2*e)}else this.arrow.hide();if(b.call(h,G)>=0?(z(n,"left",A(E,m,s)),d&&z(d,"left",A(E,e,q))):b.call(g,G)>=0&&(z(n,"top",A(E,l,o)),d&&z(d,"top",A(E,e,p))),this.container.is(":visible")&&(n.display="block"),this.container.removeAttr("style").css(n),d)return this.arrow.removeAttr("style").css(d)},C.prototype.getPosition=function(){var a,c,d,e,f,j,l,m;if(m=this.options.position||(this.elem?this.options.elementPosition:this.options.globalPosition),a=k(m),0===a.length&&(a[0]="b"),c=a[0],b.call(i,c)<0)throw"Must be one of ["+i+"]";return(1===a.length||(d=a[0],b.call(h,d)>=0&&(e=a[1],b.call(g,e)<0))||(f=a[0],b.call(g,f)>=0&&(j=a[1],b.call(h,j)<0)))&&(a[1]=(l=a[0],b.call(g,l)>=0?"m":"l")),2===a.length&&(a[2]=a[1]),a},C.prototype.getStyle=function(a){var b;if(a||(a=this.options.style),a||(a="default"),b=l[a],!b)throw"Missing style: "+a;return b},C.prototype.updateClasses=function(){var b,c;return b=["base"],a.isArray(this.options.className)?b=b.concat(this.options.className):this.options.className&&b.push(this.options.className),c=this.getStyle(),b=a.map(b,function(a){return d+"-"+c.name+"-"+a}).join(" "),this.userContainer.attr("class",b)},C.prototype.run=function(b,c){var d,f,g,h,i;if(a.isPlainObject(c)?a.extend(this.options,c):"string"===a.type(c)&&(this.options.className=c),this.container&&!b)return void this.show(!1);if(this.container||b){f={},a.isPlainObject(b)?f=b:f[e]=b;for(g in f)d=f[g],h=this.userFields[g],h&&("text"===h&&(d=B(d),this.options.breakNewLines&&(d=d.replace(/\n/g,"<br/>"))),i=g===e?"":"="+g,s(this.userContainer,"[data-notify-"+h+i+"]").html(d));this.updateClasses(),this.elem?this.setElementPosition():this.setGlobalPosition(),this.show(!0),this.options.autoHide&&(clearTimeout(this.autohideTimer),this.autohideTimer=setTimeout(this.show.bind(this,!1),this.options.autoHideDelay))}},C.prototype.destroy=function(){this.wrapper.data(d,null),this.wrapper.remove()},a[c]=function(b,d,e){return b&&b.nodeName||b.jquery?a(b)[c](d,e):(e=d,d=b,new C(null,d,e)),b},a.fn[c]=function(b,c){return a(this).each(function(){var e=y(a(this)).data(d);e&&e.destroy();new C(a(this),b,c)}),this},a.extend(a[c],{defaults:v,addStyle:p,pluginOptions:t,getStyle:o,insertCSS:q}),p("bootstrap",{html:"<div><span data-notify-text></span></div>",classes:{base:{"font-weight":"bold",padding:"8px 15px 8px 14px","text-shadow":"0 1px 0 rgba(255, 255, 255, 0.5)","background-color":"#fcf8e3",border:"1px solid #fbeed5","border-radius":"4px","white-space":"nowrap","padding-left":"25px","background-repeat":"no-repeat","background-position":"3px 7px"},error:{color:"#B94A48","background-color":"#F2DEDE","border-color":"#EED3D7"},success:{color:"#468847","background-color":"#DFF0D8","border-color":"#D6E9C6"},info:{color:"#3A87AD","background-color":"#D9EDF7","border-color":"#BCE8F1"},warn:{color:"#C09853","background-color":"#FCF8E3","border-color":"#FBEED5"}}}),p("metro",{html:'<div><div class="image" data-notify-html="image"/><div class="text-wrapper"><div class="title" data-notify-html="title"/><div class="text" data-notify-html="text"/></div></div>',classes:{error:{color:"#a94442 !important","background-color":"#f2dede",border:"1px solid #ebccd1"},success:{color:"#3c763d !important","background-color":"#dff0d8",border:"1px solid #d6e9c6"},info:{color:"#31708f !important","background-color":"#d9edf7",border:"1px solid #bce8f1"},warning:{color:"#8a6d3b !important","background-color":"#fcf8e3",border:"1px solid #faebcc"},black:{color:"#fafafa !important","background-color":"#333",border:"1px solid #000"},white:{"background-color":"#f1f1f1",border:"1px solid #ddd"}}}),p("metro-lite",{html:'<div><div class="text-wrapper"><div class="title" data-notify-html="title"/><div class="text" data-notify-html="text"/></div></div>',classes:{error:{color:"#a94442 !important","background-color":"#f2dede",border:"1px solid #ebccd1"},success:{color:"#3c763d !important","background-color":"#dff0d8",border:"1px solid #d6e9c6"},info:{color:"#31708f !important","background-color":"#d9edf7",border:"1px solid #bce8f1"},warning:{color:"#8a6d3b !important","background-color":"#fcf8e3",border:"1px solid #faebcc"},black:{color:"#fafafa !important","background-color":"#333",border:"1px solid #000"},white:{"background-color":"#f1f1f1",border:"1px solid #ddd"}}}),a(function(){q(m.css).attr("id","core-notify"),a(document).on("click","."+d+"-hidable",function(b){a(this).trigger("notify-hide")}),a(document).on("notify-hide","."+d+"-wrapper",function(b){var c=a(this).data(d);c&&c.show(!1)})})});
/* HikaShop part */
window.cartNotifyParams = {
	img_url: null,
	title:"Product added to cart",
	text:"Product successfully added to the cart",
	wishlist_title:"Product added to wishlist",
	wishlist_text:"Product successfully added to the wishlist",
	err_title:"Error",
	err_text:"The product cannot be added to the cart",
	err_wishlist_title:"Error",
	err_wishlist_text:"The product cannot be added to the wishlist"
};
if(window.Oby) {
window.Oby.registerAjax(["cart.updated","wishlist.updated"],function(params){
	var cart = (params.type == "cart"),
		p = window.cartNotifyParams,
		img_url = p.img_url,
		title = cart ? p.title : p.wishlist_title,
		text = cart ? p.text : p.wishlist_text,
		class_name = "info";
	if(params.notify === false)
		return;
	if(params.resp.ret == 0) {
		class_name = "warning";
		title = cart ? p.err_title : p.err_wishlist_title;
		text = cart ? p.err_text : p.err_wishlist_text;
	}else if(params.product_id == 'list' && !params.resp.product_name){
		title = cart ? p.list_title : p.list_wishlist_title;
		text = cart ? p.list_text : p.list_wishlist_text;
	}
	if(params.resp.image)
		img_url = params.resp.image;
	if(params.resp.product_name)
		title = params.resp.product_name;
	if(params.resp.message)
		text = params.resp.message;

	if(p && p.reference && p.reference == 'button' && params.el) {
		jQuery(params.el).notify({title:title,text:text,image:"<img src=\""+img_url+"\" width=\"50\" height=\"50\" alt=\"\"/>"},{style:"metro",className:class_name,arrowShow:true});
		return true;
	}

	if(img_url == null) {
		jQuery.notify({title:title,text:text},{style:"metro-lite",className:class_name});
	} else {
		jQuery.notify({title:title,text:text,image:"<img src=\""+img_url+"\" alt=\"\"/>"},{style:"metro",className:class_name});
	}
	return true;
});
}
define(["jquery","fab/element"],function(t,e){return window.FbEmundusIban=new Class({Extends:e,initialize:function(t,e){this.setPlugin("iban"),this.parent(t,e),this.addMask(),this.initEvents()},cloned:function(t){this.mask=null,this.addMask(),this.initEvents(),this.parent(t)},initEvents:function(){t(this.element).on("change",()=>{if(""===this.element.get("value")){this.setError("");return}this.isValidIBANNumber()?this.setError(""):this.setError(Joomla.JText._("PLG_ELEMENT_IBAN_INVALID"))})},addMask:function(){this.mask&&this.mask.destroy(),this.mask=IMask(this.element,{mask:"FR00 **** **** **** **** **** ***"})},isValidIBANNumber:function(){var t,e,n=String(this.element.get("value")).toUpperCase().replace(/[^A-Z0-9]/g,""),s=n.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);return!!s&&n.length===({AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:21,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,CR:22,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20})[s[1]]&&(t=(s[3]+s[1]+s[2]).replace(/[A-Z]/g,function(t){return t.charCodeAt(0)-55}),1===this.mod97(t))},mod97:function(t){for(var e,n=t.slice(0,2),s=2;s<t.length;s+=7)n=parseInt(e=String(n)+t.substring(s,s+7),10)%97;return n},setError:function(t){for(var e=this.element.parentNode.parentNode.parentNode.childNodes,n=0;n<e.length;n++)if(e[n].classList&&e[n].classList.contains("fabrikErrorMessage")){e[n].innerHTML=t;break}}}),window.FbEmundusIban});
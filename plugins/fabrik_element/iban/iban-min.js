define(["jquery","fab/element"],(function(a,t){return window.FbEmundusIban=new Class({Extends:t,initialize:function(a,t){this.setPlugin("iban"),this.parent(a,t),this.addMask(),this.initEvents()},cloned:function(a){this.mask=null,this.addMask(),this.initEvents(),this.parent(a)},initEvents:function(){a(this.element).on("change",(()=>{""!==this.element.get("value")?this.isValidIBANNumber()?this.setError(""):this.setError(Joomla.JText._("PLG_ELEMENT_IBAN_INVALID")):this.setError("")}))},addMask:function(){this.mask&&this.mask.destroy(),this.mask=IMask(this.element,{mask:this.initDynamicMask(),dispatch:(a,t)=>{const E=t.value+a,s=t.compiledMasks.find((a=>0===E.indexOf(a.startsWith)));return this.element.parentNode.getElementsByClassName("localization-block")[0].getElementsByClassName("localization")[0].innerHTML=s?s.country:"",s}})},isValidIBANNumber:function(){var a,t=this.element.get("value"),E=String(t).toUpperCase().replace(/[^A-Z0-9]/g,""),s=E.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);return!(!s||E.length!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:21,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,CR:22,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20}[s[1]])&&(a=(s[3]+s[1]+s[2]).replace(/[A-Z]/g,(function(a){return a.charCodeAt(0)-55})),1===this.mod97(a))},mod97:function(a){for(var t,E=a.slice(0,2),s=2;s<a.length;s+=7)t=String(E)+a.substring(s,s+7),E=parseInt(t,10)%97;return E},setError:function(a){for(var t=this.element.parentNode.parentNode.parentNode.childNodes,E=0;E<t.length;E++)if(t[E].classList&&t[E].classList.contains("fabrikErrorMessage")){t[E].innerHTML=a;break}},initDynamicMask:function(){return[{mask:"aa00 **** **** **** **** **** ***",startsWith:"FR",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_FRANCE")},{mask:"aa00 **** **** **** **** ****",startsWith:"AD",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_ANDORRA")},{mask:"aa00 **** **** **** ****",startsWith:"AT",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_AUSTRIA")},{mask:"aa00 **** **** **** ****",startsWith:"BA",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_BOSNIE_HERZEGOVINE")},{mask:"aa00 **** **** ****",startsWith:"BE",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_BELGIUM")},{mask:"aa00 **** **** **** **** **",startsWith:"BG",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_BULGARIA")},{mask:"aa00 **** **** **** **** *",startsWith:"CH",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SWITZERLAND")},{mask:"aa00 **** **** **** **** **** ****",startsWith:"CY",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_CYPRUS")},{mask:"aa00 **** **** **** **** ****",startsWith:"CZ",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_CZECH_REPUBLIC")},{mask:"aa00 **** **** **** **** **",startsWith:"DE",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_GERMANY")},{mask:"aa00 **** **** **** **",startsWith:"DK",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_DENMARK")},{mask:"aa00 **** **** **** ****",startsWith:"EE",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_ESTONIA")},{mask:"aa00 **** **** **** **** ****",startsWith:"ES",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SPAIN")},{mask:"aa00 **** **** **** **",startsWith:"FI",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_FINLAND")},{mask:"aa00 **** **** **** **",startsWith:"FO",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_FEROE_ISLANDS")},{mask:"aa00 **** **** **** **** **",startsWith:"GB",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_UNITED_KINGDOM")},{mask:"aa00 **** **** **** **** ***",startsWith:"GI",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_GIBRALTAR")},{mask:"aa00 **** **** **** **",startsWith:"GL",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_GREENLAND")},{mask:"aa00 **** **** **** **** **** ***",startsWith:"GR",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_GREECE")},{mask:"aa00 **** **** **** **** *",startsWith:"HR",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_CROATIA")},{mask:"aa00 **** **** **** **** **** ****",startsWith:"HU",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_HUNGARY")},{mask:"aa00 **** **** **** **** **",startsWith:"IE",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_IRELAND")},{mask:"aa00 **** **** **** **** **** **",startsWith:"IS",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_ICELAND")},{mask:"aa00 **** **** **** **** **** ***",startsWith:"IT",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_ITALY")},{mask:"aa00 **** **** **** **** *",startsWith:"LI",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_LIECHTENSTEIN")},{mask:"aa00 **** **** **** ****",startsWith:"LT",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_LITHUANIA")},{mask:"aa00 **** **** **** ****",startsWith:"LU",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_LUXEMBOURG")},{mask:"aa00 **** **** **** **** *",startsWith:"LV",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_LATVIA")},{mask:"aa00 **** **** **** **** **** ***",startsWith:"MC",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_MONACO")},{mask:"aa00 **** **** **** **** ****",startsWith:"MD",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_REPUBLIC_OF_MOLDOVA")},{mask:"aa00 **** **** **** **** **",startsWith:"ME",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_MONTENEGRO")},{mask:"aa00 **** **** **** ***",startsWith:"MK",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_MACEDONIA")},{mask:"aa00 **** **** **** **** **** ***",startsWith:"MR",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_MOROCCO")},{mask:"aa00 **** **** **** **** **** **** ***",startsWith:"MT",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_MALTA")},{mask:"aa00 **** **** **** **** **** **** **",startsWith:"MU",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_MAURITIUS")},{mask:"aa00 **** **** **** **",startsWith:"NL",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_NETHERLANDS")},{mask:"aa00 **** **** ***",startsWith:"NO",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_NORWAY")},{mask:"aa00 **** **** **** **** ****",startsWith:"PK",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_PAKISTAN")},{mask:"aa00 **** **** **** **** **** ****",startsWith:"PL",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_POLAND")},{mask:"aa00 **** **** **** **** **** **** *",startsWith:"PS",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_PALESTINE")},{mask:"aa00 **** **** **** **** **** *",startsWith:"PT",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_PORTUGAL")},{mask:"aa00 **** **** **** **** **** **** *",startsWith:"QA",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_QATAR")},{mask:"aa00 **** **** **** **** ****",startsWith:"RO",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_ROMANIA")},{mask:"aa00 **** **** **** **** **",startsWith:"RS",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SERBIA")},{mask:"aa00 **** **** **** **** ****",startsWith:"SA",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SAUDI_ARABIA")},{mask:"aa00 **** **** **** **** ****",startsWith:"SE",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SWEDEN")},{mask:"aa00 **** **** **** ***",startsWith:"SI",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SLOVENIA")},{mask:"aa00 **** **** **** **** ****",startsWith:"SK",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SLOVAKIA")},{mask:"aa00 **** **** **** **** **** ***",startsWith:"SM",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SAN_MARINO")},{mask:"aa00 **** **** **** **** ****",startsWith:"TN",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_TUNISIA")},{mask:"aa00 **** **** **** **** **** **",startsWith:"TR",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_TURKEY")},{mask:"aa00 **** **** **** **** **** ****",startsWith:"AL",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_ALBANIA")},{mask:"aa00 **** **** **** **** **** ****",startsWith:"BY",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_BELARUS")},{mask:"aa00 **** **** **** **** **",startsWith:"CR",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_COSTA_RICA")},{mask:"aa00 **** **** **** **** **** **** *",startsWith:"EG",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_EGYPT")},{mask:"aa00 **** **** **** **** **",startsWith:"GE",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_GEORGIA")},{mask:"aa00 **** **** **** **** **** **** ****",startsWith:"LC",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SAINT_LUCIA")},{mask:"aa00 **** **** **** **** **** **** ***",startsWith:"SC",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_SEYCHELLES")},{mask:"aa00 **** **** **** **** **** **** *",startsWith:"UA",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_UKRAINE")},{mask:"aa00 **** **** **** ****",startsWith:"XK",lazy:!1,country:Joomla.JText._("PLG_ELEMENT_IBAN_KOSOVO")},{mask:"aa00 **** **** **** **** **** ***",startsWith:"",country:""}]}}),window.FbEmundusIban}));
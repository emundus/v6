/*! Fabrik */

var JDateFilter=new Class({Implements:[Options],options:{},initialize:function(t){this.setOptions(t),this.cals={};for(var e=0;e<this.options.ids.length;e++)this.makeCalendar(this.options.ids[e],this.options.buttons[e])},getDateField:function(t){return document.id(t)},makeCalendar:function(t,e){return this.cals[t]=null,this.getDateField(t).onchange=function(t){this.calSelect(t)}.bind(this),this.cals[t]},dateSelect:function(t){return!1},calSelect:function(t){event.target.calendar&&this.getJCal(event.target.calendar.inputField.id)},getJCal:function(t){return this.cals[t]=JoomlaCalendar.getCalObject(this.getDateField(t))._joomlaCalendar,this.cals[t]},update:function(t,e){e&&("string"===typeOf(e)&&(e=Date.parse(e)),t.params.inputField.value=e.format(this.options.calendarSetup.ifFormat))},onSubmit:function(){var i=this;jQuery.each(this.cals,function(t,e){var a=i.getJCal(t);a&&""!==a.inputField.value&&(a.inputField.value=a.date.format("db"))})},onUpdateData:function(){var i=this;jQuery.each(this.cals,function(t,e){var a=i.getJCal(t);""!==a.inputField.value&&this.update(a,a.date)})}});
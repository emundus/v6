/* jce - 2.6.1 | 2016-12-01 | http://www.joomlacontenteditor.net | Copyright (C) 2006 - 2016 Ryan Demmer. All rights reserved | GNU/GPL Version 2 or later - http://www.gnu.org/licenses/gpl-2.0.html */
!function(tinymce,tinyMCEPopup,$){function convertRGBToHex(col){var re=new RegExp("rgb\\s*\\(\\s*([0-9]+).*,\\s*([0-9]+).*,\\s*([0-9]+).*\\)","gi"),rgb=col.replace(re,"$1,$2,$3").split(",");return 3==rgb.length?(r=parseInt(rgb[0]).toString(16),g=parseInt(rgb[1]).toString(16),b=parseInt(rgb[2]).toString(16),r=1==r.length?"0"+r:r,g=1==g.length?"0"+g:g,b=1==b.length?"0"+b:b,"#"+r+g+b):col}function trimSize(size){return size.replace(/([0-9\.]+)(px|%|in|cm|mm|em|ex|pt|pc)/i,"$1$2")}function getStyle(elm,attrib,style){var val=tinyMCEPopup.editor.dom.getAttrib(elm,attrib);return""!=val?""+val:("undefined"==typeof style&&(style=attrib),tinyMCEPopup.editor.dom.getStyle(elm,style))}function getCSSSize(size){if(size=trimSize(size),""==size)return"";if(/^[0-9]+$/.test(size))size+="px";else if(!/^[0-9\.]+(px|%|in|cm|mm|em|ex|pt|pc)$/i.test(size))return"";return size}var TableDialog={settings:{},init:function(){function styles(v){return"undefined"==typeof v?tinyMCEPopup.dom.parseStyle($("#style").val()):void $("#style").val(tinyMCEPopup.dom.serializeStyle(v))}var self=this,ed=tinyMCEPopup.editor,context=tinyMCEPopup.getWindowArg("context","table");if(this.html5="html5-strict"===ed.settings.schema,this.settings.file_browser||$("input.browser").removeClass("browser"),Wf.init(),"merge"==context)return this.initMerge();switch(this.html5&&($("#axis, #abbr, #scope, #summary, #char, #charoff, #tframe, #nowrap, #rules, #cellpadding, #cellspacing").each(function(){$(this).add('label[for="'+this.id+'"]').parent().hide()}),$("#valign").change(function(){var st=styles();st["vertical-align"]=$(this).val(),styles(st)}),$("#align").change(function(){var st=styles(),v=$(this).val();"center"===v?(st.float="",st["margin-left"]=st["margin-right"]="auto"):(st.float=v,st["margin-left"]=st["margin-right"]=""),styles(st)}),$("#width, #height").change(function(){var st=styles(),k=this.id,v=this.value;st[k]=self.cssSize(v),styles(st)}),$("#border").replaceWith('<input type="checkbox" id="border" />')),context){case"table":this.initTable();break;case"cell":this.initCell();break;case"row":this.initRow()}},insert:function(){var context=tinyMCEPopup.getWindowArg("context","table");switch(context){case"table":this.insertTable();break;case"cell":this.updateCells();break;case"row":this.updateRows();break;case"merge":this.merge()}},initMerge:function(){$("#numcols").val(tinyMCEPopup.getWindowArg("cols",1)),$("#numrows").val(tinyMCEPopup.getWindowArg("rows",1)),$("#insert").button("option","label",tinyMCEPopup.getLang("update","Update",!0))},updateClassList:function(cls){cls&&$("#classlist").val(function(){var n=this,a=cls.split(" "),r=[];return $.each(a,function(i,v){v.indexOf("mceItem")==-1&&(0==$('option[value="'+v+'"]',n).length&&$(n).append(new Option(v,v)),r.push(v))}),r}).change()},initTable:function(){var ed=tinyMCEPopup.editor,elm=ed.dom.getParent(ed.selection.getNode(),"table"),action=tinyMCEPopup.getWindowArg("action");if(action||(action=elm?"update":"insert"),elm&&"insert"!=action){for(var rowsAr=elm.rows,cols=0,i=0;i<rowsAr.length;i++)rowsAr[i].cells.length>cols&&(cols=rowsAr[i].cells.length);$("#align").val(function(){var v=ed.dom.getAttrib(elm,"align")||ed.dom.getStyle(elm,"float");return v?v:"auto"===ed.dom.getStyle(elm,"margin-left")&&"auto"===ed.dom.getStyle(elm,"margin-right")?"center":""}),$("#tframe").val(ed.dom.getAttrib(elm,"frame")),$("#rules").val(ed.dom.getAttrib(elm,"rules"));var cls=ed.dom.getAttrib(elm,"class");cls=cls.replace(/(?:^|\s)mceItem(\w+)(?!\S)/g,""),this.updateClassList(cls),$("#classes").val(cls),$("#cols").val(cols),$("#rows").val(rowsAr.length);var border=trimSize(getStyle(elm,"border","borderWidth"));border=border.replace(/[\D]/g,""),$("#border").is(":checkbox")?$("#border").prop("checked",1==border):$("#border").val(border),$("#cellpadding").val(ed.dom.getAttrib(elm,"cellpadding","")),$("#cellspacing").val(ed.dom.getAttrib(elm,"cellspacing","")),$("#width").val(trimSize(getStyle(elm,"width","width"))),$("#height").val(trimSize(getStyle(elm,"height","height"))),$("#bordercolor").val(convertRGBToHex(getStyle(elm,"bordercolor","borderLeftColor"))).change(),$("#bgcolor").val(convertRGBToHex(getStyle(elm,"bgcolor","backgroundColor"))).change(),$("#id").val(ed.dom.getAttrib(elm,"id")),$("#summary").val(ed.dom.getAttrib(elm,"summary")),$("#style").val(ed.dom.serializeStyle(ed.dom.parseStyle(ed.dom.getAttrib(elm,"style")))),$("#dir").val(ed.dom.getAttrib(elm,"dir")),$("#lang").val(ed.dom.getAttrib(elm,"lang")),$("#backgroundimage").val(getStyle(elm,"background","backgroundImage").replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1")),$("#caption").prop("checked",elm.getElementsByTagName("caption").length>0),this.orgTableWidth=$("#width").val(),this.orgTableHeight=$("#height").val(),$("#insert").button("option","label",tinyMCEPopup.getLang("update","Update",!0))}else Wf.setDefaults(this.settings.defaults);$("#backgroundimagebrowser").is(":visible")&&$("#backgroundimage").width(180),"update"==action&&$("#cols, #rows").prop("disabled",!0)},initRow:function(){var self=this,ed=tinyMCEPopup.editor,dom=tinyMCEPopup.dom,trElm=dom.getParent(ed.selection.getStart(),"tr"),st=dom.parseStyle(dom.getAttrib(trElm,"style")),rowtype=trElm.parentNode.nodeName.toLowerCase(),align=dom.getAttrib(trElm,"align"),valign=dom.getAttrib(trElm,"valign")||getStyle(trElm,"vertical-align"),height=trimSize(getStyle(trElm,"height","height")),className=dom.getAttrib(trElm,"class"),bgcolor=convertRGBToHex(getStyle(trElm,"bgcolor","backgroundColor")),backgroundimage=getStyle(trElm,"background","backgroundImage").replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1"),id=dom.getAttrib(trElm,"id"),lang=dom.getAttrib(trElm,"lang"),dir=dom.getAttrib(trElm,"dir");$("#rowtype").change(function(){self.setActionforRowType()}).val(rowtype).change(),0==dom.select("td.mceSelected,th.mceSelected",trElm).length?($("#bgcolor").val(bgcolor).change(),$("#backgroundimage").val(backgroundimage),$("#height").val(height),$("#id").val(id),$("#lang").val(lang),$("#style").val(dom.serializeStyle(st)),$("#align").val(align),$("#valign").val(valign),className=className.replace(/(?:^|\s)mceItem(\w+)(?!\S)/g,""),this.updateClassList(className),$("#dir").val(dir),$("#backgroundimagebrowser").is(":visible")&&$("#backgroundimage").width(180),$("#insert").button("option","label",tinyMCEPopup.getLang("update","Update",!0))):$("#action").hide()},initCell:function(){var ed=tinyMCEPopup.editor,dom=ed.dom,tdElm=dom.getParent(ed.selection.getStart(),"td,th"),st=dom.parseStyle(dom.getAttrib(tdElm,"style")),celltype=tdElm.nodeName.toLowerCase(),align=dom.getAttrib(tdElm,"align"),valign=dom.getAttrib(tdElm,"valign")||getStyle(tdElm,"vertical-align"),width=trimSize(getStyle(tdElm,"width","width")),height=trimSize(getStyle(tdElm,"height","height")),bordercolor=convertRGBToHex(getStyle(tdElm,"bordercolor","borderLeftColor")),bgcolor=convertRGBToHex(getStyle(tdElm,"bgcolor","backgroundColor")),className=dom.getAttrib(tdElm,"class"),backgroundimage=getStyle(tdElm,"background","backgroundImage").replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1"),id=dom.getAttrib(tdElm,"id"),lang=dom.getAttrib(tdElm,"lang"),dir=dom.getAttrib(tdElm,"dir"),scope=dom.getAttrib(tdElm,"scope");dom.hasClass(tdElm,"mceSelected")?$("#action").hide():($("#bordercolor").val(bordercolor).change(),$("#bgcolor").val(bgcolor).change(),$("#backgroundimage").val(backgroundimage),$("#width").val(width),$("#height").val(height),$("#id").val(id),$("#lang").val(lang),$("#style").val(dom.serializeStyle(st)),$("#align").val(align),$("#valign").val(valign),className=className.replace(/(?:^|\s)mceItem(\w+)(?!\S)/g,""),this.updateClassList(className),$("#dir").val(dir),$("#celltype").val(celltype),$("#scope").val(scope),$("#backgroundimagebrowser").is(":visible")&&$("#backgroundimage").width(180),$("#insert").button("option","label",tinyMCEPopup.getLang("update","Update",!0)))},merge:function(){var func;tinyMCEPopup.restoreSelection(),func=tinyMCEPopup.getWindowArg("onaction"),func({cols:$("#numcols").val(),rows:$("#numrows").val()}),tinyMCEPopup.close()},insertTable:function(){var ed=tinyMCEPopup.editor,dom=ed.dom;tinyMCEPopup.restoreSelection();var elm=ed.dom.getParent(ed.selection.getNode(),"table"),action=tinyMCEPopup.getWindowArg("action");action||(action=elm?"update":"insert");var align,width,height,className,caption,frame,rules,capEl,elm,cols=2,rows=2,border=0,cellpadding=-1,cellspacing=-1,html="";if(!AutoValidator.validate($("form").get(0)))return tinyMCEPopup.alert(ed.getLang("invalid_data")),!1;if(cols=$("#cols").val(),rows=$("#rows").val(),border=""!=$("#border").val()?$("#border").val():0,cellpadding=""!=$("#cellpadding").val()?$("#cellpadding").val():"",cellspacing=""!=$("#cellspacing").val()?$("#cellspacing").val():"",align=$("#align").val(),frame=$("#tframe").val(),rules=$("#rules").val(),width=$("#width").val(),height=$("#height").val(),bordercolor=$("#bordercolor").val(),bgcolor=$("#bgcolor").val(),className=$("#classes").val(),id=$("#id").val(),summary=$("#summary").val(),style=$("#style").val(),dir=$("#dir").val(),lang=$("#lang").val(),background=$("#backgroundimage").val(),caption=$("#caption").is(":checked"),$("#border").is(":checkbox")&&(border=$("#border").is(":checked")?"1":""),"update"==action)return ed.execCommand("mceBeginUndoLevel"),this.html5||(dom.setAttrib(elm,"cellPadding",cellpadding,!0),dom.setAttrib(elm,"cellSpacing",cellspacing,!0)),this.isCssSize(border)?dom.setAttrib(elm,"border",""):dom.setAttrib(elm,"border",border),""==border&&(dom.setStyle(elm,"border-width",""),dom.setStyle(elm,"border",""),dom.setAttrib(elm,"border","")),"html4"!==ed.settings.schema&&(align="",width="",height=""),dom.setAttrib(elm,"align",align),dom.setAttrib(elm,"frame",frame),dom.setAttrib(elm,"rules",rules),dom.setAttrib(elm,"class",className),dom.setAttrib(elm,"style",style),dom.setAttrib(elm,"id",id),dom.setAttrib(elm,"summary",summary),dom.setAttrib(elm,"dir",dir),dom.setAttrib(elm,"lang",lang),capEl=ed.dom.select("caption",elm)[0],capEl&&!caption&&capEl.parentNode.removeChild(capEl),!capEl&&caption&&(capEl=elm.ownerDocument.createElement("caption"),tinymce.isIE&&!tinymce.isIE11||(capEl.innerHTML='<br data-mce-bogus="1"/>'),elm.insertBefore(capEl,elm.firstChild)),dom.setAttrib(elm,"width",width,!0),dom.setAttrib(elm,"height",height,!0),dom.setAttrib(elm,"borderColor",""),dom.setAttrib(elm,"bgColor",""),dom.setAttrib(elm,"background",""),""!=background?elm.style.backgroundImage="url('"+background+"')":elm.style.backgroundImage="",""!=bordercolor?(elm.style.borderColor=bordercolor,elm.style.borderStyle=""==elm.style.borderStyle?"solid":elm.style.borderStyle,elm.style.borderWidth=this.cssSize(border),dom.setAttrib(elm,"border","")):elm.style.borderColor="",elm.style.backgroundColor=bgcolor,ed.addVisual(),ed.nodeChanged(),ed.execCommand("mceEndUndoLevel",!1,{},{skip_undo:!0}),$("#width").val()==this.orgTableWidth&&$("#height").val()==this.orgTableHeight||ed.execCommand("mceRepaint"),tinyMCEPopup.close(),!0;html+="<table",html+=this.makeAttrib("id",id),this.isCssSize(border)||(html+=this.makeAttrib("border",border)),html+=this.makeAttrib("cellpadding",cellpadding),html+=this.makeAttrib("cellspacing",cellspacing),html+=this.makeAttrib("data-mce-new","1"),"html4"!==ed.settings.schema&&(width="",height="",align=""),html+=this.makeAttrib("width",width),html+=this.makeAttrib("height",height),html+=this.makeAttrib("align",align),html+=this.makeAttrib("frame",frame),html+=this.makeAttrib("rules",rules),html+=this.makeAttrib("class",className),html+=this.makeAttrib("style",style),html+=this.makeAttrib("summary",summary),html+=this.makeAttrib("dir",dir),html+=this.makeAttrib("lang",lang),html+=">",caption&&(html+=!tinymce.isIE||tinymce.isIE11?'<caption><br data-mce-bogus="1"/></caption>':"<caption></caption>");for(var y=0;y<rows;y++){html+="<tr>";for(var x=0;x<cols;x++)html+=!tinymce.isIE||tinymce.isIE11?'<td><br data-mce-bogus="1"/></td>':"<td></td>";html+="</tr>"}if(html+="</table>",ed.execCommand("mceBeginUndoLevel"),ed.settings.fix_table_elements){var patt="";ed.focus(),ed.selection.setContent('<br class="_mce_marker" />'),tinymce.each("h1,h2,h3,h4,h5,h6,p".split(","),function(n){patt&&(patt+=","),patt+=n+" ._mce_marker"}),tinymce.each(ed.dom.select(patt),function(n){ed.dom.split(ed.dom.getParent(n,"h1,h2,h3,h4,h5,h6,p"),n)}),dom.setOuterHTML(dom.select("br._mce_marker")[0],html)}else ed.execCommand("mceInsertContent",!1,html);tinymce.each(dom.select("table[data-mce-new]"),function(node){var tdorth=dom.select("td,th",node);tinymce.isIE&&!tinymce.isIE11&&null==node.nextSibling&&(ed.settings.forced_root_block?dom.insertAfter(dom.create(ed.settings.forced_root_block),node):dom.insertAfter(dom.create("br",{"data-mce-bogus":"1"}),node));try{ed.selection.setCursorLocation(tdorth[0],0)}catch(ex){}dom.setAttrib(node,"data-mce-new","")}),ed.addVisual(),ed.execCommand("mceEndUndoLevel",!1,{},{skip_undo:!0}),tinyMCEPopup.close()},updateCells:function(){function doUpdate(s){s&&(self.updateCell(tdElm),ed.addVisual(),ed.nodeChanged(),inst.execCommand("mceEndUndoLevel"),tinyMCEPopup.close())}var el,tdElm,trElm,tableElm,self=this,ed=tinyMCEPopup.editor,inst=ed;if(tinyMCEPopup.restoreSelection(),el=ed.selection.getStart(),tdElm=ed.dom.getParent(el,"td,th"),trElm=ed.dom.getParent(el,"tr"),tableElm=ed.dom.getParent(el,"table"),ed.dom.hasClass(tdElm,"mceSelected"))return tinymce.each(ed.dom.select("td.mceSelected,th.mceSelected"),function(td){self.updateCell(td)}),ed.addVisual(),ed.nodeChanged(),inst.execCommand("mceEndUndoLevel"),void tinyMCEPopup.close();switch(ed.execCommand("mceBeginUndoLevel"),$("#action").val()){case"cell":var celltype=$("#celltype").val(),scope=$("#scope").val();if(ed.getParam("accessibility_warnings",1))return void("th"==celltype&&""==scope?tinyMCEPopup.confirm(ed.getLang("table_dlg.missing_scope","",!0),doUpdate):doUpdate(1));this.updateCell(tdElm);break;case"row":var cell=trElm.firstChild;"TD"!=cell.nodeName&&"TH"!=cell.nodeName&&(cell=this.nextCell(cell));do cell=this.updateCell(cell,!0);while(null!=(cell=this.nextCell(cell)));break;case"all":for(var rows=tableElm.getElementsByTagName("tr"),i=0;i<rows.length;i++){var cell=rows[i].firstChild;"TD"!=cell.nodeName&&"TH"!=cell.nodeName&&(cell=this.nextCell(cell));do cell=this.updateCell(cell,!0);while(null!=(cell=this.nextCell(cell)))}}ed.addVisual(),ed.nodeChanged(),inst.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()},updateRow:function(tr_elm,skip_id,skip_parent){var v,ed=tinyMCEPopup.editor,dom=ed.dom,doc=ed.getDoc(),curRowType=tr_elm.parentNode.nodeName.toLowerCase(),rowtype=$("#rowtype").val();if($.each(["id","align","valign","lang","dir","classes","style"],function(i,k){v=$("#"+k).val(),"id"==k&&skip_id||("style"==k&&(v=dom.serializeStyle(dom.parseStyle(v))),"classes"==k&&(k="class"),dom.setAttrib(tr_elm,k,v))}),$.each(["height","bgColor","background"],function(i,k){ed.dom.setAttrib(tr_elm,k,null)}),tr_elm.style.height=getCSSSize($("#height").val()),tr_elm.style.backgroundColor=$("#bgcolor").val(),""!=$("#backgroundimage").val()?tr_elm.style.backgroundImage="url('"+$("#backgroundimage").val()+"')":tr_elm.style.backgroundImage="",curRowType!=rowtype&&!skip_parent){for(var newRow=tr_elm.cloneNode(1),theTable=dom.getParent(tr_elm,"table"),dest=rowtype,newParent=null,i=0;i<theTable.childNodes.length;i++)theTable.childNodes[i].nodeName.toLowerCase()==dest&&(newParent=theTable.childNodes[i]);null==newParent&&(newParent=doc.createElement(dest),"thead"==dest?"CAPTION"==theTable.firstChild.nodeName?ed.dom.insertAfter(newParent,theTable.firstChild):theTable.insertBefore(newParent,theTable.firstChild):theTable.appendChild(newParent)),newParent.appendChild(newRow),tr_elm.parentNode.removeChild(tr_elm),tr_elm=newRow}dom.setAttrib(tr_elm,"style",dom.serializeStyle(dom.parseStyle(tr_elm.style.cssText)))},makeAttrib:function(attrib,value){return"undefined"!=typeof value&&null!=value||(value=$("#"+attrib).val()),""==value?"":(value=value.replace(/&/g,"&amp;"),value=value.replace(/\"/g,"&quot;"),value=value.replace(/</g,"&lt;"),value=value.replace(/>/g,"&gt;")," "+attrib+'="'+value+'"')},updateRows:function(){var trElm,tableElm,self=this,ed=tinyMCEPopup.editor,dom=ed.dom,action=$("#action").val();if(tinyMCEPopup.restoreSelection(),trElm=dom.getParent(ed.selection.getStart(),"tr"),tableElm=dom.getParent(ed.selection.getStart(),"table"),dom.select("td.mceSelected,th.mceSelected",trElm).length>0)return tinymce.each(tableElm.rows,function(tr){var i;for(i=0;i<tr.cells.length;i++)if(dom.hasClass(tr.cells[i],"mceSelected"))return void self.updateRow(tr,!0)}),ed.addVisual(),ed.nodeChanged(),ed.execCommand("mceEndUndoLevel"),void tinyMCEPopup.close();switch(ed.execCommand("mceBeginUndoLevel"),action){case"row":this.updateRow(trElm);break;case"all":for(var rows=tableElm.getElementsByTagName("tr"),i=0;i<rows.length;i++)this.updateRow(rows[i],!0);break;case"odd":case"even":for(var rows=tableElm.getElementsByTagName("tr"),i=0;i<rows.length;i++)(i%2==0&&"odd"==action||i%2!=0&&"even"==action)&&this.updateRow(rows[i],!0,!0)}ed.addVisual(),ed.nodeChanged(),ed.execCommand("mceEndUndoLevel"),tinyMCEPopup.close()},updateCell:function(td,skip_id){var v,self=this,ed=tinyMCEPopup.editor,dom=ed.dom,doc=ed.getDoc(),curCellType=td.nodeName.toLowerCase(),celltype=$("#celltype").val();if($.each(["id","align","valign","lang","dir","classes","scope","style"],function(i,k){v=$("#"+k).val(),"id"==k&&skip_id||("style"==k&&(v=dom.serializeStyle(dom.parseStyle(v))),"classes"==k&&(k="class"),self.html5&&"valign"==k||(""===v?td.removeAttribute(k):dom.setAttrib(td,k,v)))}),$.each(["width","height","bgColor","borderColor","background"],function(i,k){ed.dom.setAttrib(td,k,null)}),td.style.width=getCSSSize($("#width").val()),td.style.height=getCSSSize($("#height").val()),""!=$("#bordercolor").val()?(td.style.borderColor=$("#bordercolor").val(),td.style.borderStyle=""==td.style.borderStyle?"solid":td.style.borderStyle,td.style.borderWidth=""==td.style.borderWidth?"1px":td.style.borderWidth):td.style.borderColor="",td.style.backgroundColor=$("#bgcolor").val(),""!=$("#backgroundimage").val()?td.style.backgroundImage="url('"+$("#backgroundimage").val()+"')":td.style.backgroundImage="",curCellType!=celltype){for(var newCell=doc.createElement(celltype),c=0;c<td.childNodes.length;c++)newCell.appendChild(td.childNodes[c].cloneNode(1));for(var a=0;a<td.attributes.length;a++)ed.dom.setAttrib(newCell,td.attributes[a].name,ed.dom.getAttrib(td,td.attributes[a].name));td.parentNode.replaceChild(newCell,td),td=newCell}return dom.setAttrib(td,"style",dom.serializeStyle(dom.parseStyle(td.style.cssText))),td},nextCell:function(elm){for(;null!=(elm=elm.nextSibling);)if("TD"==elm.nodeName||"TH"==elm.nodeName)return elm;return null},changedSize:function(){var st=tinyMCEPopup.dom.parseStyle($("#style").val()),height=$("#height").val();""!=height?st.height=this.cssSize(height):st.height="",$("#style").val(tinyMCEPopup.dom.serializeStyle(st))},changedBackgroundImage:function(){var st=tinyMCEPopup.dom.parseStyle($("#style").val());st["background-image"]="url('"+$("#backgroundimage").val()+"')",$("#style").val(tinyMCEPopup.dom.serializeStyle(st))},isCssSize:function(value){return/^[0-9.]+(%|in|cm|mm|em|ex|pt|pc|px)$/.test(value)},cssSize:function(value,def){return value=tinymce.trim(value||def),this.isCssSize(value)?value:parseInt(value,10)+"px"},changedBorder:function(){var st=tinyMCEPopup.dom.parseStyle($("#style").val()),bw=$("#border").val();""==bw||!this.isCssSize(bw)&&""==$("#bordercolor").val()?bw||(st.border="",st["border-width"]=""):st["border-width"]=this.cssSize(bw),$("#style").val(tinyMCEPopup.dom.serializeStyle(st))},changedColor:function(){var dom=tinyMCEPopup.editor.dom,st=dom.parseStyle($("#style").val());st["background-color"]=$("#bgcolor").val(),""!=$("#bordercolor").val()&&(st["border-color"]=$("#bordercolor").val(),st["border-width"]||(st["border-width"]=this.cssSize($("#border").val(),1))),$("#style").val(dom.serializeStyle(st))},changedStyle:function(){var dom=tinyMCEPopup.dom,st=dom.parseStyle($("#style").val());st["background-image"]?$("#backgroundimage").val(st["background-image"].replace(new RegExp("url\\(['\"]?([^'\"]*)['\"]?\\)","gi"),"$1")):$("#backgroundimage").val(""),st.width&&$("#width").val(trimSize(st.width)),st.height&&$("#height").val(trimSize(st.height)),st["background-color"]&&$("#bgcolor").val(st["background-color"]).change(),st["border-color"]&&$("#bordercolor").val(st["border-color"]).change(),st["border-spacing"]&&$("#cellspacing").val(trimSize(st["border-spacing"])),st["border-collapse"]&&"collapse"==st["border-collapse"]&&$("#cellspacing").val(0),st["vertical-align"]&&$("#valign").val(st["vertical-align"])},setClasses:function(v){},setActionforRowType:function(){var rowtype=$("#rowtype").val();"tbody"===rowtype?$("#action").prop("disabled",!1):$("#action").val("row").prop("disabled",!0)}};tinyMCEPopup.onInit.add(TableDialog.init,TableDialog),window.TableDialog=TableDialog}(tinymce,tinyMCEPopup,jQuery);
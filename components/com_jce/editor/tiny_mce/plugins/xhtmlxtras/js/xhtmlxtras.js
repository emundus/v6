/* jce - 2.6.1 | 2016-12-01 | http://www.joomlacontenteditor.net | Copyright (C) 2006 - 2016 Ryan Demmer. All rights reserved | GNU/GPL Version 2 or later - http://www.gnu.org/licenses/gpl-2.0.html */
!function($){var XHTMLXtrasDialog={settings:{},init:function(){var ed=tinyMCEPopup.editor,se=ed.selection,n=se.getNode(),element=tinyMCEPopup.getWindowArg("element");if(element&&(n=ed.dom.getParent(n,element)),Wf.init(),n){var text=n.textContent||n.innerText||"";se.isCollapsed()&&text!=se.getContent({format:"text"})||($(":input").each(function(){var k=$(this).attr("id");/on(click|dblclick)/.test(k)&&(k="data-mce-"+k),"classes"!==k&&"classlist"!==k||(k="class"),$(this).val(ed.dom.getAttrib(n,k))}),$("#insert").button("option","label",ed.getLang("update","Insert")))}$("#remove").button({icons:{primary:"uk-icon-minus-circle"}}).toggle(!!element),"html4"===ed.settings.schema&&ed.settings.validate===!0&&$("input.html5").parent("td").parent("tr").hide(),tinymce.is(n,":input, form")||$("input.form").parent("td").parent("tr").hide(),tinymce.is(n,"img")||$("input.media").parent("td").parent("tr").hide()},insert:function(){var elm,ed=tinyMCEPopup.editor,se=ed.selection,n=se.getNode();tinyMCEPopup.restoreSelection();var element=tinyMCEPopup.getWindowArg("element"),args={};if($(":input").not("#classlist").each(function(){var k=$(this).attr("id"),v=$(this).val();/on(click|dblclick)/.test(k)&&(k="data-mce-"+k),"classes"===k&&(k="class"),args[k]=v}),element)elm=n.nodeName.toLowerCase()==element?n:ed.dom.getParent(n,element),ed.formatter.apply(element.toLowerCase(),args,elm);else{var isTextSelection=se.getContent()==se.getContent({format:"text"});n==ed.getBody()||isTextSelection?ed.formatter.apply("attributes",args):ed.dom.setAttribs(n,args)}ed.undoManager.add(),tinyMCEPopup.close()},remove:function(){var ed=tinyMCEPopup.editor,element=tinyMCEPopup.getWindowArg("element");element&&(ed.formatter.remove(element),ed.undoManager.add()),tinyMCEPopup.close()},insertDateTime:function(id){document.getElementById(id).value=this.getDateTime(new Date,"%Y-%m-%dT%H:%M:%S")},getDateTime:function(d,fmt){return fmt=fmt.replace("%D","%m/%d/%y"),fmt=fmt.replace("%r","%I:%M:%S %p"),fmt=fmt.replace("%Y",""+d.getFullYear()),fmt=fmt.replace("%y",""+d.getYear()),fmt=fmt.replace("%m",this.addZeros(d.getMonth()+1,2)),fmt=fmt.replace("%d",this.addZeros(d.getDate(),2)),fmt=fmt.replace("%H",""+this.addZeros(d.getHours(),2)),fmt=fmt.replace("%M",""+this.addZeros(d.getMinutes(),2)),fmt=fmt.replace("%S",""+this.addZeros(d.getSeconds(),2)),fmt=fmt.replace("%I",""+((d.getHours()+11)%12+1)),fmt=fmt.replace("%p",""+(d.getHours()<12?"AM":"PM")),fmt=fmt.replace("%%","%")},addZeros:function(value,len){var i;if(value=""+value,value.length<len)for(i=0;i<len-value.length;i++)value="0"+value;return value}};window.XHTMLXtrasDialog=XHTMLXtrasDialog,tinyMCEPopup.onInit.add(XHTMLXtrasDialog.init,XHTMLXtrasDialog)}(jQuery);
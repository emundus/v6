(function(e){function t(t){for(var r,s,o=t[0],n=t[1],c=t[2],u=0,b=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&b.push(i[s][0]),i[s]=0;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);d&&d(t);while(b.length)b.shift()();return a.push.apply(a,c||[]),l()}function l(){for(var e,t=0;t<a.length;t++){for(var l=a[t],r=!0,o=1;o<l.length;o++){var n=l[o];0!==i[n]&&(r=!1)}r&&(a.splice(t--,1),e=s(s.s=l[0]))}return e}var r={},i={app:0},a=[];function s(t){if(r[t])return r[t].exports;var l=r[t]={i:t,l:!1,exports:{}};return e[t].call(l.exports,l,l.exports,s),l.l=!0,l.exports}s.m=e,s.c=r,s.d=function(e,t,l){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(l,r,function(t){return e[t]}.bind(null,r));return l},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],n=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var d=n;a.push([0,"chunk-vendors"]),l()})({0:function(e,t,l){e.exports=l("56d7")},3029:function(e,t,l){},"443b":function(e,t,l){"use strict";l("7e77")},"49e9":function(e,t,l){},"4e0b":function(e,t,l){"use strict";l("49e9")},"53e4":function(e,t,l){"use strict";l("ce2f")},"56d7":function(e,t,l){"use strict";l.r(t);l("b7ef");var r=l("7a23"),i=l("5502");const a={id:"emundus-filters",class:"em-w-100"},s={id:"filters-top-actions",class:"em-mb-16"},o=["alt"],n=["alt"],c={id:"global-search-wrapper",style:{position:"relative"}},d={key:0,class:"em-flex-row em-flex-wrap"},u={style:{"white-space":"nowrap"}},b=["onClick"],p=["placeholder"],O=["onClick"],f={id:"save-filters-inputs-btns"},h=["placeholder"],m={key:0,id:"registered-filters-wrapper",class:"em-mt-8"},v={for:"registered-filters"},j={class:"em-flex-row em-flex-space-between"},g={value:"0"},_=["value"],F={id:"applied-filters"},E={for:"filters-selection"},S={id:"filters-bottom-actions"};function R(e,t,l,i,R,y){const w=Object(r["r"])("MultiSelect"),T=Object(r["r"])("DateFilter"),L=Object(r["r"])("TimeFilter"),I=Object(r["r"])("DefaultFilter"),U=Object(r["r"])("AdvancedSelect");return Object(r["m"])(),Object(r["f"])("div",a,[Object(r["g"])("section",s,[Object(r["g"])("span",{id:"clear-filters",class:"material-icons-outlined em-pointer hidden",onClick:t[0]||(t[0]=(...e)=>y.clearFilters&&y.clearFilters(...e)),alt:e.translate("MOD_EMUNDUS_FILTERS_CLEAR_FILTERS")},"filter_list_off",8,o),Object(r["g"])("span",{id:"save-filters",class:"material-icons-outlined em-pointer hidden",onClick:t[1]||(t[1]=(...e)=>y.onClickSaveFilter&&y.onClickSaveFilter(...e)),alt:e.translate("MOD_EMUNDUS_FILTERS_SAVE_FILTERS")},"save",8,n),Object(r["g"])("div",c,[Object(r["g"])("div",{id:"global-search-values",ref:"globalSearchValues",class:"em-border-radius-8 em-border-neutral-400 em-flex-row em-flex-wrap em-white-bg",onClick:t[4]||(t[4]=(...e)=>y.onEnterGlobalSearchDiv&&y.onEnterGlobalSearchDiv(...e))},[R.globalSearch.length>0?(Object(r["m"])(),Object(r["f"])("div",d,[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(R.globalSearch,e=>(Object(r["m"])(),Object(r["f"])("div",{key:e.value+"-"+e.scope,class:"global-search-tag em-flex-row em-box-shadow em-border-radius-8 em-border-neutral-400 em-w-auto em-mt-4 em-mb-4 em-ml-4 em-mr-4"},[Object(r["g"])("span",u,Object(r["s"])(y.translatedScope(e.scope))+" : "+Object(r["s"])(e.value),1),Object(r["g"])("span",{class:"material-icons-outlined em-pointer",onClick:t=>y.removeGlobalSearchValue(e.value,e.scope)},"clear",8,b)]))),128))])):Object(r["e"])("",!0),Object(r["y"])(Object(r["g"])("input",{id:"current-global-search",ref:"globalSearchInput",class:"em-border-radius-8","onUpdate:modelValue":t[2]||(t[2]=e=>R.currentGlobalSearch=e),type:"text",onKeyup:t[3]||(t[3]=Object(r["z"])(e=>y.onGlobalSearchChange("everywhere"),["enter"])),placeholder:y.globalSearchPlaceholder},null,40,p),[[r["w"],R.currentGlobalSearch]])],512),Object(r["g"])("ul",{id:"select-scopes",class:Object(r["l"])(["em-w-100 em-w-100 em-border-radius-8 em-white-bg em-border-neutral-400 em-box-shadow",{hidden:R.currentGlobalSearch.length<1}])},[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(R.globalSearchScopes,t=>(Object(r["m"])(),Object(r["f"])("li",{key:t.value,onClick:e=>y.onGlobalSearchChange(t.value),class:"em-pointer"},Object(r["s"])(R.currentGlobalSearch)+" "+Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_SCOPE_IN"))+" "+Object(r["s"])(e.translate(t.label)),9,O))),128))],2)]),Object(r["g"])("div",f,[Object(r["g"])("div",{id:"save-filter-new-name",class:Object(r["l"])(["em-flex-row em-flex-space-between em-border-radius-8 em-white-bg em-box-shadow em-w-100 em-p-16",{hidden:!R.openSaveFilter}])},[Object(r["y"])(Object(r["g"])("input",{id:"new-filter-name",ref:"new-filter-name",type:"text",class:"em-flex-row","onUpdate:modelValue":t[5]||(t[5]=e=>R.newFilterName=e),placeholder:e.translate("MOD_EMUNDUS_FILTERS_SAVE_FILTER_NAME"),minlength:"2",onKeyup:t[6]||(t[6]=Object(r["z"])((...e)=>y.saveFilters&&y.saveFilters(...e),["enter"])),onFocusout:t[7]||(t[7]=(...e)=>y.onFocusOutNewFilter&&y.onFocusOutNewFilter(...e))},null,40,h),[[r["w"],R.newFilterName]]),Object(r["g"])("span",{id:"save-new-filter",class:Object(r["l"])(["material-icons-outlined em-pointer",{"em-pointer em-dark-blue-500-color":R.newFilterName.length>1}]),onClick:t[8]||(t[8]=(...e)=>y.saveFilters&&y.saveFilters(...e))},"done",2)],2),R.registeredFilters.length>0?(Object(r["m"])(),Object(r["f"])("div",m,[Object(r["g"])("label",v,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_SAVED_FILTERS")),1),Object(r["g"])("div",j,[Object(r["y"])(Object(r["g"])("select",{id:"registered-filters",class:"em-w-100","onUpdate:modelValue":t[9]||(t[9]=e=>R.selectedRegisteredFilter=e),onChange:t[10]||(t[10]=(...e)=>y.onSelectRegisteredFilter&&y.onSelectRegisteredFilter(...e))},[Object(r["g"])("option",g,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_PLEASE_SELECT")),1),(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(R.registeredFilters,e=>(Object(r["m"])(),Object(r["f"])("option",{key:e.id,value:e.id},Object(r["s"])(e.name),9,_))),128))],544),[[r["v"],R.selectedRegisteredFilter]]),R.selectedRegisteredFilter>0?(Object(r["m"])(),Object(r["f"])("span",{key:0,class:"material-icons-outlined em-red-500-color em-pointer",onClick:t[11]||(t[11]=(...e)=>y.deleteRegisteredFilter&&y.deleteRegisteredFilter(...e))},"delete")):Object(r["e"])("",!0)])])):Object(r["e"])("",!0)])]),Object(r["g"])("section",F,[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(R.appliedFilters,e=>(Object(r["m"])(),Object(r["f"])("div",{key:e.uid},["select"===e.type?(Object(r["m"])(),Object(r["d"])(w,{key:0,filter:e,"module-id":l.moduleId,countFilterValues:l.countFilterValues,class:"em-w-100",onRemoveFilter:t=>y.onRemoveFilter(e),onFilterChanged:y.onFilterChanged},null,8,["filter","module-id","countFilterValues","onRemoveFilter","onFilterChanged"])):"date"===e.type?(Object(r["m"])(),Object(r["d"])(T,{key:1,filter:e,"module-id":l.moduleId,class:"em-w-100",onRemoveFilter:t=>y.onRemoveFilter(e),onFilterChanged:y.onFilterChanged},null,8,["filter","module-id","onRemoveFilter","onFilterChanged"])):"time"===e.type?(Object(r["m"])(),Object(r["d"])(L,{key:2,filter:e,"module-id":l.moduleId,class:"em-w-100",onRemoveFilter:t=>y.onRemoveFilter(e)},null,8,["filter","module-id","onRemoveFilter"])):(Object(r["m"])(),Object(r["d"])(I,{key:3,filter:e,"module-id":l.moduleId,class:"em-w-100",onRemoveFilter:t=>y.onRemoveFilter(e),onFilterChanged:y.onFilterChanged},null,8,["filter","module-id","onRemoveFilter","onFilterChanged"]))]))),128))]),Object(r["g"])("div",{id:"filters-selection-wrapper",class:Object(r["l"])(["em-w-100 em-mt-16 em-mb-16",{hidden:!R.openFilterOptions}])},[Object(r["g"])("label",E,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_SELECT_FILTER_LABEL")),1),Object(r["i"])(U,{"module-id":l.moduleId,filters:y.availableFilters,onFilterSelected:y.onSelectNewFilter},null,8,["module-id","filters","onFilterSelected"])],2),Object(r["g"])("section",S,[Object(r["g"])("button",{id:"em-add-filter",class:"em-secondary-button em-white-bg em-mt-16",onClick:t[12]||(t[12]=e=>R.openFilterOptions=!R.openFilterOptions)},Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_ADD_FILTER")),1),Object(r["g"])("button",{id:"em-apply-filters",class:"em-primary-button em-mt-16 hidden",onClick:t[13]||(t[13]=(...e)=>y.applyFilters&&y.applyFilters(...e))},Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_APPLY_FILTERS")),1)])])}l("14d9");const y=e=>(Object(r["o"])("data-v-db243cd8"),e=e(),Object(r["n"])(),e),w=["id"],T={class:"em-flex-row em-flex-space-between"},L=["title"],I={class:"em-flex-row"},U=["alt"],k={class:"multi-select-filter-card em-border-radius-8 em-border-neutral-400 em-box-shadow em-white-bg em-p-8 em-mt-4"},D={key:0,class:"em-flex-column-start"},M={class:"recap-value em-flex-row em-flex-wrap em-flex-gap-8"},C={class:"recap-operator label label-darkblue"},N={class:"label label-default"},A={key:0,class:"label label-darkblue"},x={key:0},V={class:"label label-default"},P={key:1,class:"em-text-neutral-500 em-pointer"},q={class:"operators-selection em-flex-row em-flex-wrap em-flex-gap-8"},$=["id","value","onUpdate:modelValue"],G=["for"],J=y(()=>Object(r["g"])("hr",null,null,-1)),H={class:"andor-selection em-flex-row em-flex-gap-8"},B=["id","value"],Q=["for"],K=y(()=>Object(r["g"])("hr",null,null,-1)),z=["id","placeholder"],W={class:"values-selection em-mt-8 em-mb-8"},Y={class:"em-flex-row"},X=["name","id"],Z=["for"],ee=["name","id","value","onUpdate:modelValue"],te=["for"],le={key:0,class:"em-gray-color"},re={class:"material-icons-outlined em-pointer toggle-open-close"};function ie(e,t,l,i,a,s){return Object(r["m"])(),Object(r["f"])("div",{class:"multi-select-filter em-w-100 em-mb-16",id:"filter-id-"+l.filter.uid,ref:"filter-id-"+l.filter.uid,onClick:t[10]||(t[10]=(...e)=>s.toggleOpened&&s.toggleOpened(...e))},[Object(r["g"])("div",T,[Object(r["g"])("p",{class:"recap-label",title:l.filter.label},Object(r["s"])(l.filter.label),9,L),Object(r["g"])("div",I,[Object(r["g"])("span",{onMouseenter:t[0]||(t[0]=e=>a.resetHover=!0),onMouseleave:t[1]||(t[1]=e=>a.resetHover=!1),class:Object(r["l"])(["material-icons-outlined em-pointer reset-filter-btn",{"em-blue-400-color":a.resetHover}]),onClick:t[2]||(t[2]=(...e)=>s.resetFilter&&s.resetFilter(...e)),alt:e.translate("MOD_EMUNDUS_FILTERS_RESET")},"refresh",42,U),l.filter.default?Object(r["e"])("",!0):(Object(r["m"])(),Object(r["f"])("span",{key:0,class:"material-icons-outlined em-red-500-color em-pointer remove-filter-btn",onClick:t[3]||(t[3]=t=>e.$.emit("remove-filter"))},"close"))])]),Object(r["g"])("div",k,[Object(r["g"])("section",{class:Object(r["l"])(["recap",{hidden:a.opened}])},[l.filter.value&&l.filter.value.length>0&&!l.filter.value.includes("all")?(Object(r["m"])(),Object(r["f"])("div",D,[Object(r["g"])("div",M,[Object(r["g"])("span",C,Object(r["s"])(s.selectedOperatorLabel),1),(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(l.filter.value.slice(0,2),(e,t)=>(Object(r["m"])(),Object(r["f"])("div",{key:e,class:"em-flex-row em-flex-wrap em-flex-gap-8"},[Object(r["g"])("span",N,Object(r["s"])(s.selectedValuesLabels[t]),1),l.filter.value.length>1&&0==t?(Object(r["m"])(),Object(r["f"])("span",A,Object(r["s"])(s.selectedAndorOperatorLabel),1)):Object(r["e"])("",!0)]))),128)),l.filter.value.length>2?(Object(r["m"])(),Object(r["f"])("div",x,[Object(r["g"])("span",V," + "+Object(r["s"])(l.filter.value.length-2)+" "+Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_MORE_VALUES")),1)])):Object(r["e"])("",!0)])])):(Object(r["m"])(),Object(r["f"])("p",P,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_PLEASE_SELECT")),1))],2),Object(r["g"])("section",{class:Object(r["l"])(["multi-select-filter-options",{hidden:!a.opened}])},[Object(r["g"])("div",q,[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(a.operators,e=>(Object(r["m"])(),Object(r["f"])("div",{key:l.filter.uid+"-"+e.value,class:Object(r["l"])(["em-p-8 em-border-radius-8",{"label-default":e.value!==l.filter.operator,"label-darkblue":e.value===l.filter.operator}])},[Object(r["y"])(Object(r["g"])("input",{class:"hidden label",type:"radio",id:l.filter.uid+"-operator-"+e.value,value:e.value,"onUpdate:modelValue":e=>l.filter.operator=e},null,8,$),[[r["u"],l.filter.operator]]),Object(r["g"])("label",{for:l.filter.uid+"-operator-"+e.value,style:{margin:"0"}},Object(r["s"])(e.label),9,G)],2))),128))]),J,Object(r["g"])("div",H,[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(a.andorOperators,e=>(Object(r["m"])(),Object(r["f"])("div",{key:l.filter.uid+"-"+e.value,class:Object(r["l"])(["em-p-8 em-border-radius-8",{"label-default":e.value!==l.filter.andorOperator,"label-darkblue":e.value===l.filter.andorOperator}])},[Object(r["y"])(Object(r["g"])("input",{class:"hidden label",type:"radio",id:l.filter.uid+"-andor-"+e.value,value:e.value,"onUpdate:modelValue":t[4]||(t[4]=e=>l.filter.andorOperator=e)},null,8,B),[[r["u"],l.filter.andorOperator]]),Object(r["g"])("label",{for:l.filter.uid+"-andor-"+e.value,style:{margin:"0"}},Object(r["s"])(e.label),9,Q)],2))),128))]),K,Object(r["y"])(Object(r["g"])("input",{class:"em-w-100 em-p-8 em-border-radius-8 em-border-neutral-400 em-box-shadow em-white-bg",id:l.filter.uid+"-filter-search",ref:l.filter.uid+"-search-input",type:"text",placeholder:e.translate("MOD_EMUNDUS_FILTERS_FILTER_SEARCH"),"onUpdate:modelValue":t[5]||(t[5]=e=>a.search=e),onKeyup:t[6]||(t[6]=(...e)=>s.onSearchChange&&s.onSearchChange(...e))},null,40,z),[[r["w"],a.search]]),Object(r["g"])("div",W,[Object(r["g"])("div",Y,[Object(r["y"])(Object(r["g"])("input",{name:l.filter.uid+"-filter-value",id:l.filter.uid+"-filter-value-all",type:"checkbox",value:"all","onUpdate:modelValue":t[7]||(t[7]=e=>l.filter.value=e),onClick:t[8]||(t[8]=(...e)=>s.onClickAll&&s.onClickAll(...e))},null,8,X),[[r["t"],l.filter.value]]),Object(r["g"])("label",{for:l.filter.uid+"-filter-value-all",style:{margin:"0"}},Object(r["s"])(e.translate("ALL")),9,Z)]),(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(s.searchedValues,e=>(Object(r["m"])(),Object(r["f"])("div",{key:e.value,class:Object(r["l"])(["em-flex-row em-filter-value-checkbox em-mb-4",{"disabled hidden":l.countFilterValues&&e.hasOwnProperty("count")&&0==e.count&&!l.filter.value.includes(e.value)}]),onClick:t[9]||(t[9]=e=>s.onClickSpecificValue())},[Object(r["y"])(Object(r["g"])("input",{name:l.filter.uid+"-filter-value",id:l.filter.uid+"-filter-value-"+e.value,type:"checkbox",value:e.value,"onUpdate:modelValue":e=>l.filter.value=e},null,8,ee),[[r["t"],l.filter.value]]),Object(r["g"])("label",{for:l.filter.uid+"-filter-value-"+e.value,style:{margin:"0"}},[Object(r["g"])("span",null,Object(r["s"])(e.label),1),Object(r["h"])(),l.countFilterValues&&e.hasOwnProperty("count")?(Object(r["m"])(),Object(r["f"])("span",le," ("+Object(r["s"])(e.count)+")",1)):Object(r["e"])("",!0)],8,te)],2))),128))])],2),Object(r["g"])("span",re,Object(r["s"])(a.opened?"keyboard_arrow_up":"keyboard_arrow_down"),1)])],8,w)}var ae={name:"MultiSelect.vue",props:{moduleId:{type:Number,required:!0},filter:{type:Object,required:!0},countFilterValues:{type:Boolean,default:!1}},data(){return{opened:!1,operators:[{value:"IN",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS")},{value:"NOT IN",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS_NOT")}],andorOperators:[{value:"OR",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_OR")}],search:"",resetHover:!1,originalFilterValue:null,originalFilterOperator:null}},beforeMount(){null!==this.filter.value&&void 0!==this.filter.value||(this.filter.value=[])},mounted(){this.filter.operator="="===this.filter.operator?"IN":this.filter.operator,this.originalFilterValue=this.filter.value,this.originalFilterOperator=this.filter.operator},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{onClickSpecificValue(){this.filter.value.includes("all")&&(this.filter.value=this.filter.value.filter(e=>"all"!==e))},onClickAll(){if(this.filter.value.includes("all"))this.filter.value=this.filter.value.filter(e=>!this.searchedValues.find(t=>t.value===e)),this.filter.value=this.filter.value.filter(e=>"all"!==e);else{let e=this.searchedValues.map(e=>e.value);e.push("all"),e.forEach(e=>{this.filter.value.includes(e)||this.filter.value.push(e)})}},allValuesAreSelected(){return this.filter.values.every(e=>this.filter.value.includes(e.value))},onSearchChange(){this.allValuesAreSelected()||(this.filter.value=this.filter.value.filter(e=>"all"!==e))},resetFilter(e){this.filter.operator="IN",this.filter.andorOperator="OR",this.search="",this.filter.value=[],this.opened?(this.opened=!1,document.removeEventListener("click",this.handleClickOutside),this.onCloseCard()):this.onCloseCard(),e.stopPropagation()},toggleOpened(e=null){e&&(e.target.closest(".multi-select-filter-options")||e.target.classList.contains("remove-filter-btn"))||(this.opened=!this.opened,!1===this.opened?(document.removeEventListener("click",this.handleClickOutside),this.onCloseCard()):(this.$nextTick(()=>{this.$refs[this.filter.uid+"-search-input"].focus()}),document.addEventListener("click",this.handleClickOutside)))},onCloseCard(){const e=this.filter.value&&Array.isArray(this.filter.value)?this.filter.value.filter(e=>!this.originalFilterValue.includes(e)).concat(this.originalFilterValue.filter(e=>!this.filter.value.includes(e))):[],t=this.filter.operator!==this.originalFilterOperator;(e.length>0||t)&&(this.originalFilterValue=this.filter.value,this.originalFilterOperator=this.filter.operator,this.$emit("filter-changed"))},handleClickOutside(e){if(this.opened){const t=e.target,l=this.$refs["filter-id-"+this.filter.uid];t&&l&&!l.contains(t)&&!t.closest("#"+l.id)&&this.toggleOpened(e)}}},computed:{selectedOperatorLabel(){const e=this.operators.find(e=>e.value===this.filter.operator);return e?e.label:""},selectedAndorOperatorLabel(){const e=this.andorOperators.find(e=>e.value===this.filter.andorOperator);return e?e.label:""},selectedValuesLabels(){let e=[];return this.filter.value.forEach(t=>{const l=this.filter.values.find(e=>e.value===t);l&&e.push(l.label)}),e},searchedValues(){return this.filter.values.filter(e=>!!e.label&&e.label.toLowerCase().includes(this.search.toLowerCase()))}}},se=(l("443b"),l("6b0d")),oe=l.n(se);const ne=oe()(ae,[["render",ie],["__scopeId","data-v-db243cd8"]]);var ce=ne;const de={class:"advanced-search em-w-100"},ue={value:"-1",selected:""},be=["label"],pe=["value"];function Oe(e,t,l,i,a,s){return Object(r["m"])(),Object(r["f"])("div",de,[Object(r["y"])(Object(r["g"])("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>a.search=e),class:"em-w-100"},null,512),[[r["w"],a.search]]),Object(r["y"])(Object(r["g"])("select",{class:"em-w-100 em-mt-8",onChange:t[1]||(t[1]=(...e)=>s.onChange&&s.onChange(...e)),"onUpdate:modelValue":t[2]||(t[2]=e=>a.selected=e)},[Object(r["g"])("option",ue,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_PLEASE_SELECT")),1),(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(s.groupedFilters,e=>(Object(r["m"])(),Object(r["f"])("optgroup",{label:e.label,key:e.id},[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(e.options,e=>(Object(r["m"])(),Object(r["f"])("option",{key:e.id,value:e.id},Object(r["s"])(e.label),9,pe))),128))],8,be))),128))],544),[[r["v"],a.selected]])])}var fe={name:"AdvancedSelect.vue",props:{moduleId:{type:Number,required:!0},filters:{type:Array,required:!0}},data(){return{groupedOptions:[],search:"",selected:-1}},methods:{onChange(){-1!==this.selected&&(this.$emit("filter-selected",this.selected),this.selected=-1)}},computed:{groupedFilters(){const e=[],t=[];return this.displayedFilters.forEach(l=>{t.includes(l.group_id)||(e.push({id:l.group_id,label:l.group_label,options:[]}),t.push(l.group_id));const r=e.find(e=>e.id===l.group_id);r.options.push(l)}),e},displayedFilters(){return this.filters.filter(e=>e.label.toLowerCase().includes(this.search.toLowerCase())||e.group_label.toLowerCase().includes(this.search.toLowerCase()))}}};const he=oe()(fe,[["render",Oe]]);var me=he;const ve=e=>(Object(r["o"])("data-v-63b37da6"),e=e(),Object(r["n"])(),e),je=["id"],ge={class:"em-flex-row em-flex-space-between"},_e=["title"],Fe=["alt"],Ee={class:"date-filter-card em-border-radius-8 em-border-neutral-400 em-box-shadow em-white-bg em-p-8"},Se={key:0,class:"em-flex-row em-flex-wrap em-flex-gap-8"},Re={class:"recap-operator label label-darkblue"},ye={class:"recap-value em-flex-row em-flex-wrap em-flex-gap-8"},we={key:0,class:"label label-default"},Te={key:1,class:"label label-default"},Le={key:1,class:"em-text-neutral-500"},Ie={class:"operators-selection em-flex-row em-flex-wrap em-flex-gap-8"},Ue=["id","value","onUpdate:modelValue"],ke=["for"],De=ve(()=>Object(r["g"])("hr",null,null,-1)),Me=["id"],Ce={key:0,class:"em-mt-8"},Ne=["id"],Ae={class:"material-icons-outlined em-pointer toggle-open-close"};function xe(e,t,l,i,a,s){return Object(r["m"])(),Object(r["f"])("div",{class:"date-filter em-w-100 em-mb-16",id:"filter-id-"+l.filter.uid,ref:"filter-id-"+l.filter.uid,onClick:t[6]||(t[6]=(...e)=>s.toggleOpened&&s.toggleOpened(...e))},[Object(r["g"])("div",ge,[Object(r["g"])("p",{class:"recap-label",title:l.filter.label},Object(r["s"])(l.filter.label),9,_e),Object(r["g"])("div",null,[Object(r["g"])("span",{onMouseenter:t[0]||(t[0]=e=>a.resetHover=!0),onMouseleave:t[1]||(t[1]=e=>a.resetHover=!1),class:Object(r["l"])(["material-icons-outlined em-pointer reset-filter-btn",{"em-blue-400-color":a.resetHover}]),onClick:t[2]||(t[2]=(...e)=>s.resetFilter&&s.resetFilter(...e)),alt:e.translate("MOD_EMUNDUS_FILTERS_RESET")},"refresh",42,Fe),l.filter.default?Object(r["e"])("",!0):(Object(r["m"])(),Object(r["f"])("span",{key:0,class:"material-icons-outlined em-red-500-color em-pointer remove-filter-btn",onClick:t[3]||(t[3]=t=>e.$.emit("remove-filter"))},"close"))])]),Object(r["g"])("div",Ee,[Object(r["g"])("section",{class:Object(r["l"])(["recap em-flex-row em-mt-8",{hidden:a.opened}])},[l.filter.value[0]?(Object(r["m"])(),Object(r["f"])("div",Se,[Object(r["g"])("span",Re,Object(r["s"])(s.selectedOperatorLabel),1),Object(r["g"])("p",ye,[l.filter.value[0]?(Object(r["m"])(),Object(r["f"])("span",we,Object(r["s"])(l.filter.value[0]),1)):Object(r["e"])("",!0),["between","!between"].includes(l.filter.operator)&&l.filter.value[1]?(Object(r["m"])(),Object(r["f"])("span",Te,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_AND"))+" "+Object(r["s"])(l.filter.value[1]),1)):Object(r["e"])("",!0)])])):(Object(r["m"])(),Object(r["f"])("p",Le,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_PLEASE_SELECT")),1))],2),Object(r["g"])("section",{class:Object(r["l"])(["default-filter-options em-mt-8",{hidden:!a.opened}])},[Object(r["g"])("div",Ie,[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(a.operators,e=>(Object(r["m"])(),Object(r["f"])("div",{key:l.filter.uid+"-"+e.value,class:Object(r["l"])(["em-p-6-10 em-border-radius-8",{"label-default":e.value!==l.filter.operator,"label-darkblue":e.value===l.filter.operator}])},[Object(r["y"])(Object(r["g"])("input",{class:"hidden label",type:"radio",id:l.filter.uid+"-operator-"+e.value,value:e.value,"onUpdate:modelValue":e=>l.filter.operator=e},null,8,Ue),[[r["u"],l.filter.operator]]),Object(r["g"])("label",{for:l.filter.uid+"-operator-"+e.value,style:{margin:"0"},class:"em-font-size-14"},Object(r["s"])(e.label),9,ke)],2))),128))]),De,Object(r["y"])(Object(r["g"])("input",{type:"date",id:l.filter.uid+"-start_date","onUpdate:modelValue":t[4]||(t[4]=e=>l.filter.value[0]=e)},null,8,Me),[[r["w"],l.filter.value[0]]]),"between"===l.filter.operator||"!between"===l.filter.operator?(Object(r["m"])(),Object(r["f"])("div",Ce,[Object(r["g"])("p",null,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_AND")),1),Object(r["y"])(Object(r["g"])("input",{class:"em-mt-8",type:"date",id:l.filter.uid+"-end_date","onUpdate:modelValue":t[5]||(t[5]=e=>l.filter.value[1]=e)},null,8,Ne),[[r["w"],l.filter.value[1]]])])):Object(r["e"])("",!0)],2),Object(r["g"])("span",Ae,Object(r["s"])(a.opened?"keyboard_arrow_up":"keyboard_arrow_down"),1)])],8,je)}var Ve={name:"DateFilter.vue",props:{moduleId:{type:Number,required:!0},filter:{type:Object,required:!0}},data(){return{opened:!1,operators:[{value:"=",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS")},{value:"!=",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS_NOT")},{value:"superior",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_SUPERIOR_TO")},{value:"inferior",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_INFERIOR_TO")},{value:"superior_or_equal",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_SUPERIOR_OR_EQUAL_TO")},{value:"inferior_or_equal",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_INFERIOR_OR_EQUAL_TO")},{value:"between",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_BETWEEN")},{value:"!between",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_NOT_BETWEEN")}],resetHover:!1,originalFilterValue:null,originalFilterOperator:null}},mounted(){this.originalFilterValue=this.filter.value,this.originalFilterOperator=this.filter.operator,document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{resetFilter(e){this.filter.operator="=",this.filter.value=["",""],this.opened?(this.opened=!1,document.removeEventListener("click",this.handleClickOutside),this.onCloseCard()):this.onCloseCard(),e.stopPropagation()},toggleOpened(e=null){e&&(e.target.closest(".default-filter-options")||e.target.classList.contains("remove-filter-btn"))||(this.opened=!this.opened,!1===this.opened?(document.removeEventListener("click",this.handleClickOutside),this.onCloseCard()):document.addEventListener("click",this.handleClickOutside))},onCloseCard(){const e=this.filter.value[0]!==this.originalFilterValue[0]||this.filter.value[1]!==this.originalFilterValue[1],t=this.filter.operator!==this.originalFilterOperator;(e||t)&&(this.originalFilterValue=this.filter.value,this.originalFilterOperator=this.filter.operator,this.$emit("filter-changed"))},handleClickOutside(e){if(this.opened){const t=e.target,l=this.$refs["filter-id-"+this.filter.uid];!t||l.contains(t)||t.closest("#"+l.id)||this.toggleOpened(e)}}},computed:{selectedOperatorLabel(){const e=this.operators.find(e=>e.value===this.filter.operator);return e?e.label:""}}};l("4e0b");const Pe=oe()(Ve,[["render",xe],["__scopeId","data-v-63b37da6"]]);var qe=Pe;const $e={class:"time-filter em-w-100 em-mb-8 em-border-radius-8 em-border-neutral-400 em-box-shadow em-white-bg em-p-8"},Ge={class:"em-flex-row em-flex-space-between"},Je=["title"],He={key:0,class:"recap em-flex-row em-mt-8"},Be={class:"recap-operator label label-darkblue em-mr-4"},Qe={class:"recap-value em-flex-row em-flex-wrap em-flex-gap-8"},Ke={key:0},ze={key:1},We={key:1,class:"default-filter-options em-mt-8"},Ye={class:"operators-selection em-flex-row em-flex-wrap em-flex-gap-8"},Xe=["id","value","onUpdate:modelValue"],Ze=["for"],et=Object(r["g"])("hr",null,null,-1),tt=["id"],lt={key:0,class:"em-mt-8"},rt=["id"];function it(e,t,l,i,a,s){return Object(r["m"])(),Object(r["f"])("div",$e,[Object(r["g"])("div",Ge,[Object(r["g"])("p",{class:"recap-label",title:l.filter.label},Object(r["s"])(l.filter.label),9,Je),Object(r["g"])("div",null,[l.filter.default?Object(r["e"])("",!0):(Object(r["m"])(),Object(r["f"])("span",{key:0,class:"material-icons-outlined em-red-500-color em-pointer",onClick:t[0]||(t[0]=t=>e.$.emit("remove-filter"))},"close")),!1===a.opened?(Object(r["m"])(),Object(r["f"])("span",{key:1,class:"material-icons-outlined em-pointer",onClick:t[1]||(t[1]=e=>a.opened=!a.opened)},"keyboard_arrow_down")):(Object(r["m"])(),Object(r["f"])("span",{key:2,class:"material-icons-outlined em-pointer",onClick:t[2]||(t[2]=e=>a.opened=!a.opened)},"keyboard_arrow_up"))])]),a.opened?(Object(r["m"])(),Object(r["f"])("section",We,[Object(r["g"])("div",Ye,[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(a.operators,e=>(Object(r["m"])(),Object(r["f"])("div",{key:l.filter.uid+"-"+e.value,class:Object(r["l"])(["em-p-8 em-border-radius-8",{"label-default":e.value!==l.filter.operator,"label-darkblue":e.value===l.filter.operator}])},[Object(r["y"])(Object(r["g"])("input",{class:"hidden label",type:"radio",id:l.filter.uid+"-operator-"+e.value,value:e.value,"onUpdate:modelValue":e=>l.filter.operator=e},null,8,Xe),[[r["u"],l.filter.operator]]),Object(r["g"])("label",{for:l.filter.uid+"-operator-"+e.value,style:{margin:"0"}},Object(r["s"])(e.label),9,Ze)],2))),128))]),et,Object(r["y"])(Object(r["g"])("input",{type:"time",id:l.filter.uid+"-start_date","onUpdate:modelValue":t[3]||(t[3]=e=>l.filter.value[0]=e)},null,8,tt),[[r["w"],l.filter.value[0]]]),"between"===l.filter.operator||"!between"===l.filter.operator?(Object(r["m"])(),Object(r["f"])("div",lt,[Object(r["g"])("p",null,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_AND")),1),Object(r["y"])(Object(r["g"])("input",{class:"em-mt-8",type:"time",id:l.filter.uid+"-end_date","onUpdate:modelValue":t[4]||(t[4]=e=>l.filter.value[1]=e)},null,8,rt),[[r["w"],l.filter.value[1]]])])):Object(r["e"])("",!0)])):(Object(r["m"])(),Object(r["f"])("section",He,[Object(r["g"])("span",Be,Object(r["s"])(s.selectedOperatorLabel),1),Object(r["g"])("p",Qe,[l.filter.value[0]?(Object(r["m"])(),Object(r["f"])("span",Ke,Object(r["s"])(l.filter.value[0]),1)):Object(r["e"])("",!0),["between","!between"].includes(l.filter.operator)&&l.filter.value[1]?(Object(r["m"])(),Object(r["f"])("span",ze,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_AND"))+" "+Object(r["s"])(l.filter.value[1]),1)):Object(r["e"])("",!0)])]))])}var at={name:"TimeFilter",props:{moduleId:{type:Number,required:!0},filter:{type:Object,required:!0}},data(){return{opened:!1,operators:[{value:"=",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS")},{value:"!=",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS_NOT")},{value:"superior",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_SUPERIOR_TO")},{value:"inferior",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_INFERIOR_TO")},{value:"superior_or_equal",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_SUPERIOR_OR_EQUAL_TO")},{value:"inferior_or_equal",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_INFERIOR_OR_EQUAL_TO")},{value:"between",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_BETWEEN")},{value:"!between",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_NOT_BETWEEN")}]}},computed:{selectedOperatorLabel(){const e=this.operators.find(e=>e.value===this.filter.operator);return e?e.label:""}}};const st=oe()(at,[["render",it]]);var ot=st;const nt=e=>(Object(r["o"])("data-v-785673bc"),e=e(),Object(r["n"])(),e),ct=["id"],dt={class:"em-flex-row em-flex-space-between"},ut=["title"],bt={class:"em-flex-row"},pt=["alt"],Ot={class:"default-filter-card em-border-radius-8 em-border-neutral-400 em-box-shadow em-white-bg em-p-8 em-mt-4"},ft={key:0,class:"em-flex-row em-flex-wrap em-flex-gap-8"},ht={class:"recap-operator label label-darkblue"},mt={class:"recap-value label label-default"},vt={key:1,class:"em-text-neutral-500"},jt={class:"operators-selection em-flex-row em-flex-wrap em-flex-gap-8"},gt=["id","value","onUpdate:modelValue"],_t=["for"],Ft=nt(()=>Object(r["g"])("hr",null,null,-1)),Et={class:"material-icons-outlined em-pointer toggle-open-close"};function St(e,t,l,i,a,s){return Object(r["m"])(),Object(r["f"])("div",{class:"default-filter em-w-100 em-mb-16",id:"filter-id-"+l.filter.uid,ref:"filter-id-"+l.filter.uid,onClick:t[6]||(t[6]=(...e)=>s.toggleOpened&&s.toggleOpened(...e))},[Object(r["g"])("div",dt,[Object(r["g"])("p",{class:"recap-label",title:l.filter.label},Object(r["s"])(l.filter.label),9,ut),Object(r["g"])("div",bt,[Object(r["g"])("span",{onMouseenter:t[0]||(t[0]=e=>a.resetHover=!0),onMouseleave:t[1]||(t[1]=e=>a.resetHover=!1),class:Object(r["l"])(["material-icons-outlined em-pointer reset-filter-btn",{"em-blue-400-color":a.resetHover}]),onClick:t[2]||(t[2]=(...e)=>s.resetFilter&&s.resetFilter(...e)),alt:e.translate("MOD_EMUNDUS_FILTERS_RESET")},"refresh",42,pt),l.filter.default?Object(r["e"])("",!0):(Object(r["m"])(),Object(r["f"])("span",{key:0,class:"material-icons-outlined em-red-500-color em-pointer remove-filter-btn",onClick:t[3]||(t[3]=t=>e.$.emit("remove-filter"))},"close"))])]),Object(r["g"])("div",Ot,[Object(r["g"])("section",{class:Object(r["l"])(["recap",{hidden:a.opened}])},[l.filter.value?(Object(r["m"])(),Object(r["f"])("div",ft,[Object(r["g"])("span",ht,Object(r["s"])(s.selectedOperatorLabel),1),Object(r["g"])("span",mt,Object(r["s"])(l.filter.value),1)])):(Object(r["m"])(),Object(r["f"])("p",vt,Object(r["s"])(e.translate("MOD_EMUNDUS_FILTERS_PLEASE_SELECT")),1))],2),Object(r["g"])("section",{class:Object(r["l"])(["default-filter-options em-mt-8",{hidden:!a.opened}])},[Object(r["g"])("div",jt,[(Object(r["m"])(!0),Object(r["f"])(r["a"],null,Object(r["q"])(a.operators,e=>(Object(r["m"])(),Object(r["f"])("div",{key:l.filter.uid+"-"+e.value,class:Object(r["l"])(["em-p-8 em-border-radius-8",{"label-default":e.value!==l.filter.operator,"label-darkblue":e.value===l.filter.operator}])},[Object(r["y"])(Object(r["g"])("input",{class:"hidden label",type:"radio",id:l.filter.uid+"-operator-"+e.value,value:e.value,"onUpdate:modelValue":e=>l.filter.operator=e},null,8,gt),[[r["u"],l.filter.operator]]),Object(r["g"])("label",{for:l.filter.uid+"-operator-"+e.value,style:{margin:"0"}},Object(r["s"])(e.label),9,_t)],2))),128))]),Ft,Object(r["y"])(Object(r["g"])("input",{ref:l.filter.uid+"-value-input",type:"text","onUpdate:modelValue":t[4]||(t[4]=e=>l.filter.value=e),onKeyup:t[5]||(t[5]=Object(r["z"])((...e)=>s.onCloseCard&&s.onCloseCard(...e),["enter"]))},null,544),[[r["w"],l.filter.value]])],2),Object(r["g"])("span",Et,Object(r["s"])(a.opened?"keyboard_arrow_up":"keyboard_arrow_down"),1)])],8,ct)}var Rt={name:"DefaultFilter",props:{moduleId:{type:Number,required:!0},filter:{type:Object,required:!0}},data(){return{opened:!1,operators:[{value:"=",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS")},{value:"!=",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_IS_NOT")},{value:"LIKE",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_CONTAINS")},{value:"NOT LIKE",label:this.translate("MOD_EMUNDUS_FILTERS_FILTER_OPERATOR_DOES_NOT_CONTAIN")}],resetHover:!1}},mounted(){this.originalFilterValue=this.filter.value,this.originalFilterOperator=this.filter.operator,document.addEventListener("click",this.handleClickOutside)},beforeUnmount(){document.removeEventListener("click",this.handleClickOutside)},methods:{resetFilter(e){this.filter.operator="=",this.filter.value="",this.opened?(this.opened=!1,document.removeEventListener("click",this.handleClickOutside),this.onCloseCard()):this.onCloseCard(),e.stopPropagation()},toggleOpened(e=null){e&&(e.target.closest(".default-filter-options")||e.target.classList.contains("remove-filter-btn"))||(this.opened=!this.opened,!1===this.opened?(document.removeEventListener("click",this.handleClickOutside),this.onCloseCard()):(this.$nextTick(()=>{this.$refs[this.filter.uid+"-value-input"].focus()}),document.addEventListener("click",this.handleClickOutside)))},onCloseCard(){const e=this.filter.value!=this.originalFilterValue,t=this.filter.operator!==this.originalFilterOperator;(e||t)&&(this.originalFilterValue=this.filter.value,this.originalFilterOperator=this.filter.operator,this.$emit("filter-changed"))},handleClickOutside(e){if(this.opened){const t=e.target,l=this.$refs["filter-id-"+this.filter.uid];!t||l.contains(t)||t.closest("#"+l.id)||this.toggleOpened(e)}}},computed:{selectedOperatorLabel(){const e=this.operators.find(e=>e.value===this.filter.operator);return e?e.label:""}}};l("53e4");const yt=oe()(Rt,[["render",St],["__scopeId","data-v-785673bc"]]);var wt=yt;l("d9e2");class Tt{constructor(e){this.baseUrl="index.php?option=com_emundus&controller="+e}async get(e,t){let l=this.baseUrl+"&task="+e;if(t)for(let r in t)l+="&"+r+"="+t[r];return fetch(l).then(e=>{if(e.ok)return e.json();throw new Error("An error occurred while fetching the data. "+e.status+" "+e.statusText+".")}).then(e=>e).catch(e=>{throw new Error("An error occurred while fetching the data. "+e.message+".")})}async post(e,t){let l=this.baseUrl+"&task="+e,r=new FormData;for(let i in t)r.append(i,t[i]);return fetch(l,{method:"POST",body:r}).then(e=>{if(e.ok)return e.json();throw new Error("An error occurred while fetching the data. "+e.status+" "+e.statusText+".")}).then(e=>e).catch(e=>{throw new Error("An error occurred while fetching the data. "+e.message+".")})}async delete(e,t){let l=this.baseUrl+"&task="+e;if(t)for(let r in t)l+="&"+r+"="+t[r];return fetch(l,{method:"DELETE"}).then(e=>{if(e.ok)return e.json();throw new Error("An error occurred while fetching the data. "+e.status+" "+e.statusText+".")}).then(e=>e).catch(e=>{throw new Error("An error occurred while fetching the data. "+e.message+".")})}}const Lt=new Tt("files");var It={async applyFilters(e,t,l){let r=!1;return e?(e=JSON.parse(JSON.stringify(e)),e=e.map(e=>(delete e.values,e)),Lt.post("applyfilters",{filters:JSON.stringify(e),search_filters:JSON.stringify(t)}).then(e=>{if(e.status)return r=!0,window.dispatchEvent(l),r})):r},async saveFilters(e,t,l){let r=!1;return e&&t.length>0?Lt.post("newsavefilters",{filters:JSON.stringify(e),name:t,item_id:l}).then(e=>(e.status&&(r=!0),r)).catch(e=>(console.log(e),r)):r},async updateFilter(e,t,l){let r=!1;if(!e)return r;Lt.post("updatefilter",{filters:JSON.stringify(e),item_id:t,id:l}).then(e=>(e.status&&(r=!0),r))},async deleteFilter(e){let t=!1;if(!e)return t;Lt.delete("deletefilters",{id:e}).then(e=>(e.status&&(t=!0),t))},async getRegisteredFilters(e){let t=[];return Lt.get("getsavedfilters",{item_id:e}).then(e=>(e.status&&(t=e.data),t)).catch(e=>(console.log(e),t))},async countFiltersValues(e){return Lt.post("setFiltersValuesAvailability",{module_id:e}).then(e=>{if(e.status)return e}).catch(e=>(console.log(e),{status:!1,message:"Error"}))}};const Ut=[{value:"everywhere",label:"MOD_EMUNDUS_FILTERS_SCOPE_ALL"},{value:"eu.firstname",label:"MOD_EMUNDUS_FILTERS_SCOPE_FIRSTNAME"},{value:"eu.lastname",label:"MOD_EMUNDUS_FILTERS_SCOPE_LASTNAME"},{value:"u.username",label:"MOD_EMUNDUS_FILTERS_SCOPE_USERNAME"},{value:"u.email",label:"MOD_EMUNDUS_FILTERS_SCOPE_EMAIL"},{value:"jecc.applicant_id",label:"MOD_EMUNDUS_FILTERS_SCOPE_ID"},{value:"jecc.fnum",label:"MOD_EMUNDUS_FILTERS_SCOPE_FNUM"}];var kt={name:"App",components:{DateFilter:qe,AdvancedSelect:me,MultiSelect:ce,TimeFilter:ot,DefaultFilter:wt},props:{moduleId:{type:Number,required:!0},defaultAppliedFilters:{type:Array,default:()=>[]},defaultQuickSearchFilters:{type:Array,default:()=>[]},filters:{type:Array,default:()=>[]},countFilterValues:{type:Boolean,default:!1}},data(){return{applySuccessEvent:null,startApplyFilters:null,appliedFilters:[],openFilterOptions:!1,openSaveFilter:!1,newFilterName:"",registeredFilters:[],selectedRegisteredFilter:0,showSaveFilter:!1,currentGlobalSearch:"",globalSearch:[],currentGlobalSearchScope:"everywhere",globalSearchScopes:[]}},mounted(){this.applySuccessEvent=new Event("emundus-apply-filters-success"),this.startApplyFilters=new Event("emundus-start-apply-filters"),this.getRegisteredFilters(),this.selectedRegisteredFilter=sessionStorage.getItem("emundus-current-filter")||0,this.appliedFilters=this.defaultAppliedFilters.map(e=>(e.hasOwnProperty("operator")||(e.operator="="),e.hasOwnProperty("andorOperator")||(e.andorOperator="OR"),e)),this.globalSearch=this.defaultQuickSearchFilters,this.mapSearchScopesToAppliedFilters(),window.addEventListener("refresh-emundus-module-filters",()=>{this.applyFilters()})},methods:{onSelectNewFilter(e){let t=!1;const l=this.filters.find(t=>t.id===e);if(l){let e=JSON.parse(JSON.stringify(l));e.uid=(new Date).getTime(),e.default=!1,e.operator="select"===e.type?"IN":"=",e.andorOperator="OR",this.appliedFilters.push(e),this.openFilterOptions=!1,t=!0,this.applyFilters()}return t},applyFilters(){window.dispatchEvent(this.startApplyFilters),It.applyFilters(this.appliedFilters,this.globalSearch,this.applySuccessEvent).then(e=>{e&&this.countFilterValues&&It.countFiltersValues(this.moduleId).then(e=>{e.status&&(this.appliedFilters=e.data)})})},clearFilters(){sessionStorage.removeItem("emundus-current-filter"),this.globalSearch=[],this.appliedFilters=this.appliedFilters.map(e=>("select"===e.type?"published"===e.uid?e.value=[1]:e.value=[]:"date"===e.type||"time"===e.type?e.value=["",""]:e.value="",e)),this.applyFilters()},onFocusOutNewFilter(e){this.saveFilters(e),this.openSaveFilter=!1},saveFilters(e){e&&(e.preventDefault(),e.stopPropagation());let t=!1;return this.newFilterName.length>0&&(It.saveFilters(this.appliedFilters,this.newFilterName,this.moduleId).then(e=>{e&&this.getRegisteredFilters()}),this.openSaveFilter=!1,this.newFilterName=""),t},updateFilter(e){let t=!1;return e>0&&(t=It.updateFilter(this.appliedFilters,this.moduleId,e),t&&this.getRegisteredFilters()),t},getRegisteredFilters(){It.getRegisteredFilters(this.moduleId).then(e=>{this.registeredFilters=e})},onSelectRegisteredFilter(){if(this.selectedRegisteredFilter>0){const e=this.registeredFilters.find(e=>e.id===this.selectedRegisteredFilter);e&&(sessionStorage.setItem("emundus-current-filter",e.id),this.appliedFilters=JSON.parse(e.constraints),this.applyFilters())}else sessionStorage.removeItem("emundus-current-filter")},deleteRegisteredFilter(){const e=this.selectedRegisteredFilter;It.deleteFilter(e),this.registeredFilters=this.registeredFilters.filter(t=>t.id!==e),this.selectedRegisteredFilter=0,this.onSelectRegisteredFilter()},onClickSaveFilter(){if(this.selectedRegisteredFilter>0){const e=this.registeredFilters.find(e=>e.id===this.selectedRegisteredFilter);e&&this.updateFilter(e.id)}else this.openSaveFilter=!this.openSaveFilter,this.openSaveFilter&&this.$nextTick(()=>{this.$refs["new-filter-name"].focus()})},onRemoveFilter(e){this.appliedFilters=this.appliedFilters.filter(t=>t.uid!==e.uid),this.applyFilters()},onFilterChanged(){this.applyFilters()},onGlobalSearchChange(e="everywhere"){if(this.currentGlobalSearch.length>0){const t=this.globalSearch.find(t=>t.value===this.currentGlobalSearch&&t.scope===e);t||(this.globalSearch.push({value:this.currentGlobalSearch,scope:e}),this.applyFilters())}this.currentGlobalSearch="",this.$refs.globalSearchValues.scrollTop=0},removeGlobalSearchValue(e,t){this.globalSearch=this.globalSearch.filter(l=>l.value!==e&&l.scope!==t),this.applyFilters()},onEnterGlobalSearchDiv(){this.$refs.globalSearchValues.scrollTop=this.$refs.globalSearchValues.scrollHeight,this.$refs.globalSearchInput.focus()},translatedScope(e){const t=this.globalSearchScopes.find(t=>t.value===e);return t?this.translate(t.label):e},mapSearchScopesToAppliedFilters(){this.globalSearchScopes=[],this.globalSearchScopes=Ut}},computed:{availableFilters(){return this.filters.filter(e=>e.available)},globalSearchPlaceholder(){return this.globalSearch.length<1?this.translate("MOD_EMUNDUS_FILTERS_GLOBAL_SEARCH_PLACEHOLDER"):""}}};l("8642");const Dt=oe()(kt,[["render",R]]);var Mt=Dt,Ct={methods:{translate(e){return e.length>0&&Joomla.JText._(e)?Joomla.JText._(e):e}}};const Nt=document.getElementById("em-filters-vue");if(Nt){const e=JSON.parse(atob(Nt.getAttribute("data-applied-filters"))),t=JSON.parse(atob(Nt.getAttribute("data-filters"))),l=Object(r["c"])(Mt,{moduleId:parseInt(Nt.getAttribute("data-module-id")),defaultAppliedFilters:e,filters:t,defaultQuickSearchFilters:JSON.parse(atob(Nt.getAttribute("data-quick-search-filters"))),countFilterValues:"1"===Nt.getAttribute("data-count-filter-values")}).use(i["a"]).mixin(Ct);l.config.productionTip=!0,l.config.devtools=!1,l.mount("#em-filters-vue")}},"7e77":function(e,t,l){},8642:function(e,t,l){"use strict";l("3029")},ce2f:function(e,t,l){}});
//# sourceMappingURL=app.js.map
/*! Fabrik */

function fconsole(){if(void 0!==window.console){var e,t="";for(e=0;e<arguments.length;e++)t+=arguments[e]+" ";console.log(t)}}Request.HTML=new Class({Extends:Request,options:{update:!1,append:!1,evalScripts:!0,filter:!1,headers:{Accept:"text/html, application/xml, text/xml, */*"}},success:function(e){var t=this.options,n=this.response;n.html=e.stripScripts(function(e){n.javascript=e});var i=n.html.match(/<body[^>]*>([\s\S]*?)<\/body>/i);i&&(n.html=i[1]);var s=new Element("div").set("html",n.html);if(n.tree=s.childNodes,n.elements=s.getElements(t.filter||"*"),t.filter&&(n.tree=n.elements),t.update){var r=document.id(t.update).empty();t.filter?r.adopt(n.elements):r.set("html",n.html)}else if(t.append){var o=document.id(t.append);t.filter?n.elements.reverse().inject(o):o.adopt(s.getChildren())}t.evalScripts&&Browser.exec(n.javascript),this.onSuccess(n.tree,n.elements,n.html,n.javascript)}}),Element.implement({keepCenter:function(){this.makeCenter(),window.addEvent("scroll",function(){this.makeCenter()}.bind(this)),window.addEvent("resize",function(){this.makeCenter()}.bind(this))},makeCenter:function(){var e=jQuery(window).width()/2-this.getWidth()/2,t=window.getScrollTop()+(jQuery(window).height()/2-this.getHeight()/2);this.setStyles({left:e,top:t})}}),Array.prototype.searchFor=function(e){var t;for(t=0;t<this.length;t++)if(0===this[t].indexOf(e))return t;return-1},Object.keys||(Object.keys=function(e){return jQuery.map(e,function(e,t){return t})});
document.addEventListener("DOMContentLoaded",(()=>{const e=[...document.querySelectorAll(".folder-url, .component-folder-url, .plugin-folder-url, .layout-folder-url")],t=[...document.querySelectorAll(".folder ul, .component-folder ul, .plugin-folder ul, .layout-folder ul")],l=[...document.querySelectorAll(".show > ul")],r=[...document.querySelectorAll("#fileModal .folder-url")],d=[...document.querySelectorAll("#folderModal .folder-url")];t.forEach((e=>{e.classList.add("hidden")})),l.forEach((e=>{e.classList.remove("hidden")})),e.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault();const t=e.currentTarget.parentNode.querySelector("ul");t&&(t.classList.contains("hidden")?t.classList.remove("hidden"):t.classList.add("hidden"))}))})),r.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),r.forEach((e=>{e.classList.remove("selected")})),e.currentTarget.classList.add("selected");const t="media"===e.currentTarget.dataset.base?1:0;[...document.querySelectorAll("#fileModal input.address")].forEach((t=>{t.value=e.currentTarget.getAttribute("data-id")})),[...document.querySelectorAll('#fileModal input[name="isMedia"]')].forEach((e=>{e.value=t}))}))})),d.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),d.forEach((e=>{e.classList.remove("selected")})),e.currentTarget.classList.add("selected");const t="media"===e.currentTarget.dataset.base?1:0;[...document.querySelectorAll("#folderModal input.address")].forEach((t=>{t.value=e.currentTarget.getAttribute("data-id")})),[...document.querySelectorAll('#folderModal input[name="isMedia"]')].forEach((e=>{e.value=t}))}))}));const o=[...document.querySelector("#treeholder .treeselect").querySelectorAll(".folder.show")];if(document.querySelector("p.lead.hidden.path")){let e=document.querySelector("p.lead.hidden.path").innerText;e&&"/"===e.charAt(0)&&(e=e.slice(1),e=e.split("/"),e=e[e.length-1],o.forEach(((e,t)=>{e.querySelector("a").classList.add("active"),t===o.length-1&&[...e.querySelector("ul").querySelectorAll("li")].forEach((e=>{const t=e.querySelector("a"),l=t.querySelector("span");l&&l.innerText.trim()&&t.classList.add("active")}))})))}const a=document.getElementById("image-crop");if(a){const e=document.getElementById("imageWidth").value,t=document.getElementById("imageHeight").value;new window.Cropper(a,{viewMode:1,scalable:!0,zoomable:!1,movable:!1,dragMode:"crop",cropBoxMovable:!0,cropBoxResizable:!0,autoCrop:!0,autoCropArea:1,background:!0,center:!0,minCanvasWidth:e,minCanvasHeight:t}),a.addEventListener("crop",(e=>{document.getElementById("x").value=e.detail.x,document.getElementById("y").value=e.detail.y,document.getElementById("w").value=e.detail.width,document.getElementById("h").value=e.detail.height}))}}));
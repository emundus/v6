((e,s)=>{const t=()=>{window.removeEventListener("load",t);const a=[].slice.call(e.querySelectorAll(".system-counter"));a.length&&a.forEach((t=>{const a=t.getAttribute("data-url");a&&s&&s.request&&"function"==typeof s.request&&s.enqueueRequest({url:a,method:"POST",promise:!0}).then((a=>{const n=a.responseText;let c;try{c=JSON.parse(n)}catch(e){throw new Error("Failed to parse JSON")}if(c.error||!c.success)t.classList.remove("icon-spin"),t.classList.remove("icon-spinner"),t.classList.add("text-danger"),t.classList.add("icon-remove");else if(c.data){const a=e.createElement("span");a.classList.add("float-end"),a.classList.add("badge"),a.classList.add("bg-warning","text-dark"),a.innerHTML=s.sanitizeHtml(c.data),t.parentNode.replaceChild(a,t)}else t.classList.remove("icon-spin"),t.classList.remove("icon-spinner"),t.classList.add("icon-check"),t.classList.add("text-success")})).catch((()=>{t.classList.remove("icon-spin"),t.classList.remove("icon-spinner"),t.classList.add("text-danger"),t.classList.add("icon-remove")}))}))};window.addEventListener("load",(()=>{setTimeout(t,300)}))})(document,Joomla);
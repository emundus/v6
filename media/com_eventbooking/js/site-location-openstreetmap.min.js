!function(l,r){Joomla.submitbutton=function(o){var t=l.adminForm;if("cancel"===o)Joomla.submitform(o);else{if(""===t.name.value)return alert(Joomla.JText._("EB_ENTER_LOCATION_NAME")),void t.name.focus();Joomla.submitform(o)}},r(l).ready(function(){var o=Joomla.getOptions("coordinates"),t=Joomla.getOptions("zoomLevel"),a=Joomla.getOptions("baseUri"),e=L.map("map-canvas",{center:[o[0],o[1]],zoom:t,zoomControl:!0,attributionControl:!1,scrollWheelZoom:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{id:"mapbox.streets"}).addTo(e);var n=L.marker([o[0],o[1]],{draggable:!0}).addTo(e);n.on("dragend",function(o){var t=o.target.getLatLng();r("#coordinates").val(t.lat+","+t.lng);var a="https://nominatim.openstreetmap.org/reverse?format=jsonv2&lat="+t.lat+"&lon="+t.lng;r.ajax({type:"GET",url:a,dataType:"json",success:function(o,t,a){r("#address").val(o.display_name)},error:function(o,t,a){alert(t)}})}),r("#address").autocomplete({serviceUrl:a+"/index.php?option=com_eventbooking&task=location.search",minChars:3,onSelect:function(o){var t=l.adminForm;o.name&&""===t.name.value&&(t.name.value=o.name),o.coordinates&&(t.coordinates.value=o.coordinates),o.city&&r("#city").val(o.city),o.state&&r("#state").val(o.state);var a=L.latLng(o.lat,o.long);n.setLatLng(a),e.panTo(a)}}),r("#btn-save-location").on("click",function(){Joomla.submitbutton("save")}),r("#btn-cancel").on("click",function(){Joomla.submitbutton("cancel")}),r("#btn-delete-location").on("click",function(){confirm(Joomla.JText._("EB_DELETE_LOCATION_CONFIRM"))&&Joomla.submitform("delete")})})}(document,jQuery);
(function(t){function e(e){for(var s,o,r=e[0],l=e[1],d=e[2],m=0,u=[];m<r.length;m++)o=r[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&u.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(u.length)u.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var d=0;d<r.length;d++)e(r[d]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"00b5":function(t,e,a){"use strict";a("6a07")},"032c":function(t,e,a){"use strict";a("5c87")},"0492":function(t,e,a){"use strict";a("adea")},"04f6":function(t,e,a){},"077f":function(t,e,a){"use strict";a("0d4c")},"0abd":function(t,e,a){},"0b98":function(t,e,a){"use strict";a("3a55")},"0d4c":function(t,e,a){},"0fd5":function(t,e,a){var s={"./af":"8206","./af.js":"8206","./ar":"cdac","./ar-dz":"7f26","./ar-dz.js":"7f26","./ar-kw":"8e88","./ar-kw.js":"8e88","./ar-ly":"cd65","./ar-ly.js":"cd65","./ar-ma":"e8d6","./ar-ma.js":"e8d6","./ar-sa":"a284","./ar-sa.js":"a284","./ar-tn":"64f7","./ar-tn.js":"64f7","./ar.js":"cdac","./az":"b139","./az.js":"b139","./be":"98e2","./be.js":"98e2","./bg":"a1a5","./bg.js":"a1a5","./bm":"4d0d","./bm.js":"4d0d","./bn":"e8ae","./bn-bd":"5dd8","./bn-bd.js":"5dd8","./bn.js":"e8ae","./bo":"bcf2","./bo.js":"bcf2","./br":"69f1","./br.js":"69f1","./bs":"24d1","./bs.js":"24d1","./ca":"3507","./ca.js":"3507","./cs":"d15f","./cs.js":"d15f","./cv":"7bfe","./cv.js":"7bfe","./cy":"1d35","./cy.js":"1d35","./da":"a019","./da.js":"a019","./de":"0cfa","./de-at":"edea","./de-at.js":"edea","./de-ch":"9aae","./de-ch.js":"9aae","./de.js":"0cfa","./dv":"1722","./dv.js":"1722","./el":"5390","./el.js":"5390","./en-au":"dad9","./en-au.js":"dad9","./en-ca":"6f13","./en-ca.js":"6f13","./en-gb":"6267","./en-gb.js":"6267","./en-ie":"80b1","./en-ie.js":"80b1","./en-il":"ad38","./en-il.js":"ad38","./en-in":"eb60","./en-in.js":"eb60","./en-nz":"39db","./en-nz.js":"39db","./en-sg":"c30d","./en-sg.js":"c30d","./eo":"1a30","./eo.js":"1a30","./es":"48a3","./es-do":"f306","./es-do.js":"f306","./es-mx":"56d9","./es-mx.js":"56d9","./es-us":"60bf","./es-us.js":"60bf","./es.js":"48a3","./et":"f891","./et.js":"f891","./eu":"a403","./eu.js":"a403","./fa":"ce14","./fa.js":"ce14","./fi":"fc14","./fi.js":"fc14","./fil":"f46e","./fil.js":"f46e","./fo":"2bf2","./fo.js":"2bf2","./fr":"c1e8","./fr-ca":"50a2","./fr-ca.js":"50a2","./fr-ch":"b087","./fr-ch.js":"b087","./fr.js":"c1e8","./fy":"4665","./fy.js":"4665","./ga":"b396","./ga.js":"b396","./gd":"056c","./gd.js":"056c","./gl":"efde","./gl.js":"efde","./gom-deva":"12ea","./gom-deva.js":"12ea","./gom-latn":"8e2c","./gom-latn.js":"8e2c","./gu":"533d","./gu.js":"533d","./he":"7520","./he.js":"7520","./hi":"d2f3","./hi.js":"d2f3","./hr":"7e79","./hr.js":"7e79","./hu":"148f","./hu.js":"148f","./hy-am":"6711","./hy-am.js":"6711","./id":"2b10","./id.js":"2b10","./is":"1feb","./is.js":"1feb","./it":"1b21","./it-ch":"8d2c","./it-ch.js":"8d2c","./it.js":"1b21","./ja":"926e","./ja.js":"926e","./jv":"5a78","./jv.js":"5a78","./ka":"5975","./ka.js":"5975","./kk":"cc93","./kk.js":"cc93","./km":"66e1","./km.js":"66e1","./kn":"5421","./kn.js":"5421","./ko":"1297","./ko.js":"1297","./ku":"16f8","./ku.js":"16f8","./ky":"3df9","./ky.js":"3df9","./lb":"c124","./lb.js":"c124","./lo":"20a5","./lo.js":"20a5","./lt":"c14a","./lt.js":"c14a","./lv":"c553","./lv.js":"c553","./me":"ae25","./me.js":"ae25","./mi":"6f56","./mi.js":"6f56","./mk":"c8fc","./mk.js":"c8fc","./ml":"752d","./ml.js":"752d","./mn":"f09e","./mn.js":"f09e","./mr":"0a56","./mr.js":"0a56","./ms":"55b6","./ms-my":"a9e9","./ms-my.js":"a9e9","./ms.js":"55b6","./mt":"624b","./mt.js":"624b","./my":"e256","./my.js":"e256","./nb":"e1d5","./nb.js":"e1d5","./ne":"761a","./ne.js":"761a","./nl":"a0f2","./nl-be":"5cb2","./nl-be.js":"5cb2","./nl.js":"a0f2","./nn":"4fda","./nn.js":"4fda","./oc-lnc":"ec3d","./oc-lnc.js":"ec3d","./pa-in":"2f2f","./pa-in.js":"2f2f","./pl":"317f","./pl.js":"317f","./pt":"5553","./pt-br":"a9ab","./pt-br.js":"a9ab","./pt.js":"5553","./ro":"db12","./ro.js":"db12","./ru":"7aa4","./ru.js":"7aa4","./sd":"e87b","./sd.js":"e87b","./se":"a296","./se.js":"a296","./si":"51ec","./si.js":"51ec","./sk":"608b","./sk.js":"608b","./sl":"b367","./sl.js":"b367","./sq":"f68f","./sq.js":"f68f","./sr":"0991","./sr-cyrl":"c577","./sr-cyrl.js":"c577","./sr.js":"0991","./ss":"cf76","./ss.js":"cf76","./sv":"0153","./sv.js":"0153","./sw":"cb6f","./sw.js":"cb6f","./ta":"8bfa","./ta.js":"8bfa","./te":"668b","./te.js":"668b","./tet":"eae7","./tet.js":"eae7","./tg":"70b1","./tg.js":"70b1","./th":"7180","./th.js":"7180","./tk":"4912","./tk.js":"4912","./tl-ph":"f8bb","./tl-ph.js":"f8bb","./tlh":"b026","./tlh.js":"b026","./tr":"371d","./tr.js":"371d","./tzl":"c744","./tzl.js":"c744","./tzm":"787a","./tzm-latn":"71e0","./tzm-latn.js":"71e0","./tzm.js":"787a","./ug-cn":"6b5c","./ug-cn.js":"6b5c","./uk":"8c0c","./uk.js":"8c0c","./ur":"519e","./ur.js":"519e","./uz":"7982","./uz-latn":"3137","./uz-latn.js":"3137","./uz.js":"7982","./vi":"ae22","./vi.js":"ae22","./x-pseudo":"1129","./x-pseudo.js":"1129","./yo":"b4bf","./yo.js":"b4bf","./zh-cn":"fdc4","./zh-cn.js":"fdc4","./zh-hk":"747d","./zh-hk.js":"747d","./zh-mo":"fe39","./zh-mo.js":"fe39","./zh-tw":"d3e0","./zh-tw.js":"d3e0"};function i(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}i.keys=function(){return Object.keys(s)},i.resolve=n,t.exports=i,i.id="0fd5"},1:function(t,e){},1132:function(t,e,a){},"11ef":function(t,e,a){"use strict";a("56d1")},"1c87":function(t,e,a){},"1efc":function(t,e,a){"use strict";a("0abd")},"203d":function(t,e,a){},2051:function(t,e,a){t.exports={"form-title-block":"formbuilder_form-title-block_5RTZD",fabrikgrid_0:"formbuilder_fabrikgrid_0_3YJe0","btn-default":"formbuilder_btn-default_2KKDt",fabrikgrid_1:"formbuilder_fabrikgrid_1_3r34r",radio:"formbuilder_radio_1mH7u","btn-group":"formbuilder_btn-group_iOMW_",fabrikgrid_radio:"formbuilder_fabrikgrid_radio_1b35B",fabrikinput:"formbuilder_fabrikinput_2CBVl",fabrikgrid_checkbox:"formbuilder_fabrikgrid_checkbox_1GeWx",checkbox:"formbuilder_checkbox_37ADU","row-fluid":"formbuilder_row-fluid_1_FRK",fabrikLabel:"formbuilder_fabrikLabel_GywiO",legend:"formbuilder_legend_1lyIJ",legend2:"formbuilder_legend2_1fRW7","input-append":"formbuilder_input-append_1OYFJ","input-medium":"formbuilder_input-medium_1s7Ta",dinherit:"formbuilder_dinherit_1f9Go","fa-plus-circle":"formbuilder_fa-plus-circle_3NTX1",btnPM:"formbuilder_btnPM_8_vg5",legendSide:"formbuilder_legendSide_1dZ-S","mr-rightS":"formbuilder_mr-rightS_1PXIe",BtnModal:"formbuilder_BtnModal_2Fatp",inputF:"formbuilder_inputF_3ZZhI",formulairedepresentation:"formbuilder_formulairedepresentation_27G6d",coldmd2left:"formbuilder_coldmd2left_3H6mQ","header-form-page":"formbuilder_header-form-page_2AY73",page_header:"formbuilder_page_header_mpgq7",introP:"formbuilder_introP_dA-EH",groupintro:"formbuilder_groupintro_12l-y",dpflex:"formbuilder_dpflex_D57Il",toright:"formbuilder_toright_2Mja5",suboptions:"formbuilder_suboptions_2GkrG","bootstrap-datetimepicker-widget":"formbuilder_bootstrap-datetimepicker-widget_3ZZGd","separator-top":"formbuilder_separator-top_314Rd","translate-icon":"formbuilder_translate-icon_3WUcW","translate-icon-selected":"formbuilder_translate-icon-selected_3Zf_5","fa-sort-down":"formbuilder_fa-sort-down_3L8u8","form-page":"formbuilder_form-page_3faVI","groups-block":"formbuilder_groups-block_OatWX","group-item-block":"formbuilder_group-item-block_1ZEQy","form-viewer-builder":"formbuilder_form-viewer-builder_IymSt","elements-block":"formbuilder_elements-block_1dN63","builder-item-element":"formbuilder_builder-item-element_324-M","actions-item-bar":"formbuilder_actions-item-bar_35DCg","element-updating":"formbuilder_element-updating_1qseD","draggable-item":"formbuilder_draggable-item_204ew","builder-item-element__properties":"formbuilder_builder-item-element__properties_3waqN",unpublished:"formbuilder_unpublished_207p7","actions-update-label":"formbuilder_actions-update-label_u2sU0","fa-check":"formbuilder_fa-check_1-vim","fa-times":"formbuilder_fa-times_2_Ca4",inlineflex:"formbuilder_inlineflex_1cMZu","send-form-button":"formbuilder_send-form-button_13XEK","test-form-button":"formbuilder_test-form-button_1m4rx","form-control":"formbuilder_form-control_1sLrw","draggable-span":"formbuilder_draggable-span_3gVM-",fabrik_characters_left:"formbuilder_fabrik_characters_left_30lgO",badge:"formbuilder_badge_fjcOx","toggle-editor":"formbuilder_toggle-editor_mm3My","btn-toolbar":"formbuilder_btn-toolbar_1Zju0","pull-right":"formbuilder_pull-right_2pasD",clearfix:"formbuilder_clearfix_2W8Vs","form-section":"formbuilder_form-section_3mROZ","form-section__current":"formbuilder_form-section__current_1G9J8",tox:"formbuilder_tox_38Q-k","tox-statusbar":"formbuilder_tox-statusbar_1U5Ap","js-editor-tinymce":"formbuilder_js-editor-tinymce__f8a8","button-add-option":"formbuilder_button-add-option_29Ykf","form-pages":"formbuilder_form-pages_2D76b","plugins-list":"formbuilder_plugins-list_3zUgl","no-elements-tip":"formbuilder_no-elements-tip_oU_P5","v--modal-overlay":"formbuilder_v--modal-overlay_2UzqN","v--modal":"formbuilder_v--modal_3TLc0","icon-featured":"formbuilder_icon-featured_34mCE","icon-default":"formbuilder_icon-default_3rehk","icon-star":"formbuilder_icon-star_ZpyzP","settings-elt":"formbuilder_settings-elt_24mtB","delete-icon-elt":"formbuilder_delete-icon-elt_1k4rJ","tool-icon":"formbuilder_tool-icon_24zOJ"}},2818:function(t,e,a){"use strict";a("4075")},"2bb7":function(t,e,a){},"2fce":function(t,e,a){},3054:function(t,e,a){"use strict";a("9977")},"36fb":function(t,e,a){"use strict";a("4dac")},"37a1":function(t,e,a){},"3a55":function(t,e,a){},"3b6a":function(t,e,a){"use strict";a("5b2d")},"3c36":function(t,e,a){},4075:function(t,e,a){},"420f":function(t,e,a){},"444a":function(t,e,a){},"4bce":function(t,e,a){"use strict";a("3c36")},"4c5c":function(t,e,a){},"4cd0":function(t,e,a){"use strict";a("04f6")},"4cea":function(t,e,a){"use strict";a("a4bc")},"4dac":function(t,e,a){},"4dc7":function(t,e,a){},"4e62":function(t,e,a){},5093:function(t,e,a){"use strict";a("9266")},5393:function(t,e,a){"use strict";a("d82d")},"54a2":function(t,e,a){},5572:function(t,e,a){},"56d1":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("e832"),i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"com_emundus_vue em-flex-column em-flex-col-center"},["attachments"===t.componentName?a("Attachments",{attrs:{fnum:t.data.fnum,user:t.data.user}}):a("transition",{attrs:{name:"slide-right"}},[a(t.$props.component,{tag:"component"})],1)],1)},n=[],o=a("4e22"),r=a.n(o),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"em-attachments"}},[a("div",{staticClass:"head"},[a("div",{staticClass:"displayed-user"},[a("p",{staticClass:"name"},[t._v(" "+t._s(t.displayedUser.firstname)+" "+t._s(t.displayedUser.lastname)+" ")]),a("p",{staticClass:"email"},[t._v(t._s(t.displayedUser.email)+" ")]),t.progress?a("p",{staticClass:"attachment-progress"},[t._v(" - "+t._s(t.progress)+"% "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_COMPLETED")))]):t._e()]),a("div",{staticClass:"prev-next-files"},[t.fnums.length>1?a("div",{staticClass:"prev",class:{active:t.fnumPosition>0},on:{click:function(e){return t.changeFile(t.fnumPosition-1)}}},[a("span",{staticClass:"material-icons"},[t._v("arrow_back")])]):t._e(),t.fnums.length>1?a("div",{staticClass:"next",class:{active:t.fnumPosition<t.fnums.length-1},on:{click:function(e){return t.changeFile(t.fnumPosition+1)}}},[a("span",{staticClass:"material-icons"},[t._v("arrow_forward")])]):t._e()])]),a("div",{staticClass:"wrapper",class:{loading:t.loading}},[a("div",{attrs:{id:"filters"}},[a("div",{staticClass:"searchbar-wrapper"},[a("input",{ref:"searchbar",attrs:{id:"searchbar",type:"text",placeholder:t.translate("COM_EMUNDUS_ACTIONS_SEARCH")},on:{input:t.searchInFiles}}),a("span",{staticClass:"material-icons search"},[t._v("search")]),a("span",{staticClass:"material-icons clear",on:{click:t.resetSearch}},[t._v("clear")])]),a("div",{staticClass:"actions"},[Object.entries(t.thisAttachmentCategories).length>0?a("select",{ref:"categoryFilter",staticClass:"category-select",attrs:{name:"category"},on:{change:t.filterByCategory}},[a("option",{attrs:{value:"all"}},[t._v(t._s(t.translate("COM_EMUNDUS_EMAILS_SELECT_CATEGORY")))]),t._l(t.thisAttachmentCategories,(function(e,s){return a("option",{key:s,domProps:{value:s}},[t._v(" "+t._s(e)+" ")])}))],2):t._e(),t.canExport?a("div",{staticClass:"btn-icon-text",class:{disabled:t.checkedAttachments.length<1},on:{click:t.exportAttachments}},[a("span",{staticClass:"material-icons export"},[t._v("file_upload")]),a("span",[t._v(t._s(t.translate("COM_EMUNDUS_EXPORTS_EXPORT")))])]):t._e(),a("span",{staticClass:"material-icons refresh",attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_REFRESH_TITLE")},on:{click:function(e){return t.refreshAttachments(!0)}}},[t._v(" autorenew ")]),t.canDelete?a("span",{staticClass:"material-icons delete",class:{disabled:t.checkedAttachments.length<1},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_DELETE_TITLE")},on:{click:t.confirmDeleteAttachments}},[t._v(" delete_outlined ")]):t._e()])]),t.attachments.length?a("div",{staticClass:"table-wrapper"},[a("table",{class:{loading:t.loading},attrs:{"aria-describedby":"Table of attachments information"}},[a("thead",[a("tr",[a("th",{attrs:{id:"check-th"}},[a("input",{staticClass:"attachment-check",attrs:{type:"checkbox"},on:{change:t.updateAllCheckedAttachments}})]),a("th",{attrs:{id:"name"},on:{click:function(e){return t.orderBy("value")}}},[t._v(" "+t._s(t.translate("NAME"))+" "),"value"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"value"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{staticClass:"date",attrs:{id:"date"},on:{click:function(e){return t.orderBy("timedate")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SEND_DATE"))+" "),"timedate"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"timedate"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{staticClass:"desc",attrs:{id:"desc"},on:{click:function(e){return t.orderBy("description")}}},[t._v(" "+t._s(t.translate("DESCRIPTION"))+" "),"description"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"description"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{staticClass:"category",attrs:{id:"category"},on:{click:function(e){return t.orderBy("category")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CATEGORY"))+" "),"category"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"category"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{staticClass:"status",attrs:{id:"status"},on:{click:function(e){return t.orderBy("is_validated")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CHECK"))+" "),"is_validated"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"is_validated"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{attrs:{id:"user"},on:{click:function(e){return t.orderBy("user_id")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_UPLOADED_BY"))+" "),"user_id"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"user_id"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{attrs:{id:"modified_by"},on:{click:function(e){return t.orderBy("modified_by")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFIED_BY"))+" "),"modified_by"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"modified_by"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{staticClass:"date",attrs:{id:"modified"},on:{click:function(e){return t.orderBy("modified")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFICATION_DATE"))+" "),"modified"==t.sort.orderBy&&"asc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_upward")]):t._e(),"modified"==t.sort.orderBy&&"desc"==t.sort.order?a("span",{staticClass:"material-icons"},[t._v("arrow_downward")]):t._e()]),a("th",{staticClass:"permissions",attrs:{id:"permissions"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_PERMISSIONS"))+" ")])])]),a("tbody",t._l(t.displayedAttachments,(function(e){return a("AttachmentRow",{key:e.aid,attrs:{attachment:e,checkedAttachmentsProp:t.checkedAttachments,canUpdate:t.canUpdate},on:{"open-modal":function(a){return t.openModal(e)},"update-checked-attachments":t.updateCheckedAttachments,"update-status":t.updateStatus,"change-permission":t.changePermission}})})),1)])]):a("p",[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_NO_ATTACHMENTS_FOUND"))+" ")])]),a("modal",{attrs:{id:"edit-modal",name:"edit",height:"70%",width:"70%",minWidth:690,minHeight:550,styles:"display:flex;flex-direction:column;justify-content:center;align-items:center;"}},[a("div",{staticClass:"modal-head"},[a("div",{staticClass:"flex-start"},[a("span",[t._v(t._s(t.selectedAttachment.filename))])]),a("div",{staticClass:"flex-end"},[t.canDownload?a("a",{staticClass:"download btn-icon-text",attrs:{href:t.attachmentPath,download:""}},[a("span",{staticClass:"material-icons"},[t._v(" file_download ")]),a("span",[t._v(t._s(t.translate("LINK_TO_DOWNLOAD")))])]):t._e(),a("div",{staticClass:"prev-next-attachments"},[a("div",{staticClass:"prev",class:{active:t.selectedAttachmentPosition>0},on:{click:function(e){return t.changeAttachment(t.selectedAttachmentPosition-1,!0)}}},[a("span",{staticClass:"material-icons"},[t._v(" navigate_before ")])]),a("span",{staticClass:"lvl"},[t._v(t._s(t.selectedAttachmentPosition+1)+" / "+t._s(t.displayedAttachments.length))]),a("div",{staticClass:"next",class:{active:t.selectedAttachmentPosition<t.displayedAttachments.length-1},on:{click:function(e){return t.changeAttachment(t.selectedAttachmentPosition+1)}}},[a("span",{staticClass:"material-icons"},[t._v(" navigate_next ")])])]),a("span",{staticClass:"material-icons em-pointer",on:{click:t.closeModal}},[t._v(" close ")])])]),a("transition",{attrs:{name:t.slideTransition},on:{"before-leave":t.beforeLeaveSlide}},[!t.modalLoading&&t.displayedUser.user_id&&t.displayedFnum?a("div",{staticClass:"modal-body"},[a("AttachmentPreview",{attrs:{user:t.displayedUser.user_id},on:{fileNotFound:function(e){t.canDownload=!1},canDownload:function(e){t.canDownload=!0}}}),a("AttachmentEdit",{attrs:{fnum:t.displayedFnum},on:{closeModal:t.closeModal,saveChanges:t.updateAttachment}})],1):t._e()])],1),t.loading?a("div",{staticClass:"vue-em-loader em-loader"}):t._e()],1)},d=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"em-attachment-preview"}},[a("div",{ref:"a-preview",class:{"overflow-x":t.overflowX,"overflow-y":t.overflowY},attrs:{id:"attachment-preview"}}),a("div",{class:{active:t.msg&&t.openMsg},attrs:{id:"msg"}},[a("p",[t._v(t._s(t.msg))])])])},m=[],u=a("7338"),p=a.n(u),h=(t={"Content-Type":"application/json","Cache-Control":"no-cache"})=>p.a.create({timeout:3e4,headers:t,responseType:"json",withCredentials:!0}),_={async getAttachmentProgress(t){try{const e=await h().get("index.php?option=com_emundus&controller=files&task=getattachmentprogress",{params:{fnum:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getAttachmentsByUser(t){try{const e=await h().get("index.php?option=com_emundus&controller=application&task=getuserattachments",{params:{user_id:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getAttachmentsByFnum(t){try{const e=await h().get("index.php?option=com_emundus&controller=application&task=getattachmentsbyfnum",{params:{fnum:t}});return e.data.status&&("string"===typeof e.data.attachments&&(e.data.attachments=JSON.parse(e.data.attachments)),"object"===typeof e.data.attachments&&(e.data.attachments=Object.values(e.data.attachments)),e.data.attachments.forEach(t=>{null===t.is_validated&&(t.is_validated=-2),t.show=!0})),e.data}catch(e){return{status:!1,msg:e.message}}},async getAttachmentCategories(){try{const t=await h().get("index.php?option=com_emundus&controller=files&task=getattachmentcategories");return t.data}catch(t){return{status:!1,msg:t.message}}},async deleteAttachments(t,e,a){try{const s=new FormData;return s.append("ids",JSON.stringify(a)),await h().post(`index.php?option=com_emundus&controller=application&task=deleteattachement&fnum=${t}&student_id=${e}`,s,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){return{status:!1,msg:s.message}}},async updateAttachment(t){try{const e=await h().post("index.php?option=com_emundus&controller=application&task=updateattachment",t,{headers:{"Content-Type":"multipart/form-data"}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getPreview(t,e){try{const a=await h().get("index.php?option=com_emundus&controller=application&task=getattachmentpreview",{params:{user:t,filename:e}});return a.data}catch(a){return{status:!1,msg:a.message}}},exportAttachments(t,e,a){const s=new FormData;return s.append("student_id",t),s.append("fnum",e),a.forEach(t=>{s.append("ids[]",t)}),h().post("index.php?option=com_emundus&controller=application&task=exportpdf",s,{headers:{"Content-Type":"multipart/form-data"}})}},g={props:{user:{type:Number,required:!0}},data(){return{attachment:this.$store.state.attachment.selectedAttachment,preview:"",overflowX:!1,overflowY:!1,style:"",msg:"",openMsg:!1}},mounted(){this.attachment=this.$store.state.attachment.selectedAttachment,this.getPreview()},methods:{async getPreview(){let t;this.$store.state.attachment.previews[this.attachment.aid]?t=this.$store.state.attachment.previews[this.attachment.aid]:(t=await _.getPreview(this.user,this.attachment.filename),t.status&&this.$store.commit("attachment/setPreview",{preview:t,id:this.attachment.aid})),this.$emit("canDownload"),t.status?(this.preview=t.content,this.overflowX=t.overflowX,this.overflowY=t.overflowY,this.style=t.style,t.msg&&(this.msg=t.msg,this.openMsg=!0,setTimeout(()=>{this.openMsg=!1},3e3))):("file_not_found"===t.error&&this.$emit("fileNotFound"),this.overflowX=!1,this.overflowY=!1,this.preview=t.content,this.msg=""),null===this.$refs["a-preview"].shadowRoot&&this.$refs["a-preview"].attachShadow({mode:"open"}),this.$refs["a-preview"].shadowRoot.innerHTML=null!=this.preview?this.preview:"","sheet"==this.style?this.addSheetStyles():"presentation"==this.style?this.addPresentationStyles():"word"==this.style&&this.addWordStyles()},addSheetStyles(){const t=this.$refs["a-preview"].shadowRoot.querySelectorAll("div");t.forEach((t,e)=>{t.style.width="fit-content",t.style.margin="20px auto",t.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.1)",e>0&&(t.style.display="none")});const e=this.$refs["a-preview"].shadowRoot.querySelector(".navigation");e&&(e.style.display="flex",e.style.flexDirection="row",e.style.justifyContent="flex-start",e.style.alignItems="center",e.querySelectorAll("li").forEach((e,a)=>{e.style.listStyleType="none",e.style.margin="0 10px",e.addEventListener("click",()=>{t.forEach((t,e)=>{t.style.display=e==a?"block":"none"})})}))},addPresentationStyles(){const t=this.$refs["a-preview"].shadowRoot.querySelectorAll(".slide");t.forEach(t=>{t.style.padding="16px",t.style.margin="20px",t.style.width="calc(100% - 72px)",t.style.boxShadow="0px 0px 10px rgba(0, 0, 0, 0.1)",t.style.borderRadius="8px",t.style.backgroundColor="white"})},addWordStyles(){const t=this.$refs["a-preview"].shadowRoot.querySelector(".wrapper");t&&(t.style.border="var(--border-color)",t.style.boxShadow="var(--box-shadow)",t.style.backgroundColor="white",t.style.padding="20px",t.style.margin="16px",t.style.overflow="hidden")}},watch:{"$store.state.attachment.selectedAttachment":function(){const t=Object.keys(this.$store.state.attachment.selectedAttachment);0!==t.length&&(this.attachment=this.$store.state.attachment.selectedAttachment,this.openMsg=!1,this.getPreview())}}},f=g,b=(a("f276"),a("17e1")),v=Object(b["a"])(f,c,m,!1,null,"5747f17c",null),O=v.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"attachment-edit"}},[a("div",{staticClass:"wrapper"},[a("h2",{staticClass:"title"},[t._v(t._s(t.attachment.value))]),a("div",{staticClass:"editable-data"},[a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"description"}},[t._v(t._s(t.translate("DESCRIPTION"))+" ")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.attachmentDescription,expression:"attachmentDescription"}],attrs:{name:"description",type:"text",disabled:!t.canUpdate},domProps:{value:t.attachmentDescription},on:{input:function(e){e.target.composing||(t.attachmentDescription=e.target.value)}}})]),a("div",{staticClass:"input-group valid-state",class:{success:1==t.attachmentIsValidated,warning:2==t.attachmentIsValidated,error:0==t.attachmentIsValidated}},[a("label",{attrs:{for:"status"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CHECK")))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.attachmentIsValidated,expression:"attachmentIsValidated"}],attrs:{name:"status",disabled:!t.canUpdate},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.attachmentIsValidated=e.target.multiple?a:a[0]},t.updateAttachmentStatus]}},[a("option",{attrs:{value:"1"}},[t._v(t._s(t.translate("VALID")))]),a("option",{attrs:{value:"0"}},[t._v(t._s(t.translate("INVALID")))]),a("option",{attrs:{value:"2"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WARNING"))+" ")]),a("option",{attrs:{value:"-2"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WAITING"))+" ")])])]),t.canUpdate?a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"replace"}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_REPLACE")))]),a("input",{attrs:{type:"file",name:"replace",accept:t.allowedType},on:{change:t.updateFile}})]):t._e(),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"can_be_viewed"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CAN_BE_VIEWED")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachmentCanBeViewed,expression:"attachmentCanBeViewed"}],attrs:{type:"checkbox",name:"can_be_viewed",disabled:!t.canUpdate},domProps:{checked:Array.isArray(t.attachmentCanBeViewed)?t._i(t.attachmentCanBeViewed,null)>-1:t.attachmentCanBeViewed},on:{change:function(e){var a=t.attachmentCanBeViewed,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.attachmentCanBeViewed=a.concat([n])):o>-1&&(t.attachmentCanBeViewed=a.slice(0,o).concat(a.slice(o+1)))}else t.attachmentCanBeViewed=i}}})]),a("div",{staticClass:"input-group"},[a("label",{attrs:{for:"can_be_deleted"}},[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CAN_BE_DELETED")))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.attachmentCanBeDeleted,expression:"attachmentCanBeDeleted"}],attrs:{type:"checkbox",name:"can_be_deleted",disabled:!t.canUpdate},domProps:{checked:Array.isArray(t.attachmentCanBeDeleted)?t._i(t.attachmentCanBeDeleted,null)>-1:t.attachmentCanBeDeleted},on:{change:function(e){var a=t.attachmentCanBeDeleted,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.attachmentCanBeDeleted=a.concat([n])):o>-1&&(t.attachmentCanBeDeleted=a.slice(0,o).concat(a.slice(o+1)))}else t.attachmentCanBeDeleted=i}}})])]),a("div",{staticClass:"non-editable-data"},[a("div",[a("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SEND_DATE")))]),a("span",[t._v(t._s(t.formattedDate(t.attachment.timedate)))])]),t.attachment.user_id?a("div",[a("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_UPLOADED_BY")))]),a("span",[t._v(t._s(t.getUserNameById(t.attachment.user_id)))])]):t._e(),t.attachment.category?a("div",[a("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_CATEGORY")))]),a("span",[t._v(t._s(this.categories[t.attachment.category]))])]):t._e(),t.attachment.modified_by?a("div",[a("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFIED_BY")))]),a("span",[t._v(t._s(t.getUserNameById(t.attachment.modified_by)))])]):t._e(),t.attachment.modified?a("div",[a("span",[t._v(t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_MODIFICATION_DATE")))]),a("span",[t._v(t._s(t.formattedDate(t.attachment.modified)))])]):t._e()])]),a("div",{staticClass:"actions"},[t.canUpdate?a("button",{staticClass:"em-primary-button",on:{click:t.saveChanges}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_SAVE"))+" ")]):t._e()]),t.error?a("div",{staticClass:"error-msg"},[t._v(t._s(t.errorMessage))]):t._e()])},E=[],y={async getUsers(){try{const t=await h().get("index.php?option=com_emundus&controller=users&task=getusers");return{data:t.data,status:!0}}catch(t){return{status:!1,msg:t.message}}},async getUserById(t){try{const e=await h().get("index.php?option=com_emundus&controller=users&task=getuserbyid",{params:{id:t}});return e.data}catch(e){return{status:!1,msg:e.message}}},async getAccessRights(t,e){try{const a=await h().get("index.php?option=com_emundus&controller=users&task=getattachmentaccessrights",{params:{id:t,fnum:e}});return a.data}catch(a){return{status:!1,msg:a.message}}}},D={methods:{formattedDate:function(t="",e="LLLL"){return""!==t?r()(t).format(e):r()().format(e)},getUserNameById:function(t){let e="";if(t=parseInt(t),t>0){const a=this.$store.state.user.users[t];a?e=a.firstname+" "+a.lastname:y.getUserById(t).then(a=>{a.status&&a.user[0]&&(e=a.user[0].firstname+" "+a.user[0].lastname,a.user[0].id=t,this.$store.dispatch("user/setUsers",a.user))})}return e},async getAttachmentCategories(){const t=await _.getAttachmentCategories();return!0===t.status?(Object.entries(t.categories).forEach(([e,a])=>{t.categories[e]=this.translate(a)}),delete t.categories[""],this.$store.dispatch("attachment/setCategories",t.categories),this.$store.state.attachment.categories):{}},async asyncForEach(t,e){for(let a=0;a<t.length;a++)await e(t[a],a,t)}}},N=D,A={name:"AttachmentEdit",props:{fnum:{type:String,required:!0}},mixins:[N],data(){return{attachment:{},categories:{},file:null,canUpdate:!1,error:!1,errorMessage:"",attachmentIsValidated:"-2",attachmentCanBeViewed:!1,attachmentCanBeDeleted:!1,attachmentDescription:""}},mounted(){this.canUpdate=!!this.$store.state.user.rights[this.fnum]&&this.$store.state.user.rights[this.fnum].canUpdate,this.attachment=this.$store.state.attachment.selectedAttachment,this.categories=this.$store.state.attachment.categories,this.attachmentCanBeViewed="1"==this.attachment.can_be_viewed,this.attachmentCanBeDeleted="1"==this.attachment.can_be_deleted,this.attachmentDescription=this.attachment.description,this.attachmentIsValidated=this.attachment.is_validated},methods:{async saveChanges(){let t=new FormData;const e=this.attachmentCanBeViewed?"1":"0",a=this.attachmentCanBeDeleted?"1":"0";t.append("fnum",this.fnum),t.append("user",this.$store.state.user.currentUser),t.append("id",this.attachment.aid),t.append("description",this.attachmentDescription),t.append("is_validated",this.attachmentIsValidated),t.append("can_be_viewed",e),t.append("can_be_deleted",a),this.file&&t.append("file",this.file);const s=await _.updateAttachment(t);if(s.status.update){if(this.attachment.modified_by=this.$store.state.user.currentUser,this.attachment.description=this.attachmentDescription,this.attachment.is_validated=this.attachmentIsValidated,this.attachment.can_be_viewed=this.attachmentCanBeViewed,this.attachment.can_be_deleted=this.attachmentCanBeDeleted,this.$store.dispatch("attachment/updateAttachmentOfFnum",{fnum:this.fnum,attachment:this.attachment}),s.status.file_update){const t=await _.getPreview(this.$store.state.user.displayedUser,this.attachment.filename);this.$store.dispatch("attachment/setPreview",{preview:t,id:this.attachment.aid})}this.$emit("saveChanges")}else this.showError(s.msg)},updateFile(t){this.file=t.target.files[0]},updateAttachmentStatus(t){this.attachmentIsValidated=t.target.value},showError(t){this.error=!0,this.errorMessage=t,setTimeout(()=>{this.error=!1,this.errorMessage=""},3e3)}},computed:{allowedType(){let t="";return this.attachment.filename&&(t="."+this.attachment.filename.split(".").pop()),t}},watch:{"$store.state.attachment.selectedAttachment":function(){const t=Object.keys(this.$store.state.attachment.selectedAttachment);t.length>0&&(this.attachment=this.$store.state.attachment.selectedAttachment)}}},U=A,M=(a("5093"),Object(b["a"])(U,C,E,!1,null,"09c0d29e",null)),w=M.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{key:t.attachment.aid,staticClass:"attachment-row",class:{checked:t.checkedAttachments.includes(t.attachment.aid)}},[a("td",[a("input",{staticClass:"attachment-check",attrs:{type:"checkbox"},domProps:{checked:t.checkedAttachments.includes(t.attachment.aid)},on:{change:function(e){return t.updateCheckedAttachments(t.attachment.aid)}}})]),a("td",{staticClass:"td-document",on:{click:t.openModal}},[a("span",[t._v(t._s(t.attachment.value))]),t.attachment.existsOnServer?t._e():a("span",{staticClass:"material-icons warning file-not-found",attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_FILE_NOT_FOUND")}},[t._v(" warning ")])]),a("td",{staticClass:"date"},[t._v(t._s(t.formattedDate(t.attachment.timedate)))]),a("td",{staticClass:"desc"},[t._v(t._s(t.attachment.description))]),a("td",{staticClass:"category"},[t._v(" "+t._s(t.category)+" ")]),a("td",{staticClass:"status valid-state",class:{success:1==t.attachment.is_validated,warning:2==t.attachment.is_validated,error:0==t.attachment.is_validated}},[a("select",{attrs:{disabled:!1===t.canUpdate},on:{change:function(e){return t.updateStatus(e)}}},[a("option",{attrs:{value:"1"},domProps:{selected:1==t.attachment.is_validated}},[t._v(" "+t._s(t.translate("VALID"))+" ")]),a("option",{attrs:{value:"0"},domProps:{selected:0==t.attachment.is_validated}},[t._v(" "+t._s(t.translate("INVALID"))+" ")]),a("option",{attrs:{value:"2"},domProps:{selected:2==t.attachment.is_validated}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WARNING"))+" ")]),a("option",{attrs:{value:"-2"},domProps:{selected:-2==t.attachment.is_validated||null===t.attachment.is_validated}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ATTACHMENTS_WAITING"))+" ")])])]),a("td",[t._v(t._s(t.getUserNameById(t.attachment.user_id)))]),a("td",[t._v(t._s(t.getUserNameById(t.attachment.modified_by)))]),a("td",{staticClass:"date"},[t._v(t._s(t.formattedDate(t.attachment.modified)))]),a("td",{staticClass:"permissions"},[a("span",{staticClass:"material-icons visibility-permission",class:{active:"1"==t.attachment.can_be_viewed},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_PERMISSION_VIEW")},on:{click:function(e){return t.changePermission("can_be_viewed",t.attachment)}}},[t._v("visibility")]),a("span",{staticClass:"material-icons delete-permission",class:{active:"1"==t.attachment.can_be_deleted},attrs:{title:t.translate("COM_EMUNDUS_ATTACHMENTS_PERMISSION_DELETE")},on:{click:function(e){return t.changePermission("can_be_deleted",t.attachment)}}},[t._v("delete_outlined")])])])},T=[],x={name:"AttachmentRow",props:{attachment:{type:Object,required:!0},checkedAttachmentsProp:{type:Array,required:!0},canUpdate:{type:Boolean,default:!1}},mixins:[N],data(){return{categories:{},category:"",checkedAttachments:[]}},mounted(){this.categories=this.$store.state.attachment.categories,Object.entries(this.categories).length<1?this.getAttachmentCategories().then(t=>{this.categories=t,this.category=this.categories[this.attachment.category]?this.categories[this.attachment.category]:""}).catch(t=>{this.categories={}}):this.category=this.categories[this.attachment.category]?this.categories[this.attachment.category]:"",this.checkedAttachments=this.checkedAttachmentsProp},methods:{updateCheckedAttachments(t){this.checkedAttachments.includes(t)?this.checkedAttachments.splice(this.checkedAttachments.indexOf(t),1):this.checkedAttachments.push(t),this.$emit("update-checked-attachments",this.checkedAttachments)},openModal(){this.$emit("open-modal",this.attachment)},updateStatus(t){this.canUpdate&&this.$emit("update-status",t,this.attachment)},changePermission(t,e){this.canUpdate&&this.$emit("change-permission",t,e)}},watch:{"$store.state.attachment.checkedAttachments":function(){this.checkedAttachments=this.$store.state.attachment.checkedAttachments}}},R=x,L=(a("a35e"),Object(b["a"])(R,S,T,!1,null,"442cec95",null)),B=L.exports,k={async getFnums(){try{const t=await h().get("index.php?option=com_emundus&controller=files&task=getallfnums");return t.data}catch(t){return!1}},async getFnumInfos(t){try{const e=await h().get("index.php?option=com_emundus&controller=files&task=getfnuminfos",{params:{fnum:t}});return e.data}catch(e){return!1}}},I=a("ac68"),j=a.n(I),P={name:"Attachments",components:{AttachmentPreview:O,AttachmentEdit:w,AttachmentRow:B},props:{user:{type:String,required:!0},fnum:{type:String,required:!0}},mixins:[N],data(){return{loading:!0,attachments:[],categories:{},fnums:[],users:[],displayedUser:{},displayedFnum:this.fnum,checkedAttachments:[],selectedAttachment:{},progress:"",sort:{last:"",order:"",orderBy:""},canExport:!1,canDelete:!1,canDownload:!0,canUpdate:!1,modalLoading:!1,slideTransition:"slide-fade",changeFileEvent:null}},created(){this.changeFileEvent=new Event("changeFile")},mounted(){this.loading=!0,this.getFormProgress(),this.getFnums().then(()=>{this.getUsers().then(()=>{this.getAttachments().then(()=>{this.setAccessRights().then(()=>{this.loading=!1})}).catch(t=>{this.loading=!1,this.displayErrorMessage(t)})}).catch(t=>{this.loading=!1,this.displayErrorMessage(t)})}).catch(t=>{this.loading=!1,this.displayErrorMessage(t)})},methods:{async getFormProgress(){const t=await _.getAttachmentProgress(this.displayedFnum);t.status&&(this.progress=t.progress[0].attachment_progress)},async getFnums(){const t=document.getElementsByClassName("em_file_open");for(let e of t)this.fnums.push(e.id)},async getUsers(){this.$store.dispatch("user/setCurrentUser",this.user),await this.setDisplayedUser()},async setDisplayedUser(){const t=await k.getFnumInfos(this.displayedFnum);if(t&&t.fnumInfos){const e=!(!this.users||!this.users.length)&&this.users.find(e=>e.user_id==t.fnumInfos.applicant_id);if(e)this.displayedUser=e,this.$store.dispatch("user/setDisplayedUser",this.displayedUser.user_id);else{const e=await y.getUserById(t.fnumInfos.applicant_id);e.status?(this.users.push(e.user[0]),this.displayedUser=e.user[0],this.$store.dispatch("user/setDisplayedUser",this.displayedUser.user_id)):this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_USER_NOT_FOUND"))}}else this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_USER_NOT_FOUND"))},async getAttachments(){this.$store.state.attachment.attachments[this.displayedFnum]?(this.attachments=this.$store.state.attachment.attachments[this.displayedFnum],this.categories=this.$store.state.attachment.categories):await this.refreshAttachments()},async refreshAttachments(t=!1){!0===t&&(this.loading=!0),this.resetOrder(),this.checkedAttachments=[],this.$refs["searchbar"].value="";const e=await _.getAttachmentsByFnum(this.displayedFnum);if(e.status){this.attachments=e.attachments,this.$store.dispatch("attachment/setAttachmentsOfFnum",{fnum:[this.displayedFnum],attachments:this.attachments});const t=await this.getAttachmentCategories();this.categories=t||{}}else this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_ERROR_GETTING_ATTACHMENTS"));!0===t&&(this.loading=!1)},updateAttachment(){this.resetOrder(),this.getAttachments(),this.$modal.hide("edit"),this.selectedAttachment={}},updateStatus(t,e){if(this.canUpdate){if(this.attachments.length<1)return;this.attachments.forEach((a,s)=>{if(a.aid==e.aid){this.resetOrder(),this.attachments[s].is_validated=t.target.value;let e=new FormData;e.append("fnum",this.displayedFnum),e.append("user",this.$store.state.user.currentUser),e.append("id",this.attachments[s].aid),e.append("is_validated",this.attachments[s].is_validated),_.updateAttachment(e).then(t=>{t&&!1===t.status&&this.displayErrorMessage(t.msg)}).catch(t=>{this.displayErrorMessage(t)})}})}},changePermission(t,e){this.canUpdate?this.attachments.forEach((a,s)=>{if(a.aid==e.aid){this.resetOrder(),this.attachments[s][t]="1"===this.attachments[s][t]?"0":"1";let e=new FormData;e.append("fnum",this.displayedFnum),e.append("user",this.$store.state.user.currentUser),e.append("id",this.attachments[s].aid),e.append(t,this.attachments[s][t]),_.updateAttachment(e).then(t=>{t.status||this.displayErrorMessage(t.msg)})}}):this.displayErrorMessage(this.translate("COM_EMUNDUS_ATTACHMENTS_UNAUTHORIZED_ACTION"))},async setAccessRights(){if(!this.$store.state.user.rights[this.displayedFnum]){const t=await y.getAccessRights(this.$store.state.user.currentUser,this.displayedFnum);!0===t.status&&this.$store.dispatch("user/setAccessRights",{fnum:this.displayedFnum,rights:t.rights})}this.canExport=!!this.$store.state.user.rights[this.displayedFnum]&&this.$store.state.user.rights[this.displayedFnum].canExport,this.canDelete=!!this.$store.state.user.rights[this.displayedFnum]&&this.$store.state.user.rights[this.displayedFnum].canDelete,this.canUpdate=!!this.$store.state.user.rights[this.displayedFnum]&&this.$store.state.user.rights[this.displayedFnum].canUpdate},async exportAttachments(){this.canExport&&_.exportAttachments(this.displayedUser.id,this.displayedFnum,this.checkedAttachments).then(t=>{!0===t.data.status?window.open(t.data.link,"_blank"):this.displayErrorMessage(t.data.msg)})},confirmDeleteAttachments(){if(this.canDelete){let t="<p>"+this.translate("CONFIRM_DELETE_SELETED_ATTACHMENTS")+"</p><br>",e="";this.checkedAttachments.forEach(t=>{this.attachments.forEach(a=>{a.aid==t&&(e+=a.value+", ")})}),e=e.substring(0,e.length-2),t+="<p>"+e+"</p>",j.a.fire({title:this.translate("DELETE_SELECTED_ATTACHMENTS"),html:t,type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.translate("JYES"),cancelButtonText:this.translate("JNO"),reverseButtons:!0}).then(t=>{t.value&&this.deleteAttachments()})}else this.displayErrorMessage(this.translate("YOU_NOT_HAVE_PERMISSION_TO_DELETE_ATTACHMENTS"))},async deleteAttachments(){if(this.canDelete){this.attachments=this.attachments.filter(t=>!this.checkedAttachments.includes(t.aid));const t=await _.deleteAttachments(this.displayedFnum,this.displayedUser.id,this.checkedAttachments);t.status}else this.displayErrorMessage(this.translate("YOU_NOT_HAVE_PERMISSION_TO_DELETE_ATTACHMENTS"))},changeFile(t){this.loading=!0;const e=this.fnumPosition;this.displayedFnum=this.fnums[t],this.getFormProgress(),this.attachments=[],this.$store.dispatch("attachment/setCheckedAttachments",[]),this.setAccessRights(),this.resetOrder(),this.resetSearch(),this.resetCategoryFilters(),k.getFnumInfos(this.displayedFnum).then(a=>{!0===a.status?(this.changeFileEvent.detail={fnum:a.fnumInfos,next:t>e,previous:t<e},document.querySelector(".com_emundus_vue").dispatchEvent(this.changeFileEvent)):this.displayErrorMessage(a.msg)}),this.setDisplayedUser().then(()=>{this.getAttachments().then(()=>{this.attachments.forEach(t=>{t.show=!0}),this.loading=!1}).catch(t=>{this.displayErrorMessage(t),this.loading=!1})}).catch(t=>{this.displayErrorMessage(t),this.loading=!1})},changeAttachment(t,e=!1){this.slideTransition=e?"slide-fade-reverse":"slide-fade",this.modalLoading=!0,this.selectedAttachment=this.displayedAttachments[t],this.$store.dispatch("attachment/setSelectedAttachment",this.selectedAttachment),setTimeout(()=>{this.modalLoading=!1},500)},searchInFiles(){this.attachments.forEach((t,e)=>{t.description.toLowerCase().includes(this.$refs["searchbar"].value.toLowerCase())||t.value.toLowerCase().includes(this.$refs["searchbar"].value.toLowerCase())?this.attachments[e].show=!0:(this.checkedAttachments=this.checkedAttachments.filter(e=>e!==t.aid),this.attachments[e].show=!1)})},resetSearch(){this.attachments.forEach((t,e)=>{this.attachments[e].show=!0}),this.$refs["searchbar"].value=""},resetOrder(){this.sort={last:"",order:"",orderBy:""}},resetCategoryFilters(){this.$refs["categoryFilter"]&&(this.$refs["categoryFilter"].value="all")},orderBy(t){this.sort.last==t?(this.sort.order="asc"==this.sort.order?"desc":"asc",this.attachments.reverse()):(this.attachments.sort((e,a)=>e[t]<a[t]?-1:e[t]>a[t]?1:0),this.sort.order="asc"),this.sort.orderBy=t,this.sort.last=t},filterByCategory(t){this.attachments.forEach(e=>{"all"==t.target.value||e.category==t.target.value?e.show=!0:(this.checkedAttachments=this.checkedAttachments.filter(t=>t!==e.aid),e.show=!1)})},updateAllCheckedAttachments(t){t.target.checked?this.checkedAttachments=this.displayedAttachments.map(t=>t.aid):this.checkedAttachments=[],this.$store.dispatch("attachment/setCheckedAttachments",this.checkedAttachments)},updateCheckedAttachments(t){Array.isArray(t)?this.checkedAttachments=t:(console.warn("updateCheckedAttachments() expects an array as argument"),this.displayErrorMessage("Something went wrong while updating the checked attachments"),this.checkedAttachments=[])},openModal(t){this.displayedUser.user_id&&this.displayedFnum&&(this.$modal.show("edit"),this.selectedAttachment=t,this.$store.dispatch("attachment/setSelectedAttachment",t))},closeModal(){this.$modal.hide("edit"),this.selectedAttachment={},this.$store.dispatch("attachment/setSelectedAttachment",{})},displayErrorMessage(t){j.a.fire({title:this.translate("ERROR"),text:t,type:"error",confirmButtonColor:"#3085d6",confirmButtonText:this.translate("COM_EMUNDUS_ATTACHMENTS_CLOSE")})},beforeLeaveSlide(t){"slide-fade"==this.slideTransition&&(t.style.transform="translateX(-100%)"),t.setAttribute("class","modal-body "+this.slideTransition+"-leave-active "+this.slideTransition+"-leave-to")}},computed:{displayedAttachments(){return this.attachments.filter(t=>(!0===t.show||void 0==t.show)&&t.can_be_viewed)},fnumPosition(){return this.fnums.indexOf(this.displayedFnum)},selectedAttachmentPosition(){return this.displayedAttachments.indexOf(this.selectedAttachment)},attachmentPath(){return this.$store.state.attachment.attachmentPath+this.displayedUser.user_id+"/"+this.selectedAttachment.filename},thisAttachmentCategories(){let t={};if(Object.entries(this.categories).length>0)for(let e in this.categories)for(let a in this.attachments)this.attachments[a].category==e&&(t[e]=this.categories[e]);return t}}},F=P,$=(a("4cd0"),Object(b["a"])(F,l,d,!1,null,"2ccf36b4",null)),G=$.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"list"}},["files"!==t.type?a("list-head",{attrs:{data:t.actions}}):t._e(),a("div",{staticClass:"em-flex-row em-flex-space-between em-w-auto"},["campaign"===t.type?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedProgram,expression:"selectedProgram"}],staticClass:"list-vue-select",attrs:{name:"selectProgram"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedProgram=e.target.multiple?a:a[0]},t.validateFilters]}},[a("option",{attrs:{value:"all"}},[t._v(t._s(t.translations.AllPrograms)+" ")]),t._l(t.allPrograms,(function(e){return a("option",{key:e.code,domProps:{value:e.code}},[t._v(" "+t._s(e.label)+" ")])}))],2):t._e(),"email"===t.type?a("select",{directives:[{name:"model",rawName:"v-model",value:t.menuEmail,expression:"menuEmail"}],staticClass:"list-vue-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.menuEmail=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"0"}},[t._v(t._s(t.translations.All))]),t._l(t.notEmptyEmailCategories,(function(e,s){return a("option",{key:"cat_"+s,domProps:{value:e}},[t._v(t._s(e))])}))],2):t._e(),"formulaire"===t.type||"grilleEval"===t.type?a("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],staticClass:"list-vue-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.type=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"formulaire"}},[t._v(t._s(t.translations.candidature))]),a("option",{attrs:{value:"grilleEval"}},[t._v(t._s(t.translations.evaluations))])]):t._e(),a("div",{staticClass:"search-container"},[a("div",{staticClass:"search em-flex-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.recherche,expression:"recherche"}],staticClass:"searchTerm",attrs:{placeholder:t.translations.Rechercher},domProps:{value:t.recherche},on:{keyup:[function(e){t.cherche(t.recherche)||t.debounce},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.chercheGo(t.recherche)}],input:function(e){e.target.composing||(t.recherche=e.target.value)}}})]),a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[a("span",{staticClass:"tooltip-target b3 material-icons"},[t._v("more_vert")]),a("template",{slot:"popover"},[a("filters",{attrs:{data:t.actions,selected:t.selecedItems,updateTotal:t.updateTotal,filter:t.filter,sort:t.sort,cherche:t.cherche,chercheGo:t.chercheGo,validateFilters:t.validateFilters,nbresults:t.nbresults}})],1)],2)],1)]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],class:1==t.countPages?"noPagination":"pagination-pages"},[t.total>0?a("ul",{staticClass:"pagination"},[a("a",{staticClass:"pagination-arrow arrow-left",on:{click:function(e){return t.nbpages(t.pages-1)}}},[a("em",{staticClass:"fas fa-chevron-left"})]),t._l(t.countPages,(function(e){return a("li",{directives:[{name:"show",rawName:"v-show",value:t.countPages<=10||e<4||e>t.countPages-3||e>t.pages-3&&e<t.pages+3||e==t.pages-3||e==t.pages+3,expression:"countPages <= 10 ||\n            index < 4 ||\n            index > countPages - 3 ||\n            (index > pages - 3 && index < pages + 3) ||\n            index == pages - 3 ||\n            index == pages + 3"}],key:e,staticClass:"pagination-number"},[a("a",{staticClass:"pagination-number",class:e==t.pages?"current-number":"",on:{click:function(a){return t.nbpages(e)}}},[t._v(" "+t._s(t.paginationNumber(e))+" ")])])})),a("a",{staticClass:"pagination-arrow arrow-right",on:{click:function(e){return t.nbpages(t.pages+1)}}},[a("em",{staticClass:"fas fa-chevron-right"})])],2):t._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.total>0||"files"==t.type,expression:"total > 0 || type == 'files'"}]},[a("list-body",{attrs:{type:t.type,actions:t.actions,params:t.params},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.total&&"files"!=t.type&&!t.loading,expression:"total == 0 && type != 'files' && !loading"}],staticClass:"noneDiscover"},[t._v(" "+t._s(t.noneDiscoverTranslation)+" ")]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()],1)},z=[],V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset","min-width":"200px"}},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",[a("div",[a("div",[a("div",{staticClass:"filter-subtitle"},[a("div",[t._v(t._s(t.translations.Filter))])]),a("nav",{staticClass:"em-flex-col-start",attrs:{"aria-label":"filter"}},[a("a",{staticClass:"action-submenu",class:"all"==t.filtre?"selected":"",on:{click:function(e){t.filter("all"),t.updateFilter("all")}}},[t._v(" "+t._s(t.translations.FilterAll)+" ")]),"campaign"==t.data.type?a("a",{staticClass:"action-submenu",class:"notTerminated"==t.filtre?"selected":"",on:{click:function(e){t.filter("notTerminated"),t.updateFilter("notTerminated")}}},[t._v(" "+t._s(t.translations.FilterOpen)+" ")]):t._e(),"campaign"==t.data.type?a("a",{staticClass:"action-submenu",class:"Terminated"==t.filtre?"selected":"",on:{click:function(e){t.filter("Terminated"),t.updateFilter("Terminated")}}},[t._v(" "+t._s(t.translations.FilterClose)+" ")]):t._e(),"formulaire"!==t.data.type?a("a",{staticClass:"action-submenu",class:"Publish"==t.filtre?"selected":"",on:{click:function(e){t.filter("Publish"),t.updateFilter("Publish")}}},[t._v(" "+t._s(t.translations.FilterPublish)+" ")]):t._e(),"formulaire"!==t.data.type?a("a",{staticClass:"action-submenu",class:"Unpublish"==t.filtre?"selected":"",on:{click:function(e){t.filter("Unpublish"),t.updateFilter("Unpublish")}}},[t._v(" "+t._s(t.translations.FilterUnpublish)+" ")]):t._e(),"formulaire"===t.data.type?a("a",{staticClass:"action-submenu",class:"Unpublish"==t.filtre?"selected":"",on:{click:function(e){t.filter("Unpublish"),t.updateFilter("Unpublish")}}},[t._v(" "+t._s(t.translations.Archived)+" ")]):t._e()])]),a("div",{staticClass:"mt-1"},[a("div",{staticClass:"filter-subtitle"},[a("div",[t._v(t._s(t.translations.NbResults))])]),a("nav",{staticClass:"em-flex-col-start",attrs:{"aria-label":"Nb Results"}},[a("a",{staticClass:"action-submenu",class:"max"==t.afficher?"selected":"",on:{click:function(e){t.nbresults(999999),t.updateDisplay("max")}}},[t._v(" "+t._s(t.translations.AllResults)+" ")]),a("a",{staticClass:"action-submenu",class:10==t.afficher?"selected":"",on:{click:function(e){t.nbresults(10),t.updateDisplay(10)}}},[t._v(" 10 ")]),a("a",{staticClass:"action-submenu",class:25==t.afficher?"selected":"",on:{click:function(e){t.nbresults(25),t.updateDisplay(25)}}},[t._v(" 25 ")]),a("a",{staticClass:"action-submenu",class:50==t.afficher?"selected":"",on:{click:function(e){t.nbresults(50),t.updateDisplay(50)}}},[t._v(" 50 ")]),a("a",{staticClass:"action-submenu",class:100==t.afficher?"selected":"",on:{click:function(e){t.nbresults(100),t.updateDisplay(100)}}},[t._v(" 100 ")])])])])])])],1),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},q=[];a("7581"),a("d22c"),a("2b9c");a("bef5");var Y={name:"action_menu",props:{data:Object,updateTotal:Function,filter:Function,sort:Function,cherche:Function,chercheGo:Function,validateFilters:Function,nbresults:Function},computed:{checkItem(){return this.$store.getters["lists/selectedItems"]}},data(){return{recherche:"",filterHover:!1,actionHover:!1,sortHover:!1,resultsHover:!1,loading:!1,translations:{NbResults:this.translate("COM_EMUNDUS_ONBOARD_RESULTS"),AllResults:this.translate("COM_EMUNDUS_ONBOARD_ALL_RESULTS"),Sort:this.translate("COM_EMUNDUS_ONBOARD_SORT"),SortCreasing:this.translate("COM_EMUNDUS_ONBOARD_SORT_CREASING"),SortDecreasing:this.translate("COM_EMUNDUS_ONBOARD_SORT_DECREASING"),Filter:this.translate("COM_EMUNDUS_ONBOARD_FILTER"),FilterAll:this.translate("COM_EMUNDUS_ONBOARD_FILTER_ALL"),FilterOpen:this.translate("COM_EMUNDUS_ONBOARD_FILTER_OPEN"),FilterClose:this.translate("COM_EMUNDUS_ONBOARD_FILTER_CLOSE"),FilterPublish:this.translate("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),FilterUnpublish:this.translate("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH"),Rechercher:this.translate("COM_EMUNDUS_ONBOARD_SEARCH"),Archived:this.translate("COM_EMUNDUS_ONBOARD_ARCHIVED")},filtre:"all",tri:"DESC",afficher:25}},methods:{updateFilter(t){this.filtre=t},updateSort(t){this.tri=t},updateDisplay(t){this.afficher=t}}},J=Y,W=(a("616d"),Object(b["a"])(J,V,q,!1,null,"1cc0d3de",null)),X=W.exports,K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"list-head"}},[a("div",{staticClass:"list-head-container"},[a("h2",[t._v(" "+t._s(t.translations["title_"+t.data.type]))]),"form"!==t.data.type?a("a",{attrs:{href:t.data.add_url}},[a("div",{staticClass:"em-primary-button"},[t._v(" "+t._s(t.translations["add_"+t.data.type])+" ")])]):a("a",{on:{click:function(e){return t.getAddUrlToCreateForm()}}},[a("div",{staticClass:"em-primary-button"},[t._v(" "+t._s(t.translations["add_"+t.data.type])+" ")])])]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},Q=[];const Z=a("bef5");var tt={props:{data:{type:Object,required:!0}},data:function(){return{title:"List",loading:!1,translations:{title_campaign:"COM_EMUNDUS_ONBOARD_CAMPAIGNS",title_email:"COM_EMUNDUS_ONBOARD_EMAILS",title_formulaire:"COM_EMUNDUS_ONBOARD_FORMS",title_grilleEval:"COM_EMUNDUS_ONBOARD_FORMS",title_form:"COM_EMUNDUS_ONBOARD_FORMS",add_campaign:"COM_EMUNDUS_ONBOARD_ADD_CAMPAIGN",add_email:"COM_EMUNDUS_ONBOARD_ADD_EMAIL",add_formulaire:"COM_EMUNDUS_ONBOARD_ADD_FORM",add_grilleEval:"COM_EMUNDUS_ONBOARD_ADD_FORM",add_form:"COM_EMUNDUS_ONBOARD_ADD_FORM"}}},methods:{getAddUrlToCreateForm(){this.loading=!0;const t={label:"Nouveau formulaire",description:"",published:1};p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=createform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Z.stringify({body:t})}).then(t=>{this.loading=!1;const e=t.data.data;window.location.href="index.php?option=com_emundus&view=form&layout=formbuilder&prid="+e+"&index=0&cid="}).catch(t=>{console.log(t),this.loading=!1})}}},et=tt,at=(a("633a"),Object(b["a"])(et,K,Q,!1,null,"d3e41a6a",null)),st=at.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"list-body"}},["email"==t.type?a("ModalEmailPreview",{attrs:{model:t.email.emailToPreview,models:t.list}}):t._e(),a("div",{attrs:{id:"actions"}},[a("div",{staticClass:"filters"}),a("div",{staticClass:"view-type"},t._l(t.viewTypeOptions,(function(e){return a("span",{key:e.value,staticClass:"material-icons",class:{active:e.value===t.viewType},on:{click:function(a){return t.changeViewType(e)}}},[t._v(" "+t._s(e.icon)+" ")])})),0)]),a("list-table",{key:"list-table",staticClass:"list-view",class:{"not-displayed":"table"!==t.viewType},attrs:{type:t.type,actions:t.actions,params:t.params},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading,showModalPreview:t.showModalPreview}}),a("list-blocs",{key:"list-blocs",staticClass:"list-view",class:{"not-displayed":"blocs"!==t.viewType},attrs:{type:t.type,actions:t.actions,params:t.params},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading,showModalPreview:t.showModalPreview}})],1)},nt=[],ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"list-table"}},[t.isEmptyRowsData?t._e():a("table",{attrs:{"aria-describedby":"Table of "+t.type}},[a("thead",{staticClass:"list-table-head"},[a("tr",t._l(t.rowsData,(function(e){return a("th",{key:e.value,attrs:{id:e.value}},[t._v(" "+t._s(t.translate(e.label))+" ")])})),0)]),a("list-table-body",{attrs:{type:t.type,actions:t.actions,params:t.params},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading,showModalPreview:t.showModalPreview}})],1),t.isEmptyRowsData?a("p",[t._v("Unable to create table...")]):t._e()])},rt=[],lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tbody",t._l(t.list,(function(e){return a("list-table-row",{key:e.id,attrs:{data:e,type:t.type,actions:t.actions},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading,showModalPreview:function(a){return t.showModalPreview(e.id)}}})})),1)},dt=[],ct=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",{staticClass:"list-row"},t._l(t.tds,(function(e){return a("td",{key:e.value},["actions"==e.value?a("span",[a("list-action-menu",{attrs:{id:"list-row action-menu",type:t.type,itemId:t.data.id,isPublished:t.actionMenuIsPublished,showTootlip:t.hasActionMenu},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading,showModalPreview:t.showModalPreview}})],1):"message"==e.value?a("span",{class:t.classFromTd(e),domProps:{innerHTML:t._s(t.formattedDataFromTd(e))}}):t._e(),a("span",{class:t.classFromTd(e),on:{click:function(a){return t.redirectToEditItem(e)}}},[t._v(" "+t._s(t.formattedDataFromTd(e))+" ")])])})),0)},mt=[],ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-actions-menu"},["email"==t.type?a("button",{staticClass:"em-transparent-button",attrs:{type:"button",title:t.translations.visualize},on:{click:t.showModalPreview}},[a("span",{staticClass:"material-icons-outlined"},[t._v("visibility")])]):t._e(),!0===t.showTootlip?a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[a("span",{staticClass:"tooltip-target b3 material-icons"},[t._v("more_vert")]),a("template",{slot:"popover"},[a("actions",{attrs:{data:{type:t.type},selected:t.itemId,published:t.isPublished},on:{validateFilters:function(e){return t.validateFilters()},updateLoading:t.updateLoading}})],1)],2):t._e()],1)},pt=[],ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",[a("nav",{staticClass:"em-flex-col-start",attrs:{"aria-label":"action"}},[["formulaire","email"].includes(t.data.type)||t.published?t._e():a("a",{staticClass:"action-submenu",on:{click:function(e){return t.publishSelected(t.checkItem)}}},[t._v(" "+t._s(t.translations.ActionPublish)+" ")]),!["formulaire","email"].includes(t.data.type)&&t.published?a("a",{staticClass:"action-submenu",on:{click:function(e){return t.unpublishSelected(t.checkItem)}}},[t._v(" "+t._s(t.translations.ActionUnpublish)+" ")]):t._e(),"formulaire"!==t.data.type||t.published?t._e():a("a",{staticClass:"action-submenu",staticStyle:{"border-right":"0"},on:{click:function(e){return t.publishSelected(t.checkItem)}}},[t._v(" "+t._s(t.translations.Restore)+" ")]),"campaign"===t.data.type||"formulaire"===t.data.type?a("a",{staticClass:"action-submenu w-dropdown-link",staticStyle:{"border-left":"0","border-right":"0"},on:{click:function(e){return t.duplicateSelected(t.checkItem)}}},[t._v(" "+t._s(t.translations.ActionDuplicate)+" ")]):t._e(),"formulaire"!==t.data.type&&"campaign"!==t.data.type?a("a",{staticClass:"action-submenu",on:{click:function(e){return t.deleteSelected(t.checkItem)}}},[t._v(" "+t._s(t.translations.ActionDelete)+" ")]):t._e(),"campaign"===t.data.type&&0==t.filesCount?a("a",{staticClass:"action-submenu",on:{click:function(e){return t.deleteSelected(t.checkItem)}}},[t._v(" "+t._s(t.translations.ActionDelete)+" ")]):t._e(),"formulaire"===t.data.type&&t.published?a("a",{staticClass:"action-submenu",staticStyle:{"border-left":"0"},on:{click:function(e){return t.unpublishSelected(t.checkItem)}}},[t._v(" "+t._s(t.translations.Archive)+" ")]):t._e()])])])],1),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},_t=[];const gt=a("bef5");var ft={name:"action_menu",props:{data:Object,isEmpty:Boolean,selected:String,published:Boolean},computed:{checkItem(){return[this.selected]}},data(){return{loading:!1,filesCount:null,translations:{ActionPublish:this.translate("COM_EMUNDUS_ONBOARD_ACTION_PUBLISH"),ActionUnpublish:this.translate("COM_EMUNDUS_ONBOARD_ACTION_UNPUBLISH"),ActionDuplicate:this.translate("COM_EMUNDUS_ONBOARD_ACTION_DUPLICATE"),ActionDelete:this.translate("COM_EMUNDUS_ONBOARD_ACTION_DELETE"),Archive:this.translate("COM_EMUNDUS_ONBOARD_ARCHIVE"),Restore:this.translate("COM_EMUNDUS_ONBOARD_RESTORE")}}},mounted(){"campaign"===this.data.type&&this.filesNumber()},methods:{filesNumber(){p()({method:"get",url:"index.php?option=com_emundus&controller=dashboard&task=getfilesbycampaign",params:{cid:this.selected},paramsSerializer:t=>gt.stringify(t)}).then(t=>{this.filesCount=parseInt(t.data.data)})},deleteSelected(t){switch(this.data.type){case"program":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_PROGDELETE"),text:this.translate("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=deleteprogram",data:gt.stringify({id:t})}).then(e=>{this.$emit("updateLoading",!1),this.$store.commit("lists/deleteSelected",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_PROGDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{p.a.get("index.php?option=com_emundus&controller=programme&task=getprogramcount").then(t=>{this.total=t.data.data,this.updateTotal(this.total)})}).catch(t=>{console.log(t)}))});break;case"campaign":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_CAMPDELETE"),text:this.translate("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=deletecampaign",data:gt.stringify({id:t})}).then(e=>{this.$emit("updateLoading",!1),this.$store.dispatch("lists/deleteSelected",t).then(()=>{this.$store.commit("lists/resetSelectedItemsList")}),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_CAMPDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{p.a.get("index.php?option=com_emundus&controller=campaign&task=getcampaigncount").then(t=>{this.total=t.data.data,this.updateTotal(this.total),this.$emit("validateFilters")})}).catch(t=>{console.log(t)}))});break;case"email":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_EMAILDELETE"),text:this.translate("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=deleteemail",data:gt.stringify({id:t})}).then(e=>{this.$emit("updateLoading",!1),this.$store.dispatch("lists/deleteSelected",t).then(()=>{this.$store.commit("lists/resetSelectedItemsList")}),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_EMAILDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{p.a.get("index.php?option=com_emundus&controller=email&task=getemailcount").then(t=>{this.total=t.data.data,this.updateTotal(this.total),this.$emit("validateFilters")})}).catch(t=>{console.log(t)}))});break;case"formulaire":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_FORMDELETE"),text:this.translate("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=deleteform",data:gt.stringify({id:t})}).then(e=>{this.$emit("updateLoading",!1),this.$store.dispatch("lists/deleteSelected",t).then(()=>{this.$store.commit("lists/resetSelectedItemsList")}),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_FORMDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{p.a.get("index.php?option=com_emundus&controller=form&task=getformcount").then(t=>{this.total=t.data.data,this.updateTotal(this.total),this.$emit("validateFilters")})}).catch(t=>{console.log(t)}))});break}},unpublishSelected(t){switch(this.data.type){case"program":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_PROGUNPUBLISH"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=unpublishprogram",data:gt.stringify({id:t})}).then(e=>{this.$emit("updateLoading",!1),this.$store.commit("lists/unpublish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_PROGUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)}))});break;case"campaign":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_CAMPAIGNUNPUBLISH"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=unpublishcampaign",data:gt.stringify({id:t})}).then(e=>{this.$emit("updateLoading",!1),this.$store.commit("lists/unpublish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_CAMPAIGNUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)}))});break;case"email":p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=unpublishemail",data:gt.stringify({id:t})}).then(e=>{this.$store.commit("lists/unpublish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_EMAILUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)});break;case"formulaire":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_FORMUNPUBLISH"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=unpublishform",data:gt.stringify({id:t})}).then(e=>{this.$emit("updateLoading",!1),this.$store.commit("lists/unpublish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_FORMUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)}))});break}},publishSelected(t){switch(this.data.type){case"program":p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=publishprogram",data:gt.stringify({id:t})}).then(e=>{this.$store.commit("lists/publish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_PROGPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)});break;case"campaign":p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=publishcampaign",data:gt.stringify({id:t})}).then(e=>{this.$store.commit("lists/publish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_CAMPAIGNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)});break;case"email":p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=publishemail",data:gt.stringify({id:t})}).then(e=>{this.$store.commit("lists/publish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_EMAILPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)});break;case"formulaire":p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=publishform",data:gt.stringify({id:t})}).then(e=>{this.$store.commit("lists/publish",t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_FORMPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(t=>{console.log(t)});break}},duplicateSelected(t){switch(this.data.type){case"campaign":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_CAMPAIGNDUPLICATE"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=duplicatecampaign",data:gt.stringify({id:t})}).then(t=>{window.location.reload()}))});break;case"formulaire":j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_FORMDUPLICATE"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&(this.$emit("updateLoading",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=duplicateform",data:gt.stringify({id:t})}).then(t=>{window.location.reload()}))});break}}}},bt=ft,vt=(a("032c"),Object(b["a"])(bt,ht,_t,!1,null,"15475139",null)),Ot=vt.exports,Ct={components:{actions:Ot},props:{type:{type:String,required:!0},itemId:{type:String,required:!0},isPublished:{type:Boolean,required:!0},showTootlip:{type:Boolean,default:!0}},data(){return{translations:{visualize:this.translate("COM_EMUNDUS_ONBOARD_VISUALIZE")}}},methods:{showModalPreview(){this.$emit("showModalPreview")},validateFilters(){this.$emit("validateFilters")},updateLoading(t){this.$emit("updateLoading",t)}}},Et=Ct,yt=(a("880c"),Object(b["a"])(Et,ut,pt,!1,null,"2207509c",null)),Dt=yt.exports,Nt={campaign:[{label:"COM_EMUNDUS_ONBOARD_NAME",value:"label",redirect:!0},{label:"COM_EMUNDUS_ONBOARD_START_DATE",value:"start_date"},{label:"COM_EMUNDUS_ONBOARD_END_DATE",value:"end_date"},{label:"COM_EMUNDUS_ONBOARD_STATE",value:"status"},{label:"COM_EMUNDUS_ONBOARD_NB_FILES",value:"nb_files"},{label:"",value:"actions"}],email:[{label:"COM_EMUNDUS_ONBOARD_SUBJECT",value:"subject",redirect:!0},{label:"COM_EMUNDUS_ONBOARD_CATEGORY",value:"category"},{label:"COM_EMUNDUS_ONBOARD_STATUS",value:"published"},{label:"",value:"actions"}],form:[{label:"COM_EMUNDUS_ONBOARD_NAME",value:"label",redirect:!0},{label:"COM_EMUNDUS_ONBOARD_STATUS",value:"published"},{label:"",value:"actions"}],formulaire:[{label:"COM_EMUNDUS_ONBOARD_NAME",value:"label",redirect:!0},{label:"COM_EMUNDUS_ONBOARD_STATUS",value:"published"},{label:"",value:"actions"}],grilleEval:[{label:"COM_EMUNDUS_ONBOARD_NAME",value:"label",redirect:!0},{label:"COM_EMUNDUS_ONBOARD_STATUS",value:"published"},{label:"",value:"actions"}]};a("bef5");var At={components:{ListActionMenu:Dt},props:{data:{type:Object,required:!0},type:{type:String,required:!0}},data(){return{tds:[],lang:"fr",translations:{finished:"COM_EMUNDUS_ONBOARD_FILTER_CLOSE",published:"COM_EMUNDUS_ONBOARD_FILTER_PUBLISH",unpublished:"COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH",active:"COM_EMUNDUS_ONBOARD_FILTER_PUBLISH_FORM",inactive:"COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH_FORM"}}},mounted(){this.tds=void 0!==typeof Nt[this.type]?Nt[this.type]:[],this.lang=this.$store.getters["global/actualLanguage"]},methods:{formattedDataFromTd(t){return"campaign"===this.type?this.formattedCampaignData(t):"email"===this.type?this.formattedEmailData(t):"form"===this.type||"formulaire"===this.type||"grilleEval"===this.type?this.formattedFormData(t):this.data[t.value]?this.data[t.value]:"-"},formattedCampaignData(t){switch(t.value){case"status":return this.isFinished?this.translations.finished:this.isPublished?this.translations.published:this.translations.unpublished;case"start_date":case"end_date":return r()(this.data[t.value]).format("DD/MM/YYYY");case"actions":return"";default:return this.data[t.value]?this.data[t.value]:"-"}},formattedEmailData(t){switch(t.value){case"published":return this.isPublished?this.translations.published:this.translations.unpublished;case"actions":return"";default:return this.data[t.value]?this.data[t.value]:"-"}},formattedFormData(t){return"published"===t.value?this.isActive?this.translations.active:this.translations.inactive:"label"===t.value&&this.data.label&&"object"===typeof this.data.label?this.data.label[this.lang]?this.data.label[this.lang]:this.data.label.fr:"actions"===t.value?"":this.data[t.value]?this.data[t.value]:"-"},classFromTd(t){let e;switch(t.value){case"status":case"published":e=this.isFinished?"tag finished":this.isPublished||this.isActive?"tag published":"tag unpublished";break;case"type":e="tag "+this.data[t.value];break;case"actions":return"";default:e="list-td-"+t.value}return e},validateFilters(){this.$emit("validateFilters")},updateLoading(t){this.$emit("updateLoading",t)},showModalPreview(){this.$emit("showModalPreview")},redirectToEditItem(t){!0===t.redirect&&(window.location.href=this.getEditUrlByType())},getEditUrlByType(){let t;switch(this.type){case"campaign":t="index.php?option=com_emundus&view=campaign&layout=addnextcampaign&cid="+this.data.id+"&index=0";break;case"form":case"formulaire":t="index.php?option=com_emundus&view=form&layout=formbuilder&prid="+this.data.id+"&index=0&cid=";break;case"grilleEval":t="index.php?option=com_emundus&view=form&layout=formbuilder&prid=&index=0&cid=&evaluation="+this.data.id;break;case"email":t="index.php?option=com_emundus&view=email&layout=add&eid="+this.data.id;break}return t}},computed:{isPublished(){return"campaign"==this.type?1==this.data.published&&r()(this.data.start_date)<=r()()&&(r()(this.data.end_date)>=r()()||null==this.data.end_date||"0000-00-00 00:00:00"==this.data.end_date):"email"==this.type&&1==this.data.published},isActive(){return"form"==this.type||"formulaire"==this.type||"grilleEval"==this.type?1==this.data.status:null},isFinished(){return"campaign"==this.type&&r()(this.data.end_date)<r()()},hasActionMenu(){let t=!0;return"email"==this.type?!1===this.data.lbl.startsWith("custom_")&&!1===this.data.lbl.startsWith("email_")&&(t=!1):"grilleEval"==this.type&&(t=!1),t},actionMenuIsPublished(){return"email"==this.type||"campaign"==this.type?this.isPublished:"form"==this.type||"formulaire"==this.type||"grilleEval"==this.type?this.isActive:1==this.data.published}}},Ut=At,Mt=(a("e052"),Object(b["a"])(Ut,ct,mt,!1,null,"99a77950",null)),wt=Mt.exports,St={components:{ListTableRow:wt},props:{type:{type:String,required:!0},actions:{type:Object,required:!0},params:{type:Object,default:{}}},methods:{validateFilters(){this.$emit("validateFilters")},updateLoading(t){this.$emit("updateLoading",t)},showModalPreview(t){this.$emit("showModalPreview",t)}},computed:{list(){return"email"===this.type&&"undefined"!==typeof this.params&&this.params.email_category?this.$store.getters["lists/list"].filter(t=>0==this.params.email_category||t.category===this.params.email_category):this.$store.getters["lists/list"]}}},Tt=St,xt=Object(b["a"])(Tt,lt,dt,!1,null,null,null),Rt=xt.exports,Lt={components:{ListTableBody:Rt},props:{type:{type:String,required:!0},actions:{type:Object,required:!0},params:{type:Object,default:{}}},data(){return{rowsData:[]}},mounted(){this.rowsData=void 0!==typeof Nt[this.type]?Nt[this.type]:[]},methods:{validateFilters(){this.$emit("validateFilters")},updateLoading(t){this.$emit("updateLoading",t)},showModalPreview(t){this.$emit("showModalPreview",t)}},computed:{isEmptyRowsData(){return 0===this.rowsData.length}}},Bt=Lt,kt=(a("fd69"),Object(b["a"])(Bt,ot,rt,!1,null,"c2d22e9c",null)),It=kt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-grid",class:{"less-than-4":t.list.length<4},attrs:{id:"list-blocs"}},t._l(t.list,(function(e){return a("list-bloc",{key:e.id,attrs:{data:e,type:t.type,actions:t.actions},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading,showModalPreview:function(a){return t.showModalPreview(e.id)}}})})),1)},Pt=[],Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list-bloc-item"},[a("div",{staticClass:"title"},[a("h3",[t._v(t._s(t.title))]),t.data.start_date&&t.data.end_date?a("div",{staticClass:"dates"},[t._v(" "+t._s(t.translations.from)+" "),a("span",[t._v(t._s(t.formatDate(t.data.start_date)))]),t._v(" "+t._s(t.translations.to)+" "),a("span",[t._v(t._s(t.formatDate(t.data.end_date)))])]):t._e()]),a("div",{staticClass:"informations"},[t.data.short_description?a("p",{staticClass:"description"},[t._v(" "+t._s(t.data.short_description)+" ")]):t._e(),null!==t.campaign.associatedCampaigns&&t.campaign.associatedCampaigns.length>0?a("div",{staticClass:"associated-campaigns",attrs:{title:t.translations.associatedCampaigns}},t._l(t.campaign.associatedCampaigns,(function(e){return a("div",{key:e.id,staticClass:"tag campaign-item"},[t._v(" "+t._s(e.label)+" ")])})),0):t._e(),a("div",{staticClass:"tags"},[t.isFinished||null===t.isPublished?t._e():a("div",{class:{published:t.isPublished,unpublished:!t.isPublished}},[t._v(" "+t._s(t.isPublished?t.translations.publishedTag:t.translations.unpublishedTag)+" ")]),null!==t.isActive?a("div",{class:{published:t.isActive,unpublished:!t.isActive}},[t._v(" "+t._s(t.isActive?t.translations.active:t.translations.inactive)+" ")]):t._e(),t.isFinished?a("div",{staticClass:"finished"},[t._v(" "+t._s(t.translations.isFinished)+" ")]):t._e(),t.data.nb_files?a("div",[a("div",[t._v(" "+t._s(t.data.nb_files)+" "),t.data.nb_files>1?a("span",[t._v(t._s(t.translations.files))]):a("span",[t._v(t._s(t.translations.file))])])]):t._e(),"email"==t.type&&t.data.category&&t.data.category.length>0?a("div",[a("div",[t._v(" "+t._s(t.data.category)+" ")])]):t._e()])]),a("hr"),a("div",{staticClass:"actions"},[a("a",{staticClass:"em-primary-button em-font-size-14",on:{click:t.redirectToEditItem}},[t._v(" "+t._s(t.translations.edit)+" ")]),a("list-action-menu",{attrs:{type:t.type,itemId:t.data.id,isPublished:t.actionMenuIsPublished,showTootlip:t.hasActionMenu},on:{validateFilters:t.validateFilters,updateLoading:t.updateLoading,showModalPreview:t.showModalPreview}})],1)])},$t=[];const Gt=a("bef5");var Ht={components:{ListActionMenu:Dt},props:{data:{type:Object,required:!0},type:{type:String,required:!0},actions:{type:Object,required:!0}},data(){return{title:"",lang:"fr",translations:{publishedTag:"COM_EMUNDUS_ONBOARD_FILTER_PUBLISH",unpublishedTag:"COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH",active:"COM_EMUNDUS_ONBOARD_FILTER_PUBLISH_FORM",inactive:"COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH_FORM",isFinished:"COM_EMUNDUS_ONBOARD_FILTER_CLOSE",edit:"COM_EMUNDUS_ONBOARD_MODIFY",files:"COM_EMUNDUS_ONBOARD_FILES",file:"COM_EMUNDUS_ONBOARD_FILE",campaignAssociated:"COM_EMUNDUS_ONBOARD_CAMPAIGN_ASSOCIATED",campaignsAssociated:"COM_EMUNDUS_ONBOARD_CAMPAIGNS_ASSOCIATED",from:"COM_EMUNDUS_ONBOARD_FROM",to:"COM_EMUNDUS_ONBOARD_TO"},campaign:{associatedCampaigns:null}}},mounted(){this.lang=this.$store.getters["global/actualLanguage"],this.getTitle(),"formulaire"!==this.type&&"form"!==this.type&&"grilleEval"!==this.type||this.getAssociatedCampaigns()},methods:{getTitle(){this.data.label&&"string"===typeof this.data.label?this.title=this.data.label:this.data.label&&this.data.label[this.lang]?this.title=this.data.label[this.lang]:this.data.subject&&(this.title=this.data.subject)},redirectToEditItem(){window.location.href=this.getEditUrlByType()},getEditUrlByType(){let t;switch(this.type){case"campaign":t="index.php?option=com_emundus&view=campaigns&layout=addnextcampaign&cid="+this.data.id+"&index=0";break;case"form":case"formulaire":t="index.php?option=com_emundus&view=form&layout=formbuilder&prid="+this.data.id+"&index=0&cid=";break;case"grilleEval":t="index.php?option=com_emundus&view=form&layout=formbuilder&prid=&index=0&cid=&evaluation="+this.data.id;break;case"email":t="index.php?option=com_emundus&view=emails&layout=add&eid="+this.data.id;break}return t},getAssociatedCampaigns(){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getassociatedcampaign",params:{pid:this.data.id},paramsSerializer:t=>Gt.stringify(t)}).then(t=>{this.campaign.associatedCampaigns=t.data.data})},validateFilters(){this.$emit("validateFilters")},updateLoading(t){this.$emit("updateLoading",t)},showModalPreview(){this.$emit("showModalPreview")},formatDate(t){return r()(t).format("DD/MM/YYYY")}},computed:{isPublished(){return"campaign"==this.type?1==this.data.published&&r()(this.data.start_date)<=r()()&&(r()(this.data.end_date)>=r()()||null==this.data.end_date||"0000-00-00 00:00:00"==this.data.end_date):"email"==this.type?1==this.data.published:null},isActive(){return"form"==this.type||"formulaire"==this.type||"grilleEval"==this.type?1==this.data.status:null},isFinished(){return"campaign"==this.type&&r()(this.data.end_date)<r()()},hasActionMenu(){let t=!0;return"email"==this.type?!1===this.data.lbl.startsWith("custom_")&&!1===this.data.lbl.startsWith("email_")&&(t=!1):"grilleEval"==this.type&&(t=!1),t},actionMenuIsPublished(){return"email"==this.type||"campaign"==this.type?this.isPublished:"form"==this.type||"formulaire"==this.type||"grilleEval"==this.type?this.isActive:1==this.data.published}}},zt=Ht,Vt=(a("9a09"),Object(b["a"])(zt,Ft,$t,!1,null,"39d0b0bc",null)),qt=Vt.exports,Yt={components:{ListBloc:qt},props:{type:{type:String,required:!0},actions:{type:Object,required:!0},params:{type:Object,default:{}}},methods:{validateFilters(){this.$emit("validateFilters")},updateLoading(t){this.$emit("updateLoading",t)},showModalPreview(t){this.$emit("showModalPreview",t)}},computed:{list(){return this.params.email_category?this.$store.getters["lists/list"].filter(t=>0==this.params.email_category||t.category===this.params.email_category):this.$store.getters["lists/list"]}}},Jt=Yt,Wt=(a("c0ed"),Object(b["a"])(Jt,jt,Pt,!1,null,"3a68fdb9",null)),Xt=Wt.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalEmailPreview_"+t.model}},[a("modal",{attrs:{name:"modalEmailPreview_"+t.model,height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1,width:"70%"},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"update-field-header em-flex-row em-flex-space-between"},[a("h2",{staticClass:"update-title-header",staticStyle:{"margin-bottom":"10px"}},[t._v(" "+t._s(t.ModelPreview)+" ")]),a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return t.$modal.hide("modalEmailPreview_"+t.model)}}},[a("em",{staticClass:"fas fa-times"})])])])]),a("div",{staticClass:"modalC-content"},[null!=t.email?a("p",[a("span",{domProps:{innerHTML:t._s(t.email.message)}})]):t._e()])])],1)},Qt=[];a("bef5");var Zt={name:"modalEmailPreview",props:{model:String,models:Array},data(){return{email:null,ModelPreview:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_PREVIEWMODEL")}},methods:{beforeClose(t){},beforeOpen(t){this.models.forEach(t=>{t.id==this.model&&(this.email=t)})}}},te=Zt,ee=(a("7d76"),Object(b["a"])(te,Kt,Qt,!1,null,"a86d8dfa",null)),ae=ee.exports,se={components:{ListTable:It,ListBlocs:Xt,ModalEmailPreview:ae},props:{type:{type:String,required:!0},actions:{type:Object,required:!0},params:{type:Object,default:{}}},data(){return{viewType:"blocs",viewTypeOptions:[{value:"table",icon:"dehaze"},{value:"blocs",icon:"grid_view"}],email:{emailToPreview:"-1"}}},methods:{changeViewType(t){this.viewType=t.value},validateFilters(){this.$emit("validateFilters")},updateLoading(t){this.$emit("updateLoading",t)},showModalPreview(t){this.email.emailToPreview=t,this.$modal.show("modalEmailPreview_"+t)}},computed:{list(){return this.$store.getters["lists/list"]}}},ie=se,ne=(a("f586"),Object(b["a"])(ie,it,nt,!1,null,"13ab69a2",null)),oe=ne.exports,re={components:{filters:X,ListHead:st,ListBody:oe},name:"List",data:()=>({datas:{},params:{},type:"",selecedItems:[],actions:{type:"",add_url:""},loading:!1,actualLanguage:"",allPrograms:[],selectedProgram:"all",actualProgramShowingCampaignName:"Tous",recherche:"",timer:null,translations:{Select:Joomla.JText._("COM_EMUNDUS_ONBOARD_SELECT"),Deselect:Joomla.JText._("COM_EMUNDUS_ONBOARD_DESELECT"),Total:Joomla.JText._("COM_EMUNDUS_ONBOARD_TOTAL"),noCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOCAMPAIGN"),noProgram:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOPROGRAM"),noEmail:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOEMAIL"),noForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOFORM"),noFiles:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOFILES"),All:Joomla.JText._("COM_EMUNDUS_ONBOARD_ALL"),AllPrograms:Joomla.JText._("COM_EMUNDUS_ONBOARD_ALL_PROGRAMS"),programs:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM"),ortherPrograms:Joomla.JText._("COM_EMUNDUS_ONBOARD_OTHERCAMP_PROGRAM"),System:Joomla.JText._("COM_EMUNDUS_ONBOARD_SYSTEM"),Categories:Joomla.JText._("COM_EMUNDUS_ONBOARD_CATEGORIES"),Rechercher:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEARCH"),candidature:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGN"),evaluations:Joomla.JText._("COM_EMUNDUS_ONBOARD_EVALUATION")},total:0,filtersCount:"",filters:"",filtersCountFilter:"&filterCount=",filtersCountSearch:"&rechercheCount=",filtersFilter:"&filter=",filtersSort:"&sort=",filtersSearch:"&recherche=",filtersLim:"&lim=",filtersPage:"&page=",filtre:"",tri:"",search:"",limit:25,pages:1,countPages:1,menuEmail:0,email_categories:[]}),computed:{list(){return list.getters.list},isEmpty:()=>list.getters.isSomething,noneDiscoverTranslation(){return"campaign"===this.type?this.translations.noCampaign:"program"===this.type?this.translations.noProgram:"email"===this.type?this.translations.noEmail:"formulaire"===this.type?this.translations.noForm:this.translations.noFiles},notEmptyEmailCategories(){return this.email_categories.filter(t=>""!==t)}},created(){this.datas=this.$store.getters["global/datas"],this.type=this.datas.type.value,p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getActualLanguage"}).then(t=>{this.actualLanguage=t.data.msg}),p.a.get("index.php?option=com_emundus&controller=programme&task=getallprogram").then(t=>{this.allPrograms=t.data.data,this.allPrograms.sort((t,e)=>t.label<e.label?-1:t.label>e.label?1:0)}).catch(t=>{console.log(t)})},watch:{type:function(t){this.actions.type=t,this.typeForAdd="formulaire"===t?"form":t,"form"===this.typeForAdd&&(this.type="formulaire");let e="grilleEval"===this.typeForAdd?"form":this.typeForAdd;"email"==this.type||"campaign"==this.type?this.actions.add_url="index.php?option=com_emundus&view="+this.type+"s&layout=add":this.actions.add_url="index.php?option=com_emundus&view="+e+"&layout=add",this.validateFilters()},menuEmail:function(t){this.type="email",this.params={email_category:t}}},methods:{updateLoading(t){this.loading=t},validateFilters(){this.updateLoading(!0),this.filtersCount=this.filtersCountFilter+this.filtersCountSearch,this.filters=this.filtersFilter+this.filtersSort+this.filtersSearch+this.filtersLim+this.filtersPage+"&program="+this.selectedProgram,this.allFilters()},filter(t){this.filtersCountFilter="&filterCount="+t,this.filtersFilter="&filter="+t,this.filtre=t,this.validateFilters()},sort(t){this.filtersSort="&sort="+t,this.tri=t,this.validateFilters()},cherche(t){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{this.filtersCountSearch="&rechercheCount="+t,this.filtersSearch="&recherche="+t,this.search=t,this.validateFilters()},800)},chercheGo(t){this.cherche(t),this.validateFilters()},nbresults(t){this.filtersLim="&lim="+t,this.limit=t,this.validateFilters()},nbpages(t){t>=1&&t<=this.countPages&&(this.filtersPage="&page="+t,this.pages=t,this.validateFilters())},paginationNumber(t){return this.countPages>10?t<4||t>this.countPages-3||t>pages-3&&t<pages+3?t:"...":t},allFilters(){let t="grilleEval"===this.typeForAdd?"form":this.typeForAdd;"files"!==this.type&&p.a.get("index.php?option=com_emundus&controller="+t+"&task=get"+this.typeForAdd+"count"+this.filtersCount).then(e=>{p.a.get("index.php?option=com_emundus&controller="+t+"&task=getall"+this.typeForAdd+this.filters).then(t=>{this.total=e.data.data,this.$store.commit("lists/listUpdate",t.data.data),this.countPages=Math.ceil(this.total/this.limit),"email"==this.type&&p.a.get("index.php?option=com_emundus&controller=email&task=getemailcategories").then(t=>{this.email_categories=t.data.data}),this.loading=!1}).catch(t=>{console.log(t),this.updateLoading(!1)})}).catch(t=>{console.log(t),this.loading=!1})},updateTotal(t){this.total=t},selectAllItem(){return this.list.filter((function(t){this.$store.commit("lists/selectItem",t.id)}))},deselectItem(){this.$store.commit("lists/resetSelectedItemsList")},selectItem(t){this.$store.commit("lists/selectItem",t)}}},le=re,de=(a("1efc"),Object(b["a"])(le,H,z,!1,null,"c167374e",null)),ce=de.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"campaigns__add-campaign"},[a("notifications",{attrs:{group:"foo-velocity",position:"bottom left","animation-type":"velocity",speed:500,classes:"vue-notification-custom"}}),a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[a("div",[a("div",{staticClass:"em-red-500-color em-mb-8"},[t._v(t._s(t.translations.RequiredFieldsIndicate))]),a("div",{staticClass:"em-mb-16"},[a("label",{attrs:{for:"campLabel"}},[t._v(t._s(t.translations.CampName)+" "),a("span",{staticClass:"em-red-500-color"},[t._v("*")])]),a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.form.label[t.actualLanguage],expression:"form.label[actualLanguage]"}],class:{"is-invalid":t.errors.label},attrs:{id:"campLabel",type:"text",required:""},domProps:{value:t.form.label[t.actualLanguage]},on:{input:function(e){e.target.composing||t.$set(t.form.label,t.actualLanguage,e.target.value)}}})]),t.errors.label?a("span",{staticClass:"em-red-500-color em-mb-8"},[a("span",{staticClass:"em-red-500-color"},[t._v(t._s(t.translations.LabelRequired))])]):t._e(),a("div",{staticClass:"em-grid-2 em-mb-16"},[a("div",[a("div",[a("label",{attrs:{for:"startDate"}},[t._v(t._s(t.translations.StartDate)+" "),a("span",{staticClass:"em-red-500-color"},[t._v("*")])]),a("datetime",{attrs:{id:"startDate",type:"datetime",placeholder:t.translations.StartDate,"input-id":"start_date",phrases:{ok:t.translations.OK,cancel:t.translations.Cancel}},model:{value:t.form.start_date,callback:function(e){t.$set(t.form,"start_date",e)},expression:"form.start_date"}})],1)]),a("div",[a("div",[a("label",{attrs:{for:"endDate"}},[t._v(t._s(t.translations.EndDate)+" "),a("span",{staticClass:"em-red-500-color"},[t._v("*")])]),a("datetime",{attrs:{id:"endDate",type:"datetime",placeholder:t.translations.EndDate+" *","input-id":"end_date","min-datetime":t.minDate,phrases:{ok:t.translations.OK,cancel:t.translations.Cancel}},model:{value:t.form.end_date,callback:function(e){t.$set(t.form,"end_date",e)},expression:"form.end_date"}})],1)])]),a("div",{staticClass:"em-mb-16"},[a("label",{attrs:{for:"year"}},[t._v(t._s(t.translations.PickYear)+" "),a("span",{staticClass:"em-red-500-color"},[t._v("*")])]),a("autocomplete",{attrs:{id:"year",items:this.session,year:t.form.year,name:"2020 - 2021"},on:{searched:t.onSearchYear}})],1),a("div",{staticClass:"em-mb-16 em-flex-row"},[a("div",{staticClass:"em-toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.published,expression:"form.published"}],staticClass:"em-toggle-check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"published",name:"published"},domProps:{checked:Array.isArray(t.form.published)?t._i(t.form.published,null)>-1:t._q(t.form.published,"1")},on:{change:function(e){var a=t.form.published,s=e.target,i=s.checked?"1":"0";if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&t.$set(t.form,"published",a.concat([n])):o>-1&&t.$set(t.form,"published",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.form,"published",i)}}}),a("strong",{staticClass:"b em-toggle-switch"}),a("strong",{staticClass:"b em-toggle-track"})]),a("span",{staticClass:"em-ml-8",attrs:{for:"published"}},[t._v(t._s(t.translations.Publish))])])]),a("hr"),a("div",[a("div",{staticClass:"em-mb-16"},[a("h2",[t._v(t._s(t.translations.Information))])]),a("div",{staticClass:"em-mb-16"},[a("label",{staticStyle:{top:"5em"}},[t._v(t._s(t.translations.Resume)+" "),a("span",{staticClass:"em-red-500-color"},[t._v("*")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.short_description,expression:"form.short_description"}],attrs:{type:"textarea",rows:"2",id:"campResume",maxlength:"500",placeholder:" "},domProps:{value:t.form.short_description},on:{keyup:function(e){return t.checkMaxlength("campResume")},focusout:function(e){return t.removeBorderFocus("campResume")},input:function(e){e.target.composing||t.$set(t.form,"short_description",e.target.value)}}})]),t.errors.short_description?a("p",{staticClass:"em-red-500-color em-mb-8"},[a("span",{staticClass:"em-red-500-color"},[t._v(t._s(t.translations.ResumeRequired))])]):t._e(),"undefined"!=typeof t.form.description?a("div",{staticClass:"em-mb-16"},[a("editor",{key:t.editorKey,attrs:{height:"30em",text:t.form.description,enable_variables:!1,placeholder:t.translations.Description,id:"campaign_description"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1):t._e()]),a("hr"),a("div",[a("div",{staticClass:"em-mb-16"},[a("h2",[t._v(t._s(t.translations.Program))])]),a("div",{staticClass:"em-mb-16"},[t._v(t._s(t.translations.ProgramDesc)),a("span",{staticClass:"em-red-500-color"},[t._v("*")])]),a("div",{staticClass:"em-flex-row em-mb-16"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.training,expression:"form.training"}],staticClass:"em-w-100",attrs:{id:"select_prog",disabled:this.programs.length<=0},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"training",e.target.multiple?a:a[0])},t.setCategory]}},[a("option",{attrs:{value:""}},[t._v(t._s(t.translations.ChooseProg))]),t._l(this.programs,(function(e,s){return a("option",{key:s,attrs:{"data-category":e.programmes},domProps:{value:e.code}},[t._v(" "+t._s(e.label)+" ")])}))],2),0!=t.coordinatorAccess?a("button",{staticClass:"em-ml-8 em-transparent-button",attrs:{title:t.translations.AddProgram,type:"button",id:"add-program"},on:{click:t.displayProgram}},[a("span",{staticClass:"material-icons-outlined em-main-500-color"},[t._v("add_circle_outline")])]):t._e()]),a("transition",{attrs:{name:"slide-fade"}},[t.isHiddenProgram?a("div",[a("div",[a("div",{staticClass:"em-mb-16"},[a("label",{attrs:{for:"prog_label"}},[t._v(t._s(t.translations.ProgName)+" "),a("span",{staticClass:"em-red-500-color"},[t._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.programForm.label,expression:"programForm.label"}],class:{"is-invalid":t.errors.progLabel},attrs:{type:"text",id:"prog_label",placeholder:" "},domProps:{value:t.programForm.label},on:{keyup:t.updateCode,input:function(e){e.target.composing||t.$set(t.programForm,"label",e.target.value)}}})]),t.errors.progLabel?a("p",{staticClass:"em-red-500-color em-mb-8"},[a("span",{staticClass:"em-red-500-color"},[t._v(t._s(t.translations.ProgLabelRequired))])]):t._e()])]):t._e()])],1),a("hr"),a("div",{staticClass:"em-flex-row em-flex-space-between"},[a("button",{staticClass:"em-secondary-button em-w-auto",attrs:{type:"button",onclick:"history.back()"}},[t._v(" "+t._s(t.translations.Retour)+" ")]),a("button",{staticClass:"em-primary-button em-w-auto",attrs:{type:"button"},on:{click:function(e){t.quit=1,t.submit()}}},[t._v(" "+t._s(t.translations.Continuer)+" ")])])])]),t.submitted?a("div",{staticClass:"em-page-loader"}):t._e()],1)},ue=[],pe=a("0065"),he=a("aaac"),_e=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"editor"},[a("div",{attrs:{id:"tiny_"+t.selector_id}})])},ge=[],fe=a("8e5c"),be=a.n(fe),ve=a("f6f6"),Oe=a.n(ve),Ce=(a("a881"),a("59d1"),a("9908"),a("53b8"),a("66c5"),a("26ab"),a("2efd"),a("5cb9"),a("0898"),a("5aa7"),a("750b"),a("8f8e"),a("bedc"),{components:{editor:be.a},props:{text:String,lang:String,placeholder:String,id:String,height:String,enable_variables:Boolean},data(){return{selector_id:this.id+Oe.a.random(1e4,99999),variables:{},data:null}},methods:{saveText(){this.$emit("input",be.a.activeEditor.getContent())}},watch:{text:function(){this.$forceUpdate()}},mounted(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=geteditorvariables"}).then(t=>{this.variables=t.data.data});var t=window.location.protocol+"//"+window.location.host+"/media/com_emundus_vue/";let e={selector:"#tiny_"+this.selector_id,images_upload_url:"index.php?option=com_emundus&controller=settings&task=uploadimages",plugins:"paste link media preview image code anchor advlist hr emoticons lists searchreplace charmap quickbars pagebreak autolink print mention",toolbar:"undo redo | forecolor bold italic underline strikethrough | fontsizeselect formatselect | image preview | alignleft aligncenter alignright alignjustify hr | bullist numlist | outdent indent | insertfile media anchor| charmap emoticons backcolor | searchreplace print",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",content_css:t+"skins/ui/oxide/content.min.css",convert_urls:!1,height:this.height,branding:!1,elementpath:!1,statusbar:!1,menubar:!1,a11y_advanced_options:!1,toolbar_sticky:!1,quickbars_insert_toolbar:"",quickbars_selection_toolbar:"bold italic underline | quicklink h2 h3 blockquote",toolbar_mode:"sliding",placeholder:this.placeholder,file_picker_types:"image",file_picker_callback:function(t,e,a){var s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.onchange=function(){var e=this.files[0],a=new FileReader;a.onload=function(){var s="blobid"+(new Date).getTime(),i=be.a.activeEditor.editorUpload.blobCache,n=a.result.split(",")[1],o=i.create(s,e,n);i.add(o),t(o.blobUri(),{title:e.name})},a.readAsDataURL(e)},s.click()},mentions:{delimiter:"/",source:(t,e,a)=>{"/"===a&&1==this.enable_variables&&e(this.variables)},queryBy:"tag",delay:200,insert:t=>(setTimeout(()=>{this.$emit("input",be.a.activeEditor.getContent())},500),"<span>["+t.tag+"]</span>"),render:function(t){return'<li class="email-tags"><a href="javascript:;"><span>'+t.tag+"</span><p>"+t.description+"</p></a></li>"},renderDropdown:function(){return'<ul class="rte-autocomplete dropdown-menu"></ul>'}},setup:t=>{t.on("keyup",()=>{this.$emit("input",be.a.activeEditor.getContent())}),t.on("blur",()=>{this.$emit("focusout",be.a.activeEditor.getContent())}),t.on("init",()=>{be.a.activeEditor.setContent(this.text)})}};"fr"==this.lang?(e.language="fr_FR",e.language_url=t+"languages/fr_FR.js",be.a.init(e)):be.a.init(e),this.$forceUpdate(),setInterval(this.saveText,3e3)}}),Ee=Ce,ye=(a("81da"),Object(b["a"])(Ee,_e,ge,!1,null,"23227a24",null)),De=ye.exports,Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"autocomplete"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],class:""!==t.year?"":"placeholder",attrs:{type:"text",id:t.id,placeholder:""!==t.year?t.year:t.name},domProps:{value:t.search},on:{input:[function(e){e.target.composing||(t.search=e.target.value)},t.onChange],keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:t.onArrowDown.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:t.onArrowUp.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onEnter.apply(null,arguments)}]}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"autocomplete-results"},t._l(t.results,(function(e,s){return a("li",{key:s,staticClass:"autocomplete-result",class:{"is-active":s===t.arrowCounter},on:{click:function(a){return t.setResult(e)}}},[t._v(" "+t._s(e)+" ")])})),0)])},Ae=[],Ue={name:"autocomplete",props:{items:{type:Array,required:!1,default:()=>[]},name:String,year:String,id:String},data(){return{search:"",results:[],isOpen:!1,sLoading:!1,arrowCounter:-1}},created(){const t=t=>new Promise(e=>setTimeout(e,t));t(2e3).then(()=>{this.search=this.year})},methods:{onSearching(t){this.$emit("searched",this.search)},onChange(){this.isOpen=!0,this.filterResults(),this.onSearching()},filterResults(){this.results=this.items.filter(t=>t.toLowerCase().indexOf(this.search.toLowerCase())>-1)},setResult(t){this.search=t,this.isOpen=!1,this.onSearching()},onArrowDown(){this.arrowCounter<this.results.length&&(this.arrowCounter=this.arrowCounter+1)},onArrowUp(){this.arrowCounter>0&&(this.arrowCounter=this.arrowCounter-1)},onEnter(){this.search=this.results[this.arrowCounter],this.isOpen=!1,this.arrowCounter=-1,this.onSearching()},handleClickOutside(t){this.$el.contains(t.target)||(this.isOpen=!1,this.arrowCounter=-1)}},mounted(){document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)}},Me=Ue,we=(a("bb8f"),Object(b["a"])(Me,Ne,Ae,!1,null,"d62d9cce",null)),Se=we.exports,Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"translation"},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{staticClass:"inlineflex",staticStyle:{margin:"25px"}},[a("label",{staticClass:"translate-label"},[t._v(t._s(t.TranslateIn))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.currentLangTranslation,expression:"currentLangTranslation"}],staticClass:"dropdown-toggle ml-10px",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.currentLangTranslation=e.target.multiple?a:a[0]}}},t._l(t.languages,(function(e){return a("option",{key:e.sef,domProps:{value:e.sef}},[t._v(t._s(e.title_native))])})),0)])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label[t.currentLangTranslation],expression:"label[currentLangTranslation]"}],staticClass:"form__input field-general w-input",attrs:{type:"text",id:"label_"+t.currentLangTranslation},domProps:{value:t.label[t.currentLangTranslation]},on:{input:function(e){e.target.composing||t.$set(t.label,t.currentLangTranslation,e.target.value)}}})])],1)},xe=[],Re={name:"translation",props:{label:Object,actualLanguage:String},data(){return{currentLangTranslation:"en",languages:[],TranslateIn:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATE_IN")}},created(){this.getLanguages()},methods:{getLanguages(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getactivelanguages"}).then(t=>{this.languages=t.data.data,this.languages.forEach((t,e)=>{t.sef==this.actualLanguage&&this.languages.splice(e,1)}),this.currentLangTranslation=this.languages[0].sef})}},mounted(){document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)}},Le=Re,Be=Object(b["a"])(Le,Te,xe,!1,null,"3122308b",null),ke=Be.exports;const Ie=a("bef5");var je={name:"addCampaign",components:{Datetime:pe["Datetime"],Editor:De,Autocomplete:Se,Translation:ke},directives:{focus:{inserted:function(t){t.focus()}}},quit:1,props:{campaign:Number},data:()=>({campaignId:0,actualLanguage:"",coordinatorAccess:0,manyLanguages:0,isHiddenProgram:!1,olderDate:"",minDate:"",programs:[],years:[],status:[],languages:[],session:[],old_training:"",old_program_form:"",editorKey:0,form:{label:{},start_date:"",end_date:"",short_description:"",description:null,training:"",year:"",published:1,is_limited:0,profile_id:9,limit:50,limit_status:[]},can_translate:{label:!1},enableTip:!1,programForm:{code:"",label:"",notes:"",programmes:"",published:1,apply_online:1},year:{label:"",code:"",schoolyear:"",published:1,profile_id:"",programmes:""},errors:{label:!1,progCode:!1,progLabel:!1,short_description:!1,limit_files_number:!1,limit_status:!1},translations:{Parameter:"COM_EMUNDUS_ONBOARD_ADDCAMP_PARAMETER",CampName:"COM_EMUNDUS_ONBOARD_ADDCAMP_CAMPNAME",StartDate:"COM_EMUNDUS_ONBOARD_ADDCAMP_STARTDATE",EndDate:"COM_EMUNDUS_ONBOARD_ADDCAMP_ENDDATE",Information:"COM_EMUNDUS_ONBOARD_ADDCAMP_INFORMATION",Resume:"COM_EMUNDUS_ONBOARD_ADDCAMP_RESUME",Description:"COM_EMUNDUS_ONBOARD_ADDCAMP_DESCRIPTION",Program:"COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM",AddProgram:"COM_EMUNDUS_ONBOARD_ADDPROGRAM",ChooseProg:"COM_EMUNDUS_ONBOARD_ADDCAMP_CHOOSEPROG",PickYear:"COM_EMUNDUS_ONBOARD_ADDCAMP_PICKYEAR",Retour:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",Quitter:"COM_EMUNDUS_ONBOARD_ADD_QUITTER",Continuer:"COM_EMUNDUS_ONBOARD_ADD_CONTINUER",Publish:"COM_EMUNDUS_ONBOARD_FILTER_PUBLISH",DepotDeDossier:"COM_EMUNDUS_ONBOARD_DEPOTDEDOSSIER",ProgName:"COM_EMUNDUS_ONBOARD_PROGNAME",ProgCode:"COM_EMUNDUS_ONBOARD_PROGCODE",ChooseCategory:"COM_EMUNDUS_ONBOARD_CHOOSECATEGORY",NameCategory:"COM_EMUNDUS_ONBOARD_NAMECATEGORY",LabelRequired:"COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME",RequiredFieldsIndicate:"COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE",ProgramResume:"COM_EMUNDUS_ONBOARD_PROGRAM_RESUME",ProgLabelRequired:"COM_EMUNDUS_ONBOARD_PROG_REQUIRED_LABEL",ResumeRequired:"COM_EMUNDUS_ONBOARD_CAMP_REQUIRED_RESUME",OK:"COM_EMUNDUS_ONBOARD_OK",Cancel:"COM_EMUNDUS_ONBOARD_CANCEL",TranslateEnglish:"COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH",FilesLimit:"COM_EMUNDUS_ONBOARD_FILES_LIMIT",FilesNumberLimit:"COM_EMUNDUS_ONBOARD_FILES_LIMIT_NUMBER",StatusLimit:"COM_EMUNDUS_ONBOARD_FILES_LIMIT_STATUS",StatusLimitRequired:"COM_EMUNDUS_ONBOARD_TRIGGERSTATUS_REQUIRED",FilesLimitRequired:"COM_EMUNDUS_ONBOARD_FILES_LIMIT_REQUIRED",AddCampaign:"COM_EMUNDUS_ONBOARD_ADD_CAMPAIGN",ProgramDesc:"COM_EMUNDUS_ONBOARD_PROGRAM_INTRO_DESC"},submitted:!1}),created(){""==this.$props.campaign?this.campaignId=this.$store.getters["global/datas"].campaign.value:this.campaignId=this.$props.campaign,this.actualLanguage=this.$store.getters["global/actualLanguage"],this.manyLanguages=this.$store.getters["global/manyLanguages"],this.coordinatorAccess=this.$store.getters["global/coordinatorAccess"],he["Settings"].defaultLocale=this.actualLanguage;let t=new Date;this.form.start_date=he["DateTime"].local(t.getFullYear(),t.getMonth()+1,t.getDate(),0,0,0).toISO(),this.getLanguages(),this.getCampaignById()},methods:{getCampaignById(){"undefined"!==typeof this.campaignId&&""!==this.campaignId&&p.a.get("index.php?option=com_emundus&controller=campaign&task=getcampaignbyid&id="+this.campaignId).then(t=>{let e=t.data.data.campaign.label;this.form=t.data.data.campaign,this.$emit("getInformations",this.form),this.programForm=t.data.data.program,this.form.label=t.data.data.label,this.languages.forEach(t=>{""!==this.form.label[t.sef]&&null!=this.form.label[t.sef]||(this.form.label[t.sef]=e)}),this.form.start_date=he["DateTime"].fromSQL(this.form.start_date).toISO(),this.form.end_date=he["DateTime"].fromSQL(this.form.end_date).toISO(),"0000-00-00T00:00:00.000Z"===this.form.end_date?this.form.end_date="":this.olderDate=this.form.end_date,"undefined"!=typeof t.data.data.campaign.status?(this.form.limit_status=[],this.form.is_limited=1,Object.values(t.data.data.campaign.status).forEach(t=>{this.form.limit_status[parseInt(t.limit_status)]=!0})):this.form.limit_status=[]}).catch(t=>{console.log(t)}),this.getAllPrograms()},getAllPrograms(){p.a.get("index.php?option=com_emundus&controller=programme&task=getallprogram").then(t=>{this.programs=t.data.data,0!==Object.keys(this.programs).length&&this.programs.sort((t,e)=>t.id-e.id)}).catch(t=>{console.log(t)}),this.getYears()},getYears(){p.a.get("index.php?option=com_emundus&controller=campaign&task=getyears").then(t=>{this.years=t.data.data,this.years.forEach(t=>{this.session.push(t.schoolyear)})}).catch(t=>{console.log(t)}),this.getStatus()},getLanguages(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getactivelanguages"}).then(t=>{this.languages=t.data.data})},setCategory(t){this.year.programmes=t.target.options[t.target.options.selectedIndex].dataset.category,this.programForm=this.programs.find(t=>t.code==this.form.training)},updateCode(){""!==this.programForm.label?(this.programForm.code=this.programForm.label.toUpperCase().replace(/[^a-zA-Z0-9]/g,"_").substring(0,10)+"_00",0!==Object.keys(this.programs).length&&this.programs.forEach(t=>{if(this.programForm.code==t.code){let e=parseInt(t.code.split("_")[1])+1;this.programForm.code=e>10?this.programForm.label.toUpperCase()+"_"+e:this.programForm.label.toUpperCase()+"_0"+e}})):this.programForm.code=""},enableLabelTranslation(){this.can_translate.label=!this.can_translate.label,this.can_translate.label&&setTimeout(()=>{document.getElementById("label_en").focus()},100)},getStatus(){p.a.get("index.php?option=com_emundus&controller=settings&task=getstatus").then(t=>{this.status=t.data.data})},createCampaignWithExistingProgram(t){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=createcampaign",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ie.stringify({body:t})}).then(t=>{this.campaignId=t.data.data,this.quitFunnelOrContinue(this.quit)}).catch(t=>{console.log(t)})},createCampainWithNoExistingProgram(t){p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=createprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ie.stringify({body:t})}).then(()=>{this.form.training=t.code,this.form.start_date=he["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=he["DateTime"].fromISO(this.form.end_date).toISO(),p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=createcampaign",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ie.stringify({body:this.form})}).then(t=>{this.campaignId=t.data.data,this.quitFunnelOrContinue(this.quit)}).catch(t=>{console.log(t)})})},submit(){if(this.errors={label:!1,progCode:!1,progLabel:!1,short_description:!1,limit_files_number:!1,limit_status:!1},""==this.form.label.fr&&""==this.form.label.en)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.label=!0,0;if(""==this.form.end_date)return window.scrollTo({top:0,behavior:"smooth"}),document.getElementById("end_date").focus(),0;if(""==this.form.year)return window.scrollTo({top:0,behavior:"smooth"}),document.getElementById("year").focus(),0;if(1==this.form.is_limited){let t=this.form.limit_status.every(t=>!1===t);if(""==this.form.limit)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.limit_files_number=!0,0;if(0==this.form.limit_status.length||t)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.limit_status=!0,0}if(""==this.form.training){if(!this.isHiddenProgram)return document.getElementById("select_prog").focus(),0;if(""==this.programForm.label)return this.errors.progLabel=!0,document.getElementById("prog_label").focus(),0;if(""==this.programForm.code)return this.errors.progCode=!0,document.getElementById("prog_code").focus(),0}if(this.year.label=this.form.label,this.year.code=this.form.training,this.year.schoolyear=this.form.year,this.year.published=this.form.published,this.year.profile_id=this.form.profile_id,""!=this.form.label.en&&null!=this.form.label.en&&"undefined"!=typeof this.form.label.en||(this.form.label.en=this.form.label.fr),this.submitted=!0,"undefined"!==typeof this.campaignId&&null!==this.campaignId&&""!==this.campaignId){let t="createprogram",e={body:this.programForm};""!=this.form.training&&(t="updateprogram",e={body:this.programForm,id:this.form.progid}),p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task="+t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ie.stringify(e)}).then(()=>{this.form.training=this.programForm.code,this.form.start_date=he["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=he["DateTime"].fromISO(this.form.end_date).toISO(),p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updatecampaign",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ie.stringify({body:this.form,cid:this.campaignId})}).then(()=>{this.$emit("nextSection")}).catch(t=>{console.log(t)})}).catch(t=>{console.log(t)})}else""!==this.form.training?(this.programForm=this.programs.find(t=>t.code==this.form.training),this.form.training=this.programForm.code,this.form.start_date=he["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=he["DateTime"].fromISO(this.form.end_date).toISO(),this.createCampaignWithExistingProgram(this.form)):this.createCampainWithNoExistingProgram(this.programForm)},quitFunnelOrContinue(t){0==t?this.redirectJRoute("index.php?option=com_emundus&view=campaign"):1==t&&(document.cookie="campaign_"+this.campaignId+"_menu = 2; expires=Session; path=/",this.redirectJRoute("index.php?option=com_emundus&view=form&layout=addnextcampaign&cid="+this.campaignId+"&index=0"))},redirectJRoute(t){window.location.href=t},onSearchYear(t){this.form.year=t},displayProgram(){this.isHiddenProgram?(document.getElementById("add-program").style="transform: rotate(0)",this.form.training=this.old_training,this.programForm=this.old_program_form,document.getElementById("select_prog").removeAttribute("disabled")):(this.old_training=this.form.training,this.old_program_form=this.programForm,this.form.training="",this.programForm={code:"",label:"",notes:"",programmes:"",published:1,apply_online:1},document.getElementById("add-program").style="transform: rotate(135deg)",document.getElementById("select_prog").setAttribute("disabled","disabled")),this.isHiddenProgram=!this.isHiddenProgram},enableTranslationTip(){this.enableTip||(this.enableTip=!0,this.tip())},checkMaxlength(t){var e=document.getElementById(t).getAttribute("maxlength");e==this.form.short_description.length?document.getElementById(t).style.borderColor="red":document.getElementById(t).style.borderColor="#3898ec"},removeBorderFocus(t){document.getElementById(t).style.borderColor="#cccccc"},tip(){0!=this.manyLanguages&&this.show("foo-velocity",this.translate("COM_EMUNDUS_ONBOARD_TRANSLATETIP")+'<em class="translate-icon"></em>',this.translate("COM_EMUNDUS_ONBOARD_TIP"))},show(t,e="",a="Information"){this.$notify({group:t,title:""+a,text:e,duration:1e5})},clean(t){this.$notify({group:t,clean:!0})}},watch:{"form.start_date":function(t){this.minDate=he["DateTime"].fromISO(t).plus({days:1}).toISO(),""==this.form.end_date&&(this.form.end_date=he["DateTime"].fromISO(t).plus({days:1}).toISO())}}},Pe=je,Fe=(a("b270"),Object(b["a"])(Pe,me,ue,!1,null,"24a1a41f",null)),$e=Fe.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"emails__add-email"},[a("notifications",{attrs:{group:"foo-velocity",position:"bottom left","animation-type":"velocity",speed:500,classes:"vue-notification-custom"}}),a("div",[a("form",{on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[a("div",[a("span",{staticClass:"em-red-500-color em-mb-8"},[t._v(t._s(t.translations.RequiredFieldsIndicate))]),a("div",{staticClass:"em-mb-16"},[a("h2",[t._v(t._s(t.translations.Informations))])]),a("div",[a("div",{staticClass:"em-mb-16"},[a("label",[t._v(t._s(t.translations.emailName)+" "),a("span",{staticStyle:{color:"#E5283B"}},[t._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.subject,expression:"form.subject"}],class:{"is-invalid":t.errors.subject},attrs:{type:"text"},domProps:{value:t.form.subject},on:{input:function(e){e.target.composing||t.$set(t.form,"subject",e.target.value)}}})]),t.errors.subject?a("span",{staticClass:"em-red-500-color em-mb-8"},[a("span",{staticClass:"em-red-500-color"},[t._v(t._s(t.translations.SubjectRequired))])]):t._e(),a("div",{staticClass:"em-mb-16"},[a("label",[t._v(t._s(t.translations.emailBody)+" "),a("span",{staticStyle:{color:"#E5283B"}},[t._v("*")])]),t.dynamicComponent?a("editor",{class:{"is-invalid":t.errors.message},attrs:{id:"email",height:"30em",text:t.form.message,lang:t.actualLanguage,enable_variables:!0,placeholder:t.translations.EmailResume},model:{value:t.form.message,callback:function(e){t.$set(t.form,"message",e)},expression:"form.message"}}):t._e()],1),t.errors.message?a("p",{staticClass:"em-red-500-color em-mb-8"},[a("span",{staticClass:"em-red-500-color"},[t._v(t._s(t.translations.BodyRequired))])]):t._e()])]),a("hr"),a("div",[a("div",{staticClass:"em-flex-row em-mb-16"},[a("p",{staticClass:"em-h4"},[t._v(t._s(t.translations.Advanced))]),a("button",{directives:[{name:"show",rawName:"v-show",value:!t.displayAdvancedParameters,expression:"!displayAdvancedParameters"}],staticClass:"em-transparent-button",attrs:{title:t.translations.Advanced,type:"button"},on:{click:t.displayAdvanced}},[a("span",{staticClass:"material-icons-outlined em-main-500-color"},[t._v("add_circle_outline")])]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.displayAdvancedParameters,expression:"displayAdvancedParameters"}],staticClass:"em-transparent-button",attrs:{title:t.translations.Advanced,type:"button"},on:{click:t.displayAdvanced}},[a("span",{staticClass:"material-icons-outlined em-main-500-color"},[t._v("remove_circle_outline")])])]),t.displayAdvancedParameters?a("div",[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.translations.receiverName))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name,expression:"form.name"}],attrs:{type:"text"},domProps:{value:t.form.name},on:{input:function(e){e.target.composing||t.$set(t.form,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.translations.emailAddress))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.emailfrom,expression:"form.emailfrom"}],attrs:{type:"text"},domProps:{value:t.form.emailfrom},on:{input:function(e){e.target.composing||t.$set(t.form,"emailfrom",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.translations.emailCategory))]),a("autocomplete",{attrs:{items:this.categories,year:this.form.category},on:{searched:t.onSearchCategory}})],1),a("div",{staticClass:"form-group",attrs:{id:"receivers_cc"}},[a("label",[t._v(t._s(t.translations.ReceiversCC))]),a("multiselect",{attrs:{label:"email","track-by":"email",options:t.receivers_cc,multiple:!0,searchable:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translations.ReceiversCCPlaceHolder,"close-on-select":!1,"clear-on-select":!1},on:{tag:t.addNewCC},model:{value:t.selectedReceiversCC,callback:function(e){t.selectedReceiversCC=e},expression:"selectedReceiversCC"}})],1),a("div",{staticClass:"form-group",attrs:{id:"receivers_bcc"}},[a("label",[t._v(t._s(t.translations.ReceiversBCC))]),a("multiselect",{attrs:{label:"email","track-by":"email",options:t.receivers_bcc,multiple:!0,searchable:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translations.ReceiversBCCPlaceHolder,"close-on-select":!1,"clear-on-select":!1},on:{tag:t.addNewBCC},model:{value:t.selectedReceiversBCC,callback:function(e){t.selectedReceiversBCC=e},expression:"selectedReceiversBCC"}})],1),t.attached_letters?a("div",{staticClass:"form-group",attrs:{id:"attached_letters"}},[a("label",[t._v(t._s(t.translations.Letters))]),a("multiselect",{attrs:{label:"value","track-by":"id",options:t.attached_letters,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translations.LettersPlaceHolder,"close-on-select":!1,"clear-on-select":!1},model:{value:t.selectedLetterAttachments,callback:function(e){t.selectedLetterAttachments=e},expression:"selectedLetterAttachments"}})],1):t._e(),t.tags?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.translations.Tags))]),a("multiselect",{attrs:{label:"label","track-by":"id",options:t.action_tags,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translations.TagsPlaceHolder,"close-on-select":!1,"clear-on-select":!1},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}})],1):t._e(),a("div",{staticClass:"form-group",attrs:{id:""}},[a("label",[t._v(t._s(t.translations.CandidateAttachments))]),a("multiselect",{attrs:{label:"value","track-by":"id",options:t.candidate_attachments,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translations.CandidateAttachmentsPlaceholder,"close-on-select":!1,"clear-on-select":!1},model:{value:t.selectedCandidateAttachments,callback:function(e){t.selectedCandidateAttachments=e},expression:"selectedCandidateAttachments"}})],1)]):t._e()]),a("div",{staticClass:"em-flex-row em-flex-space-between"},[a("button",{staticClass:"em-secondary-button em-w-auto",attrs:{type:"button",onclick:"history.back()"}},[t._v(" "+t._s(t.translations.retour)+" ")]),a("button",{staticClass:"em-primary-button em-w-auto",attrs:{type:"submit"}},[t._v(" "+t._s(t.translations.continuer)+" ")])])])]),t.loading||t.submitted?a("div",{staticClass:"em-page-loader"}):t._e()],1)},He=[],ze=a("e191"),Ve=a.n(ze);const qe={lang:"",datas:[],actualLanguage:"",manyLanguages:"",coordinatorAccess:""},Ye={datas:t=>t.datas,actualLanguage:t=>t.actualLanguage,manyLanguages:t=>t.manyLanguages,coordinatorAccess:t=>t.coordinatorAccess},Je={setLang({commit:t},e){t("setLang",e)}},We={setLang(t,e){t.lang=e},initDatas(t,e){return t.datas=e,t.datas},initCurrentLanguage(t,e){return t.actualLanguage=e,t.actualLanguage},initManyLanguages(t,e){return t.manyLanguages=e,t.manyLanguages},initCoordinatorAccess(t,e){return t.coordinatorAccess=e,t.coordinatorAccess}};var Xe={namespaced:!0,state:qe,getters:Ye,actions:Je,mutations:We};const Ke=a("bef5");var Qe={name:"addEmail",components:{Editor:De,Autocomplete:Se,Multiselect:Ve.a},data:()=>({email:0,actualLanguage:"",langue:0,dynamicComponent:!1,displayAdvancedParameters:!1,translations:{AddEmail:"COM_EMUNDUS_ONBOARD_ADD_EMAIL",Advanced:"COM_EMUNDUS_ONBOARD_ADVANCED_CUSTOMING",Informations:"COM_EMUNDUS_ONBOARD_ADDCAMP_INFORMATION",Trigger:"COM_EMUNDUS_ONBOARD_EMAIL_TRIGGER",emailType:"COM_EMUNDUS_ONBOARD_ADDEMAIL_CHOOSETYPE",emailCategory:"COM_EMUNDUS_ONBOARD_CHOOSECATEGORY",retour:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",continuer:"COM_EMUNDUS_ONBOARD_ADD_CONTINUER",emailName:"COM_EMUNDUS_ONBOARD_ADDEMAIL_NAME",emailBody:"COM_EMUNDUS_ONBOARD_ADDEMAIL_BODY",receiverName:"COM_EMUNDUS_ONBOARD_ADDEMAIL_RECEIVER",emailAddress:"COM_EMUNDUS_ONBOARD_ADDEMAIL_ADDRESS",EmailResume:"COM_EMUNDUS_ONBOARD_ADDEMAIL_RESUME",RequiredFieldsIndicate:"COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE",EmailType:"COM_EMUNDUS_ONBOARD_EMAILTYPE",SubjectRequired:"COM_EMUNDUS_ONBOARD_SUBJECT_REQUIRED",BodyRequired:"COM_EMUNDUS_ONBOARD_BODY_REQUIRED",Program:"COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM",Model:"COM_EMUNDUS_ONBOARD_TRIGGERMODEL",ModelRequired:"COM_EMUNDUS_ONBOARD_TRIGGERMODEL_REQUIRED",Status:"COM_EMUNDUS_ONBOARD_TRIGGERSTATUS",StatusRequired:"COM_EMUNDUS_ONBOARD_TRIGGERSTATUS_REQUIRED",Target:"COM_EMUNDUS_ONBOARD_TRIGGERTARGET",TargetRequired:"COM_EMUNDUS_ONBOARD_TRIGGERTARGET_REQUIRED",Administrators:"COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS",Evaluators:"COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS",Candidates:"COM_EMUNDUS_ONBOARD_PROGRAM_CANDIDATES",DefinedUsers:"COM_EMUNDUS_ONBOARD_PROGRAM_DEFINED_USERS",ChooseUsers:"COM_EMUNDUS_ONBOARD_TRIGGER_CHOOSE_USERS",UsersRequired:"COM_EMUNDUS_ONBOARD_TRIGGER_USERS_REQUIRED",Search:"COM_EMUNDUS_ONBOARD_SEARCH_USERS",TheCandidate:"COM_EMUNDUS_ONBOARD_THE_CANDIDATE",Manual:"COM_EMUNDUS_ONBOARD_MANUAL",Actions:"COM_EMUNDUS_ONBOARD_TRIGGER_ACTIONS",Tags:"COM_EMUNDUS_ONBOARD_EMAIL_TAGS",DocumentType:"COM_EMUNDUS_ONBOARD_EMAIL_DOCUMENT",Letters:"COM_EMUNDUS_ONBOARD_EMAIL_DOCUMENT",LettersPlaceHolder:"COM_EMUNDUS_ONBOARD_PLACEHOLDER_EMAIL_DOCUMENT",ReceiversCC:"COM_EMUNDUS_ONBOARD_RECEIVER_CC_TAGS",ReceiversCCPlaceHolder:"COM_EMUNDUS_ONBOARD_RECEIVER_CC_TAGS_PLACEHOLDER",ReceiversBCC:"COM_EMUNDUS_ONBOARD_RECEIVER_BCC_TAGS",ReceiversBCCPlaceHolder:"COM_EMUNDUS_ONBOARD_RECEIVER_BCC_TAGS_PLACEHOLDER",CopiesTooltips:"COM_EMUNDUS_ONBOARD_CC_BCC_TOOLTIPS",TagsPlaceHolder:"COM_EMUNDUS_ONBOARD_PLACEHOLDER_EMAIL_TAGS",CandidateAttachments:"COM_EMUNDUS_ONBOARD_CANDIDAT_ATTACHMENTS",CandidateAttachmentsPlaceholder:"COM_EMUNDUS_ONBOARD_PLACEHOLDER_CANDIDAT_ATTACHMENTS"},categories:[],programs:[],status:[],users:[],selectedUsers:[],enableTip:!1,searchTerm:"",selectall:!1,tags:[],documents:[],selectedTags:[],selectedCandidateAttachments:[],form:{lbl:"",subject:"",name:"",emailfrom:"",message:"",type:2,category:"",published:1},trigger:{model:null,status:null,action_status:null,target:null,program:null},triggered:!1,errors:{subject:!1,message:!1,trigger:{model:!1,status:!1,target:!1,selectedUsers:!1,action_status:!1}},submitted:!1,loading:!1,selectedReceiversCC:[],selectedReceiversBCC:[],selectedLetterAttachments:[],receivers_cc:[],receivers_bcc:[],attached_letters:[],action_tags:[],candidate_attachments:[]}),created(){this.loading=!0,this.getAllAttachments(),this.getAllTags(),this.getAllDocumentLetter(),this.actualLanguage=this.$store.getters["global/actualLanguage"],p.a.get("index.php?option=com_emundus&controller=email&task=getemailcategories").then(t=>{this.categories=t.data.data,this.email=this.$store.getters["global/datas"].email.value,"undefined"!==typeof this.email&&0!==this.email&&""!==this.email?this.getEmailById(this.email):(this.dynamicComponent=!0,this.loading=!1)}).catch(t=>{console.log(t)}),setTimeout(()=>{this.enableVariablesTip()},2e3),this.getProgramsList(),this.getStatus(),this.getUsers()},mounted(){"en"===this.actualLanguage&&(this.langue=1)},methods:{getEmailById(){p.a.get("index.php?option=com_emundus&controller=email&task=getemailbyid&id="+this.email).then(t=>{!1!==t.data.data&&0!=t.data.status?(this.form=t.data.data.email,this.dynamicComponent=!0,this.selectedLetterAttachments=t.data.data.letter_attachment?t.data.data.letter_attachment:[],this.selectedCandidateAttachments=t.data.data.candidate_attachment?t.data.data.candidate_attachment:[],this.selectedTags=t.data.data.tags?t.data.data.tags:[],null!==t.data.data.receivers&&void 0!==t.data.data.receivers&&""!==t.data.data.receivers&&this.setEmailReceivers(t.data.data.receivers),this.loading=!1):this.runError(void 0,t.data.msg)}).catch(t=>{console.log(t),this.runError(void 0,t.data.msg)})},setEmailReceivers(t){let e=[],a=[];for(let n=0;n<t.length;n++)e[n]={},a[n]={},"receiver_cc_email"===t[n].type||"receiver_cc_fabrik"===t[n].type?(e[n]["id"]=t[n].id,e[n]["email"]=t[n].receivers):"receiver_bcc_email"!==t[n].type&&"receiver_bcc_fabrik"!==t[n].type||(a[n]["id"]=t[n].id,a[n]["email"]=t[n].receivers);const s=e.filter(t=>null!==t["id"]&&void 0!==t["id"]),i=a.filter(t=>null!==t["id"]&&void 0!==t["id"]);this.selectedReceiversCC=s,this.selectedReceiversBCC=i},displayAdvanced(){this.displayAdvancedParameters=!this.displayAdvancedParameters},addNewCC(t){const e={email:t,id:t.substring(0,2)+Math.floor(1e7*Math.random())};this.receivers_cc.push(e),this.selectedReceiversCC.push(e)},addNewBCC(t){const e={email:t,id:t.substring(0,2)+Math.floor(1e7*Math.random())};this.receivers_bcc.push(e),this.selectedReceiversBCC.push(e)},getAllUsers:function(){p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=getallusers",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.receivers_cc=t.data.users,this.receivers_bcc=t.data.users}).catch(t=>{console.log(t)})},getProgramsList(){p()({method:"get",url:"index.php?option=com_emundus&controller=programme&task=getallprogram",params:{filter:"",sort:"",recherche:"",lim:100,page:1},paramsSerializer:t=>Ke.stringify(t)}).then(t=>{this.programs=t.data.data})},getStatus(){p.a.get("index.php?option=com_emundus&controller=email&task=getstatus").then(t=>{this.status=t.data.data})},getUsers(){p.a.get("index.php?option=com_emundus&controller=programme&task=getuserswithoutapplicants").then(t=>{this.users=t.data.data})},searchUserByTerm(){p.a.get("index.php?option=com_emundus&controller=programme&task=searchuserbytermwithoutapplicants&term="+this.searchTerm).then(t=>{this.users=t.data.data})},addTrigger(){null!=this.trigger.program?this.triggered=!0:this.triggered=!1},selectAllUsers(){this.users.forEach(t=>{this.selectall?this.selectedUsers[t.id]=!1:this.selectedUsers[t.id]=!0}),this.$forceUpdate()},submit(){if(this.errors={subject:!1,message:!1,trigger:{model:!1,status:!1,target:!1,selectedUsers:!1}},""==this.form.subject)return this.errors.subject=!0,0;if(""==this.form.message)return this.errors.message=!0,0;if(null!=this.trigger.program){if(null==this.trigger.action_status)return this.errors.trigger.action_status=!0,0;if(null==this.trigger.status)return this.errors.trigger.status=!0,0;if(null==this.trigger.target)return this.errors.trigger.target=!0,0;if(0==this.trigger.target&&0===this.selectedUsers.length)return this.errors.trigger.selectedUsers=!0,0}this.submitted=!0,""!==this.email?p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=updateemail",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ke.stringify({body:this.form,code:this.email,selectedReceiversCC:this.selectedReceiversCC,selectedReceiversBCC:this.selectedReceiversBCC,selectedLetterAttachments:this.selectedLetterAttachments,selectedCandidateAttachments:this.selectedCandidateAttachments,selectedTags:this.selectedTags})}).then(()=>{this.redirectJRoute("index.php?option=com_emundus&view=email")}).catch(t=>{console.log(t)}):p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=createemail",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ke.stringify({body:this.form,selectedReceiversCC:this.selectedReceiversCC,selectedReceiversBCC:this.selectedReceiversBCC,selectedLetterAttachments:this.selectedLetterAttachments,selectedCandidateAttachments:this.selectedCandidateAttachments,selectedTags:this.selectedTags})}).then(t=>{this.trigger.model=t.data.data,p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=createtrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ke.stringify({trigger:this.trigger,users:this.selectedUsers})}).then(()=>{this.redirectJRoute("index.php?option=com_emundus&view=email")})}).catch(t=>{console.log(t)})},onSearchCategory(t){this.form.category=t},enableVariablesTip(){this.enableTip||(this.enableTip=!0,this.tip())},redirectJRoute(t){window.location.href=t},tip:function(){this.show("foo-velocity",this.translate("COM_EMUNDUS_ONBOARD_VARIABLESTIP")+' <strong style="font-size: 16px">/</strong>',this.translate("COM_EMUNDUS_ONBOARD_TIP"))},show(t,e="",a="Information"){this.$notify({group:t,title:""+a,text:e,duration:1e4})},clean(t){this.$notify({group:t,clean:!0})},getAllTags:function(){p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=gettags",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.action_tags=t.data.data}).catch(t=>{console.log(t)})},getAllDocumentLetter:function(){p()({method:"post",url:"index.php?option=com_emundus&controller=messages&task=getalldocumentsletters",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.attached_letters=t.data.documents}).catch(t=>{console.log(t)})},getAllAttachments:function(){p()({method:"get",url:"index.php?option=com_emundus&controller=messages&task=getallattachments",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.candidate_attachments=t.data.attachments}).catch(t=>{console.log(t)})}}},Ze=Qe,ta=(a("7fb9"),Object(b["a"])(Ze,Ge,He,!1,null,"8a9a4e5c",null)),ea=ta.exports,aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-w-75rem"},[a("ModalWarningFormBuilder",{attrs:{pid:t.getProfileId,cid:t.campaignId}}),a("div",[a("div",[a("div",[a("div",[a("div",{staticClass:"em-flex-row em-mt-16"},[-1!=t.menuHighlight?a("h2",[t._v(t._s(t.formCategories[t.langue][t.menuHighlight]))]):t._e(),-1!=t.menuHighlightProg?a("h2",[t._v(t._s(t.formPrograms[t.langue][t.menuHighlightProg]))]):t._e()]),-1!=t.menuHighlight?a("p",{staticStyle:{"margin-top":"20px"},domProps:{innerHTML:t._s(t.formCategoriesDesc[t.langue][t.menuHighlight])}}):t._e(),-1!=t.menuHighlightProg?a("p",{staticStyle:{"margin-top":"20px"},domProps:{innerHTML:t._s(t.formProgramsDesc[t.langue][t.menuHighlightProg])}}):t._e(),a("hr"),a("div",{staticClass:"em-flex-row em-mb-32"},[a("p",[a("b",{staticStyle:{color:"#16afe1","font-weight":"700 !important"}},[t._v(" "+t._s(t.form.label))]),t._v(" "+t._s(t.translations.From)+" "),a("strong",[t._v(t._s(t.form.start_date))]),t._v(" "+t._s(t.translations.To)+" "),a("strong",[t._v(t._s(t.form.end_date))])])]),null==t.profileId&&0==t.loading?a("div",{staticClass:"em-flex-row required",staticStyle:{display:"flex"}},[a("em",{staticClass:"fas fa-exclamation-circle icon-warning-margin"}),a("p",[t._v(t._s(t.translations.chooseProfileWarning))])]):t._e()])]),a("div",{staticClass:"em-flex-row"},[a("ul",{staticClass:"nav nav-tabs topnav"},[t._l(t.formCategories[t.langue],(function(e,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:t.closeSubmenu,expression:"closeSubmenu"}],key:"category-"+s},[a("a",{staticClass:"em-neutral-700-color em-pointer em-hover-blue-500",class:[t.menuHighlight==s?"w--current":"",null==t.profileId?"grey-link":""],on:{click:function(e){null!=t.profileId&&t.changeToCampMenu(s)}}},[t._v(" "+t._s(e)+" ")])])})),t._l(t.formPrograms[t.langue],(function(e,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:t.closeSubmenu,expression:"closeSubmenu"}],key:"program-"+s},[a("a",{staticClass:"em-neutral-700-color em-pointer em-hover-blue-500",class:[t.menuHighlightProg==s?"w--current":"",null==t.profileId?"grey-link":""],on:{click:function(e){null!=t.profileId&&t.changeToProgMenu(s)}}},[t._v(" "+t._s(e)+" ")])])}))],2)]),a("br"),-1!=t.menuHighlightProg?a("div",{staticClass:"warning-message-program mb-1"},[a("p",{staticStyle:{color:"#e5283b"}},[a("em",{staticClass:"fas fa-exclamation-triangle mr-1 red"}),t._v(t._s(t.translations.ProgramWarning))]),t.campaignsByProgram.length>0?a("ul",t._l(t.campaignsByProgram,(function(e,s){return a("li",{key:"camp_progs_"+s},[t._v(t._s(e.label))])})),0):t._e()]):t._e(),a("transition",{attrs:{name:"slide-right"}},[0==t.menuHighlight&&""!==t.campaignId?a("add-campaign",{attrs:{campaign:t.campaignId,coordinatorAccess:!0,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages},on:{nextSection:function(e){t.menuHighlight++},getInformations:t.initInformations}}):t._e(),2==t.menuHighlight?a("addFormulaire",{key:t.formReload,attrs:{profileId:t.profileId,campaignId:t.campaignId,profiles:t.profiles,visibility:null},on:{profileId:t.setProfileId}}):t._e(),1==t.menuHighlight?a("add-documents-dropfiles",{attrs:{funnelCategorie:t.formCategories[t.langue][t.menuHighlight],profileId:t.getProfileId,campaignId:t.campaignId,menuHighlight:t.menuHighlight,langue:t.actualLanguage,manyLanguages:t.manyLanguages}}):t._e(),0==t.menuHighlightProg&&0!=t.program.id?a("add-evaluation-grid",{attrs:{funnelCategorie:t.formPrograms[t.langue][t.menuHighlight],prog:Number(t.program.id)}}):t._e(),1==t.menuHighlightProg&&0!=t.program.id?a("add-email",{attrs:{prog:Number(t.program.id)}}):t._e()],1)],1)]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()],1)},sa=[],ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalWarningFormBuilder"}},[a("modal",{attrs:{name:"modalWarningFormBuilder",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalWarningFormBuilder")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.Warning)+" ")]),a("p",[t._v(" "+t._s(t.FormAffectedToFiles)+" ")])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalWarningFormBuilder")}}},[t._v(" "+t._s(t.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer em-mr-4",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.formbuilder()}}},[t._v(" "+t._s(t.Update)+" ")])])])])])],1)},na=[];a("bef5");var oa={name:"modalWarningFormBuilder",props:{pid:Number,cid:Number},data(){return{Warning:this.translate("COM_EMUNDUS_ONBOARD_WARNING"),FormAffectedToFiles:this.translate("COM_EMUNDUS_ONBOARD_FORM_AFFECTEDFILES"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Duplicate:this.translate("COM_EMUNDUS_ONBOARD_DUPLICATE"),Update:this.translate("COM_EMUNDUS_ONBOARD_MODIFY")}},methods:{beforeClose(t){},beforeOpen(t){},formbuilder(){window.location.replace("index.php?option=com_emundus&view=form&layout=formbuilder&prid="+this.pid+"&index=0&cid="+this.cid)}}},ra=oa,la=(a("4cea"),Object(b["a"])(ra,ia,na,!1,null,"f0d240c8",null)),da=la.exports,ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{staticClass:"w-form"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-removed-file":t.afterRemoved,"vdropzone-success":t.onComplete,"vdropzone-error":t.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[t._v(" "+t._s(t.DropHere)+" ")])]),a("hr"),a("draggable",t._b({staticClass:"em-flex-row",staticStyle:{margin:"0"},attrs:{handle:".handle","chosen-class":"em-grab"},on:{end:t.updateDocumentsOrder},model:{value:t.documents,callback:function(e){t.documents=e},expression:"documents"}},"draggable",t.dragOptions,!1),[a("transition-group",{staticClass:"em-grid-3 em-w-100 handle",attrs:{type:"transition",value:t.drag?null:"flip-list"}},t._l(t.documents,(function(e){return a("div",{key:e.id,staticClass:"em-document-dropzone-card",attrs:{id:"itemDoc"+e.id}},[a("button",{staticClass:"em-float-right em-transparent-button",attrs:{type:"button"},on:{click:function(a){return t.deleteDoc(t.indexDoc,e.id)}}},[a("span",{staticClass:"material-icons"},[t._v("close")])]),a("div",{staticClass:"em-flex-row em-w-100 em-flex-center"},[a("div",{staticClass:"em-flex-column"},["pdf"===e.ext?a("img",{staticClass:"em-filetype-icon",attrs:{src:"media/com_emundus/images/icones/filetype/pdf.png",alt:"filetype"}}):["docx","doc","odf"].includes(e.ext)?a("img",{staticClass:"em-filetype-icon",attrs:{src:"media/com_emundus/images/icones/filetype/doc.png",alt:"filetype"}}):["xls","xlsx","csv"].includes(e.ext)?a("img",{staticClass:"em-filetype-icon",attrs:{src:"media/com_emundus/images/icones/filetype/excel.png",alt:"filetype"}}):["png","gif","jpg","jpeg"].includes(e.ext)?a("img",{staticClass:"em-filetype-icon",attrs:{src:"media/com_emundus/images/icones/filetype/image.png",alt:"filetype"}}):["zip","rar"].includes(e.ext)?a("img",{staticClass:"em-filetype-icon",attrs:{src:"media/com_emundus/images/icones/filetype/zip.png",alt:"filetype"}}):["svg"].includes(e.ext)?a("img",{staticClass:"em-filetype-icon",attrs:{src:"media/com_emundus/images/icones/filetype/svg.png",alt:"filetype"}}):t._e(),a("div",{staticClass:"em-mt-8"},[a("span",{staticClass:"em-overflow-ellipsis em-max-width-250 em-mr-4",on:{click:function(a){return t.editName(e)}}},[t._v(t._s(e.title))])])])]),a("hr"),a("div",[a("span",[a("strong",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_FILE_SIZE"))+" : ")])]),a("span",[t._v(t._s(t.formatBytes(e.size)))])])])})),0)],1)],1)])],1)},ma=[],ua=a("d9b7"),pa=a.n(ua),ha=a("ca98"),_a=a.n(ha);const ga=a("bef5"),fa=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var ba={name:"addDocumentsDropfiles",components:{vueDropzone:pa.a,draggable:_a.a},props:{funnelCategorie:String,profileId:Number,campaignId:Number,langue:String,menuHighlight:Number,manyLanguages:Number},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus&controller=settings&task=uploaddropfiledoc&cid="+this.campaignId,maxFilesize:10,maxFiles:1,autoProcessQueue:!0,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:"image/*,application/pdf,.doc,.csv,.xls,.xlsx,.docx,.odf",previewTemplate:fa(),dictCancelUpload:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:this.translate("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:this.translate("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:this.translate("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},documents:[],Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:this.translate("COM_EMUNDUS_ONBOARD_DROP_FILE_HERE"),Error:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),DocumentName:this.translate("COM_EMUNDUS_ONBOARD_DOCUMENT_NAME"),drag:!1}},methods:{getDocumentsDropfiles(){p()({method:"get",url:"index.php?option=com_emundus&controller=campaign&task=getdocumentsdropfiles",params:{cid:this.campaignId},paramsSerializer:t=>ga.stringify(t)}).then(t=>{this.documents=t.data.documents})},updateDocumentsOrder(){this.documents.forEach((t,e)=>{t.ordering=e}),p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updateorderdropfiledocuments",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ga.stringify({documents:this.documents})})},editName(t){j.a.fire({title:"",html:'<div class="form-group campaign-label"><label for="campLabel">'+this.DocumentName+'</label><input type="text" id="label_'+t.id+'" value="'+t.title+'"/></div>',confirmButtonColor:"#de6339",showCloseButton:!0,allowOutsideClick:!1,customClass:{popup:"swal-popup-custom"}}).then(e=>{if(e){let e=document.getElementById("label_"+t.id).value;p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=editdocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ga.stringify({did:t.id,name:e})}).then(()=>{t.title=e})}})},deleteDoc(t,e){this.documents.splice(t,1),p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=deletedocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ga.stringify({did:e})})},formatBytes(t,e=2){if(0===t)return"0 Bytes";const a=1024,s=e<0?0:e,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],n=Math.floor(Math.log(t)/Math.log(a));return parseFloat((t/Math.pow(a,n)).toFixed(s))+" "+i[n]},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(t){this.documents.push(JSON.parse(t.xhr.response)),this.$refs.dropzone.removeFile(t)},catchError:function(t,e){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),text:e,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(t)}},computed:{dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},created(){this.getDocumentsDropfiles()}},va=ba,Oa=(a("983b"),Object(b["a"])(va,ca,ma,!1,null,"9b3642a2",null)),Ca=Oa.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-evaluation"},[a("ModalAddTrigger",{key:"candidate"+t.candidate_trigger,attrs:{prog:this.prog,trigger:this.triggerSelected,triggerAction:"candidate"},on:{UpdateTriggers:t.getTriggers}}),a("ModalAddTrigger",{key:"manual-"+t.manual_trigger,attrs:{prog:this.prog,trigger:this.triggerSelected,triggerAction:"manual"},on:{UpdateTriggers:t.getTriggers}}),a("div",{staticClass:"choices-buttons"},[a("h2",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(t.CandidateAction))]),a("a",{staticClass:"bouton-ajouter bouton-ajouter-green pointer",staticStyle:{width:"max-content"},on:{click:function(e){t.$modal.show("modalAddTriggercandidate"),t.triggerSelected=null}}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus em-mr-4"}),t._v(" "+t._s(t.addTrigger)+" ")])])]),a("p",[t._v(t._s(t.TheCandidateDescription))]),a("transition-group",{attrs:{name:"slide-down",type:"transition"}},t._l(t.candidateTriggers,(function(e){return a("div",{key:e.trigger_id,staticClass:"trigger-item"},[a("div",{staticStyle:{"max-width":"80%"}},[a("p",[t._v(t._s(e.subject))]),a("p",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.Target)+" : ")]),t._l(t.triggerUsersWithProfile(e),(function(s,i){return a("span",{key:"user_"+i},[t._v(" "+t._s(s.firstname)+" "+t._s(s.lastname)+" "),i!=Object.keys(e.users).length-1?a("span",[t._v(", ")]):t._e()])})),0==e.users.length&&5!=e.profile&&6!=e.profile?a("span",[t._v(t._s(t.TheCandidate))]):t._e(),5==e.profile?a("span",[t._v(t._s(t.Administrators))]):t._e(),6==e.profile?a("span",[t._v(t._s(t.Evaluators))]):t._e()],2),a("p",[t._v(t._s(t.Status)+" "+t._s(e.status))])]),a("div",{staticStyle:{display:"grid"}},[a("button",{staticClass:"buttonDeleteDoc",attrs:{type:"button",title:t.removeTrig},on:{click:function(a){return t.removeTrigger(e.trigger_id)}}},[a("em",{staticClass:"fas fa-times"})]),a("a",{staticClass:"cta-block pointer",on:{click:function(a){return t.editTrigger(e)}}},[a("em",{staticClass:"fas fa-pen"})])])])})),0),a("div",{staticClass:"choices-buttons"},[a("h2",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(t.ManagerAction))]),a("a",{staticClass:"bouton-ajouter bouton-ajouter-green pointer",staticStyle:{width:"max-content"},on:{click:function(e){t.$modal.show("modalAddTriggermanual"),t.triggerSelected=null}}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus em-mr-4"}),t._v(" "+t._s(t.addTrigger)+" ")])])]),a("p",[t._v(t._s(t.ManualDescription))]),a("transition-group",{attrs:{name:"slide-down",type:"transition"}},t._l(t.manualTriggers,(function(e){return a("div",{key:e.trigger_id,staticClass:"trigger-item"},[a("div",{staticStyle:{"max-width":"80%"}},[a("p",[t._v(t._s(e.subject))]),a("p",[a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t.Target)+" : ")]),t._l(t.triggerUsersNoProfile(e),(function(s,i){return a("span",{key:"user_manual_"+i},[t._v(" "+t._s(s.firstname)+" "+t._s(s.lastname)+" "),i!=Object.keys(e.users).length-1?a("span",[t._v(", ")]):t._e()])})),0==e.users.length&&5!=e.profile&&6!=e.profile?a("span",[t._v(t._s(t.TheCandidate))]):t._e(),5==e.profile?a("span",[t._v(t._s(t.Administrators))]):t._e(),6==e.profile?a("span",[t._v(t._s(t.Evaluators))]):t._e()],2),a("p",[t._v(t._s(t.Status)+" "+t._s(e.status))])]),a("div",{staticStyle:{display:"grid"}},[a("button",{staticClass:"buttonDeleteDoc",attrs:{type:"button"},on:{click:function(a){return t.removeTrigger(e.trigger_id)}}},[a("em",{staticClass:"fas fa-times"})]),a("a",{staticClass:"cta-block pointer",on:{click:function(a){return t.editTrigger(e)}}},[a("em",{staticClass:"fas fa-pen"})])])])})),0)],1)},ya=[],Da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalAddTrigger"+t.triggerAction}},[a("modal",{attrs:{name:"modalAddTrigger"+t.triggerAction,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("ModalEmailPreview",{attrs:{model:this.form.model,models:this.models}}),a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddTrigger"+t.triggerAction)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.addTrigger)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.Model)+"* :")]),a("div",{staticClass:"input-can-translate"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.model,expression:"form.model"}],staticClass:"dropdown-toggle",class:{"is-invalid":t.errors.model},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"model",e.target.multiple?a:a[0])}}},t._l(t.models,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(t._s(e.subject))])})),0),-1!=t.form.model?a("button",{staticClass:"btnPreview mb-0",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.show("modalEmailPreview_"+t.form.model)}}},[a("em",{staticClass:"fas fa-eye"})]):t._e()]),t.errors.model?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.ModelRequired))])]):t._e()]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.Status)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.status,expression:"form.status"}],staticClass:"dropdown-toggle",class:{"is-invalid":t.errors.status},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"status",e.target.multiple?a:a[0])}}},t._l(t.status,(function(e,s){return a("option",{key:s,domProps:{value:e.step}},[t._v(t._s(e.value))])})),0),t.errors.status?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[t._v(t._s(t.StatusRequired))])]):t._e()]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.Target)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.form.target,expression:"form.target"}],staticClass:"dropdown-toggle",class:{"is-invalid":t.errors.target},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.form,"target",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"5"}},[t._v(t._s(t.Administrators))]),a("option",{attrs:{value:"6"}},[t._v(t._s(t.Evaluators))]),a("option",{attrs:{value:"1000"}},[t._v(t._s(t.Candidates))])]),t.errors.target?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[t._v(t._s(t.TargetRequired))])]):t._e()]),0==t.form.target?a("div",{staticClass:"form-group",staticStyle:{"align-items":"baseline"}},[a("label",[t._v(t._s(t.ChooseUsers)+"* :")]),a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:t.Search},domProps:{value:t.searchTerm},on:{keyup:t.searchUserByTerm,input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),a("button",{staticClass:"searchButton",attrs:{type:"button"},on:{click:t.searchUserByTerm}},[a("em",{staticClass:"fas fa-search"})])])]),a("div",{staticClass:"select-all"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectall,expression:"selectall"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectall)?t._i(t.selectall,null)>-1:t.selectall},on:{click:t.selectAllUsers,change:function(e){var a=t.selectall,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.selectall=a.concat([n])):o>-1&&(t.selectall=a.slice(0,o).concat(a.slice(o+1)))}else t.selectall=i}}}),a("label",{staticClass:"mb-0 ml-10px"},[t._v(" "+t._s(t.SelectAll)+" ")])]),a("div",{staticClass:"users-block",class:{"is-invalid":t.errors.selectedUsers}},t._l(t.users,(function(e,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selectedUsers[e.id],expression:"selectedUsers[user.id]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selectedUsers[e.id])?t._i(t.selectedUsers[e.id],null)>-1:t.selectedUsers[e.id]},on:{change:function(a){var s=t.selectedUsers[e.id],i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.selectedUsers,e.id,s.concat([o])):r>-1&&t.$set(t.selectedUsers,e.id,s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.selectedUsers,e.id,n)}}}),a("div",{staticClass:"ml-10px"},[a("p",[t._v(t._s(e.name))]),a("p",[t._v(t._s(e.email))])])])})),0),t.errors.selectedUsers?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[t._v(t._s(t.UsersRequired))])]):t._e()]):t._e()]),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddTrigger"+t.triggerAction)}}},[t._v(t._s(t.Retour))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.createTrigger()}}},[t._v(t._s(t.Continuer))])])],1)],1)},Na=[];const Aa=a("bef5");var Ua={name:"modalAddTrigger",components:{ModalEmailPreview:ae},props:{prog:Number,trigger:Number,triggerAction:String},data(){return{errors:{model:!1,status:!1,action_status:!1,target:!1,selectedUsers:!1},form:{model:-1,status:null,action_status:null,target:null,program:this.prog},users:[],selectedUsers:[],models:[],status:[],searchTerm:"",changes:!1,selectall:!1,addTrigger:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_ADDTRIGGER"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Model:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERMODEL"),ModelRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERMODEL_REQUIRED"),Status:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS"),StatusRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS_REQUIRED"),Target:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERTARGET"),TargetRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERTARGET_REQUIRED"),Administrators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS"),Candidates:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_CANDIDATES"),DefinedUsers:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_DEFINED_USERS"),ChooseUsers:this.translate("COM_EMUNDUS_ONBOARD_TRIGGER_CHOOSE_USERS"),UsersRequired:this.translate("COM_EMUNDUS_ONBOARD_TRIGGER_USERS_REQUIRED"),Search:this.translate("COM_EMUNDUS_ONBOARD_SEARCH_USERS"),ChangedActionStatus:this.translate("COM_EMUNDUS_ONBOARD_CHANGED_ACTION_STATUS"),TheCandidate:this.translate("COM_EMUNDUS_ONBOARD_THE_CANDIDATE"),Manual:this.translate("COM_EMUNDUS_ONBOARD_MANUAL"),SelectAll:this.translate("COM_EMUNDUS_ONBOARD_SELECT_ALL")}},methods:{beforeClose(t){this.trigger=null,this.form={model:-1,status:null,action_status:null,target:null,program:this.prog}},beforeOpen(t){this.searchTerm="",this.getUsers(),this.getEmailModels(),this.getStatus(),setTimeout(()=>{null!=this.trigger&&this.getTrigger()},200),"candidate"===this.triggerAction?this.form.action_status="to_current_user":this.form.action_status="to_applicant"},createTrigger(){return this.errors={model:!1,status:!1,action_status:!1,target:!1,selectedUsers:!1},-1===this.form.model?(this.errors.model=!0,0):null==this.form.status?(this.errors.status=!0,0):null==this.form.action_status?(this.errors.action_status=!0,0):null==this.form.target?(this.errors.target=!0,0):0==this.form.target&&0===this.selectedUsers.length?(this.errors.selectedUsers=!0,0):void(null!=this.trigger?p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=updatetrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Aa.stringify({tid:this.trigger,trigger:this.form,users:this.selectedUsers})}).then(t=>{this.selectedUsers=[],this.$emit("UpdateTriggers"),this.$modal.hide("modalAddTrigger"+this.triggerAction)}):p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=createtrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Aa.stringify({trigger:this.form,users:this.selectedUsers})}).then(t=>{this.selectedUsers=[],this.$emit("UpdateTriggers"),this.$modal.hide("modalAddTrigger"+this.triggerAction)}))},getUsers(){p.a.get("index.php?option=com_emundus&controller=programme&task=getuserswithoutapplicants").then(t=>{this.users=t.data.data})},searchUserByTerm(){p.a.get("index.php?option=com_emundus&controller=programme&task=searchuserbytermwithoutapplicants&term="+this.searchTerm).then(t=>{this.users=t.data.data})},getEmailModels(){p.a.get("index.php?option=com_emundus&controller=email&task=getallemail").then(t=>{this.models=t.data.data})},getStatus(){p.a.get("index.php?option=com_emundus&controller=email&task=getstatus").then(t=>{this.status=t.data.data})},getTrigger(){p.a.get("index.php?option=com_emundus&controller=email&task=gettriggerbyid&tid="+this.trigger).then(t=>{this.form.model=t.data.data.model,this.form.status=t.data.data.status,null==t.data.data.target?(this.form.target=0,t.data.data.users.forEach(t=>{this.selectedUsers[t.user_id]=!0})):5!=t.data.data.target&&6!=t.data.data.target?this.form.target=1e3:this.form.target=t.data.data.target})},selectAllUsers(){this.users.forEach(t=>{this.selectall?this.selectedUsers[t.id]=!1:this.selectedUsers[t.id]=!0}),this.$forceUpdate()}}},Ma=Ua,wa=(a("0b98"),Object(b["a"])(Ma,Da,Na,!1,null,"72484bbd",null)),Sa=wa.exports;const Ta=a("bef5");var xa={name:"addEmail",components:{ModalAddTrigger:Sa},props:{funnelCategorie:String,prog:Number},data(){return{triggers:[],triggerSelected:null,manual_trigger:0,candidate_trigger:0,addTrigger:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_ADDTRIGGER"),removeTrig:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_REMOVETRIGGER"),affectTriggers:this.translate("COM_EMUNDUS_ONBOARD_EMAIL_AFFECTTRIGGERS"),ChooseEmailTrigger:this.translate("COM_EMUNDUS_ONBOARD_CHOOSE_EMAIL_TRIGGER"),Target:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERTARGET"),Status:this.translate("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS"),Administrators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:this.translate("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS"),TheCandidate:this.translate("COM_EMUNDUS_ONBOARD_THE_CANDIDATE"),Manual:this.translate("COM_EMUNDUS_ONBOARD_MANUAL"),TheCandidateDescription:this.translate("COM_EMUNDUS_ONBOARD_THE_CANDIDATE_DESCRIPTION"),ManualDescription:this.translate("COM_EMUNDUS_ONBOARD_MANUAL_DESCRIPTION"),CandidateAction:this.translate("COM_EMUNDUS_ONBOARD_CANDIDATE_ACTION"),ManagerAction:this.translate("COM_EMUNDUS_ONBOARD_MANAGER_ACTION")}},methods:{editTrigger(t){this.triggerSelected=t.trigger_id,this.manual_trigger+=1,this.candidate_trigger+=1,setTimeout(()=>{1==t.candidate?this.$modal.show("modalAddTriggercandidate"):this.$modal.show("modalAddTriggermanual")},500)},removeTrigger(t){p()({method:"post",url:"index.php?option=com_emundus&controller=email&task=removetrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ta.stringify({tid:t})}).then(()=>{this.getTriggers()})},getTriggers(){p.a.get("index.php?option=com_emundus&controller=email&task=gettriggersbyprogram&pid="+this.prog).then(t=>{this.triggers=t.data.data})},triggerUsersWithProfile(t){return null!==t.profile?t.users:[]},triggerUsersNoProfile(t){return null===t.profile&&t.users.length>0?t.users:[]}},computed:{candidateTriggers(){return this.triggers.filter(t=>1==t.candidate)},manualTriggers(){return this.triggers.filter(t=>1==t.manual)}},created(){this.getTriggers()}},Ra=xa,La=(a("7f7a"),Object(b["a"])(Ra,Ea,ya,!1,null,"2a210905",null)),Ba=La.exports,ka=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"em-mb-4"},[t._v(t._s(t.ChooseForm)+" : ")]),a("div",{staticClass:"em-mb-8"},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.$props.profileId,expression:"$props.profileId"}],attrs:{id:"select_profile"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.$props,"profileId",e.target.multiple?a:a[0])},t.updateProfileCampaign]}},t._l(t.profiles,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(" "+t._s(e.form_label)+" ")])})),0),a("div",{staticClass:"em-mb-8 em-mt-8"},[a("span",[t._v(t._s(t.translate("COM_EMUNDUS_OR").toUpperCase()))])]),a("button",{staticClass:"em-primary-button em-w-auto",on:{click:t.addNewForm}},[a("span",{staticClass:"material-icons em-color-white em-mr-8"},[t._v("add")]),a("span",[t._v(t._s(t.AddForm))])])]),t.formList?a("FormCarrousel",{key:t.formListReload,attrs:{formList:t.formList,documentsList:t.documentsList,visibility:t.visibility},on:{getEmitIndex:t.getEmitIndex,formbuilder:t.formbuilder}}):t._e()],1)},Ia=[],ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"em-flex-row em-flex-space-between em-align-start"},[a("div",[t.formLinkArray[t.indexHighlight]?a("FormViewer",{attrs:{link:t.formLinkArray[t.indexHighlight],visibility:this.visibility},on:{editPage:t.EditPage}}):t._e()],1),a("hr",{staticClass:"vertical-divider"}),a("div",{staticClass:"em-flex-column em-align-start"},[a("div",{staticClass:"em-mb-16"},[a("p",{staticClass:"em-h4"},[a("span",{staticClass:"material-icons"},[t._v("article")]),t._v(" "+t._s(t.Form)+" ")]),t._l(t.formNameArray,(function(e,s){return a("div",{key:s,staticClass:"MenuForm em-mb-8"},[a("a",{staticClass:"em-pointer em-text-neutral-900",class:t.indexHighlight==s?"MenuFormItem_current":"",domProps:{innerHTML:t._s(e.value)},on:{click:function(e){return t.ChangeIndex(s)}}},[t._v(t._s(e.value))])])}))],2),a("div",[a("p",{staticClass:"em-h4"},[a("span",{staticClass:"material-icons"},[t._v("folder")]),t._v(" "+t._s(t.Documents)+" ")]),t._l(t.documentsList,(function(e,s){return a("div",{key:s,staticClass:"MenuForm em-mb-8"},[a("a",{staticClass:"em-pointer em-text-neutral-900"},[t._v(t._s(e.label))])])}))],2)])])])},Pa=[],Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-mt-16",attrs:{id:"FormViewer"}},[t.object_json.show_page_heading?a("div",{class:t.object_json.show_page_heading.class,domProps:{innerHTML:t._s(t.object_json.show_page_heading.page_heading)}}):t._e(),a("div",{staticClass:"em-flex-row em-flex-space-between"},[t.object_json.show_title?a("h2",{domProps:{innerHTML:t._s(t.object_json.show_title.value)}}):t._e()]),t.object_json.intro_value?a("p",{staticClass:"em-mt-16",domProps:{innerHTML:t._s(t.object_json.intro_value)}}):t._e(),a("form",{attrs:{method:"post","object_json.attribs":""}},[t.object_json.plugintop?a("div",{domProps:{innerHTML:t._s(t.object_json.plugintop)}}):t._e(),t._l(t.object_json.Groups,(function(e){return a("div",{key:e.index,class:{unpublished:e.visibility&&null!=t.visibility},staticStyle:{padding:"5px"}},[a("fieldset",{class:e.group_class,style:e.group_css,attrs:{id:"group"+e.group_id}},[e.group_showLegend?a("legend",{staticClass:"legend ViewerLegend"},[t._v(" "+t._s(e.group_showLegend)+" "),null!=t.visibility?a("button",{staticClass:"eye-button",attrs:{type:"button"},on:{click:function(a){return t.updateVisibility(e.group_id)}}},[a("em",{class:e.visibility?"eye-slash-icon":"eye-icon"})]):t._e()]):t._e(),e.group_intro?a("div",{domProps:{innerHTML:t._s(e.group_intro)}}):t._e(),a("div",t._l(e.elements,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.hidden,expression:"element.hidden === false"}],key:e.index,staticClass:"builder-item-element"},[e.label_value?a("span",{directives:[{name:"show",rawName:"v-show",value:2!=e.labelsAbove,expression:"element.labelsAbove != 2"}],domProps:{innerHTML:t._s(e.label_value)}}):t._e(),e.params.date_table_format?a("div",[a("date-picker",{attrs:{config:t.options},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):0==e.labelsAbove?a("div",{staticClass:"controls"},[e.error?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:t._s(e.error)}}):t._e(),e.element?a("div",{class:e.errorClass,domProps:{innerHTML:t._s(e.element)}}):t._e(),e.tipSide?a("span",{domProps:{innerHTML:t._s(e.tipSide)}}):t._e()]):a("span",[e.element?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:t._s(e.error)}}):t._e(),e.element?a("div",{class:e.errorClass,domProps:{innerHTML:t._s(e.element)}}):t._e(),e.tipSide?a("span",{domProps:{innerHTML:t._s(e.tipSide)}}):t._e()]),e.tipBelow?a("span",{domProps:{innerHTML:t._s(e.tipBelow)}}):t._e()])})),0),e.group_outro?a("div",{staticClass:"groupoutro",domProps:{innerHTML:t._s(t.group_outro)}}):t._e()])])})),t.object_json.pluginbottom?a("div",{domProps:{innerHTML:t._s(t.object_json.pluginbottom)}}):t._e()],2),t.submitted?a("div",{staticClass:"em-page-loader"}):t._e()])},$a=[],Ga=a("daef"),Ha=a.n(Ga);const za=a("bef5");var Va={name:"FormViewer",props:{link:{type:Object,default:{link:""}},visibility:Number},components:{datePicker:Ha.a},data(){return{object_json:"",date:new Date,submitted:!1,options:{format:"DD/MM/YYYY",useCurrent:!1}}},methods:{splitProfileIdfromLabel(t){return t.split(/-(.+)/)[1]},formbuilder(){this.$emit("editPage")},getDataObject:Oe.a.debounce((function(){this.submitted=!0;let t=this.link.link.replace("fabrik","emundus");p.a.get(t+"&format=vue_jsonclean").then(t=>{this.object_json=t.data,null!=this.visibility&&p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=checkconstraintgroup",params:{cid:this.visibility},paramsSerializer:t=>za.stringify(t)}).then(t=>{Object.keys(this.object_json.Groups).forEach(e=>{null!=t.data.data?p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=checkvisibility",params:{group:this.object_json.Groups[e]["group_id"],cid:this.visibility},paramsSerializer:t=>za.stringify(t)}).then(t=>{parseInt(t.data.data)>0?this.object_json.Groups[e].visibility=!0:this.object_json.Groups[e].visibility=!1}):this.object_json.Groups[e].visibility=!0}),this.$forceUpdate()}),this.submitted=!1}).catch(t=>{console.log(t)})}),150),updateVisibility(t){this.object_json.Groups["group_"+t]["visibility"]=!this.object_json.Groups["group_"+t]["visibility"],p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=updatevisibility",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:za.stringify({visibility:this.object_json.Groups["group_"+t]["visibility"],gid:t,cid:this.visibility})}).then(t=>{this.$forceUpdate()})}},created(){this.getDataObject()},watch:{link:function(){this.getDataObject()}}},qa=Va,Ya=(a("fc94"),Object(b["a"])(qa,Fa,$a,!1,null,"6ecf4dab",null)),Ja=Ya.exports,Wa=(a("2051"),{name:"FormCarrousel",props:{formList:Array,documentsList:Array,visibility:Number},components:{FormViewer:Ja},data(){return{indexHighlight:"0",formNameArray:[],formLinkArray:[],formArray:[],FormPage:this.translate("COM_EMUNDUS_ONBOARD_FORM_PAGE"),Form:this.translate("COM_EMUNDUS_ONBOARD_FORM"),Documents:this.translate("COM_EMUNDUS_ONBOARD_DOCUMENTS")}},methods:{splitProfileIdfromLabel(t){return t.split(/-(.+)/)[1]},ChangeIndex(t){this.indexHighlight=t},EditPage(){this.$emit("formbuilder",this.indexHighlight)},getDataObject:function(){this.formList.forEach(t=>{let e=t.link.replace("fabrik","emundus");p.a.get(e+"&format=vue_jsonclean").then(e=>{this.formNameArray.push({value:e.data.show_title.value,rgt:t.rgt}),this.formLinkArray.push({link:t.link,rgt:t.rgt})}).then(t=>{this.formNameArray.sort((t,e)=>t.rgt-e.rgt),this.formLinkArray.sort((t,e)=>t.rgt-e.rgt)}).catch(t=>{console.log(t)})})}},created(){this.getDataObject()}}),Xa=Wa,Ka=(a("a1d2"),Object(b["a"])(Xa,ja,Pa,!1,null,"0f5a32dc",null)),Qa=Ka.exports;const Za=a("bef5");var ts={name:"addFormulaire",props:{profileId:String,campaignId:Number,profiles:Array,formulaireEmundus:Number,visibility:Number},components:{FormCarrousel:Qa},data(){return{ChooseForm:this.translate("COM_EMUNDUS_ONBOARD_CHOOSE_FORM"),AddForm:this.translate("COM_EMUNDUS_ONBOARD_ADD_FORM"),EmitIndex:"0",formList:[],documentsList:[],formListReload:0,form:{label:"Nouveau formulaire",description:"",published:1},formdescription:this.translate("COM_EMUNDUS_ONBOARD_FORMDESCRIPTION")}},methods:{getEmitIndex(t){this.EmitIndex=t},getForms(t){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getFormsByProfileId",params:{profile_id:t},paramsSerializer:t=>Za.stringify(t)}).then(t=>{this.formList=t.data.data,this.formListReload+=1}).catch(t=>{console.log(t)})},getDocuments(t){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getDocuments",params:{pid:t},paramsSerializer:t=>Za.stringify(t)}).then(t=>{this.documentsList=t.data.data})},redirectJRoute(t){window.location.href=t},addNewForm(){this.loading=!0,p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=createform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Za.stringify({body:this.form})}).then(t=>{this.loading=!1,this.$props.profileId=t.data.data,this.redirectJRoute("index.php?option=com_emundus&view=form&layout=formbuilder&prid="+this.profileId+"&index=0&cid="+this.campaignId)}).catch(t=>{console.log(t)})},updateProfileCampaign(){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updateprofile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Za.stringify({profile:this.profileId,campaign:this.campaignId})}).then(()=>{this.getForms(this.profileId),this.getDocuments(this.profileId),this.$emit("profileId",this.profileId)})},formbuilder(t){p.a.get("index.php?option=com_emundus&controller=form&task=getfilesbyform&pid="+this.profileId).then(e=>{0!=e.data.data?this.$modal.show("modalWarningFormBuilder"):this.redirectJRoute("index.php?option=com_emundus&view=form&layout=formbuilder&prid="+this.profileId+"&index="+t+"&cid="+this.campaignId)})}},created(){this.getForms(this.profileId),this.getDocuments(this.profileId)}},es=ts,as=(a("c997"),Object(b["a"])(es,ka,Ia,!1,null,"5be618a0",null)),ss=as.exports,is=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("ModalAddEvaluation",{attrs:{prog:t.prog,grid:t.grid},on:{updateGrid:function(e){return t.getEvaluationGridByProgram(1)}}}),a("div",{staticClass:"container-evaluation"},[null==t.grid?a("div",{staticClass:"text-center"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{float:"none"},attrs:{type:"button"},on:{click:function(e){return t.$modal.show("modalAddEvaluation")}}},[t._v(t._s(t.translations.addGrid))])]):t._e(),null!=t.grid?a("div",{staticClass:"em-flex-row"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer em-mr-4",staticStyle:{float:"none"},attrs:{type:"button"},on:{click:t.evaluationBuilder}},[t._v(t._s(t.translations.editGrid))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer w-delete",staticStyle:{float:"none"},attrs:{type:"button"},on:{click:t.deleteGrid}},[t._v(" "+t._s(t.translations.deleteGrid))])]):t._e(),null!=t.grid?a("FormViewerEvaluation",{key:t.viewer,attrs:{link:t.link,prog:t.prog}}):t._e()],1)],1)},ns=[],os=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"FormViewer container-fluid",attrs:{id:"FormViewerEvaluation"}},[a("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css"}}),a("notifications",{attrs:{group:"foo-velocity",position:"top right","animation-type":"velocity",speed:500}}),t.object_json.show_page_heading?a("div",{class:t.object_json.show_page_heading.class,domProps:{innerHTML:t._s(t.object_json.show_page_heading.page_heading)}}):t._e(),a("form",{attrs:{method:"post","object_json.attribs":""},on:{submit:function(t){t.preventDefault()}}},[t.object_json.plugintop?a("div",{domProps:{innerHTML:t._s(t.object_json.plugintop)}}):t._e(),t._l(t.object_json.Groups,(function(e,s){return a("div",{key:e.index},[a("fieldset",{class:e.group_class,style:e.group_css,attrs:{id:"group_"+e.group_id}},[a("div",{staticClass:"em-flex-row"},[e.group_showLegend?a("legend",{staticClass:"legend ViewerLegend"},[t._v(t._s(e.group_showLegend))]):t._e()]),e.group_intro?a("div",{staticClass:"groupintro",domProps:{innerHTML:t._s(e.group_intro)}}):t._e(),a("div",{staticClass:"elements-block"},[a("transition-group",{attrs:{name:"slide-down",type:"transition"}},t._l(e.elts,(function(e,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:!1===e.hidden,expression:"element.hidden === false"}],key:e.id,staticClass:"builder-item-element",class:{unpublished:!e.publish}},[a("div",{staticClass:"em-flex-row builder-item-element__properties"},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"em-flex-row",staticStyle:{"align-items":"baseline"}},[e.label_value?a("span",{directives:[{name:"show",rawName:"v-show",value:2!=e.labelsAbove,expression:"element.labelsAbove != 2"}],domProps:{innerHTML:t._s(e.label_value)}}):t._e()]),e.params.date_table_format?a("div",[a("date-picker",{attrs:{config:t.options},model:{value:t.date,callback:function(e){t.date=e},expression:"date"}})],1):0==e.labelsAbove?a("div",{staticClass:"controls"},[e.error?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:t._s(e.error)}}):t._e(),e.element?a("div",{class:e.errorClass,domProps:{innerHTML:t._s(e.element)}}):t._e(),e.tipSide?a("span",{domProps:{innerHTML:t._s(e.tipSide)}}):t._e()]):a("span",{staticClass:"em-flex-row w-100"},[e.element?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:t._s(e.error)}}):t._e(),e.element?a("div",{staticClass:"w-100",class:e.errorClass,domProps:{innerHTML:t._s(e.element)}}):t._e(),e.tipSide?a("span",{domProps:{innerHTML:t._s(e.tipSide)}}):t._e()]),e.tipBelow?a("span",{domProps:{innerHTML:t._s(e.tipBelow)}}):t._e()])])])})),0)],1),e.group_outro?a("div",{staticClass:"groupoutro",domProps:{innerHTML:t._s(t.group_outro)}}):t._e()])])})),t.object_json.pluginbottom?a("div",{domProps:{innerHTML:t._s(t.object_json.pluginbottom)}}):t._e()],2),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()],1)},rs=[],ls=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalEditElement"}},[a("modal",{attrs:{name:"modalEditElement"+t.ID,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalEditElement"+t.ID)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.ElementOptions)+" ")])])]),null!=t.element?a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"mb-1"},[a("a",{staticClass:"em-flex-row tool-icon mb-1",on:{click:function(e){return t.publishUnpublishElement()}}},[a("em",{class:[t.element.publish?"fa-eye-slash":"fa-eye","far"],staticStyle:{width:"45px"},attrs:{id:"publish_icon_"+t.element.id}}),t.element.publish?a("span",{staticClass:"ml-10px"},[t._v(t._s(t.Unpublish))]):t._e(),t.element.publish?t._e():a("span",{staticClass:"ml-10px"},[t._v(t._s(t.Publish))])]),"display"!=t.plugin?a("a",{staticClass:"em-flex-row tool-icon"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.FRequire,expression:"element.FRequire"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.element.FRequire)?t._i(t.element.FRequire,null)>-1:t.element.FRequire},on:{click:function(e){return t.updateRequireElement()},change:function(e){var a=t.element.FRequire,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&t.$set(t.element,"FRequire",a.concat([n])):o>-1&&t.$set(t.element,"FRequire",a.slice(0,o).concat(a.slice(o+1)))}else t.$set(t.element,"FRequire",i)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px"},[t._v(t._s(t.Required))])]):t._e()]),a("div",{staticClass:"form-group mb-2"},[a("label",[t._v(t._s(t.fieldType)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.plugin,expression:"plugin"}],staticClass:"dropdown-toggle",attrs:{id:"select_type",disabled:0!=t.files&&"birthday"==t.element.plugin||0!=t.files&&6==t.element.params.password},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.plugin=e.target.multiple?a:a[0]}}},t._l(t.plugins,(function(e,s){return a("option",{key:s,domProps:{value:e.value}},[t._v(" "+t._s(e.name)+" ")])})),0)]),a("div",{staticClass:"col-md-12 separator-top top-responsive"},["field"==t.plugin?a("fieldF",{attrs:{files:t.files,element:t.element}}):t._e(),"birthday"==t.plugin?a("birthdayF",{attrs:{element:t.element}}):t._e(),"checkbox"==t.plugin?a("checkboxF",{attrs:{element:t.element,databases:t.databases},on:{subOptions:t.subOptions}}):t._e(),"dropdown"==t.plugin?a("dropdownF",{attrs:{element:t.element,databases:t.databases},on:{subOptions:t.subOptions}}):t._e(),"radiobutton"==t.plugin?a("radiobtnF",{attrs:{element:t.element,databases:t.databases},on:{subOptions:t.subOptions}}):t._e(),"textarea"==t.plugin?a("textareaF",{attrs:{element:t.element}}):t._e(),"display"==t.plugin?a("displayF",{attrs:{element:t.element}}):t._e(),"emundus_fileupload"==t.plugin?a("fileF",{attrs:{element:t.element,prid:t.profileId}}):t._e(),"yesno"==t.plugin?a("yesnoF",{attrs:{element:t.element}}):t._e()],1)]):t._e(),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalEditElement"+t.ID)}}},[t._v(" "+t._s(t.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.UpdateParams.apply(null,arguments)}}},[t._v(t._s(t.Continuer))])]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])],1)},ds=[],cs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"fieldF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.placeholdertext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.placeholder,expression:"element.params.placeholder"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:t.element.params.placeholder},on:{input:function(e){e.target.composing||t.$set(t.element.params,"placeholder",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:t.element.params.rollover},on:{input:function(e){e.target.composing||t.$set(t.element.params,"rollover",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.maxlength)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.maxlength,expression:"element.params.maxlength"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"1"},domProps:{value:t.element.params.maxlength},on:{input:function(e){e.target.composing||t.$set(t.element.params,"maxlength",e.target.value)}}})]),0==t.element.params.password?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.inputmasktitle))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.text_input_mask,expression:"element.params.text_input_mask"}],staticClass:"form__input field-general w-input",attrs:{type:"text",id:"format",placeholder:[[t.inputmaskplaceholder]]},domProps:{value:t.element.params.text_input_mask},on:{input:function(e){e.target.composing||t.$set(t.element.params,"text_input_mask",e.target.value)}}}),a("label",{staticStyle:{"font-size":"small"}},[t._v(t._s(t.tipData))])]):t._e()])])},ms=[],us={name:"fieldF",props:{element:Object,files:Number},data(){return{msg:"",path:window.location.protocol+"//"+window.location.host+"/media/com_emundus_onboard/",helptext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),placeholdertext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER"),sizetext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_SIZE"),maxlength:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_MAXLENGTH"),fieldtype:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_FIELDTYPE"),textfield:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_FIELDTEXT"),phonefield:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_FIELDPHONE"),emailfield:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_EMAIL"),numberfield:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_NUMBER"),placeholderHelp:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER_HELP"),text_input_mask:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK"),inputmasktitle:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_TITLE"),inputmaskplaceholder:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_PLACEHOLDER"),tipData:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_HINT")}},methods:{},created(){this.msg='<p style="color: white">'+this.placeholderHelp+'</p><img src="'+this.path+'placeholder.gif" />',"undefined"==typeof this.element.params.password&&(this.element.params.password=0),"undefined"==typeof this.element.params.maxlength&&(this.element.params.maxlength=255),"undefined"==typeof this.element.params.text_input_mask&&(this.element.params.text_input_mask=""),"undefined"==typeof this.element.params.placeholder&&(this.element.params.placeholder="")}},ps=us,hs=(a("d9aa"),Object(b["a"])(ps,cs,ms,!1,null,"736e54b6",null)),_s=hs.exports,gs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"birthdayF"}},[a("div",{staticClass:"rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.Format))]),a("div",{staticClass:"flex mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.datepicker,expression:"datepicker"}],attrs:{type:"radio",id:"radio_default",value:"1"},domProps:{checked:t._q(t.datepicker,"1")},on:{change:function(e){t.datepicker="1"}}}),a("span",{staticClass:"ml-10px"},[t._v(t._s(t.birthdaySelect))])]),a("div",{staticClass:"flex mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.datepicker,expression:"datepicker"}],attrs:{type:"radio",id:"radio_years",value:"2"},domProps:{checked:t._q(t.datepicker,"2")},on:{change:function(e){t.datepicker="2"}}}),a("span",{staticClass:"ml-10px"},[t._v(t._s(t.yearSelect))])]),a("div",{staticClass:"flex mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.datepicker,expression:"datepicker"}],attrs:{type:"radio",id:"radio_dayMonth",value:"3"},domProps:{checked:t._q(t.datepicker,"3")},on:{change:function(e){t.datepicker="3"}}}),a("span",{staticClass:"ml-10px"},[t._v(t._s(t.dateSelect))])])]),1==t.datepicker||2==t.datepicker?a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.yearrange))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.birthday_forward,expression:"element.params.birthday_forward"}],staticClass:"form__input field-general w-input",attrs:{type:"text",id:"format"},domProps:{value:t.element.params.birthday_forward},on:{input:function(e){e.target.composing||t.$set(t.element.params,"birthday_forward",e.target.value)}}}),a("label",{staticStyle:{"font-size":"small"}},[t._v(t._s(t.yeararrangetip))])]):t._e()])])},fs=[],bs={name:"birthdayF",components:{},props:{element:Object},data(){return{datepicker:null,birthdaySelect:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DATE_FORMAT_BIRTHDAY"),yearSelect:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DATE_FORMAT_YEAR"),dateSelect:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_CALENDAR"),Format:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DATE_FORMATTING"),birthday_forward:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_FUTURE_YEARS"),yearrange:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_YEAR_RANGE"),yeararrangetip:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_TIP_YEARS_FUTURE")}},created(){"birthday"==this.element.plugin?this.datepicker=1:"date"==this.element.plugin?this.datepicker=3:this.datepicker=2},watch:{datepicker:function(t){this.element.plugin=3==t?"date":2==t?"years":"birthday"}}},vs=bs,Os=(a("88bb"),Object(b["a"])(vs,gs,fs,!1,null,"6f6da594",null)),Cs=Os.exports,Es=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"checkboxF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:t.element.params.rollover},on:{input:function(e){e.target.composing||t.$set(t.element.params,"rollover",e.target.value)}}})]),a("div",{staticClass:"em-flex-row mb-1"},[a("label",{staticClass:"require col-md-3"},[t._v(t._s(t.suboptions)+" :")])]),a("div",{staticClass:"col-md-10"},[1!=t.databasejoin?a("draggable",{attrs:{handle:".handle"},on:{end:function(e){return t.needtoemit()}},model:{value:t.arraySubValues,callback:function(e){t.arraySubValues=e},expression:"arraySubValues"}},t._l(t.arraySubValues,(function(e,s){return a("div",{key:s,staticClass:"em-flex-row mb-1"},[a("span",{staticClass:"icon-handle"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.arraySubValues[s],expression:"arraySubValues[i]"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{height:"35px"},attrs:{type:"text",id:"suboption_"+s},domProps:{value:t.arraySubValues[s]},on:{change:function(e){return t.needtoemit()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.arraySubValues,s,e.target.value)}}}),a("button",{staticClass:"remove-option",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.leave(s)}}},[t._v("-")])])})),0):t._e(),1!=t.databasejoin?a("button",{staticClass:"bouton-sauvergarder-et-continuer-3 button-add-option",staticStyle:{"margin-bottom":"2em"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[t._v(t._s(t.AddOption))]):t._e(),1==t.databasejoin?a("select",{directives:[{name:"model",rawName:"v-model",value:t.databasejoin_data,expression:"databasejoin_data"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.databasejoin_data=e.target.multiple?a:a[0]}}},t._l(t.databases,(function(e,s){return a("option",{domProps:{value:s}},[t._v(t._s(e.label))])})),0):t._e()],1)])])},ys=[];const Ds=a("bef5");var Ns={name:"checkboxF",components:{draggable:_a.a},props:{element:Object,databases:Array},data(){return{arraySubValues:[],databasejoin:"0",databasejoin_data:0,helptext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),suboptions:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_OPTIONS"),AddOption:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADD_OPTIONS"),DataTables:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN")}},methods:{add:Oe.a.debounce((function(){let t=Object.keys(this.arraySubValues).length;this.$set(this.arraySubValues,t,""),this.needtoemit();let e="suboption_"+t.toString();setTimeout(()=>{document.getElementById(e).focus()},100)}),150),leave:function(t){this.$delete(this.arraySubValues,t),this.needtoemit()},initialised:function(){"databasejoin"===this.element.plugin?(this.databasejoin=1,this.databases.forEach((t,e)=>{t.database_name==this.element.params.join_db_name&&(this.databasejoin_data=e)})):"undefined"!==typeof this.element.params.sub_options?p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getJTEXTA",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ds.stringify({toJTEXT:this.element.params.sub_options.sub_labels})}).then(t=>{Object.values(t.data).forEach(t=>{this.arraySubValues.push(t)}),this.needtoemit()}).catch(t=>{console.log(t)}):(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels)},needtoemit:Oe.a.debounce((function(){this.$emit("subOptions",this.arraySubValues)})),checkOnboarding(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=checkfirstdatabasejoin"}).then(t=>{t.data.status&&j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),text:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN_TEXT"),type:"info",showCancelButton:!1,showCloseButton:!0,allowOutsideClick:!1,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK")}).then(t=>{t.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=removeparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ds.stringify({param:"first_databasejoin"})})})})}},created:function(){this.initialised()},watch:{databasejoin:function(t){t?(this.checkOnboarding(),this.element.params.join_db_name=this.databases[this.databasejoin_data].database_name,this.element.params.database_join_display_type="checkbox",this.element.params.join_key_column=this.databases[this.databasejoin_data].join_column_id,"1"==this.databases[this.databasejoin_data].translation?(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val+"_fr",this.element.params.join_val_column_concat="{thistable}."+this.databases[this.databasejoin_data].join_column_val+"_{shortlang}"):(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val,this.element.params.join_val_column_concat="")):(this.element.plugin="checkbox",delete this.element.params.join_db_name,delete this.element.params.database_join_display_type,delete this.element.params.join_key_column,delete this.element.params.join_val_column,delete this.element.params.join_val_column_concat,"undefined"===typeof this.element.params.sub_options&&(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels))},databasejoin_data:function(t){this.element.params.join_db_name=this.databases[t].database_name,this.element.params.join_key_column=this.databases[t].join_column_id,this.element.params.database_join_display_type="checkbox","1"==this.databases[t].translation?(this.element.params.join_val_column=this.databases[t].join_column_val+"_fr",this.element.params.join_val_column_concat="{thistable}."+this.databases[t].join_column_val+"_{shortlang}"):(this.element.params.join_val_column=this.databases[t].join_column_val,this.element.params.join_val_column_concat="")}}},As=Ns,Us=(a("5393"),Object(b["a"])(As,Es,ys,!1,null,"68995375",null)),Ms=Us.exports,ws=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"dropdownF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.translations.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:t.element.params.rollover},on:{input:function(e){e.target.composing||t.$set(t.element.params,"rollover",e.target.value)}}})]),a("div",{staticClass:"em-flex-row mb-1"},[a("label",{staticClass:"require col-md-3"},[t._v(t._s(t.translations.suboptions)+" :")])]),a("div",{staticClass:"col-md-12 form-group flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.no_default_value,expression:"no_default_value"}],staticClass:"check",attrs:{type:"checkbox","true-value":"true","false-value":"false",id:"no_default_value"},domProps:{checked:Array.isArray(t.no_default_value)?t._i(t.no_default_value,null)>-1:t._q(t.no_default_value,"true")},on:{change:function(e){var a=t.no_default_value,s=e.target,i=s.checked?"true":"false";if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.no_default_value=a.concat([n])):o>-1&&(t.no_default_value=a.slice(0,o).concat(a.slice(o+1)))}else t.no_default_value=i}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("label",{staticClass:"ml-10px mb-0",attrs:{for:"no_default_value"}},[t._v(t._s(t.translations.No_Default_Value))])]),a("div",{staticClass:"col-md-10 form-group flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.databasejoin,expression:"databasejoin"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"databasejoin_check",name:"'databasejoin_check'"},domProps:{checked:Array.isArray(t.databasejoin)?t._i(t.databasejoin,null)>-1:t._q(t.databasejoin,"1")},on:{change:function(e){var a=t.databasejoin,s=e.target,i=s.checked?"1":"0";if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.databasejoin=a.concat([n])):o>-1&&(t.databasejoin=a.slice(0,o).concat(a.slice(o+1)))}else t.databasejoin=i}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("label",{staticClass:"ml-10px mb-0",attrs:{for:"databasejoin_check"}},[t._v(t._s(t.translations.DataTables))])]),a("div",{staticClass:"col-md-10"},[1!=t.databasejoin?a("draggable",{attrs:{handle:".handle"},on:{end:function(e){return t.needtoemit()}},model:{value:t.arraySubValues,callback:function(e){t.arraySubValues=e},expression:"arraySubValues"}},t._l(t.arraySubValues,(function(e,s){return t.display_first_option!=s?a("div",{key:s,staticClass:"em-flex-row mb-1"},[a("span",{staticClass:"icon-handle"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.arraySubValues[s],expression:"arraySubValues[i]"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{height:"35px"},attrs:{type:"text",id:"suboption_"+s},domProps:{value:t.arraySubValues[s]},on:{change:function(e){return t.needtoemit()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.arraySubValues,s,e.target.value)}}}),a("button",{staticClass:"remove-option",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.leave(s)}}},[t._v("-")])]):t._e()})),0):t._e(),1!=t.databasejoin?a("button",{staticClass:"bouton-sauvergarder-et-continuer-3 button-add-option",staticStyle:{"margin-bottom":"2em"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[t._v(t._s(t.translations.AddOption))]):t._e(),1==t.databasejoin?a("select",{directives:[{name:"model",rawName:"v-model",value:t.databasejoin_data,expression:"databasejoin_data"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.databasejoin_data=e.target.multiple?a:a[0]},function(e){return t.retrieveDataBaseJoinColumns()}]}},t._l(t.databases,(function(e,s){return a("option",{domProps:{value:s}},[t._v(t._s(e.label))])})),0):t._e(),1==t.databasejoin?a("div",[a("label",[t._v(t._s(t.translations.OrderBy))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.databasejoin_data_order,expression:"databasejoin_data_order"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.databasejoin_data_order=e.target.multiple?a:a[0]}}},t._l(t.databases_colums,(function(e){return a("option",{domProps:{value:e.COLUMN_NAME}},[t._v(t._s(e.COLUMN_NAME))])})),0)]):t._e()],1)])])},Ss=[];const Ts=a("bef5");var xs={name:"dropdownF",components:{draggable:_a.a},props:{element:Object,databases:Array},data(){return{arraySubValues:[],databases_colums:[],databasejoin:"0",no_default_value:!1,display_first_option:null,databasejoin_data:0,databasejoin_data_order:"",translations:{helptext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),suboptions:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_OPTIONS"),AddOption:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADD_OPTIONS"),DataTables:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),No_Default_Value:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_NO_DEFAULT_VALUE"),OrderBy:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ORDER_BY")}}},methods:{add:Oe.a.debounce((function(){const t=Object.keys(this.arraySubValues).length;this.$set(this.arraySubValues,t,""),this.needtoemit();const e="suboption_"+t.toString();setTimeout(()=>{document.getElementById(e).focus()},100)}),150),leave(t){this.$delete(this.arraySubValues,t),this.needtoemit()},initialised(){"databasejoin"===this.element.plugin?(this.databasejoin=1,"1"==this.element.params.database_join_show_please_select?this.no_default_value=!0:this.no_default_value=!1,this.databases.forEach((t,e)=>{if(t.database_name==this.element.params.join_db_name){this.databasejoin_data=e,this.retrieveDataBaseJoinColumns();const t=this.element.params.database_join_where_sql;this.databasejoin_data_order=t.replace(/order by /g,"")}})):(this.element.params.default_value=!1,this.no_default_value=!1,this.retrieveDataBaseJoinColumns(),"undefined"!==typeof this.element.params.sub_options?("undefined"!==typeof this.element.params.sub_options.sub_initial_selection&&(this.element.params.sub_options.sub_values.forEach((t,e)=>{t==this.element.params.sub_options.sub_initial_selection[0]&&(this.display_first_option=e)}),null!=this.display_first_option&&(this.element.params.default_value=!0,this.no_default_value=!0)),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getJTEXTA",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ts.stringify({toJTEXT:this.element.params.sub_options.sub_labels})}).then(t=>{Object.values(t.data).forEach(t=>{this.arraySubValues.push(t)}),this.needtoemit()}).catch(t=>{console.log(t)})):(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels))},retrieveDataBaseJoinColumns(){p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getdatabasesjoinOrdonancementColomns",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ts.stringify({database_name:this.databases[this.databasejoin_data].database_name})}).then(t=>{this.databases_colums=t.data.data}).catch(t=>{console.log(t)})},needtoemit:Oe.a.debounce((function(){this.$emit("subOptions",this.arraySubValues)})),checkOnboarding(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=checkfirstdatabasejoin"}).then(t=>{t.data.status&&j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),text:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN_TEXT"),type:"info",showCancelButton:!1,showCloseButton:!0,allowOutsideClick:!1,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK")}).then(t=>{t.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=removeparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ts.stringify({param:"first_databasejoin"})})})})}},created(){this.initialised()},watch:{databasejoin(t){1==t?(this.checkOnboarding(),this.element.plugin="databasejoin",this.element.params.join_db_name=this.databases[this.databasejoin_data].database_name,this.element.params.database_join_display_type="dropdown",this.element.params.join_key_column=this.databases[this.databasejoin_data].join_column_id,"1"==this.databases[this.databasejoin_data].translation?(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val+"_fr",this.element.params.join_val_column_concat=`{thistable}.${this.databases[this.databasejoin_data].join_column_val}_{shortlang}`):(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val,this.element.params.join_val_column_concat="")):(this.element.plugin="dropdown",delete this.element.params.join_db_name,delete this.element.params.database_join_display_type,delete this.element.params.join_key_column,delete this.element.params.join_val_column,delete this.element.params.join_val_column_concat,delete this.element.params.database_join_where_sql,"undefined"===typeof this.element.params.sub_options&&(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels))},databasejoin_data(t){const e=this.databases[t];this.element.params.join_db_name=e.database_name,this.element.params.join_key_column=e.join_column_id,"1"===e.translation?(this.element.params.join_val_column=e.join_column_val+"_fr",this.element.params.join_val_column_concat=`{thistable}.${e.join_column_val}_{shortlang}`):(this.element.params.join_val_column=e.join_column_val,this.element.params.join_val_column_concat="")},databasejoin_data_order(t){1==this.databasejoin&&(this.element.params.database_join_where_sql="order by "+t)},no_default_value(t){this.element.params.default_value=t}}},Rs=xs,Ls=(a("9be5"),Object(b["a"])(Rs,ws,Ss,!1,null,"2d6be800",null)),Bs=Ls.exports,ks=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"radiobtnF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:t.element.params.rollover},on:{input:function(e){e.target.composing||t.$set(t.element.params,"rollover",e.target.value)}}})]),a("div",{staticClass:"em-flex-row mb-1"},[a("label",{staticClass:"require col-md-3"},[t._v(t._s(t.suboptions)+" :")])]),a("div",{staticClass:"col-md-10 form-group flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.databasejoin,expression:"databasejoin"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"databasejoin_check",name:"'databasejoin_check'"},domProps:{checked:Array.isArray(t.databasejoin)?t._i(t.databasejoin,null)>-1:t._q(t.databasejoin,"1")},on:{change:function(e){var a=t.databasejoin,s=e.target,i=s.checked?"1":"0";if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.databasejoin=a.concat([n])):o>-1&&(t.databasejoin=a.slice(0,o).concat(a.slice(o+1)))}else t.databasejoin=i}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("label",{staticClass:"ml-10px mb-0",attrs:{for:"databasejoin_check"}},[t._v(t._s(t.translations.DataTables))])]),a("div",{staticClass:"col-md-10"},[1!=t.databasejoin?a("draggable",{staticStyle:{"padding-bottom":"2em"},attrs:{handle:".handle"},on:{end:function(e){return t.needtoemit()}},model:{value:t.arraySubValues,callback:function(e){t.arraySubValues=e},expression:"arraySubValues"}},t._l(t.arraySubValues,(function(e,s){return a("div",{key:s,staticClass:"em-flex-row mb-1"},[a("span",{staticClass:"icon-handle"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.arraySubValues[s],expression:"arraySubValues[i]"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{height:"35px"},attrs:{type:"text",id:"suboption_"+s},domProps:{value:t.arraySubValues[s]},on:{change:function(e){return t.needtoemit()},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.add.apply(null,arguments)},input:function(e){e.target.composing||t.$set(t.arraySubValues,s,e.target.value)}}}),a("button",{staticClass:"remove-option",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.leave(s)}}},[t._v("-")])])})),0):t._e(),1!=t.databasejoin?a("button",{staticClass:"bouton-sauvergarder-et-continuer-3 button-add-option",staticStyle:{"margin-bottom":"2em"},attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.add.apply(null,arguments)}}},[t._v(t._s(t.AddOption)+" ")]):t._e(),1==t.databasejoin?a("select",{directives:[{name:"model",rawName:"v-model",value:t.databasejoin_data,expression:"databasejoin_data"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.databasejoin_data=e.target.multiple?a:a[0]},function(e){return t.retrieveDataBaseJoinColumns()}]}},t._l(t.databases,(function(e,s){return a("option",{domProps:{value:s}},[t._v(t._s(e.label))])})),0):t._e(),1==t.databasejoin?a("div",[a("label",[t._v(t._s(t.translations.OrderBy))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.databasejoin_data_order,expression:"databasejoin_data_order"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.databasejoin_data_order=e.target.multiple?a:a[0]}}},t._l(t.databases_colums,(function(e){return a("option",{domProps:{value:e.COLUMN_NAME}},[t._v(t._s(e.COLUMN_NAME))])})),0)]):t._e()],1)])])},Is=[];const js=a("bef5");var Ps={name:"radiobtnF",components:{draggable:_a.a},props:{element:Object,databases:Array},data(){return{arraySubValues:[],databases_colums:[],databasejoin:"0",no_default_value:!1,display_first_option:null,databasejoin_data:0,databasejoin_data_order:"",translations:{helptext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),suboptions:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_OPTIONS"),AddOption:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADD_OPTIONS"),DataTables:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),No_Default_Value:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_NO_DEFAULT_VALUE"),OrderBy:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ORDER_BY")},helptext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),suboptions:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_OPTIONS"),AddOption:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADD_OPTIONS"),DataTables:this.translate("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),No_Default_Value:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_NO_DEFAULT_VALUE"),OrderBy:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ORDER_BY")}},methods:{add:Oe.a.debounce((function(){let t=Object.keys(this.arraySubValues).length;this.$set(this.arraySubValues,t,""),this.needtoemit();let e="suboption_"+t.toString();setTimeout(()=>{document.getElementById(e).focus()},100)}),150),leave:function(t){this.$delete(this.arraySubValues,t),this.needtoemit()},initialised:function(){"databasejoin"===this.element.plugin?(this.databasejoin=1,this.databases.forEach((t,e)=>{if(t.database_name==this.element.params.join_db_name){this.databasejoin_data=e,this.retrieveDataBaseJoinColumns();const t=this.element.params.database_join_where_sql;this.databasejoin_data_order=t.replace(/order by /g,"")}})):"undefined"!==typeof this.element.params.sub_options?p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getJTEXTA",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:js.stringify({toJTEXT:this.element.params.sub_options.sub_labels})}).then(t=>{Object.values(t.data).forEach(t=>{this.arraySubValues.push(t)}),this.needtoemit()}).catch(t=>{console.log(t)}):(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels)},retrieveDataBaseJoinColumns(){p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getdatabasesjoinOrdonancementColomns",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:js.stringify({database_name:this.databases[this.databasejoin_data].database_name})}).then(t=>{this.databases_colums=t.data.data}).catch(t=>{console.log(t)})},checkOnboarding(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=checkfirstdatabasejoin"}).then(t=>{t.data.status&&j.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN_TEXT"),type:"info",showCancelButton:!1,showCloseButton:!0,allowOutsideClick:!1,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK")}).then(t=>{t.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=removeparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:js.stringify({param:"first_databasejoin"})})})})},needtoemit:Oe.a.debounce((function(){this.$emit("subOptions",this.arraySubValues)}))},created:function(){this.initialised()},watch:{databasejoin(t){1==t?(this.checkOnboarding(),this.element.plugin="databasejoin",this.element.params.join_db_name=this.databases[this.databasejoin_data].database_name,this.element.params.database_join_display_type="radio",this.element.params.join_key_column=this.databases[this.databasejoin_data].join_column_id,"1"==this.databases[this.databasejoin_data].translation?(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val+"_fr",this.element.params.join_val_column_concat=`{thistable}.${this.databases[this.databasejoin_data].join_column_val}_{shortlang}`):(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val,this.element.params.join_val_column_concat="")):(this.element.plugin="radiobutton",delete this.element.params.join_db_name,delete this.element.params.database_join_display_type,delete this.element.params.join_key_column,delete this.element.params.join_val_column,delete this.element.params.join_val_column_concat,delete this.element.params.database_join_where_sql,"undefined"===typeof this.element.params.sub_options&&(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels))},databasejoin_data(t){const e=this.databases[t];this.element.params.join_db_name=e.database_name,this.element.params.join_key_column=e.join_column_id,"1"===e.translation?(this.element.params.join_val_column=e.join_column_val+"_fr",this.element.params.join_val_column_concat=`{thistable}.${e.join_column_val}_{shortlang}`):(this.element.params.join_val_column=e.join_column_val,this.element.params.join_val_column_concat="")},databasejoin_data_order(t){1==this.databasejoin&&(this.element.params.database_join_where_sql="order by "+t)},no_default_value(t){this.element.params.default_value=t}}},Fs=Ps,$s=(a("2818"),Object(b["a"])(Fs,ks,Is,!1,null,"47a8e25b",null)),Gs=$s.exports,Hs=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"textareaF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group dpflex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.wysiwyg,expression:"wysiwyg"}],staticClass:"form__input field-general w-input",attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(t.wysiwyg)?t._i(t.wysiwyg,"1")>-1:t.wysiwyg},on:{change:function(e){var a=t.wysiwyg,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="1",o=t._i(a,n);s.checked?o<0&&(t.wysiwyg=a.concat([n])):o>-1&&(t.wysiwyg=a.slice(0,o).concat(a.slice(o+1)))}else t.wysiwyg=i}}}),a("label",{staticClass:"ml-10px mb-0"},[t._v(t._s(t.UseAdvancedEditor))])]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.heightext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.height,expression:"element.params.height"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"3"},domProps:{value:t.element.params.height},on:{input:function(e){e.target.composing||t.$set(t.element.params,"height",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.placeholdertext)+" "),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:t.msg,placement:"top-center",offset:5,delay:{show:500,hide:300}},expression:"{\n        content: msg,\n        placement: 'top-center',\n        offset: 5,\n        delay: {\n          show: 500,\n          hide: 300,\n          },\n        }"}]},[a("em",{staticClass:"fas fa-question-circle"})]),t._v(" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.textarea_placeholder,expression:"element.params.textarea_placeholder"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:t.element.params.textarea_placeholder},on:{input:function(e){e.target.composing||t.$set(t.element.params,"textarea_placeholder",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:t.element.params.rollover},on:{input:function(e){e.target.composing||t.$set(t.element.params,"rollover",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.maxlength)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.element.params["textarea-maxlength"],expression:"element.params['textarea-maxlength']"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"1"},domProps:{value:t.element.params["textarea-maxlength"]},on:{input:function(e){e.target.composing||t.$set(t.element.params,"textarea-maxlength",e.target.value)}}})]),a("div",{staticClass:"form-group dpflex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.showmax,expression:"showmax"}],staticClass:"form__input field-general w-input",staticStyle:{margin:"0 !important"},attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(t.showmax)?t._i(t.showmax,"1")>-1:t.showmax},on:{change:function(e){var a=t.showmax,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n="1",o=t._i(a,n);s.checked?o<0&&(t.showmax=a.concat([n])):o>-1&&(t.showmax=a.slice(0,o).concat(a.slice(o+1)))}else t.showmax=i}}}),a("label",{staticClass:"ml-10px mb-0"},[t._v(t._s(t.DisplayMaxLength))])])])])},zs=[],Vs={name:"textareaF",props:{element:Object},data(){return{msg:"",path:window.location.protocol+"//"+window.location.host+"/media/com_emundus_onboard/",arraySubValues:[],wysiwyg:!1,showmax:!1,widthtext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_WIDTH"),heightext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HEIGHT"),helptext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),placeholdertext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER"),sizetext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_SIZE"),maxlength:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_MAXLENGTH"),DisplayMaxLength:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_MAXLENGTH"),UseAdvancedEditor:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_USE_ADVANCED_EDITOR"),placeholderHelp:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER_HELP")}},methods:{},created(){this.msg='<p style="color: black">'+this.placeholderHelp+'</p><img src="'+this.path+'placeholder.gif" />',"undefined"==typeof this.element.params.height&&(this.element.params.height=6),"undefined"==typeof this.element.params["textarea-maxlength"]&&(this.element.params["textarea-maxlength"]=255),"undefined"==typeof this.element.params.use_wysiwyg?this.element.params.use_wysiwyg=0:"1"==this.element.params.use_wysiwyg&&(this.wysiwyg=!0),"undefined"==typeof this.element.params["textarea-showmax"]?this.element.params["textarea-showmax"]=0:"1"==this.element.params["textarea-showmax"]&&(this.showmax=!0)},watch:{wysiwyg:function(t){this.element.params.use_wysiwyg=t?"1":"0"},showmax:function(t){this.element.params["textarea-showmax"]=t?"1":"0"}}},qs=Vs,Ys=(a("36fb"),Object(b["a"])(qs,Hs,zs,!1,null,"296e6200",null)),Js=Ys.exports,Ws=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"displayF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.Text)+" :")]),a("editor",{attrs:{height:"30em",text:t.element.default,lang:"fr",enable_variables:!1,id:"element_"+t.element.id},model:{value:t.element.default,callback:function(e){t.$set(t.element,"default",e)},expression:"element.default"}})],1)])])},Xs=[],Ks={name:"displayF",props:{element:Object,files:Number},components:{Editor:De},data(){return{Text:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_TEXT"),dynamicComponent:!1}},methods:{},created(){}},Qs=Ks,Zs=(a("d196"),Object(b["a"])(Qs,Ws,Xs,!1,null,"3a13f6d2",null)),ti=Zs.exports,ei=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"fileF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Max size (Mb) :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.size,expression:"size"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"1",max:"10"},domProps:{value:t.size},on:{keyup:function(e){return t.convertToByte()},input:function(e){e.target.composing||(t.size=e.target.value)}}}),t.errors.maxSize?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v("Saisir une valeur comprise entre 1 et 10 Mb")])]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{class:{"is-invalid":t.errors.selectedTypes},attrs:{for:"max_size"}},[t._v(t._s(t.FileType)+"* :")]),a("div",{staticClass:"users-block",class:{"is-invalid":t.errors.selectedUsers}},t._l(t.types,(function(e,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.selectedTypes[e.value],expression:"form.selectedTypes[type.value]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.selectedTypes[e.value])?t._i(t.form.selectedTypes[e.value],null)>-1:t.form.selectedTypes[e.value]},on:{change:function(a){var s=t.form.selectedTypes[e.value],i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.form.selectedTypes,e.value,s.concat([o])):r>-1&&t.$set(t.form.selectedTypes,e.value,s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.form.selectedTypes,e.value,n)}}}),a("div",{staticClass:"ml-10px"},[a("p",[t._v(t._s(e.title)+" ("+t._s(e.value)+")")])])])})),0)])])])},ai=[];const si=a("bef5");var ii={name:"fileF",props:{value:File,element:Object,prid:String},data(){return{msg:"",size:this.element.params.size/1048576,types:[{title:this.translate("COM_EMUNDUS_ONBOARD_PDF_DOCUMENTS"),value:"pdf"},{title:this.translate("COM_EMUNDUS_ONBOARD_PICTURES_DOCUMENTS"),value:"jpg;png;gif"},{title:this.translate("COM_EMUNDUS_ONBOARD_OFFICE_DOCUMENTS"),value:"doc;docx;odt"},{title:this.translate("COM_EMUNDUS_ONBOARD_EXCEL_DOCUMENTS"),value:"xls;xlsx;odf"}],labels_name:{text_fr:"",text_en:"",did:""},form:{name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpg;png;gif":!1,"doc;docx;odt":!1,"xls;xlsx;odf":!1}},errors:{name:!1,nbmax:!1,selectedTypes:!1,maxSize:!1},selectedTypes:[],path:window.location.protocol+"//"+window.location.host+"/media/com_emundus_onboard/",heightext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HEIGHT"),helptext:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),MaxRequired:this.translate("COM_EMUNDUS_ONBOARD_MAXPERUSER_REQUIRED"),TypeRequired:this.translate("COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED_REQUIRED"),placeholderHelp:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER_HELP"),MaxPerUser:this.translate("COM_EMUNDUS_ONBOARD_MAXPERUSER"),FileType:this.translate("COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED")}},methods:{handleFileChange(t){this.$emit("input",t.target.files[0])},convertToByte(){this.size>10||this.size<1?this.errors.maxSize=!0:(this.element.params.size=1048576*this.size,this.errors.maxSize=!1)},retrieveAssociateElementDoc(t){p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=retriveElementFormAssociatedDoc",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:si.stringify({gid:2,docid:t})}).then(t=>{this.form.description[this.actualLanguage]=t.data.description,t.data.allowed_types.includes("pdf")?this.form.selectedTypes.pdf=!0:this.form.selectedTypes.pdf=!1,t.data.allowed_types.includes("jpg")||t.data.allowed_types.includes("png")||t.data.allowed_types.includes("gif")?this.form.selectedTypes["jpg;png;gif"]=!0:this.form.selectedTypes["jpg;png;gif"]=!1,t.data.allowed_types.includes("xls")||t.data.allowed_types.includes("xlsx")||t.data.allowed_types.includes("odf")?this.form.selectedTypes["xls;xlsx;odf"]=!0:this.form.selectedTypes["xls;xlsx;odf"]=!1,this.form.nbmax=t.data.nbmax})},retrieveDocumentNameFalangs(t){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=getDocumentFalang",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:si.stringify({gid:2,docid:t})}).then(e=>{this.labels_name.text_fr=e.data.data.fr.value,this.labels_name.text_en=e.data.data.en.value,this.labels_name.did=t})},updateDocumentFalengs(t){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updateDocumentFalang",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:si.stringify(t)}).then(t=>{})},updateAssociateDocElement(t){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updatedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:si.stringify(t)}).then(t=>{this.$emit("UpdateDocuments")})}},created(){this.msg='<p style="color: black">'+this.placeholderHelp+'</p><img src="'+this.path+'placeholder.gif" />',this.retrieveAssociateElementDoc(this.element.params.attachmentId),this.retrieveDocumentNameFalangs(this.element.params.attachmentId)},beforeDestroy(){let t=[];Object.keys(this.form.selectedTypes).forEach(e=>{1==this.form.selectedTypes[e]&&t.push(e)});let e={document:this.form,types:t,cid:this.cid,pid:this.prid,did:this.element.params.attachmentId};this.updateAssociateDocElement(e),this.updateDocumentFalengs(this.labels_name)}},ni=ii,oi=(a("077f"),Object(b["a"])(ni,ei,ai,!1,null,"c5f4a0a2",null)),ri=oi.exports,li=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},di=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"yesnoF"}},[a("div",{staticClass:"row rowmodal"})])}],ci={name:"yesnoF"},mi=ci,ui=Object(b["a"])(mi,li,di,!1,null,"e617e150",null),pi=ui.exports;const hi=a("bef5");var _i={name:"modalEditElement",props:{elementId:{type:Number,required:!0},gid:Number,files:Number,manyLanguages:Number,actualLanguage:String,profileId:Number},components:{fieldF:_s,birthdayF:Cs,checkboxF:Ms,dropdownF:Bs,radiobtnF:Gs,textareaF:Js,displayF:ti,fileF:ri,yesnoF:pi},data(){return{label:{fr:"",en:""},done:!1,changes:!1,loading:!1,sublabel:"",plugin:"",element:null,plugins:{field:{value:"field",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_FIELD")},birthday:{value:"birthday",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_BIRTHDAY")},checkbox:{value:"checkbox",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_CHECKBOX")},dropdown:{value:"dropdown",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_DROPDOWN")},radiobutton:{value:"radiobutton",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_RADIOBUTTON")},textarea:{value:"textarea",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_TEXTAREA")},display:{value:"display",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_DISPLAY")},fileupload:{value:"emundus_fileupload",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_FILE")},yesno:{value:"yesno",name:"yesno"}},databases:[],Name:this.translate("COM_EMUNDUS_ONBOARD_FIELD_NAME"),Require:this.translate("COM_EMUNDUS_ONBOARD_FIELD_REQUIRED"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_SAVE"),dataSaved:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DATASAVED"),informations:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_INFORMATIONS"),fieldType:this.translate("COM_EMUNDUS_ONBOARD_FIELD_TYPE"),Delete:this.translate("COM_EMUNDUS_ONBOARD_ACTION_DELETE"),LabelRequired:this.translate("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),TranslateEnglish:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),ElementOptions:this.translate("COM_EMUNDUS_ONBOARD_ELEMENT_OPTIONS"),Unpublish:this.translate("COM_EMUNDUS_ONBOARD_ACTION_UNPUBLISH"),Publish:this.translate("COM_EMUNDUS_ONBOARD_ACTION_PUBLISH"),Required:this.translate("COM_EMUNDUS_ONBOARD_ACTIONS_REQUIRED"),update:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),updating:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATING"),updateSuccess:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATESUCESS"),updateFailed:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATEFAILED")}},methods:{subOptions(t){this.sublabel=t},UpdateParams(){this.changes=!0,"undefined"!==typeof this.element.params.sub_options&&(this.element.params.sub_options.sub_values=this.sublabel),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updateparams",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:hi.stringify({element:this.element})}).then(t=>{setTimeout(()=>{this.$emit("reloadElement")},200),this.$modal.hide("modalEditElement"+this.elementId)}).catch(t=>{console.log(t)})},axiostrad:function(t){return p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getalltranslations",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:hi.stringify({toJTEXT:t})})},getElement(){this.loading=!0,p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:this.elementId,gid:this.gid},paramsSerializer:t=>hi.stringify(t)}).then(t=>{this.element=t.data,"databasejoin"==this.element.plugin?"radio"==this.element.params.database_join_display_type?this.plugin="radiobutton":this.plugin=this.element.params.database_join_display_type:"date"==this.element.plugin||"years"==this.element.plugin?this.plugin="birthday":this.plugin=this.element.plugin,this.axiostrad(this.element.label_tag).then(t=>{this.label.fr=t.data.fr,this.label.en=t.data.en}),0!=this.files&&"birthday"!=this.element.plugin&&delete this.plugins.birthday,this.loading=!1})},getDatabases(){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getdatabasesjoin"}).then(t=>{this.databases=t.data.data})},beforeClose(t){!0===this.changes&&(this.changes=!1,this.$emit("show","foo-velocity","warn",this.dataSaved,this.informations)),this.$emit("modalClosed")},beforeOpen(t){this.initialisation()},initialisation(){this.getElement(),this.getDatabases()},publishUnpublishElement(){p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=publishunpublishelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:hi.stringify({element:this.element.id})}).then(t=>{this.element.publish=!this.element.publish,this.$emit("publishUnpublishEvent"),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating),console.log(t)})},updateRequireElement(){setTimeout(()=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=changerequire",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:hi.stringify({element:this.element})}).then(()=>{this.$emit("updateRequireEvent")}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating),console.log(t)})},300)}},computed:{getlabel:function(){return this.tempEl.label_raw}},watch:{element:function(){this.tempEl=JSON.parse(JSON.stringify(this.element))},plugin:function(t){switch(t){case"dropdown":"databasejoin"!==this.element.plugin&&(this.element.plugin=t);break;case"radiobutton":"databasejoin"!==this.element.plugin&&(this.element.plugin=t);break;case"birthday":"date"!==this.element.plugin&&"years"!==this.element.plugin&&(this.element.plugin=t);break;default:this.element.plugin=t}}}},gi=_i,fi=(a("6265"),Object(b["a"])(gi,ls,ds,!1,null,"abcbb9ac",null)),bi=fi.exports;a("bef5");var vi={name:"FormViewerEvaluation",props:{link:String,prog:Number},components:{datePicker:Ha.a,modalEditElement:bi},data(){return{object_json:"",date:new Date,groups:[],loading:!1,options:{format:"DD/MM/YYYY",useCurrent:!1}}},methods:{getDataObject:Oe.a.debounce((function(){this.loading=!0;let t=this.link.link.replace("fabrik","emundus");p.a.get(t+"&format=vue_jsonclean").then(t=>{this.object_json=t.data,this.convertGroupElementsToArray(),this.loading=!1}).catch(t=>{this.loading=!1,console.log(t)})}),150),convertGroupElementsToArray(){Object.keys(this.object_json.Groups).forEach(t=>{this.groups.push(this.object_json.Groups[t]),this.object_json.Groups[t].elts=[],Object.keys(this.object_json.Groups[t].elements).forEach(e=>{this.object_json.Groups[t].elts.push(this.object_json.Groups[t].elements[e])})})}},created(){this.getDataObject()},computed:{dragOptions(){return{group:{name:"items",pull:"clone",put:!1},sort:!1,disabled:!1,ghostClass:"ghost"}}},watch:{}},Oi=vi,Ci=(a("68a2"),Object(b["a"])(Oi,os,rs,!1,null,"16207d30",null)),Ei=Ci.exports,yi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalAddEvaluation"}},[a("modal",{attrs:{name:"modalAddEvaluation",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddEvaluation")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.translations.addGrid)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.translations.ChooseExistingGridModel)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.model_id,expression:"model_id"}],staticClass:"dropdown-toggle",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.model_id=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"-1"}}),t._l(t.models,(function(e){return a("option",{key:e.form_id,domProps:{value:e.form_id}},[t._v(t._s(e.label))])}))],2)]),a("div",{staticClass:"form-group",class:{"mb-0":t.can_translate.label}},[a("label",[t._v(t._s(t.translations.Name)),a("span",{staticClass:"em-red-500-color"},[t._v("*")]),t._v(" :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label.fr,expression:"label.fr"}],staticClass:"form__input field-general w-input",class:{"is-invalid":t.errors},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40",id:"menu_label"},domProps:{value:t.label.fr},on:{input:function(e){e.target.composing||t.$set(t.label,"fr",e.target.value)}}}),a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.can_translate.label},attrs:{type:"button"},on:{click:function(e){t.can_translate.label=!t.can_translate.label}}})])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[t.can_translate.label?a("div",{staticClass:"inlineflex"},[a("label",{staticClass:"translate-label"},[t._v(" "+t._s(t.translations.TranslateEnglish)+" ")]),a("i",{staticClass:"fas fa-sort-down"})]):t._e()]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[t.can_translate.label?a("div",{staticClass:"form-group mb-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label.en,expression:"label.en"}],staticClass:"form__input field-general w-input",attrs:{type:"text",maxlength:"40"},domProps:{value:t.label.en},on:{input:function(e){e.target.composing||t.$set(t.label,"en",e.target.value)}}})]):t._e()]),t.errors&&-1==t.model_id?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.LabelRequired))])]):t._e(),a("div",{staticClass:"form-group mt-1",class:{"mb-0":t.can_translate.intro}},[a("label",[t._v(t._s(t.translations.Intro)+" :")]),a("div",{staticClass:"input-can-translate"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intro.fr,expression:"intro.fr"}],staticClass:"form__input field-general w-input",staticStyle:{margin:"0"},attrs:{rows:"3",maxlength:"300"},domProps:{value:t.intro.fr},on:{input:function(e){e.target.composing||t.$set(t.intro,"fr",e.target.value)}}}),a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.can_translate.intro},attrs:{type:"button"},on:{click:function(e){t.can_translate.intro=!t.can_translate.intro}}})])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[t.can_translate.intro?a("div",{staticClass:"inlineflex"},[a("label",{staticClass:"translate-label"},[t._v(" "+t._s(t.translations.TranslateEnglish)+" ")]),a("em",{staticClass:"fas fa-sort-down"})]):t._e()]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[t.can_translate.intro?a("div",{staticClass:"form-group mb-1"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.intro.en,expression:"intro.en"}],staticClass:"form__input field-general w-input",attrs:{rows:"3",maxlength:"300"},domProps:{value:t.intro.en},on:{input:function(e){e.target.composing||t.$set(t.intro,"en",e.target.value)}}})]):t._e()]),-1==t.model_id?a("div",{staticClass:"col-md-12 em-flex-row"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.template,expression:"template"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.template)?t._i(t.template,null)>-1:t.template},on:{change:function(e){var a=t.template,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.template=a.concat([n])):o>-1&&(t.template=a.slice(0,o).concat(a.slice(o+1)))}else t.template=i}}}),a("label",{staticClass:"ml-10px"},[t._v(t._s(t.translations.SaveAsTemplate)+" :")])]):t._e()],1),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddEvaluation")}}},[t._v(t._s(t.translations.Retour))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.createGrid()}}},[t._v(t._s(t.translations.Continuer))])]),t.submitted?a("div",{staticClass:"em-page-loader"}):t._e()])],1)},Di=[];const Ni=a("bef5");var Ai={name:"modalAddEvaluation",components:{},props:{prog:Number,grid:Number},data(){return{can_translate:{label:!1,intro:!1},label:{fr:"",en:""},intro:{fr:"",en:""},model_id:-1,template:0,models:[],errors:!1,changes:!1,submitted:!1,translations:{addGrid:"COM_EMUNDUS_ONBOARD_BUILDER_ADDGRID",ChooseExistingGridModel:"COM_EMUNDUS_ONBOARD_GRIDMODEL",Name:"COM_EMUNDUS_ONBOARD_FIELD_NAME",Intro:"COM_EMUNDUS_ONBOARD_FIELD_INTRO",Retour:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",Continuer:"COM_EMUNDUS_ONBOARD_ADD_CONTINUER",LabelRequired:"COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME",TranslateEnglish:"COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH",SaveAsTemplate:"COM_EMUNDUS_ONBOARD_SAVE_AS_TEMPLATE"}}},methods:{beforeOpen(t){this.getExistingGrids()},getExistingGrids(){p()({method:"get",url:"index.php?option=com_emundus&controller=programme&task=getgridsmodel"}).then(t=>{this.models=t.data.data})},createGrid(){this.changes=!0,""!=this.label.fr||-1!=this.model_id?(this.can_translate.label||(this.label.en=this.label.fr),this.can_translate.intro||(this.intro.en=this.intro.fr),this.submitted=!0,p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=creategrid",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ni.stringify({label:this.label,intro:this.intro,modelid:this.model_id,template:this.template,pid:this.prog})}).then(t=>{this.submitted=!1,this.$emit("updateGrid"),this.$modal.hide("modalAddEvaluation")}).catch(t=>{console.log(t)})):this.errors=!0}},watch:{model_id:function(t){-1!=t?this.models.forEach(t=>{t.form_id==this.model_id&&(this.label.fr=t.label,this.intro.fr=t.intro)}):(this.label.fr="",this.intro.fr="")}}},Ui=Ai,Mi=Object(b["a"])(Ui,yi,Di,!1,null,"636bdac5",null),wi=Mi.exports;const Si=a("bef5");var Ti={name:"addEvaluationGrid",components:{ModalAddEvaluation:wi,Datetime:pe["Datetime"],FormViewerEvaluation:Ei},props:{prog:{type:Number,default:""}},data(){return{link:{link:""},visibility:null,viewer:0,grid:null,translations:{addGrid:"COM_EMUNDUS_ONBOARD_BUILDER_ADDGRID",editGrid:"COM_EMUNDUS_ONBOARD_BUILDER_EDITGRID",deleteGrid:"COM_EMUNDUS_ONBOARD_BUILDER_DELETEGRID"}}},methods:{getEvaluationGridByProgram(t){p.a.get("index.php?option=com_emundus&controller=programme&task=getevaluationgrid&pid="+this.prog).then(e=>{this.grid=e.data.data,null!=this.grid&&(this.link.link="index.php?option=com_fabrik&view=form&formid="+e.data.data,this.viewer++,t&&this.evaluationBuilder())})},evaluationBuilder(){this.redirectJRoute("index.php?option=com_emundus&view=form&layout=formbuilder&prid=&index=0&cid="+this.prog+"&evaluation="+this.grid)},deleteGrid(){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGRID"),text:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGRID_QUESTION"),type:"warning",showCancelButton:!0}).then(t=>{t.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=deletegrid",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Si.stringify({grid:this.grid,pid:this.prog})}).then(()=>{j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_GRIDDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.getEvaluationGridByProgram(0)})}).catch(t=>{console.log(t)})})},redirectJRoute(t){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=redirectjroute",params:{link:t},paramsSerializer:t=>Si.stringify(t)}).then(t=>{window.location.href=window.location.pathname+t.data.data})}},created(){this.getEvaluationGridByProgram(0)}},xi=Ti,Ri=Object(b["a"])(xi,is,ns,!1,null,null,null),Li=Ri.exports;const Bi=a("bef5");var ki={name:"addFormNextCampaign",components:{AddEvaluationGrid:Li,AddDocumentsDropfiles:Ca,addCampaign:$e,ModalWarningFormBuilder:da,addFormulaire:ss,addEmail:Ba},props:{index:Number},data:()=>({campaignId:0,actualLanguage:"",manyLanguages:0,prid:"",EmitIndex:"0",menuHighlight:0,menuHighlightProg:-1,formReload:0,selectedform:"default",formList:"",prog:0,loading:!1,closeSubmenu:!0,profileId:null,profiles:[],campaignsByProgram:[],currentElement:"",currentSpan:"",langue:0,formCategoriesDesc:[["Vous pouvez modifier vos dates limites de campagne, vos descriptifs et définir une limite de dossiers","Proposez à vos visiteurs des documents d'informations avant même qu'il se connecte. Ces documents seront disponibles dans la section <em>Plus d'informations</em> de votre campagne","Choississez le formulaire de votre campagne. Nous vous proposons des modèles que vous pouvez modifier à tout moment.","Proposez des documents des documents à vos candidats qui remplissent le formulaire. Cela peut être des modèles que les candidats doivent compléter puis déposer ou simplement des documents complémentaires à certains informations demandées","Ajoutez des types de documents que le candidat doit déposer à la suite du formulaire. Glissez simplement les documents entre les 2 colonnes ou ajouter un nouveau type de document"],["You can change your campaign deadlines, your descriptions and set a file limit","Offer your visitors information documents before they even log in. These documents will be available in the <em>More information</em> section of your campaign","Choose the form for your campaign. We offer templates that you can modify at any time.","Offer documents to your applicants when they fill in the form. These can be templates that applicants need to complete and then submit, or simply documents to supplement some of the information requested","Add document types that the applicant should file after the form. Simply drag and drop documents between the 2 columns or add a new document type"]],formCategories:[["Informations générales","Documents préalables","Formulaire"],["Global informations","Preliminary documents","Form"]],formPrograms:[["Grille d'évaluation","Emails"],["Evaluation grid","Emails"]],formProgramsDesc:[["Définissez une phase d'évaluation en créant une grille avec différents critères.","Configurer des envois d'emails automatique aux changements de statuts de vos différents candidats."],["Evaluation grid","Emails"]],form:{},program:{id:0,label:"",code:"",programmes:"",notes:"",synthesis:'<ul><li><strong>[APPLICANT_NAME]</strong></li><li><a href="mailto:[EMAIL]">[EMAIL]</a></li></ul>',tmpl_trombinoscope:'<table cellpadding="2" style="width: 100%;"><tbody><tr style="border-collapse: collapse;"><td align="center" valign="top" style="text-align: center;"><p style="text-align: center;"><img src="[PHOTO]" alt="Photo" height="100" /> </p><p style="text-align: center;"><b>[NAME]</b><br /></p></td></tr></tbody></table>',tmpl_badge:'<table width="100%"><tbody><tr><td style="vertical-align: top; width: 100px;" align="left" valign="middle" width="30%"><img src="[LOGO]" alt="Logo" height="50" /></td><td style="vertical-align: top;" align="left" valign="top" width="70%"><b>[NAME]</b></td></tr></tbody></table>\n',published:1,apply_online:1},prog_group:{prog:null,evaluator:null,manager:null},translations:{DATE_FORMAT:"DATE_FORMAT_JS_LC2",From:"COM_EMUNDUS_ONBOARD_FROM",To:"COM_EMUNDUS_ONBOARD_TO",chooseProfileWarning:"COM_EMUNDUS_ONBOARD_CHOOSE_PROFILE_WARNING",ProgramWarning:"COM_EMUNDUS_ONBOARD_PROGRAM_WARNING"}}),created(){this.campaignId=Number(this.$store.getters["global/datas"].campaignId.value),this.actualLanguage=this.$store.getters["global/actualLanguage"],this.manyLanguages=Number(this.$store.getters["global/manyLanguages"]),"en"===this.actualLanguage&&(this.langue=1)},methods:{initInformations(t){this.form.label=t.label,this.form.profile_id=t.profile_id,this.form.program_id=t.progid,this.form.start_date=t.start_date,this.form.end_date=t.end_date,this.form.start_date=r()(this.form.start_date).format(this.translations.DATE_FORMAT),"0000-00-00 00:00:00"===this.form.end_date?this.form.end_date=null:this.form.end_date=r()(this.form.end_date).format(this.translations.DATE_FORMAT),p.a.get("index.php?option=com_emundus&controller=form&task=getallformpublished").then(t=>{this.profiles=t.data.data,null==this.form.profile_id?(0!=this.profiles.length?this.profileId=this.profiles[0].id:this.profileId=null,null!=this.profileId&&(this.formReload+=1)):(this.formReload+=1,this.profileId=this.form.profile_id),this.loading=!1}),setTimeout(()=>{"undefined"==typeof this.menuHighlight&&(this.menuHighlight=0)},500)},changeToProgMenu(t){p.a.get("index.php?option=com_emundus&controller=programme&task=getprogrambyid&id="+this.form.program_id).then(t=>{this.program.id=t.data.data.id,this.program.code=t.data.data.code,this.program.label=t.data.data.label,this.program.notes=t.data.data.notes,this.program.programmes=t.data.data.programmes,this.program.tmpl_badge=t.data.data.tmpl_badge,this.program.published=t.data.data.published,this.program.apply_online=t.data.data.apply_online,null!=t.data.data.synthesis&&(this.program.synthesis=t.data.data.synthesis.replace(/>\s+</g,"><")),null!=t.data.data.tmpl_trombinoscope&&(this.program.tmpl_trombinoscope=t.data.data.tmpl_trombinoscope.replace(/>\s+</g,"><")),this.prog_group.prog=t.data.data.group,this.prog_group.evaluator=t.data.data.evaluator_group,this.prog_group.manager=t.data.data.manager_group,p()({method:"get",url:"index.php?option=com_emundus&controller=programme&task=getcampaignsbyprogram",params:{pid:this.program.id},paramsSerializer:t=>Bi.stringify(t)}).then(t=>{this.campaignsByProgram=t.data.campaigns})}).catch(t=>{console.log(t)}),this.menuHighlightProg=t,this.menuHighlight=-1},changeToCampMenu(t){this.menuHighlight=t,this.menuHighlightProg=-1},setProfileId(t){this.profileId=t},moment(t){return r()(t)},next(){this.menuHighlight<1?this.menuHighlight++:this.redirectJRoute("index.php?option=com_emundus&view=campaign")},previous(){this.menuHighlight>0?this.menuHighlight--:this.redirectJRoute("index.php?option=com_emundus&view=campaign")},redirectJRoute(t){window.location.href=t},getCookie(t){var e=t+"=",a=decodeURIComponent(document.cookie),s=a.split(";");for(let i of s){while(" "==i.charAt(0))i=i.substring(1);if(0==i.indexOf(e))return i.substring(e.length,i.length)}return""}},computed:{console:()=>console,getProfileId(){return Number(this.profileId)}}},Ii=ki,ji=(a("00b5"),Object(b["a"])(Ii,aa,sa,!1,null,"241c6fd4",null)),Pi=ji.exports,Fi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),-1!=t.indexHighlight?a("div",[a("ModalAffectCampaign",{attrs:{prid:t.prid,testing:t.testing}}),a("ModalMenu",{attrs:{profileId:t.prid,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages,languages:t.languages},on:{AddMenu:t.pushMenu,modalClosed:function(e){t.optionsModal=!1}}}),t._l(t.formObjectArray,(function(e,s){return a("ModalSide",{directives:[{name:"show",rawName:"v-show",value:t.formObjectArray[t.indexHighlight],expression:"formObjectArray[indexHighlight]"}],key:s,attrs:{ID:e.rgt,element:e.object,link:t.formObjectArray[t.indexHighlight].link,menus:t.formObjectArray,index:s,files:t.files,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages,languages:t.languages},on:{show:t.show,UpdateUx:t.UpdateUXT,UpdateName:t.UpdateName,UpdateIntro:t.UpdateIntro,UpdateVue:t.updateFormObjectAndComponent,removeMenu:t.removeMenu,modalClosed:function(e){t.optionsModal=!1}}})})),a("ModalAddDocuments",{attrs:{pid:t.prid,currentDoc:t.currentDoc,langue:t.actualLanguage,manyLanguages:t.manyLanguages},on:{modalClosed:function(e){t.optionsModal=!1},UpdateDocuments:t.getDocuments}})],2):t._e(),-1!=t.indexHighlight?a("div",{staticClass:"row"},[a("div",{staticClass:"sidebar-formbuilder",style:t.actions_menu?"width: 250px":""},[a("transition",{attrs:{name:"move-right"}},[a("div",{staticClass:"actions-menu menu-block"},[a("a",{staticClass:"em-flex-row back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:t.translations.Back}},[t._v(" "+t._s(t.translations.BuildYourForm)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("div",[a("div",{staticClass:"action-links"},[a("a",{staticClass:"em-flex-row action-link",staticStyle:{"padding-top":"2em"},attrs:{title:t.translations.addMenu},on:{click:function(e){return t.$modal.show("modalMenu")}}},[a("span",{staticClass:"material-icons"},[t._v("note_add")]),a("label",{staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[t._v(t._s(t.translations.addMenu))])]),a("a",{staticClass:"em-flex-row action-link",attrs:{title:t.translations.addGroup},on:{click:function(e){return t.showSections()}}},[a("span",{staticClass:"material-icons"},[t._v("table_rows")]),a("label",{staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[t._v(t._s(t.translations.addGroup))])]),a("a",{staticClass:"em-flex-row action-link",class:{"disable-element":t.elementDisabled},attrs:{title:t.translations.addItem},on:{click:t.showElements}},[a("span",{staticClass:"material-icons"},[t._v("text_fields")]),a("label",{staticClass:"action-label col-md-offset-1 col-sm-offset-1",class:[{"disable-element":t.elementDisabled},t.addingElement?"down-arrow":"right-arrow"]},[t._v(t._s(t.translations.addItem))])]),a("transition",{attrs:{name:"slide-right",type:"transition"}},[t.addingElement?a("div",{staticClass:"plugins-list"},[a("a",{staticClass:"em-flex-row col-md-offset-1 back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:t.Back},on:{click:function(e){t.addingElement=!t.addingElement}}},[a("em",{staticClass:"fas fa-arrow-left em-mr-4"}),t._v(" "+t._s(t.translations.Back)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("draggable",t._b({staticStyle:{"padding-bottom":"2em","margin-top":"10%"},attrs:{handle:".handle","drag-class":"plugin-drag","chosen-class":"plugin-chosen","ghost-class":"plugin-ghost"},on:{start:function(e){t.startDragging(),t.dragging=!0,t.draggingIndex=t.index},end:function(e){return t.addingNewElement(e)}},model:{value:t.plugins,callback:function(e){t.plugins=e},expression:"plugins"}},"draggable",t.dragOptions,!1),t._l(t.plugins,(function(e,s){return a("div",{key:"plugin_"+s,staticClass:"em-flex-row plugin-link col-md-offset-1 col-sm-offset-1 handle",attrs:{id:"plugin_"+e.value,title:e.name},on:{dblclick:function(a){return t.addingNewElementByDblClick(e.value)}}},[a("em",{class:e.icon}),a("span",{staticClass:"ml-10px"},[t._v(t._s(e.name))])])})),0)],1):t._e()]),a("transition",{attrs:{name:"slide-right",type:"transition"}},[t.addingSection?a("div",{staticClass:"plugins-list"},[a("a",{staticClass:"em-flex-row col-md-offset-1 back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:t.Back},on:{click:function(e){t.addingSection=!t.addingSection}}},[a("em",{staticClass:"fas fa-arrow-left em-mr-4"}),t._v(" "+t._s(t.translations.Back)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),t._l(t.sections,(function(e,s){return a("div",{staticClass:"em-flex-row plugin-link col-md-offset-1 col-sm-offset-1 ",staticStyle:{cursor:"default"},attrs:{id:"section_"+e.value,title:e.name},on:{click:function(a){return t.createGroup(e.value,e.label)}}},[a("em",{class:e.icon}),a("span",{staticClass:"ml-10px"},[t._v(t._s(e.name))])])}))],2):t._e()])],1)])])])],1),a("div",{staticClass:"menu-block",class:t.actions_menu?"col-md-8 col-md-offset-4 col-sm-9 col-sm-offset-3":""},[a("div",{staticClass:"heading-block",class:t.addingElement||t.actions_menu?"col-md-6":"col-md-8"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!t.updateFormLabel,expression:"!updateFormLabel"}],staticClass:"em-flex-row form-title-block"},[a("h2",{staticClass:"form-title",staticStyle:{padding:"0",margin:"0"},on:{click:t.enableUpdatingForm}},[t._v(t._s(t.profileLabel))]),a("a",{staticClass:"cta-block pointer",staticStyle:{"margin-left":"1em"},attrs:{title:t.translations.Edit},on:{click:t.enableUpdatingForm}},[a("em",{staticClass:"fas fa-pen",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.updateFormLabel,expression:"updateFormLabel"}],staticStyle:{width:"max-content","margin-left":"20px"}},[a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.profileLabel,expression:"profileLabel"}],staticClass:"form__input field-general w-input",staticStyle:{width:"400px"},attrs:{id:"update_label_form_"+t.prid},domProps:{value:t.profileLabel},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateLabelForm()},input:function(e){e.target.composing||(t.profileLabel=e.target.value)}}}),a("div",{staticClass:"em-flex-row actions-update-label ml-10px"},[a("a",{attrs:{title:t.translations.Validate},on:{click:function(e){return t.updateLabelForm()}}},[a("em",{staticClass:"fas fa-check em-mr-4",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])])])]),0===t.menuHighlight?a("div",{staticClass:"form-builder"},[a("div",{staticClass:"form-viewer-builder",class:[t.addingElement||t.actions_menu?"col-sm-offset-5 col-md-offset-4 col-lg-offset-1 col-sm-7 col-md-6":"col-md-8",t.optionsModal?"col-sm-5 col-md-6":"col-md-8"]},[t.formObjectArray[t.indexHighlight]?a("Builder",{key:t.builderKey,ref:"builder",attrs:{object:t.formObjectArray[t.indexHighlight],UpdateUx:t.UpdateUx,rgt:t.rgt,prid:t.prid,eval:0,files:t.files,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages},on:{show:t.show,UpdateFormBuilder:t.updateFormObjectAndComponent,removeGroup:t.removeGroup,modalClosed:function(e){t.optionsModal=!1},modalOpen:function(e){t.optionsModal=!0}}}):t._e()],1)]):t._e(),1===t.menuHighlight?a("div",{staticClass:"form-builder"},[a("div",{staticClass:"form-viewer-builder",class:[t.addingElement||t.actions_menu?"col-sm-offset-5 col-md-offset-4 col-lg-offset-1 col-sm-7 col-md-6":"col-md-8",t.optionsModal?"col-sm-5 col-md-6":"col-md-8"]},[t.submittionPages[t.indexHighlight]?a("Builder",{key:t.builderSubmitKey,ref:"builder_submit",attrs:{object:t.submittionPages[t.indexHighlight],UpdateUx:t.UpdateUx,rgt:t.rgt,prid:t.prid,eval:0,files:t.files,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages},on:{show:t.show,UpdateFormBuilder:t.updateFormObjectAndComponent,removeGroup:t.removeGroup,modalClosed:function(e){t.optionsModal=!1},modalOpen:function(e){t.optionsModal=!0}}}):t._e()],1)]):t._e(),t.formObjectArray?a("ul",{staticClass:"col-md-3 sticky-form-pages",class:[t.addingElement||t.actions_menu&&t.formList.length>0?"ml-10px col-sm-offset-5 col-sm-7":"",t.optionsModal?"col-sm-5":"",0===t.formList.length?"col-sm-offset-5 col-sm-7":""],staticStyle:{"margin-top":"0"}},[a("div",{staticClass:"em-flex-row em-flex-space-between em-mb-8"},[a("h3",{staticStyle:{padding:"0","margin-bottom":"unset"}},[t._v(t._s(t.translations.FormPage))]),a("label",{staticClass:"saving-at"},[t._v(t._s(t.translations.Savingat)+" "+t._s(t.lastUpdate)),a("em",{staticClass:"fas fa-sync ml-10px"})])]),a("div",{staticClass:"form-pages"},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{"margin-bottom":"0",padding:"0"}},[a("img",{staticClass:"em-mr-4",attrs:{src:"/images/emundus/menus/form.png",alt:t.translations.Form}}),t._v(t._s(t.translations.Form))]),a("draggable",{class:"draggables-list",attrs:{handle:".handle"},on:{end:t.SomethingChange},model:{value:t.formList,callback:function(e){t.formList=e},expression:"formList"}},t._l(t.formList,(function(e,s){return a("li",{key:s,staticClass:"MenuForm",on:{mouseover:function(e){return t.enableGrab(s)},mouseleave:function(e){return t.disableGrab()}}},[a("span",{staticClass:"icon-handle",style:t.grab&&t.indexGrab==s?"opacity: 1":"opacity: 0"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("a",{staticClass:"MenuFormItem",class:t.indexHighlight==s&&0===t.menuHighlight?"MenuFormItem_current":"",attrs:{title:e.label},on:{click:function(a){t.changeGroup(s,e.rgt),t.menuHighlight=0}}},[t._v(" "+t._s(e.label)+" ")])])})),0),a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{"margin-left":"30px"},attrs:{title:t.translations.addMenuAction},on:{click:function(e){t.$modal.show("modalMenu"),t.optionsModal=!0}}},[t._v(t._s(t.translations.addMenuAction))])],1),a("div",{staticClass:"form-pages"},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{"margin-bottom":"10px",padding:"0"}},[a("em",{staticClass:"far fa-folder-open em-mr-4",attrs:{alt:t.translations.Documents}}),t._v(t._s(t.translations.Documents))]),a("draggable",{class:"draggables-list",attrs:{handle:".handle"},on:{end:t.reorderingDocuments},model:{value:t.documentsList,callback:function(e){t.documentsList=e},expression:"documentsList"}},t._l(t.documentsList,(function(e,s){return 1==e.displayed?a("li",{key:s,staticClass:"MenuForm",on:{mouseover:function(e){return t.enableGrabDocuments(s)},mouseleave:function(e){return t.disableGrabDocuments()}}},[a("span",{staticClass:"icon-handle",style:t.grabDocs&&t.indexGrabDocuments==s?"opacity: 1":"opacity: 0"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("a",{staticClass:"MenuFormItem",attrs:{title:e.label}},[t._v(" "+t._s(e.label)),1==e.mandatory?a("span",{staticStyle:{color:"red"}},[t._v("*")]):t._e()]),a("a",{staticClass:"cta-block pointer",style:t.grabDocs&&t.indexGrabDocuments==s?"opacity: 1":"opacity: 0",on:{click:function(a){return t.removeDocument(s,e.id)}}},[a("i",{staticClass:"fas fa-times",staticStyle:{width:"15px",height:"15px"}})]),a("a",{staticClass:"cta-block pointer",style:t.grabDocs&&t.indexGrabDocuments==s?"opacity: 1":"opacity: 0",attrs:{title:t.translations.Edit},on:{click:function(a){t.currentDoc=e.docid,t.$modal.show("modalAddDocuments"),t.optionsModal=!0}}},[a("em",{staticClass:"fas fa-pen",staticStyle:{width:"15px",height:"14px"},attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]):t._e()})),0),a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{"margin-left":"30px"},attrs:{title:t.translations.AddNewDocument},on:{click:function(e){t.currentDoc=null,t.$modal.show("modalAddDocuments"),t.optionsModal=!0}}},[t._v(t._s(t.translations.AddNewDocument))])],1),t.submittionPages?a("div",{staticClass:"form-pages",staticStyle:{"padding-top":"20px"}},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{"margin-bottom":"10px",padding:"0"}},[a("img",{staticClass:"em-mr-4",attrs:{src:"/images/emundus/menus/confirmation.png",alt:t.translations.SubmitPage}}),t._v(t._s(t.translations.SubmitPage))]),t._l(t.submittionPages,(function(e,s){return a("li",{key:s,staticClass:"MenuForm"},[a("a",{staticClass:"MenuFormItem",class:t.indexHighlight==s&&1===t.menuHighlight?"MenuFormItem_current":"",staticStyle:{"margin-left":"5px"},attrs:{title:""!=e.object.show_title.value?e.object.show_title.value:t.translations.SubmittionPage},on:{click:function(e){t.menuHighlight=1,t.indexHighlight=s}}},[t._v(" "+t._s(e.object.show_title.value?e.object.show_title.value:t.translations.SubmittionPage)+" ")])])}))],2):t._e(),a("div",{staticClass:"em-flex-row"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer bouton-sauvergarder-et-continuer-green mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:t.translations.Validate},on:{click:t.sendForm}},[t._v(t._s(t.translations.Validate))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:t.translations.Validate},on:{click:t.exitForm}},[t._v(t._s(t.translations.ExitFormbuilder))])])]):t._e()])]):t._e(),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()],1)},$i=[],Gi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid",attrs:{id:"FormBuilder"}},[a("div",{staticClass:"row"},[t.object_json?a("BuilderViewer",{key:t.builderViewKey,ref:"builder_viewer",staticClass:"col-md-12",attrs:{object:t.object,groups:t.GroupList,change:this.change,changedElement:this.changedElement,changedGroup:this.changedGroup,UpdateUx:t.UpdateUx,files:t.files,prid:t.prid,eval:t.eval,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages},on:{show:t.show,modalClosed:function(e){return t.$emit("modalClosed")},modalOpen:function(e){return t.$emit("modalOpen")},UpdateUxf:t.UpdateUXF}}):t._e()],1)])},Hi=[],zi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"BuilderViewer",attrs:{id:"BuilderViewer"}},[a("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css"}}),t.object_json.show_page_heading?a("div",{class:t.object_json.show_page_heading.class,domProps:{innerHTML:t._s(t.object_json.show_page_heading.page_heading)}}):t._e(),0!=t.eval||t.updatePage?t._e():a("div",{staticClass:"em-flex-row header-form-page mb-1"},[t.object_json.show_title?a("h2",{staticClass:"page_header em-mr-4",domProps:{innerHTML:t._s(t.object_json.show_title.value)},on:{click:function(e){return t.enableUpdatingPage(t.object_json)}}}):t._e(),a("span",{staticClass:"cta-block pointer",staticStyle:{"font-size":"16px"},attrs:{title:t.translations.Edit},on:{click:function(e){t.$emit("modalOpen"),t.$modal.show("modalSide"+t.object.rgt)}}},[a("em",{staticClass:"fas fa-pen",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.updatePage&&t.indexPage==t.object_json.id,expression:"updatePage && indexPage == object_json.id"}],staticStyle:{width:"max-content","margin-left":"20px"}},[a("div",{staticClass:"input-can-translate",staticStyle:{"margin-top":"40px"}},[t.object_json.show_title?a("input",{directives:[{name:"model",rawName:"v-model",value:t.object_json.show_title.label[t.actualLanguage],expression:"object_json.show_title.label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:t.translate.label_page?"":"mb-1",staticStyle:{width:"400px"},attrs:{id:"update_input_"+t.object_json.id},domProps:{value:t.object_json.show_title.label[t.actualLanguage]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateLabelPage(t.object_json)},input:function(e){e.target.composing||t.$set(t.object_json.show_title.label,t.actualLanguage,e.target.value)}}}):t._e(),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:t.translate.label_page?"translate-icon-selected":" translate-builder",attrs:{type:"button"},on:{click:function(e){return t.enableTranslationPage(t.object_json.id)}}}):t._e(),a("div",{staticClass:"em-flex-row actions-update-label",class:"0"!==t.manyLanguages?"":"ml-10px",style:t.translate.label_page?"margin-bottom: 6px":"margin-bottom: 12px"},[a("a",{attrs:{title:t.translations.Validate},on:{click:function(e){return t.updateLabelPage(t.object_json)}}},[a("em",{staticClass:"fas fa-check em-mr-4",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])]),t.object_json.show_title&&t.translate.label_page?a("translation",{attrs:{label:t.object_json.show_title.label,actualLanguage:t.actualLanguage}}):t._e()],1),0!=t.eval||t.updateIntroPage?t._e():a("p",{staticClass:"introP",domProps:{innerHTML:t._s(t.object_json.intro_value)}}),a("form",{staticClass:"form-page",style:1==t.eval?"margin-top: 30px":"",attrs:{method:"post","object_json.attribs":"",id:"form_"+t.object_json.id},on:{submit:function(t){t.preventDefault()}}},[t.object_json.plugintop?a("div",{domProps:{innerHTML:t._s(t.object_json.plugintop)}}):t._e(),a("draggable",{staticClass:"groups-block",attrs:{handle:".handle"},on:{start:t.startGroupDrag,end:t.SomethingChangeInGroup},model:{value:t.groups,callback:function(e){t.groups=e},expression:"groups"}},t._l(t.orderedGroups,(function(e,s){return a("div",{key:"group_"+e.group_id,staticClass:"group-item-block",on:{mouseover:function(a){return t.enableGroupHover(e.group_id)},mouseleave:function(e){return t.disableGroupHover()}}},[a("fieldset",{class:[e.group_class],staticStyle:{"background-size":"20px",width:"100%"},style:-1==e.hidden_group?"background: #e3e3e3;":"",attrs:{id:"group_"+e.group_id}},[-1==e.hidden_group?a("div",{staticClass:"hidden-notice em-flex-row"},[a("i",{staticClass:"fas fa-exclamation-circle"}),a("span",{staticClass:"ml-10px"},[t._v(t._s(t.translations.HiddenGroup))])]):t._e(),a("div",{staticClass:"em-flex-row em-flex-space-between",class:t.updateGroup&&t.indexGroup==e.group_id?"hidden":"",staticStyle:{width:"100%"}},[a("div",{staticClass:"em-flex-row em-flex-space-between",staticStyle:{width:"100%"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:t.hoverGroup&&t.indexGroup==e.group_id,expression:"hoverGroup && indexGroup == group.group_id"}],staticClass:"icon-handle-group"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),e.group_showLegend?a("legend",{staticClass:"legend ViewerLegend",on:{click:function(a){return t.enableUpdatingGroup(e)}}},[t._v(" "+t._s(e.group_showLegend)+" ")]):t._e(),a("div",{staticClass:"em-flex-row"},[a("a",{staticClass:"group-repeat-icon ml-10px pointer",class:e.repeat_group?"active-repeat":"",attrs:{title:t.translations.RepeatedGroup},on:{click:function(a){return t.enableRepatedGroup(e)}}},[a("em",{staticClass:"fas fa-clone",attrs:{"data-toggle":"tooltip","data-placement":"top"}})]),a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[a("button",{staticClass:"tooltip-target b3 card-button"}),a("template",{slot:"popover"},[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",[a("nav",{staticClass:"actions-dropdown pointer",attrs:{"aria-label":"action"}},[a("a",{staticClass:"action-submenu",on:{click:function(a){return t.enableUpdatingGroup(e)}}},[t._v(" "+t._s(t.translations.EditName)+" ")]),a("a",{staticClass:"action-submenu",on:{click:function(a){return t.displayHideGroup(e)}}},[t._v(" "+t._s(t.translations.DisplayHide)+" ")]),0!=t.files||e.cannot_delete?t._e():a("a",{staticClass:"action-submenu",attrs:{title:t.translations.Delete},on:{click:function(a){return t.deleteAGroup(e,s)}}},[t._v(" "+t._s(t.translations.Delete)+" ")])])])])],1)])],2)],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.updateGroup&&t.indexGroup==e.group_id,expression:"updateGroup && indexGroup == group.group_id"}],staticStyle:{width:"max-content"}},[a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.label[t.actualLanguage],expression:"group.label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:t.translate.label_group?"":"mb-1",staticStyle:{width:"400px"},attrs:{id:"update_input_"+e.group_id},domProps:{value:e.label[t.actualLanguage]},on:{keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.updateLabelGroup(e)},input:function(a){a.target.composing||t.$set(e.label,t.actualLanguage,a.target.value)}}}),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:t.translate.label_group?"translate-icon-selected":" translate-builder",attrs:{type:"button"},on:{click:function(a){return t.enableTranslationGroup(e.group_id)}}}):t._e(),a("div",{staticClass:"em-flex-row actions-update-label",class:"0"!==t.manyLanguages?"":"ml-10px",style:t.translate.label_group?"margin-bottom: 6px":"margin-bottom: 12px"},[a("a",{attrs:{title:t.translations.Validate},on:{click:function(a){return t.updateLabelGroup(e)}}},[a("em",{staticClass:"fas fa-check em-mr-4",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])]),t.translate.label_group?a("translation",{attrs:{label:e.label,actualLanguage:t.actualLanguage}}):t._e()],1),e.group_intro?a("div",{staticClass:"groupintro",domProps:{innerHTML:t._s(e.group_intro)}}):t._e(),void 0!==e.elts?[0==e.elts.length?a("div",{staticClass:"no-elements-tip"},[t._v(t._s(t.translations.NoElementsTips))]):t._e()]:t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.openGroup[e.group_id],expression:"openGroup[group.group_id]"}],staticClass:"elements-block"},[a("draggable",{staticClass:"draggable-span",attrs:{handle:".handle",group:"items"},on:{start:function(e){t.draggable=!0},end:t.SomethingChange},model:{value:e.elts,callback:function(a){t.$set(e,"elts",a)},expression:"group.elts"}},[a("transition-group",{attrs:{name:"slide-down",type:"transition"}},t._l(e.elts,(function(s,i){return a("div",{directives:[{name:"show",rawName:"v-show",value:!1===s.hidden,expression:"element.hidden === false"}],key:s.id,staticClass:"builder-item-element",on:{mouseover:function(e){return t.enableActionBar(s.id)},mouseleave:function(e){return t.disableActionBar()}}},[a("modalEditElement",{key:t.keyElements["element"+s.id],attrs:{elementId:s.id,gid:s.group_id,files:t.files,manyLanguages:t.manyLanguages,actualLanguage:t.actualLanguage,id:s.id,profileId:t.prid},on:{reloadElement:function(e){return t.reloadElement(s)},publishUnpublishEvent:function(e){return t.publishUnpublishEvent(s)},updateRequireEvent:function(e){return t.updateRequireEvent(s)},modalClosed:function(e){return t.$emit("modalClosed")},show:t.show}}),a("modalDuplicateElement",{key:t.keyElements["element"+s.id],attrs:{ID:s.id,currentGroup:e.group_id,currentPage:t.object_json.id,id:s.id,prid:t.prid},on:{reloadElement:function(e){return t.reloadElement(s)},modalClosed:function(e){return t.$emit("modalClosed")}}}),a("div",{staticClass:"em-flex-row builder-item-element__properties",class:{"element-updating":t.hoverUpdating&&t.indexHighlight==s.id,unpublished:!s.publish,"draggable-item":t.draggable&&t.indexHighlight==s.id,handle:!t.clickUpdatingLabel}},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"em-flex-row",class:t.clickUpdatingLabel&&t.indexHighlight==s.id?"hidden":"",staticStyle:{"align-items":"baseline"}},[s.label_value?a("span",{directives:[{name:"show",rawName:"v-show",value:2!=s.labelsAbove,expression:"element.labelsAbove != 2"}],domProps:{innerHTML:t._s(s.label_value)},on:{click:function(e){return t.enableLabelInput(s.id)}}}):t._e(),a("a",{staticClass:"cta-block pointer",staticStyle:{"font-size":"16px"},style:t.hoverUpdating&&t.indexHighlight==s.id&&!t.clickUpdatingLabel?"opacity: 1":"opacity: 0",attrs:{title:t.translations.Edit},on:{click:function(e){return t.enableLabelInput(s.id)}}},[a("em",{staticClass:"fas fa-pen ml-10px",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.clickUpdatingLabel&&t.indexHighlight==s.id,expression:"clickUpdatingLabel && indexHighlight == element.id"}],staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.label[t.actualLanguage],expression:"element.label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:t.translate.label?"":"mb-1",attrs:{id:"label_"+s.id},domProps:{value:s.label[t.actualLanguage]},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateLabelElement(s)},input:function(e){e.target.composing||t.$set(s.label,t.actualLanguage,e.target.value)}}}),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:t.translate.label?"translate-icon-selected":" translate-builder",attrs:{type:"button"},on:{click:function(e){return t.enableTranslationLabel(s.id)}}}):t._e(),a("div",{staticClass:"em-flex-row actions-update-label",class:"0"!==t.manyLanguages?"":"ml-10px",style:t.translate.label?"margin-bottom: 6px":"margin-bottom: 12px"},[a("a",{attrs:{title:t.translations.Validate},on:{click:function(e){return t.updateLabelElement(s)}}},[a("em",{staticClass:"fas fa-check",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])]),t.translate.label&&t.clickUpdatingLabel&&t.indexHighlight==s.id?a("translation",{attrs:{label:s.label,actualLanguage:t.actualLanguage}}):0==s.labelsAbove?a("div",{staticClass:"controls"},[s.error?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:t._s(s.error)}}):t._e(),s.element?a("div",{class:s.errorClass,domProps:{innerHTML:t._s(s.element)}}):t._e(),s.tipSide?a("span",{domProps:{innerHTML:t._s(s.tipSide)}}):t._e()]):a("span",{staticClass:"em-flex-row w-100"},[s.element?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:t._s(s.error)}}):t._e(),s.element?a("div",{staticClass:"w-100",class:s.errorClass,domProps:{innerHTML:t._s(s.element)}}):t._e(),s.tipSide?a("span",{domProps:{innerHTML:t._s(s.tipSide)}}):t._e()]),s.tipBelow?a("span",{domProps:{innerHTML:t._s(s.tipBelow)}}):t._e()],1),a("div",{staticClass:"actions-item-bar",style:t.hoverUpdating&&t.indexHighlight==s.id?"opacity: 1":"opacity: 0"},["calc"!=s.plugin?a("a",{staticClass:"em-flex-row mr-2 mb-1",attrs:{title:t.translations.Settings},on:{click:function(e){return t.openParameters(s)}}},[a("em",{staticClass:"fas fa-cog settings-elt"})]):t._e(),0==t.files?a("a",{staticClass:"em-flex-row mr-2",staticStyle:{color:"red"},attrs:{title:t.translations.Delete},on:{click:function(e){return t.deleteElement(s,i)}}},[a("em",{staticClass:"fas fa-trash-alt delete-icon-elt"})]):t._e(),t.sysaccess?a("a",{staticClass:"em-flex-row mr-2 mt-1",attrs:{target:"_blank",href:"/administrator/index.php?option=com_fabrik&view=element&layout=edit&id="+s.id}},[a("em",{staticClass:"fas fa-link settings-elt"})]):t._e()]),"display"!=s.plugin?a("a",{staticClass:"em-flex-row mr-2",style:t.hoverUpdating&&t.indexHighlight==s.id?"opacity: 1":"opacity: 0"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.FRequire,expression:"element.FRequire"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.FRequire)?t._i(s.FRequire,null)>-1:s.FRequire},on:{click:function(e){return t.updateRequireElement(s)},change:function(e){var a=s.FRequire,i=e.target,n=!!i.checked;if(Array.isArray(a)){var o=null,r=t._i(a,o);i.checked?r<0&&t.$set(s,"FRequire",a.concat([o])):r>-1&&t.$set(s,"FRequire",a.slice(0,r).concat(a.slice(r+1)))}else t.$set(s,"FRequire",n)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px",staticStyle:{color:"black"}},[t._v(t._s(t.translations.Required)+" ")])]):t._e()])],1)})),0)],1)],1),e.group_outro?a("div",{staticClass:"groupoutro",domProps:{innerHTML:t._s(t.group_outro)}}):t._e()],2)])})),0),t.object_json.pluginbottom?a("div",{domProps:{innerHTML:t._s(t.object_json.pluginbottom)}}):t._e()],1)])},Vi=[],qi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalDuplicateElement"}},[a("modal",{attrs:{name:"modalDuplicateElement"+t.ID,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalDuplicateElement"+t.ID)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.translations.DuplicateElement)+" ")]),a("p",[t._v(t._s(t.translations.Target))])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group mb-2"},[a("label",[t._v(t._s(t.translations.Page)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.page,expression:"page"}],staticClass:"dropdown-toggle",class:{"is-invalid":t.errors.page},attrs:{id:"select_page"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.page=e.target.multiple?a:a[0]}}},t._l(t.pages,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(" "+t._s(e.label)+" ")])})),0)]),t.errors.page?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.PageRequired))])]):t._e(),a("transition",{attrs:{name:"slide-down",type:"transition"}},[-1!==t.page&&t.groups.length>1?a("div",{staticClass:"form-group mb-2"},[a("label",[t._v(t._s(t.Group)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.group,expression:"group"}],staticClass:"dropdown-toggle",class:{"is-invalid":t.errors.group},attrs:{id:"select_group"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.group=e.target.multiple?a:a[0]}}},t._l(t.groups,(function(e,s){return a("option",{key:s,domProps:{value:e.id}},[t._v(" "+t._s(e.label)+" ")])})),0)]):t._e()]),t.errors.group?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.GroupRequired))])]):t._e()],1),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalDuplicateElement"+t.ID)}}},[t._v(" "+t._s(t.translations.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.duplicate()}}},[t._v(t._s(t.translations.Continuer))])])])],1)},Yi=[];const Ji=a("bef5");var Wi={name:"modalDuplicateElement",props:{ID:Number,prid:String,currentGroup:Number,currentPage:Number},data(){return{page:-1,group:-1,pages:[],groups:[],errors:{page:!1,group:!1},translations:{DuplicateElement:"COM_EMUNDUS_ONBOARD_DUPLICATE_ELEMENT",Page:"COM_EMUNDUS_ONBOARD_BUILDMENU",Group:"COM_EMUNDUS_ONBOARD_GROUP",Retour:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",Continuer:"COM_EMUNDUS_ONBOARD_SAVE",PageRequired:"COM_EMUNDUS_ONBOARD_REQUIRED_FORM",GroupRequired:"COM_EMUNDUS_ONBOARD_REQUIRED_GROUP",Target:"COM_EMUNDUS_ONBOARD_CHOOSE_TARGET"}}},methods:{beforeClose(t){!0===this.changes&&this.$emit("show","foo-velocity","warn",this.dataSaved,this.informations),this.$emit("modalClosed"),this.changes=!1},beforeOpen(t){this.page=-1,this.group=-1,this.errors={page:!1,group:!1},this.getFormPages()},duplicate(){return this.errors={page:!1,group:!1},-1==this.page?(this.errors.page=!0,0):-1==this.group?(this.errors.group=!0,0):void p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=duplicateelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ji.stringify({id:this.ID,group:this.group,old_group:this.currentGroup,form_id:this.page})}).then(t=>{window.location.reload()})},getFormPages(){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getFormsByProfileId",params:{profile_id:this.prid},paramsSerializer:t=>Ji.stringify(t)}).then(t=>{this.pages=t.data.data,this.page=this.currentPage})},getGroupsByForm(){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getgroupsbyform",params:{form_id:this.page},paramsSerializer:t=>Ji.stringify(t)}).then(t=>{this.groups=t.data.data,this.groups.length<=1&&(this.group=this.groups[0].id)})}},watch:{page:function(){this.getGroupsByForm()}}},Xi=Wi,Ki=Object(b["a"])(Xi,qi,Yi,!1,null,"63efefe4",null),Qi=Ki.exports;const Zi=a("bef5");var tn={name:"BuilderViewer",props:{object:Object,groups:Array,change:Boolean,changedElement:Array,changedGroup:String,UpdateUx:Boolean,files:Number,eval:Number,prid:String,actualLanguage:String,manyLanguages:String,pid:Number},components:{Editor:De,datePicker:Ha.a,draggable:_a.a,modalEditElement:bi,modalDuplicateElement:Qi,Translation:ke},data(){return{object_json:"",sysaccess:!1,updatePage:!1,updateIntroPage:!1,indexPage:-1,openGroup:{},hoverGroup:!1,indexGroup:-1,updateGroup:!1,hoverUpdating:!1,indexHighlight:0,clickUpdatingLabel:!1,draggable:!1,fieldChanges:!1,repeat:!1,keyElements:{},date:new Date,options:{format:"DD/MM/YYYY",useCurrent:!1},can_translate:{label:!1,label_group:!1,label_page:!1,intro_page:!1},elementAssociateDocUpdateForm:{name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpg;png;gif":!1,"doc;docx;odt":!1,"xls;xlsx;odf":!1}},translations:{update:"COM_EMUNDUS_ONBOARD_BUILDER_UPDATE",updating:"COM_EMUNDUS_ONBOARD_BUILDER_UPDATING",updateSuccess:"COM_EMUNDUS_ONBOARD_BUILDER_UPDATESUCESS",orderSuccess:"COM_EMUNDUS_ONBOARD_BUILDER_ORDERSUCESS",orderFailed:"COM_EMUNDUS_ONBOARD_BUILDER_ORDERFAILED",updateFailed:"COM_EMUNDUS_ONBOARD_BUILDER_UPDATEFAILED",sidemenuhelp:"COM_EMUNDUS_ONBOARD_SIDEMENUHELP",TranslateEnglish:"COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH",Unpublish:"COM_EMUNDUS_ONBOARD_ACTION_UNPUBLISH",Publish:"COM_EMUNDUS_ONBOARD_ACTION_PUBLISH",Required:"COM_EMUNDUS_ONBOARD_ACTIONS_REQUIRED",Settings:"COM_EMUNDUS_ONBOARD_ACTIONS_SETTINGS",Delete:"COM_EMUNDUS_ONBOARD_ACTION_DELETE",Edit:"COM_EMUNDUS_ONBOARD_MODIFY",Cancel:"COM_EMUNDUS_ONBOARD_CANCEL",Validate:"COM_EMUNDUS_ONBOARD_OK",RepeatGroup:"COM_EMUNDUS_ONBOARD_REPEAT_GROUP",RepeatedGroup:"COM_EMUNDUS_ONBOARD_REPEATED_GROUP",Duplicate:"COM_EMUNDUS_ONBOARD_DUPLICATE",NoElementsTips:"COM_EMUNDUS_ONBOARD_NO_ELEMENTS_TIPS",EditName:"COM_EMUNDUS_ONBOARD_BUILDER_EDIT_NAME",EditIntro:"COM_EMUNDUS_ONBOARD_BUILDER_EDIT_INTRO",DisplayHide:"COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_HIDE",HiddenGroup:"COM_EMUNDUS_ONBOARD_BUILDER_HIDDEN_GROUP"}}},methods:{splitProfileIdFromLabel(t){return t.split(/-(.+)/)[1]},async updateElementsOrder(t,e,a){var s=e.map((t,e)=>({id:t.id,order:e+1}));p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updateOrder",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({elements:s,group_id:t,moved_el:a})}).then(e=>{this.$emit("show","foo-velocity","success",this.orderSuccess,this.update);let s=this.object.link.replace("fabrik","emundus");p.a.get(s+"&format=vue_jsonclean").then(t=>{this.groups.forEach(e=>{this.$set(this.object_json.Groups["group_"+e.group_id],"elements",t.data.Groups["group_"+e.group_id].elements)})}),a.group_id=t}).catch(t=>{})},updateRequireElement(t){this.clickUpdatingLabel&&this.updateLabelElement(t),setTimeout(()=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=changerequire",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({element:t})}).then(()=>{this.updateRequireEvent(t)}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},300)},updateRequireEvent(t){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:t.id,gid:t.group_id},paramsSerializer:t=>Zi.stringify(t)}).then(e=>{t.label_value=e.data.label_value,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})},publishUnpublishEvent(t){t.publish=!t.publish,t.publish?(document.getElementById("publish_icon_"+t.id).classList.remove("fa-eye"),document.getElementById("publish_icon_"+t.id).classList.add("fa-eye-slash")):(document.getElementById("publish_icon_"+t.id).classList.add("fa-eye"),document.getElementById("publish_icon_"+t.id).classList.remove("fa-eye-slash"))},deleteAssociateElementDoc(t){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=deletedocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({did:t})}).then(t=>{}),p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=removeDocumentFromProfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({did:t})}).then(t=>{}),p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=removeDocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({did:t,prid:this.prid,cid:this.cid})}).then(t=>{})},deleteElement(t,e){this.clickUpdatingLabel&&this.updateLabelElement(t),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEELEMENT"),text:this.translate("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(a=>{a.value&&("emundus_fileupload"==t.plugin&&this.deleteAssociateElementDoc(t.params.attachmentId),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=deleteElement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({element:t.id})}).then(()=>{j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ELEMENTDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.object_json.Groups["group_"+t.group_id].elts.splice(e,1),delete this.object_json.Groups["group_"+t.group_id].elements["element"+t.id],this.$forceUpdate()})}).catch(t=>{}))})},openDuplicate(t){this.clickUpdatingLabel&&this.updateLabelElement(t),this.$emit("modalOpen"),this.$modal.show("modalDuplicateElement"+t.id)},openParameters(t){this.clickUpdatingLabel&&this.updateLabelElement(t),this.repeat=!1,this.$emit("modalOpen"),this.$modal.show("modalEditElement"+t.id)},retrieveAssociateElementDoc(t){p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=retriveElementFormAssociatedDoc",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({gid:2,docid:t})}).then(t=>{this.elementAssociateDocUpdateForm.description[this.actualLanguage]=t.data.description,t.data.allowed_types.includes("pdf")?this.elementAssociateDocUpdateForm.selectedTypes.pdf=!0:this.elementAssociateDocUpdateForm.selectedTypes.pdf=!1,t.data.allowed_types.includes("jpg")||t.data.allowed_types.includes("png")||t.data.allowed_types.includes("gif")?this.elementAssociateDocUpdateForm.selectedTypes["jpg;png;gif"]=!0:this.elementAssociateDocUpdateForm.selectedTypes["jpg;png;gif"]=!1,t.data.allowed_types.includes("xls")||t.data.allowed_types.includes("xlsx")||t.data.allowed_types.includes("odf")?this.elementAssociateDocUpdateForm.selectedTypes["xls;xlsx;odf"]=!0:this.elementAssociateDocUpdateForm.selectedTypes["xls;xlsx;odf"]=!1,this.elementAssociateDocUpdateForm.nbmax=t.data.nbmax})},updateAssociateDocElement(t){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updatedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify(t)}).then(e=>{p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updateDocumentFalang",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify(t)}).then(t=>{})})},updateLabelElement(t){"emundus_fileupload"==t.plugin&&this.retrieveAssociateElementDoc(t.params.attachmentId);let e=t.label;"Unnamed item"===e.en&&(e.en=e.fr,t.label.en=e.fr),"emundus_fileupload"==t.plugin&&(this.elementAssociateDocUpdateForm.name.en=e.en,this.elementAssociateDocUpdateForm.name.fr=e.fr),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({element:t.id,labelTofind:t.label_tag,NewSubLabel:e})}).then(a=>{if(0==a.data.status)p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updateelementlabelwithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({eid:t.id,label:t.label[this.actualLanguage]})}).then(()=>{p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:t.id,gid:t.group_id},paramsSerializer:t=>Zi.stringify(t)}).then(e=>{t.label_value=e.data.label_value,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})});else{if("emundus_fileupload"==t.plugin){let a=[];Object.keys(this.elementAssociateDocUpdateForm.selectedTypes).forEach(t=>{1==this.elementAssociateDocUpdateForm.selectedTypes[t]&&a.push(t)});let s={document:this.elementAssociateDocUpdateForm,types:a,cid:this.cid,pid:this.prid,did:t.params.attachmentId,text_fr:e.fr,text_en:e.en};this.updateAssociateDocElement(s)}p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:t.id,gid:t.group_id},paramsSerializer:t=>Zi.stringify(t)}).then(e=>{this.$set(t,"element",e.data.element),t.label_value=e.data.label_value,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),this.can_translate.label=!1})}this.clickUpdatingLabel=!1}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},reloadElement(t){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:t.id,gid:t.group_id},paramsSerializer:t=>Zi.stringify(t)}).then(e=>{"databasejoin"===e.data.plugin&&!1===this.repeat?(this.repeat=!0,this.reloadElement(t)):(this.$set(t,"element",e.data.element),t=e.data,this.$set(this.keyElements,"element"+t.id,this.keyElements["element"+t.id]+1))}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},updateLabelGroup(t){let e=t.label;p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({group:t.group_id,labelTofind:t.group_tag,NewSubLabel:e})}).then(e=>{0==e.data.status&&p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updategrouplabelwithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({gid:t.group_id,label:t.label[this.actualLanguage]})}),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),t.group_showLegend=t.label[this.actualLanguage],this.can_translate.label_group=!1,this.updateGroup=!1}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},deleteAGroup(t,e){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGROUP"),text:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGROUPWARNING"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(a=>{a.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=deleteGroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({gid:t.group_id})}).then(()=>{j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_GROUPDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.groups.splice(e,1),delete this.object_json.Groups["group_"+t.group_id],this.updateGroup=!1,this.$forceUpdate()})}).catch(t=>{})})},updateGroupsOrder(){var t=this.groups.map((t,e)=>(t.ordering=e+2,{id:t.group_id,order:e+2}));p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=reordergroups",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({groups:t,fid:this.object_json.id})}).then(t=>{this.$emit("show","foo-velocity","success",this.orderSuccess,this.update)}).catch(t=>{this.$emit("show","foo-velocity","error",this.orderFailed,this.updating)})},enableRepatedGroup(t){t.repeat_group?j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_REPEAT_GROUP_DISABLE"),text:this.translate("COM_EMUNDUS_ONBOARD_REPEAT_GROUP_MESSAGE_DISABLE"),type:"info",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&p()({method:"POST",url:"index.php?option=com_emundus&controller=formbuilder&task=disablegrouprepeat",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({gid:t.group_id})}).then(e=>{1==e.data.status&&(t.repeat_group=0,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),t.group_showLegend=t.label[this.actualLanguage],this.can_translate.label_group=!1,this.updateGroup=!1)})}):j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_REPEAT_GROUP"),text:this.translate("COM_EMUNDUS_ONBOARD_REPEAT_GROUP_MESSAGE"),type:"info",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&p()({method:"POST",url:"index.php?option=com_emundus&controller=formbuilder&task=enablegrouprepeat",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({gid:t.group_id})}).then(e=>{1==e.data.status&&(t.repeat_group=1,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),t.group_showLegend=t.label[this.actualLanguage],this.can_translate.label_group=!1,this.updateGroup=!1)})})},displayHideGroup(t){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_HIDE"),text:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_HIDE_MESSAGE"),type:"info",showCancelButton:!0,confirmButtonColor:"#12db42",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&p()({method:"POST",url:"index.php?option=com_emundus&controller=formbuilder&task=displayhidegroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({gid:t.group_id})}).then(e=>{t.hidden_group=e.data.status,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})})},updateLabelPage(t){let e=t.show_title.label;p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({page:t.id,labelTofind:t.show_title.titleraw,NewSubLabel:e})}).then(a=>{0==a.data.status&&p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updatepagelabelwithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({pid:t.id,label:t.show_title.label[this.actualLanguage]})}),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updatemenulabel",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({pid:t.id,label:e})}).then(()=>{this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),t.show_title.value=t.show_title.label[this.actualLanguage],t.label=t.show_title.label[this.actualLanguage],this.updatePage=!1})}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},updateIntroValuePage(t){let e={fr:t.intro.fr,en:t.intro.en};p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({labelTofind:t.intro_raw,NewSubLabel:e})}).then(e=>{0==e.data.status&&p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updatepageintrowithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zi.stringify({pid:t.id,intro:t.intro.fr})}),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),t.intro_value=t.intro[this.actualLanguage],this.updateIntroPage=!1}).catch(t=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},getDataObject:Oe.a.debounce((function(){this.object_json=this.object.object,this.getElementsArray()}),500),getApiData:Oe.a.debounce((function(){this.$emit("show","foo-velocity","",this.updating,this.update);let t=this.object.link.replace("fabrik","emundus");p.a.get(t+"&format=vue_jsonclean").then(t=>{this.object_json=t.data,this.$emit("UpdateUxf"),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})}),1e3),getElementsArray(){Object.keys(this.object_json.Groups).forEach(t=>{this.object_json.Groups[t].elts=[],this.openGroup[this.object_json.Groups[t].group_id]=!0,Object.keys(this.object_json.Groups[t].elements).forEach(e=>{this.object_json.Groups[t].elts.push(this.object_json.Groups[t].elements[e]),this.keyElements[e]=0})})},enableActionBar(t){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverUpdating=!0,this.indexHighlight=t)},disableActionBar(){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverUpdating=!1,this.clickUpdatingLabel=!1,this.indexHighlight=0,this.can_translate.label=!1)},enableLabelInput(t){this.updateGroup||this.updateIntroPage||this.updatePage||(this.clickUpdatingLabel=!0,setTimeout(()=>{document.getElementById("label_"+t).focus()},100))},enableTranslationLabel(t){this.can_translate.label=!this.can_translate.label,this.can_translate.label||setTimeout(()=>{document.getElementById("label_"+t).focus()},100)},enableUpdatingPage(t){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||(this.updatePage=!0,this.indexPage=t.id,setTimeout(()=>{document.getElementById("update_input_"+t.id).focus()},100))},enableUpdatingPageIntro(t){this.clickUpdatingLabel||this.updateGroup||this.updatePage||(this.updateIntroPage=!0,this.indexPage=t.id,setTimeout(()=>{document.getElementById("update_intro_"+t.id).focus()},100))},enableTranslationPage(t){this.can_translate.label_page=!this.can_translate.label_page,this.can_translate.label_page||setTimeout(()=>{document.getElementById("update_input_"+t).focus()},100)},enableTranslationPageIntro(t){this.can_translate.intro_page=!this.can_translate.intro_page,this.can_translate.intro_page||setTimeout(()=>{document.getElementById("update_intro_"+t).focus()},100)},enableUpdatingGroup(t){this.clickUpdatingLabel||this.updateIntroPage||this.updatePage||(this.updateGroup=!0,this.indexGroup=t.group_id,setTimeout(()=>{document.getElementById("update_input_"+t.group_id).focus()},100))},enableUpdatingIntroGroup(t){},enableTranslationGroup(t){this.can_translate.label_group=!this.can_translate.label_group,this.can_translate.label_group||setTimeout(()=>{document.getElementById("update_input_"+t).focus()},100)},enableGroupHover(t){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverGroup=!0,this.indexGroup=t)},disableGroupHover(){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverGroup=!1,this.updateGroup=!1,this.indexGroup=-1)},handleGroup(t){this.updateGroup||(this.openGroup[t]?this.$set(this.openGroup,t,!1):this.$set(this.openGroup,t,!0))},startGroupDrag(){this.draggable=!0},SomethingChange:function(t){let e=t.item.childNodes[0].id;this.groups.forEach(t=>{t.elts.forEach(a=>{a.id==e&&this.updateElementsOrder(t.group_id,t.elts,a)})}),this.draggable=!1},SomethingChangeInGroup:function(){this.draggable=!1,this.updateGroupsOrder(),Object.keys(this.openGroup).forEach((t,e)=>{this.openGroup[t]=!0})},getAccess(){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getAccess"}).then(t=>{this.sysaccess=t.data.access})},show(t,e,a,s){this.$emit("show",t,e,a,s)}},created(){Oe.a.isEmpty(this.object.object)||(this.getDataObject(),this.getAccess())},watch:{object:function(){this.getDataObject()},UpdateUx:function(){!0===this.UpdateUx&&this.getApiData()}},computed:{orderedGroups:function(){return Oe.a.orderBy(this.groups,"ordering")}}},en=tn,an=(a("11ef"),Object(b["a"])(en,zi,Vi,!1,null,"1db7b1f0",null)),sn=an.exports;const nn=a("bef5");var on={name:"Builder",props:{object:Object,UpdateUx:Boolean,rgt:Number,files:Number,prid:String,eval:Number,actualLanguage:String,manyLanguages:Number},components:{draggable:_a.a,BuilderViewer:sn},data(){return{newlabel:[],dblckickLabel:[],testastos:[],ElementList:[],GroupList:[],object_json:Object,GroupsObject:Object,change:!1,changedElement:"",changedGroup:"",update:!1,builderViewKey:0,addGroup:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADDGROUP"),addItem:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADDITEM"),editGroup:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_EDITGROUP"),deleteGroup:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGROUP"),deleteMenu:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENU")}},methods:{UpdateUXT(){this.UpdateUx=!0},UpdateUXF(){this.UpdateUx=!1},UpdateLabel(t,e){t.label_raw=e},UpdateGroupName(t,e){this.object_json.Groups[t].group_showLegend=e},UpdateBuilderView(){this.$emit("UpdateFormBuilder")},show(t,e,a,s){this.$emit("show",t,e,a,s)},Initialised:function(){for(var t in this.GroupsObject){let e=this.object.rgt+"_"+this.GroupsObject[t].group_id;this.ElementList[e]=Object.values(this.GroupsObject[t].elements)}},deleteAMenu(t){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENU"),text:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENUWARNING"),type:"warning",showCancelButton:!0}).then(e=>{e.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=deleteMenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:nn.stringify({mid:t})}).then(()=>{this.$modal.hide("modalSide"+this.ID),j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_MENUDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.$emit("UpdateFormBuilder")})}).catch(t=>{console.log(t)})})},async updateOrder(t,e){await this.$refs.builder_viewer.updateElementsOrder(t,e)},getDataObject:function(){this.object_json=this.object.object,this.GroupList=Object.values(this.object_json.Groups),this.GroupsObject=this.object_json.Groups,this.Initialised()}},created(){Oe.a.isEmpty(this.object.object)||this.getDataObject()},watch:{object:function(){this.getDataObject()},update:function(){!0===this.update&&this.getDataObject()},UpdateUx:function(){!0===this.UpdateUx&&this.UpdateUXT()}}},rn=on,ln=(a("bcf8"),Object(b["a"])(rn,Gi,Hi,!1,null,"377f8448",null)),dn=ln.exports,cn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalSide"}},[a("modal",{attrs:{name:"modalSide"+t.ID,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalSide"+t.ID)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.translations.editMenu)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group",class:{"mb-0":t.can_translate.label}},[a("label",[t._v(t._s(t.translations.Name)+" :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label[t.actualLanguage],expression:"label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:{"is-invalid":t.errors},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40"},domProps:{value:t.label[t.actualLanguage]},on:{input:function(e){e.target.composing||t.$set(t.label,t.actualLanguage,e.target.value)}}}),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.can_translate.label},attrs:{type:"button"},on:{click:function(e){t.can_translate.label=!t.can_translate.label}}}):t._e()]),t.can_translate.label?a("translation",{attrs:{label:t.label,actualLanguage:t.actualLanguage}}):t._e()],1),t.errors?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.LabelRequired))])]):t._e(),a("div",{staticClass:"form-group mt-1",class:{"mb-0":t.can_translate.intro}},[a("div",{staticClass:"em-flex-row"},[a("label",[t._v(t._s(t.translations.Intro))]),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.can_translate.intro},staticStyle:{right:"0"},attrs:{type:"button"},on:{click:function(e){t.can_translate.intro=!t.can_translate.intro}}}):t._e()]),a("div",[t.can_translate.intro?a("div",{staticClass:"em-flex-row"},[a("span",[t._v(t._s(t.translations.TranslateIn)+" : ")]),"0"!==t.manyLanguages?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLanguage,expression:"selectedLanguage"}],staticStyle:{margin:"10px 0"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedLanguage=e.target.multiple?a:a[0]},function(e){t.dynamicComponent++}]}},t._l(t.languages,(function(e){return a("option",{key:e.sef,domProps:{value:e.sef}},[t._v(t._s(e.title_native))])})),0):t._e()]):t._e(),a("div",{staticClass:"input-can-translate"},[t.intro.hasOwnProperty(t.selectedLanguage)?a("editor",{key:t.dynamicComponent,attrs:{height:"30em",text:t.intro[t.selectedLanguage],lang:t.actualLanguage,enable_variables:!1,id:"editor_"+t.selectedLanguage},model:{value:t.intro[t.selectedLanguage],callback:function(e){t.$set(t.intro,t.selectedLanguage,e)},expression:"intro[selectedLanguage]"}}):t._e()],1)])]),a("div",{staticClass:"form-group em-flex-row mb-1",staticStyle:{"align-items":"center"},attrs:{id:"template_checkbox"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.template,expression:"template"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.template)?t._i(t.template,null)>-1:t.template},on:{change:function(e){var a=t.template,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.template=a.concat([n])):o>-1&&(t.template=a.slice(0,o).concat(a.slice(o+1)))}else t.template=i}}}),a("label",{staticClass:"ml-10px mb-0"},[t._v(t._s(t.translations.SaveAsTemplate))])]),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalSide"+t.ID)}}},[t._v(" "+t._s(t.translations.Retour)+" ")]),a("div",{staticClass:"em-flex-row"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer",on:{click:function(e){e.preventDefault(),t.$modal.hide("modalSide"+t.ID),t.UpdateParams()}}},[t._v(" "+t._s(t.translations.Continuer)+" ")])])]),a("div",{staticClass:"form-group em-flex-row mb-1"},[t.menus.length>1&&0==t.files?a("button",{staticClass:"bouton-sauvergarder-et-continuer w-delete",on:{click:function(e){return e.preventDefault(),t.deleteMenu()}}},[t._v(" "+t._s(t.translations.Delete)+" ")]):t._e()])])])],1)},mn=[];const un=a("bef5");var pn={name:"modalSide",components:{List:ce,Editor:De,Translation:ke},props:{ID:String,element:Object,index:Number,menus:Array,files:Number,link:String,manyLanguages:String,actualLanguage:String,languages:Array},data(){return{tempEl:[],can_translate:{label:!1,intro:!1},label:{},intro:{},dynamicComponent:0,template:!1,errors:!1,changes:!1,selectedLanguage:this.actualLanguage,translations:{Retour:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",Continuer:"COM_EMUNDUS_ONBOARD_ADD_CONTINUER",dataSaved:"COM_EMUNDUS_ONBOARD_BUILDER_DATASAVED",informations:"COM_EMUNDUS_ONBOARD_BUILDER_INFORMATIONS",orderingMenu:"COM_EMUNDUS_ONBOARD_BUILDER_MENUORDERING",editMenu:"COM_EMUNDUS_ONBOARD_BUILDER_EDITMENU",Name:"COM_EMUNDUS_ONBOARD_FIELD_NAME",Intro:"COM_EMUNDUS_ONBOARD_FIELD_INTRO",Delete:"COM_EMUNDUS_ONBOARD_ACTION_DELETE",TranslateEnglish:"COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH",LabelRequired:"COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME",SaveAsTemplate:"COM_EMUNDUS_ONBOARD_SAVE_AS_TEMPLATE",TranslateIn:"COM_EMUNDUS_ONBOARD_TRANSLATE_IN"}}},methods:{async UpdateParams(){this.changes=!0,await this.axioschange(this.intro,this.tempEl.intro_raw),await this.axioschange(this.label,this.tempEl.show_title.titleraw),await this.updatefalang(this.label),await this.saveAsTemplate(),this.element=JSON.parse(JSON.stringify(this.tempEl)),this.$emit("UpdateName",this.index,this.label[this.actualLanguage]),this.$emit("UpdateIntro",this.index,this.intro[this.actualLanguage])},beforeClose(t){!1!==this.changes&&(this.$emit("show","foo-velocity","success",this.dataSaved,this.informations),this.changes=!1),this.$emit("modalClosed")},beforeOpen(t){this.initialisation()},axioschange(t,e){return new Promise(a=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:un.stringify({labelTofind:e,NewSubLabel:t})}).then(t=>{a(t.data.status)}).catch(t=>{console.log(t)})})},updatefalang(t){return new Promise(e=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updatemenulabel",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:un.stringify({label:t,pid:this.element.id})}).then(t=>{e(t.data.status)})})},saveAsTemplate(){return new Promise(t=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=savemenuastemplate",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:un.stringify({menu:this.element,template:this.template})}).then(e=>{t(e.data.scalar)})})},async axiostrad(t){return await p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getalltranslations",params:{toJTEXT:t},paramsSerializer:t=>un.stringify(t)}).then(t=>t.data)},deleteMenu(){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENU"),text:this.translate("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=deletemenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:un.stringify({mid:this.element.id})}).then(t=>{this.$emit("removeMenu",this.element.id),this.$modal.hide("modalSide"+this.ID)})})},checkIfTemplate(){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getPagesModel"}).then(t=>{var e={};try{Object.values(t.data).forEach((t,a)=>{if(t.form_id==this.element.id)throw this.template=!0,e})}catch(a){if(a!==e)throw this.template=!1}})},initialisation(){this.tempEl=JSON.parse(JSON.stringify(this.element)),this.axiostrad(this.tempEl.intro_raw).then(t=>{this.intro=t}).catch((function(t){console.log(t)})),this.axiostrad(this.tempEl.show_title.titleraw).then(t=>{this.label=t}).catch((function(t){console.log(t)})),this.checkIfTemplate()}},watch:{element:function(){this.tempEl=JSON.parse(JSON.stringify(this.element))}},created:function(){}},hn=pn,_n=(a("de37"),Object(b["a"])(hn,cn,mn,!1,null,"2156cd1e",null)),gn=_n.exports,fn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalMenu"}},[a("modal",{attrs:{name:"modalMenu",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalMenu")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.translations.addMenu)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[t._v(t._s(t.translations.ChooseExistingPageModel)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.model_id,expression:"model_id"}],staticClass:"dropdown-toggle",attrs:{disabled:Object.keys(t.models).length<=0},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.model_id=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"-1"}}),t._l(t.models,(function(e){return a("option",{key:e.form_id,domProps:{value:e.form_id}},[t._v(" "+t._s(e.label[t.actualLanguage]))])}))],2)]),a("div",{staticClass:"form-group",class:{"mb-0":t.can_translate.label}},[a("label",[t._v(t._s(t.translations.Name)+"* :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label[t.actualLanguage],expression:"label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:{"is-invalid":t.errors},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40",id:"menu_label"},domProps:{value:t.label[t.actualLanguage]},on:{input:function(e){e.target.composing||t.$set(t.label,t.actualLanguage,e.target.value)}}}),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.can_translate.label},attrs:{type:"button"},on:{click:function(e){t.can_translate.label=!t.can_translate.label}}}):t._e()])]),t.can_translate.label?a("translation",{attrs:{label:t.label,actualLanguage:t.actualLanguage}}):t._e(),t.errors&&-1==t.model_id?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.LabelRequired))])]):t._e(),a("div",{staticClass:"form-group mt-1",class:{"mb-0":t.can_translate.intro}},[a("div",{staticClass:"em-flex-row"},[a("label",[t._v(t._s(t.translations.Intro))]),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.can_translate.intro},staticStyle:{right:"0"},attrs:{type:"button"},on:{click:function(e){t.can_translate.intro=!t.can_translate.intro}}}):t._e()]),a("div",[t.can_translate.intro?a("div",{staticClass:"em-flex-row"},[a("span",[t._v(t._s(t.translations.TranslateIn)+" : ")]),"0"!==t.manyLanguages?a("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLanguage,expression:"selectedLanguage"}],staticStyle:{margin:"10px 0"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedLanguage=e.target.multiple?a:a[0]},function(e){t.dynamicComponent++}]}},t._l(t.languages,(function(e){return a("option",{key:e.sef,domProps:{value:e.sef}},[t._v(t._s(e.title_native))])})),0):t._e()]):t._e(),a("div",{staticClass:"input-can-translate"},t._l(t.languages,(function(e,s){return e.sef===t.selectedLanguage?a("editor",{key:t.dynamicComponent,attrs:{height:"30em",text:t.intro[e.sef],lang:t.actualLanguage,enable_variables:!1,id:"editor_"+e.sef},model:{value:t.intro[e.sef],callback:function(a){t.$set(t.intro,e.sef,a)},expression:"intro[language.sef]"}}):t._e()})),1)])])],1),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalMenu")}}},[t._v(" "+t._s(t.translations.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.createMenu()}}},[t._v(" "+t._s(t.translations.Add)+" ")])]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])],1)},bn=[];const vn=a("bef5");var On={name:"modalMenu",components:{Editor:De,translation:ke},props:{profileId:String,actualLanguage:String,manyLanguages:String,languages:Array},data(){return{can_translate:{label:!1,intro:!1},label:{fr:"",en:""},intro:{fr:"",en:""},dynamicComponent:0,model_id:-1,template:!1,models:[],errors:!1,changes:!1,submitted:!1,selectedLanguage:this.actualLanguage,translations:{Name:"COM_EMUNDUS_ONBOARD_FIELD_NAME",Intro:"COM_EMUNDUS_ONBOARD_FIELD_INTRO",Retour:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",Add:"COM_EMUNDUS_ONBOARD_ADD",dataSaved:"COM_EMUNDUS_ONBOARD_BUILDER_DATASAVED",informations:"COM_EMUNDUS_ONBOARD_BUILDER_INFORMATIONS",addMenu:"COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU",LabelRequired:"COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME",ChooseExistingPageModel:"COM_EMUNDUS_ONBOARD_FORM_CHOOSE_EXISTING_MODEL_PAGE",TranslateEnglish:"COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH",SaveAsTemplate:"COM_EMUNDUS_ONBOARD_SAVE_AS_TEMPLATE"}}},methods:{beforeClose(t){!0===this.changes&&this.$emit("show","foo-velocity","warn",this.dataSaved,this.informations),this.label={fr:"",en:""},this.intro={fr:"",en:""},this.$emit("modalClosed"),this.changes=!1},beforeOpen(t){this.getExistingPages()},getExistingPages(){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getPagesModel"}).then(t=>{this.models=t.data})},createMenu(){this.changes=!0,""!=this.label[this.actualLanguage]||-1!=this.model_id?(this.submitted=!0,"fr"==this.actualLanguage&&""==this.label.en?this.label.en="My new page":"en"==this.actualLanguage&&""==this.label.fr?this.label.fr="Ma nouvelle page":(this.label.en=this.label.en,this.label.fr=this.label.fr),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createMenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:vn.stringify({label:this.label,intro:this.intro,prid:this.profileId,modelid:this.model_id,template:this.template})}).then(t=>{this.submitted=!1,this.$modal.hide("modalMenu"),this.$emit("AddMenu",t.data)}).catch(t=>{console.log(t)})):this.errors=!0}},watch:{model_id:function(t){-1!=t?Object.values(this.models).forEach(t=>{if(t.form_id==this.model_id){this.label.fr=t.label.fr,this.label.en=t.label.en;var e=document.createElement("div"),a=document.createElement("div");e.innerHTML=t.intro.fr,a.innerHTML=t.intro.en,this.intro.fr=e.innerText,this.intro.en=a.innerText}}):(this.label.fr="",this.intro.fr="")}}},Cn=On,En=Object(b["a"])(Cn,fn,bn,!1,null,"c1067f06",null),yn=En.exports,Dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalAffectCampaign"}},[a("modal",{attrs:{name:"modalAffectCampaign",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAffectCampaign")}}},[a("em",{staticClass:"fas fa-times-circle"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.translations.affectCampaigns)+" ")])])]),a("div",{staticClass:"modalC-content"},[0===t.campaigns.length?a("p",{staticClass:"mt-1 mb-1"},[t._v(t._s(t.translations.campaignsEmpty))]):t._e(),a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:t.translations.Search},domProps:{value:t.searchTerm},on:{keyup:t.searchCampaignByTerm,input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}}),a("button",{staticClass:"searchButton",attrs:{type:"button"},on:{click:t.searchCampaignByTerm}},[a("em",{staticClass:"fas fa-search"})])])]),a("div",{staticClass:"campaigns-list"},t._l(t.campaigns,(function(e,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.affectedCampaigns[e.id],expression:"affectedCampaigns[campaign.id]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.affectedCampaigns[e.id])?t._i(t.affectedCampaigns[e.id],null)>-1:t.affectedCampaigns[e.id]},on:{change:function(a){var s=t.affectedCampaigns[e.id],i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.affectedCampaigns,e.id,s.concat([o])):r>-1&&t.$set(t.affectedCampaigns,e.id,s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.affectedCampaigns,e.id,n)}}}),a("div",{staticClass:"ml-10px"},[a("p",[t._v(t._s(e.label))])])])})),0)]),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.affectToForm.apply(null,arguments)}}},[t._v(" "+t._s(t.translations.Continuer)+" ")]),t.testing?t._e():a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.goAddCampaign.apply(null,arguments)}}},[t._v(" "+t._s(t.translations.addCampaign)+" ")])]),a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.redirectJRoute("index.php?option=com_emundus&view=form")}}},[t._v(" "+t._s(t.translations.BackWithoutAssociation)+" ")])])],1)},Nn=[];const An=a("bef5");var Un={name:"modalAffectCampaign",props:{prid:String,testing:Boolean},data(){return{campaigns:[],affectedCampaigns:[],searchTerm:"",translations:{Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),affectCampaigns:this.translate("COM_EMUNDUS_ONBOARD_FORM_AFFECTCAMPAIGNS"),campaignsEmpty:this.translate("COM_EMUNDUS_ONBOARD_FORM_CAMPAIGNSEMPTY"),addCampaign:this.translate("COM_EMUNDUS_ONBOARD_ADD_CAMPAIGN"),BackWithoutAssociation:this.translate("COM_EMUNDUS_ONBOARD_BACK_WITHOUT_ASSOCIATION")}}},methods:{beforeClose(t){},beforeOpen(t){this.getCampaigns()},affectToForm(){let t=[];this.affectedCampaigns.length>0?(this.campaigns.forEach(e=>{this.affectedCampaigns[e.id]&&t.push(e.id)}),p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=affectcampaignstoform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:An.stringify({prid:this.prid,campaigns:t})}).then(()=>{this.testing?t.length>0&&(this.$emit("testForm"),this.$modal.hide("modalAffectCampaign")):this.redirectJRoute("index.php?option=com_emundus&view=form")})):this.testing?this.$modal.hide("modalAffectCampaign"):this.redirectJRoute("index.php?option=com_emundus&view=form")},goAddCampaign(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=redirectjroute",params:{link:"index.php?option=com_emundus&view=campaign&layout=add&cid="},paramsSerializer:t=>An.stringify(t)}).then(t=>{window.location.href=window.location.pathname+t.data.data})},getCampaigns(){p.a.get("index.php?option=com_emundus&controller=campaign&task=getcampaignstoaffect").then(t=>{this.campaigns=t.data.data})},searchCampaignByTerm(){p.a.get("index.php?option=com_emundus&controller=campaign&task=getcampaignstoaffectbyterm&term="+this.searchTerm).then(t=>{this.campaigns=t.data.data})},redirectJRoute(t){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=redirectjroute",params:{link:t},paramsSerializer:t=>An.stringify(t)}).then(t=>{window.location.href=window.location.pathname+t.data.data})}}},Mn=Un,wn=(a("3b6a"),Object(b["a"])(Mn,Dn,Nn,!1,null,"2b6fbea4",null)),Sn=wn.exports,Tn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalAddDocuments"}},[a("modal",{attrs:{name:"modalAddDocuments",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddDocuments")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[null==t.currentDoc?a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.translations.createDocument)+" ")]):t._e(),null!=t.currentDoc?a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.translations.editDocument)+" ")]):t._e()])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"mb-1"},[a("a",{staticClass:"em-flex-row tool-icon"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.req,expression:"req"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.req)?t._i(t.req,null)>-1:t.req},on:{click:function(e){return t.updateRequireMandatory()},change:function(e){var a=t.req,s=e.target,i=!!s.checked;if(Array.isArray(a)){var n=null,o=t._i(a,n);s.checked?o<0&&(t.req=a.concat([n])):o>-1&&(t.req=a.slice(0,o).concat(a.slice(o+1)))}else t.req=i}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px"},[t._v(t._s(t.translations.Required))])])]),t.can_be_deleted?a("div",{staticClass:"form-group"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-delete",attrs:{type:"button"},on:{click:t.deleteModel}},[t._v(t._s(t.translations.DeleteDocTemplate))])]):t._e(),null==t.currentDoc?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"modelName"}},[t._v(t._s(t.translations.DocTemplate)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.doc,expression:"doc"}],staticClass:"dropdown-toggle",attrs:{id:"modelName",disabled:Object.keys(t.models).length<=0},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.doc=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:null}}),t._l(t.models,(function(e,s){return a("option",{key:"option_"+s,domProps:{value:e.id}},[t._v(t._s(e.name[t.langue])+" ("+t._s(e.allowed_types)+")")])}))],2)]):t._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[t._v(t._s(t.translations.Name)+"* :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.name[t.langue],expression:"form.name[langue]"}],staticClass:"form__input field-general w-input mb-0",class:{"is-invalid":t.errors.name},attrs:{type:"text",maxlength:"100",id:"name"},domProps:{value:t.form.name[t.langue]},on:{input:function(e){e.target.composing||t.$set(t.form.name,t.langue,e.target.value)}}}),"0"!==t.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.can_translate.name},attrs:{type:"button"},on:{click:function(e){t.can_translate.name=!t.can_translate.name}}}):t._e()]),t.can_translate.name?a("translation",{attrs:{label:t.form.name,actualLanguage:t.langue}}):t._e(),t.errors.name?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.NameRequired))])]):t._e()],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[t._v(t._s(t.translations.Description)+" :")]),a("div",{staticClass:"input-can-translate"},[a("editor",{key:t.dynamicComponent,attrs:{height:"20em",text:t.form.description[t.langue],lang:t.langue,enable_variables:!1,id:"editor_fr"},model:{value:t.form.description[t.langue],callback:function(e){t.$set(t.form.description,t.langue,e)},expression:"form.description[langue]"}})],1)]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nbmax"}},[t._v(t._s(t.translations.MaxPerUser)+"* :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.nbmax,expression:"form.nbmax"}],staticClass:"form__input field-general w-input",class:{"is-invalid":t.errors.nbmax},attrs:{type:"number",min:"1",id:"nbmax"},domProps:{value:t.form.nbmax},on:{input:function(e){e.target.composing||t.$set(t.form,"nbmax",e.target.value)}}}),t.errors.nbmax?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.MaxRequired))])]):t._e()]),a("div",{staticClass:"form-group"},[a("label",{class:{"is-invalid":t.errors.selectedTypes},attrs:{for:"nbmax"}},[t._v(t._s(t.translations.FileType)+"* :")]),a("div",{staticClass:"users-block",class:{"is-invalid":t.errors.selectedUsers}},t._l(t.types,(function(e,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.selectedTypes[e.value],expression:"form.selectedTypes[type.value]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.selectedTypes[e.value])?t._i(t.form.selectedTypes[e.value],null)>-1:t.form.selectedTypes[e.value]},on:{change:[function(a){var s=t.form.selectedTypes[e.value],i=a.target,n=!!i.checked;if(Array.isArray(s)){var o=null,r=t._i(s,o);i.checked?r<0&&t.$set(t.form.selectedTypes,e.value,s.concat([o])):r>-1&&t.$set(t.form.selectedTypes,e.value,s.slice(0,r).concat(s.slice(r+1)))}else t.$set(t.form.selectedTypes,e.value,n)},function(a){return t.selectType(e)}]}}),a("div",{staticClass:"ml-10px"},[a("p",[t._v(t._s(e.title)+" ("+t._s(e.value)+")")])])])})),0),t.errors.selectedTypes?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[t._v(t._s(t.translations.TypeRequired))])]):t._e()])]),1==t.show?a("div",{attrs:{id:"imageResolutionZone"}},[a("hr"),a("h4",{staticClass:"image-resolution-header"},[t._v(t._s(t.translations.ImageDimensionsTitle))]),a("div",{staticClass:"image-resolution-tooltips"},[a("i",[t._v(t._s(t.translations.ImageResolutionTooltips))])]),a("br"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image-min-width"}},[t._v(t._s(t.translations.ImageWidth))]),a("div",{staticClass:"input-can-translate em-flex-row em-flex-space-between"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.minResolution.width,expression:"form.minResolution.width"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-min-width",min:"300",placeholder:t.translations.MinResolutionPlaceholder},domProps:{value:t.form.minResolution.width},on:{keyup:function(e){return t.ZeroOrNegative()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.ZeroOrNegative()},input:function(e){e.target.composing||t.$set(t.form.minResolution,"width",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.maxResolution.width,expression:"form.maxResolution.width"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-max-width",min:"300",placeholder:t.translations.MaxResolutionPlaceholder},domProps:{value:t.form.maxResolution.width},on:{keyup:function(e){return t.ZeroOrNegative()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.ZeroOrNegative()},input:function(e){e.target.composing||t.$set(t.form.maxResolution,"width",e.target.value)}}})]),a("transition",{attrs:{name:"fade"}},[t.errorWidth.error?a("span",{staticStyle:{"font-size":"smaller",color:"red"}},[t._v(" "+t._s(t.errorWidth.message)+" ")]):t._e()])],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image-min-height"}},[t._v(t._s(t.translations.ImageHeight))]),a("div",{staticClass:"input-can-translate em-flex-row em-flex-space-between"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.minResolution.height,expression:"form.minResolution.height"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-min-height",min:"300",placeholder:t.translations.MinResolutionPlaceholder},domProps:{value:t.form.minResolution.height},on:{keyup:function(e){return t.ZeroOrNegative()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.ZeroOrNegative()},input:function(e){e.target.composing||t.$set(t.form.minResolution,"height",e.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.form.maxResolution.height,expression:"form.maxResolution.height"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-max-height",min:"300",placeholder:t.translations.MaxResolutionPlaceholder},domProps:{value:t.form.maxResolution.height},on:{keyup:function(e){return t.ZeroOrNegative()},keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab")?null:t.ZeroOrNegative()},input:function(e){e.target.composing||t.$set(t.form.maxResolution,"height",e.target.value)}}})]),a("transition",{attrs:{name:"fade"}},[t.errorHeight.error?a("span",{staticStyle:{"font-size":"smaller",color:"red"}},[t._v(" "+t._s(t.errorHeight.message)+" ")]):t._e()])],1)]):t._e(),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalAddDocuments")}}},[t._v(" "+t._s(t.translations.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.createNewDocument()}}},[t._v(" "+t._s(t.translations.Continuer)+" ")])])])],1)},xn=[];const Rn=a("bef5");var Ln={name:"modalAddDocuments",props:{cid:Number,pid:Number,currentDoc:Number,manyLanguages:Number,langue:String},components:{Translation:ke,Editor:De},data(){return{show:!1,dynamicComponent:0,errorWidth:{error:!1,message:""},errorHeight:{error:!1,message:""},doc:null,model:{allowed_types:"",can_be_deleted:!1,category:"",description:{fr:"",en:""},id:"",lbl:"",mandatory:0,name:{fr:"",en:""},nbmax:"",ocr_keywords:null,ordering:"",published:"",value:"",video_max_length:"",minResolution:{width:300,height:300},maxResolution:{width:null,height:null}},form:{name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpeg;jpg;png;gif":!1,"doc;docx;odt;ppt;pptx":!1,"xls;xlsx;odf":!1},mandatory:0,minResolution:{width:null,height:null},maxResolution:{width:null,height:null}},can_translate:{name:!1,description:!1},req:!1,errors:{name:!1,nbmax:!1,selectedTypes:!1},types:[{title:this.translate("COM_EMUNDUS_ONBOARD_PDF_DOCUMENTS"),value:"pdf"},{title:this.translate("COM_EMUNDUS_ONBOARD_PICTURES_DOCUMENTS"),value:"jpeg;jpg;png;gif"},{title:this.translate("COM_EMUNDUS_ONBOARD_OFFICE_DOCUMENTS"),value:"doc;docx;odt;ppt;pptx"},{title:this.translate("COM_EMUNDUS_ONBOARD_EXCEL_DOCUMENTS"),value:"xls;xlsx;odf"}],selectedTypes:[],models:[],can_be_deleted:!1,translations:{DeleteDocTemplate:"COM_EMUNDUS_ONBOARD_DELETE_TEMPLATE_DOC",createDocument:"COM_EMUNDUS_ONBOARD_CREATE_DOCUMENT",editDocument:"COM_EMUNDUS_ONBOARD_EDIT_DOCUMENT",Retour:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",Continuer:"COM_EMUNDUS_ONBOARD_OK",DocTemplate:"COM_EMUNDUS_ONBOARD_TEMPLATE_DOC",Name:"COM_EMUNDUS_ONBOARD_LASTNAME",Description:"COM_EMUNDUS_ONBOARD_ADDDOC_DESCRIPTION",MaxPerUser:"COM_EMUNDUS_ONBOARD_MAXPERUSER",FileType:"COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED",NameRequired:"COM_EMUNDUS_ONBOARD_PROG_REQUIRED_LABEL",MaxRequired:"COM_EMUNDUS_ONBOARD_MAXPERUSER_REQUIRED",TypeRequired:"COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED_REQUIRED",TranslateEnglish:"COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH",Required:"COM_EMUNDUS_ONBOARD_ACTIONS_REQUIRED",ImageWidth:"COM_EMUNDUS_ONBOARD_IMAGE_WIDTH",ImageHeight:"COM_EMUNDUS_ONBOARD_IMAGE_HEIGHT",ImageResolutionTooltips:"COM_EMUNDUS_ONBOARD_IMAGE_RESOLUTION_TOOLTIPS",MinResolutionPlaceholder:"COM_EMUNDUS_ONBOARD_MIN_RESOLUTION_PLACEHOLDER",MaxResolutionPlaceholder:"COM_EMUNDUS_ONBOARD_MAX_RESOLUTION_PLACEHOLDER",ErrorResolution:"COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION",ErrorResolutionNegative:"COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION_NEGATIVE",ErrorResolutionTooSmall:"COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION_TOO_SMALL",ErrorResolutionNotNumber:"COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION_NOT_NUMBER",ImageDimensionsTitle:"COM_EMUNDUS_ONBOARD_IMAGE_DIMENSION_TITLE"}}},methods:{beforeClose(){this.show=!1,this.doc=null,this.currentDoc=null,this.can_be_deleted=!1,this.errorWidth.error=!1,this.errorHeight.error=!1,this.form={name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpeg;jpg;png;gif":!1,"doc;docx;odt;ppt;pptx":!1,"xls;xlsx;odf":!1},minResolution:{width:null,height:null},maxResolution:{width:null,height:null}},this.$emit("modalClosed")},beforeOpen(){this.getModelsDocs()},createNewDocument(){if(this.errors={name:!1,nbmax:!1,selectedTypes:!1},""===this.form.name[this.langue])return this.errors.name=!0,0;if(""===this.form.nbmax||0===this.form.nbmax)return this.errors.nbmax=!0,0;if(Object.values(this.form.selectedTypes).every(t=>!1===t))return this.errors.selectedTypes=!0,0;!1===this.can_translate.name&&(0==this.manyLanguages&&"en"==this.langue&&(this.form.name.fr=this.form.name.en),0==this.manyLanguages&&"fr"===this.langue&&(this.form.name.en=this.form.name.fr)),!1===this.can_translate.description&&(0==this.manyLanguages&&"en"==this.langue?this.form.description.fr=this.form.description.en:this.form.description.en=this.form.description.fr);let t=[];Object.keys(this.form.selectedTypes).forEach(e=>{1==this.form.selectedTypes[e]&&t.push(e)});let e={document:this.form,types:t,cid:this.cid,pid:this.pid,isModeleAndUpdate:!1};this.form.name[this.langue]!=this.model.value&&null==this.currentDoc&&(e.isModeleAndUpdate=!0);let a=[];this.model.allowed_types.includes("pdf")&&a.push("pdf"),(this.model.allowed_types.includes("jpg")||this.model.allowed_types.includes("jpeg")||this.model.allowed_types.includes("png")||this.model.allowed_types.includes("gif"))&&a.push("jpeg;jpg;png;gif"),(this.model.allowed_types.includes("xls")||this.model.allowed_types.includes("xlsx")||this.model.allowed_types.includes("odf"))&&a.push("xls;xlsx;odf");let s=a.filter(e=>!t.includes(e));s.length>0&&null==this.currentDoc&&(e.isModeleAndUpdate=!0);let i=!1;if(t.includes("jpeg;jpg;png;gif")&&(i=this.isImageError()),i)return!1;{let t="index.php?option=com_emundus&controller=campaign&task=createdocument";this.form.name[this.langue]===this.model.value&&null!=this.doc&&(t="index.php?option=com_emundus&controller=campaign&task=updatedocument",e.did=this.doc),null!=this.currentDoc&&(t="index.php?option=com_emundus&controller=campaign&task=updatedocument",e.did=this.doc),p()({method:"post",url:t,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rn.stringify(e)}).then(()=>{this.req=!1,this.$emit("UpdateDocuments"),this.$modal.hide("modalAddDocuments")})}},isImageError(){let t=!1;const e=Object.values(this.form.minResolution).some(t=>t),a=Object.values(this.form.maxResolution).some(t=>t);return e||a?(this.form.minResolution.height&&this.form.maxResolution.height?parseInt(this.form.minResolution.width)>=300&&parseInt(this.form.maxResolution.width)>=300?parseInt(this.form.minResolution.width)>parseInt(this.form.maxResolution.width)?(this.errorWidth.error=!0,this.errorWidth.message=parseInt(this.form.minResolution.width)<=0?this.translations.ErrorResolutionNegative:this.translations.ErrorResolution,document.getElementById("image-min-width").style.setProperty("border-color","red","important"),t=!0):(this.errorWidth.error=!1,this.errorWidth.message="",document.getElementById("image-min-width").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-width").style.setProperty("border-color","#ccc","important")):(this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolutionTooSmall,t=!0,parseInt(this.form.minResolution.width)<300&&document.getElementById("image-min-width").style.setProperty("border-color","red","important"),parseInt(this.form.maxResolution.width)<300&&document.getElementById("image-max-width").style.setProperty("border-color","red","important")):(this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolutionTooSmall,t=!0,this.form.minResolution.height&&""!==this.form.minResolution.height||document.getElementById("image-min-height").style.setProperty("border-color","red","important"),this.form.maxResolution.height&&""!==this.form.maxResolution.height||document.getElementById("image-max-height").style.setProperty("border-color","red","important")),this.form.minResolution.width&&this.form.maxResolution.width?parseInt(this.form.minResolution.height)>=300&&parseInt(this.form.maxResolution.height)>=300?parseInt(this.form.minResolution.height)>parseInt(this.form.maxResolution.height)?(this.errorHeight.error=!0,this.errorHeight.message=parseInt(this.form.minResolution.height)<=0?this.translations.ErrorResolutionNegative:this.translations.ErrorResolution,document.getElementById("image-min-height").style.setProperty("border-color","red","important"),t=!0):(this.errorHeight.error=!1,this.errorHeight.message="",document.getElementById("image-min-height").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-height").style.setProperty("border-color","#ccc","important")):(this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolutionTooSmall,t=!0,parseInt(this.form.minResolution.height)<300&&document.getElementById("image-min-height").style.setProperty("border-color","red","important"),parseInt(this.form.maxResolution.height)<300&&document.getElementById("image-max-height").style.setProperty("border-color","red","important")):(this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolutionTooSmall,t=!0,this.form.minResolution.width&&""!==this.form.minResolution.width||document.getElementById("image-min-width").style.setProperty("border-color","red","important"),this.form.maxResolution.width&&""!==this.form.maxResolution.width||document.getElementById("image-max-width").style.setProperty("border-color","red","important"))):(document.getElementById("image-min-width").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-width").style.setProperty("border-color","#ccc","important"),document.getElementById("image-min-height").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-height").style.setProperty("border-color","#ccc","important"),t=!1,this.errorWidth.message="",this.errorHeight.message=""),t},deleteModel(){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_DELETE_TEMPLATE_DOC"),type:"warning",showCancelButton:!0,confirmButtonColor:"#12db42",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=deletemodeldocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rn.stringify({did:this.doc})}).then(t=>{console.log(t),t.data.allowed?j.a.fire({backdrop:!0,title:this.translate("COM_EMUNDUS_ONBOARD_MODEL_DELETED"),text:this.translate("COM_EMUNDUS_ONBOARD_MODEL_DELETED_TEXT"),showConfirmButton:!0,timer:5e3}).then(()=>{this.$modal.hide("modalAddDocuments")}):j.a.fire({backdrop:!0,title:this.translate("COM_EMUNDUS_ONBOARD_CANNOT_DELETE"),text:this.translate("COM_EMUNDUS_ONBOARD_CANNOT_DELETE_TEXT"),showConfirmButton:!0,timer:5e3})})})},getModelsDocs(){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getundocuments"}).then(t=>{this.models=t.data.data,null!=this.currentDoc&&(this.doc=this.currentDoc)})},updateRequireMandatory(){1==this.req?this.form.mandatory=0:this.form.mandatory=1},selectType(t){let e=t.value,a=e.split(";");(a.includes("jpeg")||a.includes("jpg")||a.includes("png")||a.includes("gif"))&&(this.show=!this.show)},ZeroOrNegative(){let t=event.target.id,e=parseInt(event.target.value),a=this.form.minResolution.width,s=this.form.maxResolution.width,i=this.form.minResolution.height,n=this.form.maxResolution.height;isNaN(e)?(document.getElementById(t).style.color="red",document.getElementById(t).style.setProperty("border-color","red","important"),"image-min-width"!=t&&"image-max-width"!=t||(this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolutionTooSmall),"image-min-height"!=t&&"image-max-height"!=t||(this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolutionTooSmall)):e<300?(document.getElementById(t).style.color="red",document.getElementById(t).style.setProperty("border-color","red","important"),"image-min-width"!=t&&"image-max-width"!=t||(this.errorWidth.error=!0,(parseInt(a)<300||!a)&&document.getElementById("image-min-width").style.setProperty("border-color","red","important"),(parseInt(s)<300||!s)&&document.getElementById("image-max-width").style.setProperty("border-color","red","important"),this.errorWidth.message=this.translations.ErrorResolutionTooSmall),"image-min-height"!=t&&"image-max-height"!=t||(this.errorHeight.error=!0,(parseInt(i)<300||!i)&&document.getElementById("image-min-height").style.setProperty("border-color","red","important"),(parseInt(n)<300||!n)&&document.getElementById("image-max-height").style.setProperty("border-color","red","important"),this.errorHeight.message=this.translations.ErrorResolutionTooSmall)):(document.getElementById(t).style.color="unset",document.getElementById(t).style.setProperty("border-color","#ccc","important"),parseInt(a)>=300&&parseInt(s)>=300&&(parseInt(a)>parseInt(s)?(document.getElementById("image-min-width").style.setProperty("border-color","red","important"),this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolution):(document.getElementById("image-min-width").style.setProperty("border-color","#ccc","important"),this.errorWidth.error=!1,this.errorWidth.message="")),i>=300&&n>=300&&(parseInt(i)>parseInt(n)?(document.getElementById("image-min-height").style.setProperty("border-color","red","important"),this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolution):(document.getElementById("image-min-height").style.setProperty("border-color","#ccc","important"),this.errorHeight.error=!1,this.errorHeight.message="")),a>=300&&s>=300&&i>=300&&n>=300&&s>=a&&n>=i&&(this.errorWidth.error=!1,this.errorWidth.message="",this.errorHeight.error=!1,this.errorHeight.message=""))}},watch:{doc:function(t){null!=t?(this.model=this.models.find(e=>e.id==t),this.form.name=this.model.name,this.form.description=this.model.description,this.form.mandatory=parseInt(this.model.mandatory),this.form.minResolution={},this.form.maxResolution={},this.req=parseInt(this.model.mandatory),this.form.selectedTypes.pdf=this.model.allowed_types.includes("pdf"),this.model.allowed_types.includes("jpg")||this.model.allowed_types.includes("jpeg")||this.model.allowed_types.includes("png")||this.model.allowed_types.includes("gif")?(null!==this.model.min_width&&null!==this.model.min_height&&(this.form.minResolution.width=this.model.min_width,this.form.minResolution.height=this.model.min_height),null!==this.model.max_width&&null!==this.model.max_height&&(this.form.maxResolution.width=this.model.max_width,this.form.maxResolution.height=this.model.max_height),this.form.selectedTypes["jpeg;jpg;png;gif"]=!0,this.show=!0):(this.form.selectedTypes["jpeg;jpg;png;gif"]=!1,this.show=!1),this.form.selectedTypes["xls;xlsx;odf"]=this.model.allowed_types.includes("xls")||this.model.allowed_types.includes("xlsx")||this.model.allowed_types.includes("odf"),this.can_be_deleted=this.model.can_be_deleted,this.form.nbmax=this.model.nbmax):this.form={name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,mandatory:0,selectedTypes:{pdf:!1,"jpeg;jpg;png;gif":!1,"doc;docx;odt;ppt;pptx":!1,"xls;xlsx;odf":!1}}}}},Bn=Ln,kn=(a("f50a"),Object(b["a"])(Bn,Tn,xn,!1,null,"4f718341",null)),In=kn.exports;const jn=a("bef5");var Pn={name:"FormBuilder",components:{ModalAddDocuments:In,ModalAffectCampaign:Sn,Builder:dn,ModalSide:gn,ModalMenu:yn,draggable:_a.a},data(){return{prid:"",index:"",cid:"",manyLanguages:0,actualLanguage:"",actions_menu:!0,optionsModal:!1,UpdateUx:!1,menuHighlight:0,indexHighlight:-1,indexGrab:"0",indexGrabDocuments:"0",updateFormLabel:!1,animation:{enter:{opacity:[1,0],translateX:[0,-300],scale:[1,.2]},leave:{opacity:0,height:0}},loading:!1,first_loading:!1,lastUpdate:(new Date).getHours()+":"+((new Date).getMinutes()<10?"0":"")+(new Date).getMinutes(),formObjectArray:[],submittionPages:[],formList:[],profileLabel:"",id:0,grab:0,grabDocs:0,rgt:0,builderKey:0,builderSubmitKey:0,files:0,currentDoc:null,documentsList:[],campaignsAffected:{},testing:!1,link:"",languages:[],dragging:!1,draggingIndex:-1,elementDisabled:!1,addingElement:!1,addingSection:!1,plugins:{field:{id:0,value:"field",icon:"fas fa-font",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_FIELD")},nom:{id:8,value:"nom",icon:"fas fa-font",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_LASTNAME")},prenom:{id:9,value:"prenom",icon:"fas fa-font",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_FIRSTNAME")},email:{id:10,value:"email",icon:"fas fa-at",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_EMAIL")},yesno:{id:12,value:"yesno",icon:"fas fa-toggle-on",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_YESNO")},textarea:{id:5,value:"textarea",icon:"far fa-square",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_TEXTAREA")},checkbox:{id:2,value:"checkbox",icon:"far fa-check-square",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_CHECKBOX")},radiobutton:{id:4,value:"radiobutton",icon:"fas fa-list-ul",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_RADIOBUTTON")},dropdown:{id:3,value:"dropdown",icon:"fas fa-th-list",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_DROPDOWN")},birthday:{id:1,value:"birthday",icon:"far fa-calendar-alt",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_BIRTHDAY")},display:{id:6,value:"display",icon:"fas fa-paragraph",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_DISPLAY")}},sections:{default_empty:{id:0,value:[],icon:"fas fa-font",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMPTY_SECTION")},personal_informations:{id:0,value:["nom","prenom","email","telephone","birthday","nationalite"],icon:"fas fa-id-card-alt",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_PERSONAL_INFORMATIONS"),label:{fr:"Informations Personelles",en:"Personal Informations"}},adress:{id:1,value:["adresse","code postal","pays","ville","adresseComplementaire"],icon:"fas fa-address-card",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADRESSE"),label:{fr:"Adresse",en:"Adress"}},eexperience_pro:{id:1,value:["date_debut","date_fin","fonction","employeur","ville_employeur","pays","missions"],icon:"fas fa-briefcase",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_WORK_EXPERIENCE"),label:{fr:"Expérience professionnelle",en:"Work experience"}}},docForm:{name:{fr:"Autres document",en:"Other documents"},description:{fr:"",en:""},nbmax:5,selectedTypes:{pdf:!0,jpg:!0,jpeg:!0}},translations:{addMenu:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU"),addMenuAction:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU_ACTION"),addGroup:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADDGROUP"),addItem:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_ADDITEM"),Actions:this.translate("COM_EMUNDUS_ONBOARD_ACTIONS"),sendFormButton:this.translate("COM_EMUNDUS_ONBOARD_SEND_FORM"),Edit:this.translate("COM_EMUNDUS_ONBOARD_MODIFY"),FormPage:this.translate("COM_EMUNDUS_ONBOARD_FORM_PAGE"),SubmitPage:this.translate("COM_EMUNDUS_ONBOARD_SUBMIT_PAGE"),testingForm:this.translate("COM_EMUNDUS_ONBOARD_TESTING_FORM"),Form:this.translate("COM_EMUNDUS_ONBOARD_FORM"),Documents:this.translate("COM_EMUNDUS_ONBOARD_DOCUMENTS"),AddNewDocument:this.translate("COM_EMUNDUS_ONBOARD_ADD_NEW_DOCUMENT"),Back:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Savingat:this.translate("COM_EMUNDUS_ONBOARD_SAVING_AT"),Validate:this.translate("COM_EMUNDUS_ONBOARD_OK"),update:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),updating:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATING"),updateSuccess:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATESUCESS"),updateFailed:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATEFAILED"),ExitFormbuilder:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_EXIT_FORMBUILDER"),BuildYourForm:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_BUILD_YOUR_FORM"),SubmittionPage:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_SUBMITTION_PAGE")}}},methods:{slpitProfileIdfromLabel(t){return t.split(/-(.+)/)[1]},showModal(){j.a.fire({text:this.translate("COM_EMUNDUS_ONBOARD_BUILDER_NOFORMPAGEWARNING"),type:"warning"})},hide(){this.$modal.hide("my-first-modal")},createElement(t,e,a){let s=this.formObjectArray;if(1===this.menuHighlight&&(s=this.submittionPages),!Oe.a.isEmpty(s[this.indexHighlight].object.Groups))if(this.loading=!0,"emundus_fileupload"==e){let s=[];Object.keys(this.docForm.selectedTypes).forEach(t=>{1==this.docForm.selectedTypes[t]&&s.push(t)});let i={document:this.docForm,types:s,cid:this.cid,pid:this.prid,did:20};this.createElementEMundusFileUpload(i,t,e,a)}else p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createsimpleelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({gid:t,plugin:e})}).then(s=>{this.getSimpleElement(t,s.data.scalar,a,e),this.loading=!1})},getSimpleElement(t,e,a,s){this.loading=!0,p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:e,gid:t},paramsSerializer:t=>jn.stringify(t)}).then(e=>{e.data.params.password="email"==s?3:0,p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=updateparams",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({element:e.data})}),this.menuHighlightCustumisation(e,t,a),this.loading=!1})},createElementEMundusFileUpload(t,e,a,s){p()({method:"post",url:"index.php?option=com_emundus&controller=campaign&task=updatedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify(t)}).then(t=>{this.$emit("UpdateDocuments"),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createsimpleelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({gid:e,plugin:a,attachementId:t.data.data})}).then(t=>{p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:t.data.scalar,gid:e},paramsSerializer:t=>jn.stringify(t)}).then(t=>{this.menuHighlightCustumisation(t,e,s),this.getDocuments(),this.loading=!1})})})},menuHighlightCustumisation(t,e,a){0===this.menuHighlight?(this.$set(this.formObjectArray[this.indexHighlight].object.Groups["group_"+e],"elements[element"+t.data.id+"]",t.data),this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts.splice(a,0,t.data),this.$refs.builder.updateOrder(e,this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts),this.$refs.builder.$refs.builder_viewer.keyElements["element"+t.data.id]=0,this.$refs.builder.$refs.builder_viewer.enableActionBar(t.data.id),this.$refs.builder.$refs.builder_viewer.enableLabelInput(t.data.id)):(this.$set(this.submittionPages[this.indexHighlight].object.Groups["group_"+e],"elements[element"+t.data.id+"]",t.data),this.submittionPages[this.indexHighlight].object.Groups["group_"+e].elts.splice(a,0,t.data),this.$refs.builder_submit.updateOrder(e,this.submittionPages[this.indexHighlight].object.Groups["group_"+e].elts),this.$refs.builder_submit.$refs.builder_viewer.keyElements["element"+t.data.id]=0,this.$refs.builder_submit.$refs.builder_viewer.enableActionBar(t.data.id),this.$refs.builder_submit.$refs.builder_viewer.enableLabelInput(t.data.id))},addingNewElement:function(t){this.dragging=!1,this.draggingIndex=-1,"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#e4e4e9",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #c3c3ce",document.getElementsByClassName("no-elements-tip")[0].innerHTML=this.translate("COM_EMUNDUS_ONBOARD_NO_ELEMENTS_TIPS"));let e=t.clone.id.split(/_(.+)/)[1],a=t.to.parentElement.parentElement.parentElement.id.split("_")[1];"undefined"!=typeof a&&this.createElement(a,e,t.newIndex)},addingNewElementByDblClick:Oe.a.debounce((function(t){let e=Object.keys(this.formObjectArray[this.indexHighlight].object.Groups)[Object.keys(this.formObjectArray[this.indexHighlight].object.Groups).length-1].split("_")[1],a=this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts.length;"undefined"!=typeof e&&this.createElement(e,t,a)}),250,{maxWait:1e3}),createGroupSimpleElements(t,e){p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createsectionsimpleelements",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({gid:t,plugins:e})}).then(e=>{e.data.data.forEach((e,a)=>{this.getSimpleElement(t,e,a)})})},createGroup(t,e){this.loading=!0;let a=this.formObjectArray[this.indexHighlight].object.id;1===this.menuHighlight&&(a=this.submittionPages[this.indexHighlight].object.id),p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createsimplegroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({fid:a,label:e})}).then(e=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getJTEXT",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({toJTEXT:e.data.group_tag})}).then(a=>{e.data.group_showLegend=a.data,p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getalltranslations",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({toJTEXT:e.data.group_tag})}).then(a=>{e.data.label.fr=a.data.fr,e.data.label.en=a.data.en,this.pushGroup(e.data),t.length>0?this.createGroupSimpleElements(e.data.group_id,t):this.loading=!1})})})},UpdateName(t,e){this.formObjectArray[t].object.show_title.value=e},UpdateIntro(t,e){this.formObjectArray[t].object.intro_value=e},UpdateUXT(){this.UpdateUx=!0},updateLabelForm(){p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=updateformlabel",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({label:this.profileLabel,prid:this.prid})}).then(()=>{this.show("foo-velocity","success",this.updateSuccess,this.update),this.updateFormLabel=!1}).catch(t=>{this.show("foo-velocity","error",this.updateFailed,this.updating),console.log(t)})},pushGroup(t){0===this.menuHighlight?(this.formObjectArray.forEach((e,a)=>{e.object.id==t.formid&&(this.formObjectArray[a]["object"]["Groups"]["group_"+t.group_id]={elements:{},elts:[],group_id:t.group_id,group_showLegend:t.group_showLegend,label:{fr:t.label.fr,en:t.label.en},group_tag:t.group_tag,ordering:t.ordering})}),this.$refs.builder.getDataObject(),this.$refs.builder.$refs.builder_viewer.openGroup[t.group_id]=!0):(this.submittionPages.forEach((e,a)=>{e.object.id==t.formid&&(this.submittionPages[a]["object"]["Groups"]["group_"+t.group_id]={elements:{},elts:[],group_id:t.group_id,group_showLegend:t.group_showLegend,label:{fr:t.label.fr,en:t.label.en},group_tag:t.group_tag,ordering:t.ordering})}),this.$refs.builder_submit.getDataObject(),this.$refs.builder_submit.$refs.builder_viewer.openGroup[t.group_id]=!0),this.elementDisabled=!1,setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)},200)},pushMenu(t){this.formList.push(t),p.a.get("index.php?option=com_emundus&view=form&formid="+t.id+"&format=vue_jsonclean").then(e=>{this.formObjectArray.push({object:e.data,rgt:t.rgt,link:t.link}),this.indexHighlight=this.formObjectArray.length-1})},removeMenu(t){this.formObjectArray.forEach((e,a)=>{e.object.id==t&&this.formObjectArray.splice(a,1)}),this.formList.forEach((e,a)=>{e.id==t&&this.formList.splice(a,1)}),this.builderKey+=1,this.indexHighlight-=1},removeGroup(t,e){this.formObjectArray.forEach((a,s)=>{a.object.id==e&&delete this.formObjectArray[s]["object"]["Groups"]["group_"+t]}),this.builderKey+=1},updateFormObjectAndComponent(){this.formObjectArray=[],this.getDataObjectSingle(this.indexHighlight),this.builderKey+=1},getElement(t,e){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:t,gid:e},paramsSerializer:t=>jn.stringify(t)}).then(t=>{this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elements["element"+t.data.id]=t.data,this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts.push(t.data),this.builderKey+=1})},tip(){this.showTip("foo-velocity",this.translate("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP")+"<br/>"+this.translate("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP1")+"<br/>"+this.translate("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP2"),this.translate("COM_EMUNDUS_ONBOARD_TIP"))},show(t,e="",a="",s="Information"){this.$notify({group:t,title:""+s,text:a,type:e}),this.lastUpdate=(new Date).getHours()+":"+((new Date).getMinutes()<10?"0":"")+(new Date).getMinutes(),document.getElementsByClassName("fa-sync")[0].style.transform="rotate(360deg)",setTimeout(()=>{document.getElementsByClassName("fa-sync")[0].style.transform="unset"},1500)},showTip(t,e="",a="Information"){this.$notify({group:t,title:""+a,text:e,duration:2e4})},clean(t){this.$notify({group:t,clean:!0})},enableUpdatingForm(){this.updateFormLabel=!0,setTimeout(()=>{document.getElementById("update_label_form_"+this.prid).focus()},100)},async getDataObject(){await this.asyncForEach(this.formList,async t=>{let e=t.link.replace("fabrik","emundus");await p.a.get(e+"&format=vue_jsonclean").then(e=>{this.formObjectArray.push({object:e.data,rgt:t.rgt,link:t.link})}).then(()=>{this.formObjectArray.sort((t,e)=>t.rgt-e.rgt)}).catch(t=>{console.log(t)})}),this.loading=!1,this.indexHighlight=0,this.elementDisabled=Oe.a.isEmpty(this.formObjectArray[this.indexHighlight].object.Groups),this.rgt=this.formObjectArray[this.indexHighlight].rgt},async getDataObjectSingle(t){if(this.formList.length>0){let e=this.formList[t].link.replace("fabrik","emundus");await p.a.get(e+"&format=vue_jsonclean").then(e=>{this.formObjectArray[t].object=e.data}).then(()=>{this.formObjectArray.sort((t,e)=>t.rgt-e.rgt)}).catch(t=>{console.log(t)}),this.elementDisabled=Oe.a.isEmpty(this.formObjectArray[t].object.Groups),this.rgt=this.formObjectArray[t].rgt}this.loading=!1,this.indexHighlight=t},async asyncForEach(t,e){for(let a=0;a<t.length;a++)await e(t[a],a,t)},getCookie(t){for(var e=t+"=",a=decodeURIComponent(document.cookie),s=a.split(";"),i=0;i<s.length;i++){var n=s[i];while(" "==n.charAt(0))n=n.substring(1);if(0==n.indexOf(e))return n.substring(e.length,n.length)}return""},getFilesByForm(){p.a.get("index.php?option=com_emundus&controller=form&task=getfilesbyform&pid="+this.prid).then(t=>{this.files=t.data.data,0!=this.files&&this.tip()})},getSubmittionPage(){p()({method:"GET",url:"index.php?option=com_emundus&controller=form&task=getsubmittionpage",params:{prid:this.prid},paramsSerializer:t=>jn.stringify(t)}).then(t=>{let e=t.data.link.replace("fabrik","emundus");p.a.get(e+"&format=vue_jsonclean").then(e=>{this.submittionPages.push({object:e.data,rgt:t.data.rgt,link:t.data.link})})})},getForms(){this.loading=!0,p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getFormsByProfileId",params:{profile_id:this.prid},paramsSerializer:t=>jn.stringify(t)}).then(t=>{this.formList=t.data.data,setTimeout(()=>{this.formList.length>0?this.formList.forEach(t=>{this.formObjectArray.push({object:{},rgt:t.rgt,link:t.link})}):this.showModal(),this.loading=!1,this.getDataObjectSingle(0),this.getProfileLabel(this.prid)},100)}).catch(t=>{console.log(t)})},getDocuments(){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getDocuments",params:{pid:this.prid},paramsSerializer:t=>jn.stringify(t)}).then(t=>{this.documentsList=t.data.data})},removeDocument(t,e){p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=removeDocumentFromProfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({did:e})}).then(()=>{this.documentsList.splice(t,1)})},getProfileLabel(t){p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getProfileLabelByProfileId",params:{profile_id:t},paramsSerializer:t=>jn.stringify(t)}).then(t=>{this.profileLabel=t.data.data.label}).catch(t=>{console.log(t)})},exitForm(){window.location.href="index.php?option=com_emundus&view=form"},sendForm(){this.formList.length>0?0!=this.cid?window.location.href="index.php?option=com_emundus&view=form&layout=addnextcampaign&cid="+this.cid+"&index=4":p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getassociatedcampaign",params:{pid:this.prid},paramsSerializer:t=>jn.stringify(t)}).then(t=>{t.data.data.length>0?history.go(-1):this.$modal.show("modalAffectCampaign")}).catch(t=>{console.log(t)}):this.showModal()},testForm(){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=gettestingparams",params:{prid:this.prid},paramsSerializer:t=>jn.stringify(t)}).then(t=>{this.campaignsAffected=t.data.campaign_files,Object.keys(this.campaignsAffected).length>1?this.$modal.show("modalTestingForm"):Object.keys(this.campaignsAffected).length>0?this.campaignsAffected[0].files.length>0?this.$modal.show("modalTestingForm"):p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createtestingfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({cid:this.campaignsAffected[0].id})}).then(t=>{window.open("/index.php?option=com_emundus&task=openfile&fnum="+t.data.fnum+"&redirect=1==&Itemid=1079#em-panel")}):(this.testing=!0,p()({method:"get",url:"index.php?option=com_emundus&controller=form&task=getassociatedcampaign",params:{pid:this.prid},paramsSerializer:t=>jn.stringify(t)}).then(()=>{this.$modal.show("modalAffectCampaign")}))})},changeGroup(t){this.loading=!0,Oe.a.isEmpty(this.formObjectArray[t].object)?this.getDataObjectSingle(t).then(()=>{this.loading=!1}):(this.elementDisabled=Oe.a.isEmpty(this.formObjectArray[t].object.Groups),this.rgt=this.formObjectArray[t].rgt,this.indexHighlight=t,this.loading=!1),1===this.menuHighlight?(this.$refs.builder_submit.$refs.builder_viewer.clickUpdatingLabel=!1,this.$refs.builder_submit.$refs.builder_viewer.translate.label=!1):(this.$refs.builder.$refs.builder_viewer.clickUpdatingLabel=!1,this.$refs.builder.$refs.builder_viewer.translate.label=!1),document.cookie="page_"+this.prid+"="+t+"; expires=Session; path=/"},SomethingChange:function(){this.dragging=!0,this.formList.forEach((t,e)=>{t.rgt=this.formObjectArray[e].rgt}),this.reorderItems()},showElements(){this.elementDisabled?this.addingElement=!1:this.addingElement=!this.addingElement},showSections(){this.addingSection=!this.addingSection},reorderingDocuments:function(){this.documentsList.forEach((t,e)=>{t.ordering=e}),p()({method:"post",url:"index.php?option=com_emundus&controller=form&task=reorderDocuments",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({documents:this.documentsList})})},reorderItems(){this.formList.forEach(t=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=reordermenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jn.stringify({rgt:t.rgt,link:t.link})}).catch(t=>{console.log(t)})})},enableGrab(t){1!==this.formList.length&&(this.indexGrab=t,this.grab=!0)},disableGrab(){this.indexGrab=0,this.grab=!1},enableGrabDocuments(t){this.indexGrabDocuments=t,this.grabDocs=!0},disableGrabDocuments(){this.indexGrabDocuments=0,this.grabDocs=!1},startDragging(){"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#fff",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #16afe1",document.getElementsByClassName("no-elements-tip")[0].innerHTML="")},enableActionsMenu(){const t=document.getElementsByClassName("action-label");this.actions_menu=!this.actions_menu,this.addingElement=!1,this.actions_menu?setTimeout(()=>{t.forEach(t=>{t.style.display="block"})},300):t.forEach(t=>{t.style.display="none"})},getLanguages(){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getactivelanguages"}).then(t=>{this.languages=t.data.data})}},created(){this.actualLanguage=this.$store.getters["global/actualLanguage"],this.manyLanguages=this.$store.getters["global/manyLanguages"],this.index=this.$store.getters["global/datas"].index.value,this.prid=this.$store.getters["global/datas"].prid.value,this.cid=this.$store.getters["global/datas"].cid.value,this.getForms(),this.getDocuments(),this.getSubmittionPage(),this.getFilesByForm(),this.getLanguages()},computed:{dragOptions(){return{group:{name:"items",pull:"clone",put:!1},sort:!1,disabled:!1,ghostClass:"ghost"}}}},Fn=Pn,$n=(a("acca"),Object(b["a"])(Fn,Fi,$i,!1,null,"2efc01c6",null)),Gn=$n.exports,Hn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"sidebar-formbuilder",style:t.actions_menu?"width: 250px":""},[a("transition",{attrs:{name:"move-right"}},[a("div",{staticClass:"actions-menu menu-block"},[a("a",{staticClass:"d-flex back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:t.translations.Back}},[t._v(" "+t._s(t.translations.BuildYourForm)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("div",[a("div",{staticClass:"action-links"},[a("a",{staticClass:"d-flex action-link",staticStyle:{"padding-top":"2em"},attrs:{title:t.translations.addMenu},on:{click:function(e){return t.$modal.show("modalMenu")}}},[a("em",{staticClass:"add-page-icon"}),a("label",{directives:[{name:"show",rawName:"v-show",value:t.actions_menu,expression:"actions_menu"}],staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[t._v(t._s(t.translations.addMenu))])]),a("a",{staticClass:"d-flex action-link",attrs:{title:t.translations.addGroup},on:{click:function(e){return t.createGroup()}}},[a("em",{staticClass:"add-group-icon"}),a("label",{directives:[{name:"show",rawName:"v-show",value:t.actions_menu,expression:"actions_menu"}],staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[t._v(t._s(t.translations.addGroup))])]),a("a",{staticClass:"d-flex action-link",class:{"disable-element":t.elementDisabled},attrs:{title:t.translations.addItem},on:{click:t.showElements}},[a("em",{staticClass:"add-element-icon"}),a("label",{directives:[{name:"show",rawName:"v-show",value:t.actions_menu,expression:"actions_menu"}],staticClass:"action-label col-md-offset-1 col-sm-offset-1",class:[{"disable-element":t.elementDisabled},t.addingElement?"down-arrow":"right-arrow"]},[t._v(t._s(t.translations.addItem))])]),a("transition",{attrs:{name:"slide-right",type:"transition"}},[t.addingElement?a("div",{staticClass:"plugins-list"},[a("a",{staticClass:"d-flex col-md-offset-1 back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:t.translations.Back},on:{click:function(e){t.addingElement=!t.addingElement}}},[a("em",{staticClass:"fas fa-arrow-left mr-1"}),t._v(" "+t._s(t.translations.Back)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("draggable",t._b({staticStyle:{"padding-bottom":"2em","margin-top":"10%"},attrs:{handle:".handle","drag-class":"plugin-drag","chosen-class":"plugin-chosen","ghost-class":"plugin-ghost"},on:{start:function(e){t.startDragging(),t.dragging=!0,t.draggingIndex=t.index},end:function(e){return t.addingNewElement(e)}},model:{value:t.plugins,callback:function(e){t.plugins=e},expression:"plugins"}},"draggable",t.dragOptions,!1),t._l(t.plugins,(function(e,s){return a("div",{staticClass:"d-flex plugin-link col-md-offset-1 col-sm-offset-1 handle",attrs:{id:"plugin_"+e.value,title:e.name},on:{dblclick:function(a){return t.addingNewElementByDblClick(e.value)}}},[a("em",{class:e.icon}),a("span",{staticClass:"ml-10px"},[t._v(t._s(e.name))])])})),0)],1):t._e()])],1)])])])],1),a("div",{staticClass:"menu-block",class:t.actions_menu?"col-md-8 col-md-offset-4 col-sm-9 col-sm-offset-3":""},[a("div",{staticClass:"heading-block",class:t.addingElement||t.actions_menu?"col-md-offset-2 col-md-9":"col-md-12"},[t._m(0),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer bouton-sauvergarder-et-continuer-green mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:t.translations.Validate},on:{click:t.sendForm}},[t._v(t._s(t.translations.Validate))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:t.translations.ExitFormbuilder},on:{click:t.sendForm}},[t._v(t._s(t.translations.ExitFormbuilder))])])]),a("div",{staticClass:"form-viewer-builder",class:[t.addingElement||t.actions_menu?"col-sm-offset-5 col-md-offset-4 col-lg-offset-1 col-sm-7":"col-md-10",t.optionsModal?"col-sm-5 col-md-6":"col-md-10"]},[t.formObjectArray[t.indexHighlight]?a("Builder",{key:t.builderKey,ref:"builder",attrs:{object:t.formObjectArray[t.indexHighlight],UpdateUx:t.UpdateUx,rgt:t.rgt,prid:t.prid,eval:1,files:t.files,actualLanguage:t.actualLanguage,manyLanguages:t.manyLanguages},on:{show:t.show,UpdateFormBuilder:t.updateFormObjectAndComponent,removeGroup:t.removeGroup,modalClosed:function(e){t.optionsModal=!1},modalOpen:function(e){t.optionsModal=!0}}}):t._e()],1)])]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()],1)},zn=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("h2",{staticClass:"form-title",staticStyle:{padding:"0",margin:"0"}},[a("img",{staticClass:"em-mr-4",attrs:{src:"/images/emundus/menus/form.png",alt:"Formulaire"}}),t._v("Evaluation")])}];const Vn=a("bef5");var qn={name:"EvaluationBuilder",props:{prid:String,index:Number,cid:Number,eval:Number,actualLanguage:String,manyLanguages:Number},components:{List:ce,ModalAffectCampaign:Sn,Builder:dn,ModalSide:gn,ModalMenu:yn,draggable:_a.a},data(){return{actions_menu:!0,optionsModal:!1,UpdateUx:!1,indexHighlight:0,animation:{enter:{opacity:[1,0],translateX:[0,-300],scale:[1,.2]},leave:{opacity:0,height:0}},loading:!1,first_loading:!1,formObjectArray:[],rgt:0,builderKey:0,files:0,link:"",dragging:!1,draggingIndex:-1,elementDisabled:!1,addingElement:!1,plugins:{field:{id:0,value:"field",icon:"fas fa-font",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_FIELD")},textarea:{id:5,value:"textarea",icon:"far fa-square",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_TEXTAREA")},checkbox:{id:2,value:"checkbox",icon:"far fa-check-square",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_CHECKBOX")},radiobutton:{id:4,value:"radiobutton",icon:"fas fa-list-ul",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_RADIOBUTTON")},dropdown:{id:3,value:"dropdown",icon:"fas fa-th-list",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_DROPDOWN")},birthday:{id:1,value:"birthday",icon:"far fa-calendar-alt",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_BIRTHDAY")},display:{id:6,value:"display",icon:"fas fa-paragraph",name:this.translate("COM_EMUNDUS_ONBOARD_TYPE_DISPLAY")}},translations:{addMenu:"COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU",addGroup:"COM_EMUNDUS_ONBOARD_BUILDER_ADDGROUP",addItem:"COM_EMUNDUS_ONBOARD_BUILDER_ADDITEM",groupCreated:"COM_EMUNDUS_ONBOARD_BUILDER_CREATEDGROUPSUCCES",update:"COM_EMUNDUS_ONBOARD_BUILDER_UPDATE",Back:"COM_EMUNDUS_ONBOARD_ADD_RETOUR",Validate:"COM_EMUNDUS_ONBOARD_OK",ExitFormbuilder:"COM_EMUNDUS_ONBOARD_BUILDER_EXIT_FORMBUILDER",BuildYourForm:"COM_EMUNDUS_ONBOARD_BUILDER_BUILD_YOUR_FORM"}}},created(){this.$props.actualLanguage=this.$store.getters["global/actualLanguage"],this.$props.manyLanguages=this.$store.getters["global/manyLanguages"],this.$props.index=this.$store.getters["global/datas"].index.value,this.$props.prid=this.$store.getters["global/datas"].prid.value,this.$props.cid=this.$store.getters["global/datas"].cid.value,this.$props.eval=this.$store.getters["global/datas"].eval.value,this.link="index.php?option=com_fabrik&view=form&formid="+this.eval,this.getDataObject()},methods:{createElement(t,e,a){Oe.a.isEmpty(this.formObjectArray[this.indexHighlight].object.Groups)||(this.loading=!0,p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createcriteria",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Vn.stringify({gid:t,plugin:e})}).then(e=>{p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:e.data.scalar,gid:t},paramsSerializer:t=>Vn.stringify(t)}).then(e=>{this.$set(this.formObjectArray[this.indexHighlight].object.Groups["group_"+t],"elements[element"+e.data.id+"]",e.data),this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts.splice(a,0,e.data),this.$refs.builder.updateOrder(t,this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts),this.$refs.builder.$refs.builder_viewer.keyElements["element"+e.data.id]=0,this.$refs.builder.$refs.builder_viewer.enableActionBar(e.data.id),this.$refs.builder.$refs.builder_viewer.enableLabelInput(e.data.id),this.loading=!1})}))},addingNewElement:function(t){this.dragging=!1,this.draggingIndex=-1,"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#e4e4e9",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #c3c3ce",document.getElementsByClassName("no-elements-tip")[0].innerHTML=this.translate("COM_EMUNDUS_ONBOARD_NO_ELEMENTS_TIPS"));let e=t.clone.id.split("_")[1],a=t.to.parentElement.parentElement.parentElement.id.split("_")[1];"undefined"!=typeof a&&this.createElement(a,e,t.newIndex)},addingNewElementByDblClick:Oe.a.debounce((function(t){let e=Object.keys(this.formObjectArray[this.indexHighlight].object.Groups)[Object.keys(this.formObjectArray[this.indexHighlight].object.Groups).length-1].split("_")[1],a=this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts.length;"undefined"!=typeof e&&this.createElement(e,t,a)}),250,{maxWait:1e3}),createGroup(){this.loading=!0,p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=createsimplegroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Vn.stringify({fid:this.formObjectArray[this.indexHighlight].object.id})}).then(t=>{p()({method:"post",url:"index.php?option=com_emundus&controller=formbuilder&task=getJTEXT",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Vn.stringify({toJTEXT:t.data.group_tag})}).then(e=>{t.data.group_showLegend=e.data,p()({method:"post",url:"index.php?option=com_emundus&controller=programme&task=affectgrouptoprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Vn.stringify({group:t.data.group_id,pid:this.cid})}).then(t=>{this.show("foo-velocity","success",this.translations.groupCreated,this.translations.update)}),this.loading=!1,this.pushGroup(t.data)})})},UpdateName(t,e){this.formObjectArray[t].object.show_title.value=e},UpdateUXT(){this.UpdateUx=!0},pushGroup(t){this.formObjectArray[this.indexHighlight]["object"]["Groups"]["group_"+t.group_id]={elements:{},elts:[],group_id:t.group_id,group_showLegend:t.group_showLegend,label:{fr:t.label.fr,en:t.label.en},group_tag:t.group_tag,ordering:t.ordering},this.elementDisabled=!1,this.$refs.builder.getDataObject(),this.$refs.builder.$refs.builder_viewer.openGroup[t.group_id]=!0,setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)},200)},removeGroup(t,e){this.formObjectArray.forEach((a,s)=>{a.object.id==e&&delete this.formObjectArray[s]["object"]["Groups"]["group_"+t]}),this.builderKey+=1},updateFormObjectAndComponent(){this.formObjectArray=[],this.getDataObject(),this.builderKey+=1},getElement(t,e){p()({method:"get",url:"index.php?option=com_emundus&controller=formbuilder&task=getElement",params:{element:t,gid:e},paramsSerializer:t=>Vn.stringify(t)}).then(t=>{this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elements["element"+t.data.id]=t.data,this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts.push(t.data),this.builderKey+=1})},tip(){this.showTip("foo-velocity",this.translate("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP")+"<br/>"+this.translate("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP1")+"<br/>"+this.translate("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP2"),this.translate("COM_EMUNDUS_ONBOARD_TIP"))},show(t,e="",a="",s="Information"){this.$notify({group:t,title:""+s,text:a,type:e})},showTip(t,e="",a="Information"){this.$notify({group:t,title:""+a,text:e,duration:2e4})},clean(t){this.$notify({group:t,clean:!0})},async getDataObject(){let t=this.link.replace("fabrik","emundus");await p.a.get(t+"&format=vue_jsonclean").then(t=>{this.formObjectArray.push({object:t.data,link:this.link}),this.loading=!1,this.indexHighlight=0,this.elementDisabled=Oe.a.isEmpty(this.formObjectArray[this.indexHighlight].object.Groups)})},sendForm(){this.redirectJRoute("index.php?option=com_emundus&view=form")},redirectJRoute(t){p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=redirectjroute",params:{link:t},paramsSerializer:t=>Vn.stringify(t)}).then(t=>{window.location.href=window.location.pathname+t.data.data})},showElements(){this.elementDisabled?this.addingElement=!1:this.addingElement=!this.addingElement},startDragging(){"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#fff",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #16afe1",document.getElementsByClassName("no-elements-tip")[0].innerHTML="")}},computed:{dragOptions(){return{group:{name:"items",pull:"clone",put:!1},sort:!1,disabled:!1,ghostClass:"ghost"}}}},Yn=qn,Jn=(a("e7d4"),Object(b["a"])(Yn,Hn,zn,!1,null,"4dafbf69",null)),Wn=Jn.exports,Xn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"w-row em-mt-80"},[a("div",{staticClass:"w-100"},[0!==t.menuHighlight&&9!==t.menuHighlight&&2!==t.menuHighlight&&3!==t.menuHighlight?a("div",{staticClass:"em-flex-row em-flex-start em-pointer em-m-24",staticStyle:{"margin-left":"10%"},on:{click:function(e){t.menuHighlight=0}}},[a("span",{staticClass:"material-icons-outlined"},[t._v("arrow_back")]),a("span",{staticClass:"em-ml-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]):t._e(),0!==t.menuHighlight||t.modal_ready?0!==t.menuHighlight&&9!==t.menuHighlight&&2!==t.menuHighlight&&3!==t.menuHighlight?a("h5",{staticClass:"em-h5 em-m-24",staticStyle:{"margin-left":"10%"}},[t._v(t._s(t.translate(t.currentTitle)))]):t._e():a("h5",{staticClass:"em-h5 em-m-24",staticStyle:{"margin-left":"10%"}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_PARAMETER")))]),a("transition",{attrs:{name:"slide-right"}},[0===t.menuHighlight?a("div",{staticClass:"em-settings-menu",staticStyle:{"margin-left":"10%"}},t._l(t.menus,(function(e,s){return a("div",{directives:[{name:"wave",rawName:"v-wave"}],key:"menu_"+e.index,staticClass:"em-shadow-cards col-md-3",on:{click:function(a){t.menuHighlight=e.index,t.currentTitle=e.title}}},[a("span",{staticClass:"material-icons-outlined em-gradient-icons em-mb-16"},[t._v(t._s(e.icon))]),a("p",{staticClass:"em-body-16-semibold em-mb-8"},[t._v(t._s(t.translate(e.title)))]),a("p",{staticClass:"em-font-size-14"},[t._v(t._s(t.translate(e.description)))])])})),0):t._e()]),a("transition",{attrs:{name:"fade"}},[1===t.menuHighlight?a("editStyle",{ref:"styling"}):t._e(),2===t.menuHighlight?a("ContentTool",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):t._e(),3===t.menuHighlight?a("FilesTool",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):t._e(),9===t.menuHighlight?a("TranslationTool",{directives:[{name:"show",rawName:"v-show",value:t.modal_ready,expression:"modal_ready"}],ref:"translations",on:{resetMenuIndex:function(e){t.menuHighlight=0}}}):t._e()],1)],1)])},Kn=[],Qn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},[a("div",{staticClass:"em-grid-3 em-mb-16"},[a("button",{staticClass:"em-primary-button em-mb-24",staticStyle:{width:"max-content"},on:{click:t.pushStatus}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus em-mr-4"}),t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_STATUS"))+" ")])])]),a("draggable",{class:"draggables-list",attrs:{handle:".handle"},on:{end:t.updateStatusOrder},model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},t._l(t.status,(function(e,s){return a("div",{key:e.step,staticClass:"em-mb-24",attrs:{title:"step_"+e.step,id:"step_"+e.step},on:{mouseover:function(e){return t.enableGrab(s)},mouseleave:function(e){return t.disableGrab()}}},[a("div",{staticClass:"em-flex-row em-flex-row-start em-w-100"},[a("span",{staticClass:"handle",style:t.grab&&t.indexGrab==s?"opacity: 1":"opacity: 0"},[a("span",{staticClass:"material-icons"},[t._v("drag_indicator")])]),a("div",{staticClass:"status-field"},[a("div",[a("p",{staticClass:"em-p-8-12 em-editable-content",attrs:{contenteditable:"true",id:"status_label_"+e.step},on:{focusout:function(a){return t.updateStatus(e)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.updateStatus(e)}}},[t._v(t._s(e.label[t.actualLanguage]))])]),a("input",{class:"label-"+e.class,attrs:{type:"hidden"}})]),a("div",{staticClass:"em-flex-row"},[a("v-swatches",{attrs:{swatches:t.swatches,shapes:"circles","row-length":"8","show-border":"","popover-x":"left","popover-y":"top"},on:{input:function(a){return t.updateStatus(e)}},model:{value:e.class,callback:function(a){t.$set(e,"class",a)},expression:"statu.class"}}),a("a",{staticClass:"em-flex-row em-ml-8 em-pointer",style:1==e.edit&&0!=e.step&&1!=e.step?"opacity: 1":"opacity: 0",attrs:{type:"button",title:t.translate("COM_EMUNDUS_ONBOARD_DELETE_STATUS")},on:{click:function(a){return t.removeStatus(e,s)}}},[a("span",{staticClass:"material-icons em-red-500-color"},[t._v("delete_outline")])])],1)]),a("hr")])})),0)],1),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},Zn=[],to=a("b26c"),eo=a.n(to);a("afdb");const ao=a("bef5");var so={name:"editStatus",components:{VSwatches:eo.a,draggable:_a.a},props:{},mixins:[N],data(){return{index:"",indexGrab:"0",grab:0,loading:!1,status:[],show:!1,actualLanguage:"",swatches:["#DCC6E0","#947CB0","#663399","#6BB9F0","#19B5FE","#013243","#7BEFB2","#3FC380","#1E824C","#FFFD7E","#FFFD54","#F7CA18","#FABE58","#E87E04","#D35400","#EC644B","#CF000F","#E5283B","#E08283","#D2527F","#DB0A5B","#999999"]}},created(){this.getStatus(),this.actualLanguage=this.$store.getters["global/actualLanguage"]},methods:{getStatus(){p.a.get("index.php?option=com_emundus&controller=settings&task=getstatus").then(t=>{this.status=t.data.data,setTimeout(()=>{this.status.forEach(t=>{this.getHexColors(t)})},100)})},async updateStatus(t){this.$emit("updateSaving",!0);const e=new FormData;e.append("status",t.step),e.append("label",document.getElementById("status_label_"+t.step).textContent),e.append("color",t.class),await h().post("index.php?option=com_emundus&controller=settings&task=updatestatus",e,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},async updateStatusOrder(){let t=[];this.status.forEach(e=>{t.push(e.step)}),this.$emit("updateSaving",!0);const e=new FormData;e.append("status",t.join(",")),await h().post("index.php?option=com_emundus&controller=settings&task=updatestatusorder",e,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},pushStatus(){this.$emit("updateSaving",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=createstatus",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.status.push(t.data),setTimeout(()=>{this.getHexColors(t.data)},100),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},removeStatus(t,e){1==statu.edit&&0!=statu.step&&1!=statu.step&&(this.$emit("updateSaving",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=deletestatus",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ao.stringify({id:t.id,step:t.step})}).then(()=>{this.status.splice(e,1),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))}))},getHexColors(t){t.translate=!1;let e=document.querySelector(".label-"+t.class),a=getComputedStyle(e),s=a.backgroundColor.split("(")[1].split(")")[0].split(",");t.class=this.rgbToHex(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]))},rgbToHex(t,e,a){return"#"+((1<<24)+(t<<16)+(e<<8)+a).toString(16).slice(1).toUpperCase()},enableGrab(t){1!==this.status.length&&(this.indexGrab=t,this.grab=!0)},disableGrab(){this.indexGrab=0,this.grab=!1}}},io=so,no=(a("0492"),Object(b["a"])(io,Qn,Zn,!1,null,"db35c3ae",null)),oo=no.exports,ro=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},[a("div",{staticClass:"em-grid-3 em-mb-16"},[a("button",{staticClass:"em-primary-button em-mb-24",staticStyle:{width:"max-content"},on:{click:t.pushTag}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus em-mr-4"}),t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_SETTINGS_ADDTAG"))+" ")])])]),t._l(t.tags,(function(e,s){return a("div",{key:"tag_"+e.id,staticClass:"em-mb-24",attrs:{id:"tag_"+e.id},on:{mouseover:function(e){return t.enableGrab(s)},mouseleave:function(e){return t.disableGrab()}}},[a("div",{staticClass:"em-flex-row em-flex-row-start em-w-100"},[a("div",{staticClass:"status-field"},[a("div",{staticStyle:{width:"100%"}},[a("p",{staticClass:"em-p-8-12 em-editable-content",attrs:{contenteditable:"true",id:"tag_label_"+e.id},on:{focusout:function(a){return t.updateTag(e)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.updateTag(e)}}},[t._v(t._s(e.label))])]),a("input",{class:e.class,attrs:{type:"hidden"}})]),a("div",{staticClass:"em-flex-row"},[a("v-swatches",{attrs:{swatches:t.swatches,shapes:"circles","row-length":"8","show-border":"","popover-x":"left","popover-y":"top"},on:{input:function(a){return t.updateTag(e)}},model:{value:e.class,callback:function(a){t.$set(e,"class",a)},expression:"tag.class"}}),a("a",{staticClass:"em-flex-row em-ml-8 em-pointer",attrs:{type:"button",title:t.translate("COM_EMUNDUS_ONBOARD_DELETE_TAGS")},on:{click:function(a){return t.removeTag(e,s)}}},[a("span",{staticClass:"material-icons em-red-500-color"},[t._v("delete_outline")])])],1)]),a("hr")])}))],2)])},lo=[];const co=a("bef5");var mo={name:"editTags",components:{VSwatches:eo.a,draggable:_a.a},props:{},mixins:[N],data(){return{index:"",indexGrab:"0",grab:0,loading:!1,tags:[],show:!1,actualLanguage:"",swatches:["#DCC6E0","#947CB0","#663399","#6BB9F0","#19B5FE","#013243","#7BEFB2","#3FC380","#1E824C","#FFFD7E","#FFFD54","#F7CA18","#FABE58","#E87E04","#D35400","#EC644B","#CF000F","#E5283B","#E08283","#D2527F","#DB0A5B","#999999"]}},created(){this.getTags(),this.actualLanguage=this.$store.getters["global/actualLanguage"]},methods:{getTags(){p.a.get("index.php?option=com_emundus&controller=settings&task=gettags").then(t=>{this.tags=t.data.data,setTimeout(()=>{this.tags.forEach(t=>{this.getHexColors(t)})},100)})},async updateTag(t){this.$emit("updateSaving",!0);const e=new FormData;e.append("tag",t.id),e.append("label",document.getElementById("tag_label_"+t.id).textContent),e.append("color",t.class),await h().post("index.php?option=com_emundus&controller=settings&task=updatetags",e,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},pushTag(){this.$emit("updateSaving",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=createtag",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.tags.push(t.data),setTimeout(()=>{this.getHexColors(t.data)},100),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},removeTag(t,e){this.$emit("updateSaving",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=deletetag",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:co.stringify({id:t.id})}).then(()=>{this.tags.splice(e,1),this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},getHexColors(t){let e=document.querySelector("."+t.class),a=getComputedStyle(e),s=a.backgroundColor.split("(")[1].split(")")[0].split(",");t.class=this.rgbToHex(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]))},rgbToHex(t,e,a){return"#"+((1<<24)+(t<<16)+(e<<8)+a).toString(16).slice(1).toUpperCase()},enableGrab(t){1!==this.tags.length&&(this.indexGrab=t,this.grab=!0)},disableGrab(){this.indexGrab=0,this.grab=!1}}},uo=mo,po=(a("a82b"),Object(b["a"])(uo,ro,lo,!1,null,"649f7ccb",null)),ho=po.exports,_o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-flex-column"},[a("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),a("ModalUpdateLogo",{on:{UpdateLogo:t.updateView}}),a("ModalUpdateIcon",{on:{UpdateIcon:t.updateIcon}}),a("ModalUpdateColors",{on:{UpdateColors:t.updateColors}}),a("div",{staticClass:"em-w-80",staticStyle:{display:"flex","flex-direction":"column"}},[a("div",{staticClass:"em-h-auto em-flex-row col-md-4 em-mb-32",staticStyle:{"align-items":"start"}},[a("div",{staticClass:"em-logo-box pointer",on:{click:function(e){return t.$modal.show("modalUpdateLogo")}}},[a("img",{staticClass:"logo-settings",attrs:{src:t.imageLink,srcset:"/"+t.imageLink,alt:t.InsertLogo}})]),a("div",{staticClass:"em-w-100 em-ml-24"},[a("div",{staticClass:"em-flex-row em-flex-space-between"},[a("h2",{staticStyle:{margin:"0"}},[t._v("Logo")]),a("a",{staticClass:"pointer em-main-500-color",on:{click:function(e){return t.$modal.show("modalUpdateLogo")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_MODIFY"))+" ")])])])]),a("div",{staticClass:"em-h-auto em-flex-row col-md-4 em-mb-32",staticStyle:{"align-items":"start"}},[a("div",{staticClass:"em-logo-box pointer",on:{click:function(e){return t.$modal.show("modalUpdateIcon")}}},[a("img",{staticClass:"logo-settings",attrs:{src:t.iconLink,srcset:"/"+t.iconLink,alt:t.InsertIcon}})]),a("div",{staticClass:"em-w-100 em-ml-24"},[a("div",{staticClass:"em-flex-row em-flex-space-between"},[a("h2",{staticStyle:{margin:"0"}},[t._v(t._s(t.Icon))]),a("a",{staticClass:"pointer em-main-500-color",on:{click:function(e){return t.$modal.show("modalUpdateIcon")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_MODIFY"))+" ")])])])]),a("div",{staticClass:"em-h-auto em-flex-row col-md-4 em-mb-32",staticStyle:{"align-items":"start"}},[a("div",{staticClass:"em-logo-box pointer",on:{click:function(e){return t.$modal.show("modalUpdateColors")}}},[a("div",{staticClass:"color-preset",style:"background-color:"+t.primary+";border-right: 25px solid"+t.secondary})]),a("div",{staticClass:"em-w-100 em-ml-24"},[a("div",{staticClass:"em-flex-row em-flex-space-between"},[a("h2",{staticStyle:{margin:"0"}},[t._v(t._s(t.Colors))]),a("a",{staticClass:"pointer em-main-500-color",on:{click:function(e){return t.$modal.show("modalUpdateColors")}}},[t._v(" "+t._s(t.translate("COM_EMUNDUS_ONBOARD_MODIFY"))+" ")])])])])])],1)},go=[],fo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalUpdateIcon"}},[a("modal",{attrs:{name:"modalUpdateIcon",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalUpdateIcon")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.updateIcon)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-thumbnail":t.thumbnail,"vdropzone-removed-file":t.afterRemoved,"vdropzone-complete":t.onComplete,"vdropzone-error":t.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[a("em",{staticClass:"fas fa-file-image"}),t._v(" "+t._s(t.DropHere)+" ")])])],1),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalUpdateIcon")}}},[t._v(" "+t._s(t.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.uploadNewLogo()}}},[t._v(" "+t._s(t.Continuer)+" ")])])])],1)},bo=[];a("bef5");const vo=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var Oo={name:"modalUpdateIcon",props:{},components:{vueDropzone:pa.a},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus&controller=settings&task=updateicon",maxFilesize:10,maxFiles:1,autoProcessQueue:!1,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,resizeMimeType:"image/png",acceptedFiles:"image/*",previewTemplate:vo(),dictCancelUpload:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:this.translate("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:this.translate("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:this.translate("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},updateIcon:this.translate("COM_EMUNDUS_ONBOARD_UPDATE_ICON"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:this.translate("COM_EMUNDUS_ONBOARD_DROP_HERE"),Error:this.translate("COM_EMUNDUS_ONBOARD_ERROR")}},methods:{beforeClose(t){},beforeOpen(t){},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(t){"success"==t.status&&(this.$emit("UpdateIcon",t.dataURL),this.$modal.hide("modalUpdateIcon"))},catchError:function(t,e,a){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),text:e,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(t)},thumbnail:function(t,e){var a,s,i,n;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),i=t.previewElement.querySelectorAll("[data-dz-thumbnail-bg]"),a=0,s=i.length;a<s;a++)n=i[a],n.alt=t.name,n.style.backgroundImage='url("'+e+'")';return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(),1)}},uploadNewLogo(){this.$refs.dropzone.processQueue()}}},Co=Oo,Eo=(a("7f72"),Object(b["a"])(Co,fo,bo,!1,null,"ecd2261a",null)),yo=Eo.exports,Do=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalUpdateLogo"}},[a("modal",{attrs:{name:"modalUpdateLogo",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose,"before-open":t.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalUpdateLogo")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.updateLogo)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:t.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":t.afterAdded,"vdropzone-thumbnail":t.thumbnail,"vdropzone-removed-file":t.afterRemoved,"vdropzone-complete":t.onComplete,"vdropzone-error":t.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[a("em",{staticClass:"fas fa-file-image"}),t._v(" "+t._s(t.DropHere)+" ")])])],1),a("div",{staticClass:"em-flex-row em-flex-space-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalUpdateLogo")}}},[t._v(" "+t._s(t.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.uploadNewLogo()}}},[t._v(" "+t._s(t.Continuer)+" ")])])])],1)},No=[];a("bef5");const Ao=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var Uo={name:"modalUpdateLogo",props:{},components:{vueDropzone:pa.a},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus&controller=settings&task=updatelogo",maxFilesize:10,maxFiles:1,autoProcessQueue:!1,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,resizeMimeType:"image/png",acceptedFiles:"image/*",previewTemplate:Ao(),dictCancelUpload:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:this.translate("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:this.translate("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:this.translate("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:this.translate("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},updateLogo:this.translate("COM_EMUNDUS_ONBOARD_UPDATE_LOGO"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:this.translate("COM_EMUNDUS_ONBOARD_DROP_HERE"),Error:this.translate("COM_EMUNDUS_ONBOARD_ERROR")}},methods:{beforeClose(t){},beforeOpen(t){},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(t){"success"==t.status&&(this.$emit("UpdateLogo",t.dataURL),this.$modal.hide("modalUpdateLogo"))},catchError:function(t,e,a){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_ERROR"),text:e,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(t)},thumbnail:function(t,e){var a,s,i,n;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),i=t.previewElement.querySelectorAll("[data-dz-thumbnail-bg]"),a=0,s=i.length;a<s;a++)n=i[a],n.alt=t.name,n.style.backgroundImage='url("'+e+'")';return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(),1)}},uploadNewLogo(){this.$refs.dropzone.processQueue()}}},Mo=Uo,wo=(a("e110"),Object(b["a"])(Mo,Do,No,!1,null,"9fa52e8c",null)),So=wo.exports,To=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"modalUpdateColors"}},[a("modal",{attrs:{name:"modalUpdateColors",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.$modal.hide("modalUpdateColors")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[t._v(" "+t._s(t.updateColors)+" ")])])]),a("div",{staticClass:"modalC-content"},t._l(t.presets,(function(e){return a("div",{staticClass:"preset-presentation",style:"background-color:"+e.primary+";border-right: 100px solid"+e.secondary,on:{click:function(a){return t.changeColors(e)}}})})),0)])],1)},xo=[];const Ro=a("bef5");var Lo={name:"modalUpdateColors",props:{},components:{},data(){return{presets:[{primary:"#1b1f3c",secondary:"#de6339"},{primary:"#DA3832",secondary:"#204382"},{primary:"#727378",secondary:"#A0BD51"},{primary:"#727378",secondary:"#000000"},{primary:"#000000",secondary:"#5AA6DC"},{primary:"#A0BD51",secondary:"#204382"}],updateColors:this.translate("COM_EMUNDUS_ONBOARD_UPDATE_COLORS"),Retour:this.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:this.translate("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Error:this.translate("COM_EMUNDUS_ONBOARD_ERROR")}},methods:{changeColors(t){p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=updatecolor",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ro.stringify({preset:t})}).then(e=>{this.$emit("UpdateColors",t),this.$modal.hide("modalUpdateColors")})}}},Bo=Lo,ko=(a("3054"),Object(b["a"])(Bo,To,xo,!1,null,"1548af99",null)),Io=ko.exports,jo={name:"EditStyle",components:{ModalUpdateColors:Io,ModalUpdateIcon:yo,ModalUpdateLogo:So,VSwatches:eo.a},props:{actualLanguage:String},data(){return{imageLink:"images/custom/logo_custom.png",iconLink:"images/custom/favicon.png",primary:"",secondary:"",swatches:["#DCC6E0","#947CB0","#663399","#6BB9F0","#19B5FE","#013243","#7BEFB2","#3FC380","#1E824C","#FFFD7E","#FFFD54","#F7CA18","#FABE58","#E87E04","#D35400","#EC644B","#CF000F","#E5283B","#E08283","#D2527F","#DB0A5B","#999999"],changes:!1,PrimaryColor:this.translate("COM_EMUNDUS_ONBOARD_PRIMARY_COLOR"),SecondaryColor:this.translate("COM_EMUNDUS_ONBOARD_SECONDARY_COLOR"),Colors:this.translate("COM_EMUNDUS_ONBOARD_COLORS"),Icon:this.translate("COM_EMUNDUS_ONBOARD_ICON"),InsertLogo:this.translate("COM_EMUNDUS_ONBOARD_INSERT_LOGO"),InsertIcon:this.translate("COM_EMUNDUS_ONBOARD_INSERT_ICON")}},methods:{updateView(t){this.imageLink="images/custom/logo_custom.png?"+(new Date).getTime(),this.$forceUpdate()},updateIcon(t){this.iconLink="images/custom/favicon.png?"+(new Date).getTime(),this.$forceUpdate()},updateColors(t){this.primary=t.primary,this.secondary=t.secondary},removeIcon(){j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_ICON"),text:this.translate("COM_EMUNDUS_ONBOARD_REMOVE_ICON_TEXT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#12db42",confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=removeicon",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(t=>{this.iconLink="",this.$forceUpdate()})})},imageExists(t,e){var a=new Image;a.onload=function(){e(!0)},a.onerror=function(){e(!1)},a.src=t},tip(){this.show("foo-velocity",this.translate("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),this.translate("COM_EMUNDUS_ONBOARD_COLOR_SUCCESS"))},show(t,e="",a="Information"){this.$notify({group:t,title:""+a,text:e,duration:3e3})},clean(t){this.$notify({group:t,clean:!0})}},created(){this.changes=!1,this.imageExists(this.imageLink,t=>{t||(this.imageLink="images/custom/logo.png")}),p()({method:"get",url:"index.php?option=com_emundus&controller=settings&task=getappcolors"}).then(t=>{this.primary=t.data.primary,this.secondary=t.data.secondary,setTimeout(()=>{this.changes=!0},1e3)})}},Po=jo,Fo=(a("5fd8"),Object(b["a"])(Po,_o,go,!1,null,"4af6314f",null)),$o=Fo.exports,Go=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"translationTool"}},[a("modal",{attrs:{name:"translationTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{opened:t.checkSetup,closed:t.beforeClose}},[a("div",{staticClass:"em-modal-header"},[a("div",{staticClass:"em-flex-space-between em-flex-row em-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("translationTool")}}},[a("div",{staticClass:"em-w-max-content em-flex-row"},[a("span",{staticClass:"material-icons-outlined"},[t._v("arrow_back")]),a("span",{staticClass:"em-ml-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?a("div",{staticClass:"em-flex-row em-flex-start"},[a("div",{staticClass:"em-loader em-mr-8"}),a("p",{staticClass:"em-font-size-14 em-flex-row"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():a("p",{staticClass:"em-font-size-14"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),a("div",{staticClass:"em-modal-content"},[a("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(e,s){return a("div",{key:"menu_"+e.index,staticClass:"translation-menu-item em-p-16 em-flex-row em-flex-space-between pointer",class:t.currentMenu===e.index?"em-modal-menu__current":"",on:{click:function(a){t.currentMenu=e.index}}},[a("p",{staticClass:"em-font-size-16"},[t._v(t._s(t.translate(e.title)))]),3===e.index&&t.orphelins_count>0?a("div",{staticClass:"em-notifications-yellow"}):t._e()])})),0),a("transition",{attrs:{name:"fade"}},[1===t.currentMenu?a("Global",{directives:[{name:"show",rawName:"v-show",value:!t.setup_success,expression:"!setup_success"}],staticClass:"em-modal-component",on:{updateOrphelinsCount:t.updateOrphelinsCount}}):t._e(),2===t.currentMenu?a("Translations",{directives:[{name:"show",rawName:"v-show",value:!t.setup_success,expression:"!setup_success"}],staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),3===t.currentMenu?a("Orphelins",{directives:[{name:"show",rawName:"v-show",value:!t.setup_success,expression:"!setup_success"}],staticClass:"em-modal-component"}):t._e()],1),t.setup_success?a("img",{staticClass:"em-success-animation",attrs:{alt:"checked-animation",src:"/images/emundus/animations/checked.gif"}}):t._e()],1),t.loading?a("div",[t.setup_success?t._e():a("div",{staticClass:"em-page-loader"}),t.setup_success?t._e():a("p",{staticClass:"em-page-loader-text"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SETUP_PROGRESSING")))]),t.setup_success?a("p",{staticClass:"em-page-loader-text em-fade-loader"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SETUP_SUCCESS")))]):t._e()]):t._e()])],1)},Ho=[],zo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_GLOBAL")))]),a("div",{staticClass:"em-mb-24 em-flex-row em-flex-space-between"},[a("div",[a("p",{staticClass:"em-body-16-semibold em-mb-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_DEFAULT")))]),a("p",{staticClass:"em-font-size-14"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_DEFAULT_DESC")))])]),a("div",{staticClass:"em-w-33"},[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.allLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!1},on:{select:t.updateDefaultLanguage},model:{value:t.defaultLang,callback:function(e){t.defaultLang=e},expression:"defaultLang"}})],1)]),a("div",{staticClass:"em-mb-24 em-flex-row em-flex-space-between"},[a("div",[a("p",{staticClass:"em-body-16-semibold em-mb-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SECONDARY")))]),a("p",{staticClass:"em-font-size-14"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SECONDARY_DESC")))])]),a("div",{staticClass:"em-w-33"},[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.otherLanguages,multiple:!0,taggable:!1,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!1,"clear-on-select":!1,searchable:!1},on:{remove:t.unpublishLanguage,select:t.publishLanguage},model:{value:t.secondaryLanguages,callback:function(e){t.secondaryLanguages=e},expression:"secondaryLanguages"}}),a("a",{staticClass:"em-pointer em-blue-500-color em-mt-16 em-font-size-12 em-hover-blue-500",on:{click:t.purposeLanguage}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_OTHER_LANGUAGE")))])],1)]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},Vo=[],qo=a("bef5"),Yo=a.n(qo),Jo={async checkSetup(){try{return await h().get("index.php?option=com_emundus&controller=translations&task=checksetup")}catch(t){return!1}},async configureSetup(){try{return await h().get("index.php?option=com_emundus&controller=translations&task=configuresetup")}catch(t){return!1}},async getAllLanguages(){try{const t=await h().get("index.php?option=com_emundus&controller=translations&task=getlanguages");return t.data}catch(t){return!1}},async getDefaultLanguage(){try{const t=await h().get("index.php?option=com_emundus&controller=translations&task=getdefaultlanguage");return t.data}catch(t){return!1}},async updateLanguage(t,e,a=0){try{const s=new FormData;return s.append("published",e),s.append("lang_code",t),s.append("default_lang",a),await h().post("index.php?option=com_emundus&controller=translations&task=updatelanguage",s,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){return{status:!1,msg:s.message}}},async getObjects(){try{return await h().get("index.php?option=com_emundus&controller=translations&task=gettranslationsobjects")}catch(t){return{status:!1,msg:t.message}}},async getDatas(t,e,a,s){try{return await h().get("index.php?option=com_emundus&controller=translations&task=getdatas",{params:{table:t,reference_id:e,label:a,filters:s}})}catch(i){return{status:!1,msg:i.message}}},async getChildrens(t,e,a){try{return await h().get("index.php?option=com_emundus&controller=translations&task=getchildrens",{params:{table:t,reference_id:e,label:a}})}catch(s){return{status:!1,msg:s.message}}},async getTranslations(t,e,a,s="",i="",n=""){switch(t){case"falang":try{return await h().get("index.php?option=com_emundus&controller=translations&task=getfalangtranslations",{params:{default_lang:e,lang_to:a,reference_table:n,reference_id:s,fields:i}})}catch(o){return{status:!1,msg:o.message}}break;case"override":let t={default_lang:e,lang_to:a,reference_table:n,reference_id:s,fields:i},r=p.a.create({paramsSerializer:t=>Yo.a.stringify(t)});try{return await r.get("index.php?option=com_emundus&controller=translations&task=gettranslations",{params:t})}catch(o){return{status:!1,msg:o.message}}break;default:}},async updateTranslations(t,e,a,s,i,n){switch(e){case"falang":try{const e=new FormData;return e.append("value",t),e.append("lang_to",a),e.append("field",i),e.append("reference_table",n),e.append("reference_id",s),await h().post("index.php?option=com_emundus&controller=translations&task=updatefalangtranslation",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){return{status:!1,msg:o.message}}break;case"override":try{const e=new FormData;return e.append("value",t),e.append("lang_to",a),e.append("tag",i),e.append("reference_table",n),e.append("reference_id",s),await h().post("index.php?option=com_emundus&controller=translations&task=updatetranslation",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){return{status:!1,msg:o.message}}break;default:}},async insertTranslation(t,e,a,s,i,n){switch(e){case"override":try{const e=new FormData;return e.append("value",t),e.append("lang_to",a),e.append("tag",i),e.append("reference_table",n),e.append("reference_id",s),await h().post("index.php?option=com_emundus&controller=translations&task=inserttranslation",e,{headers:{"Content-Type":"multipart/form-data"}})}catch(o){return{status:!1,msg:o.message}}break;default:}},async getOrphelins(t,e){try{return await h().get("index.php?option=com_emundus&controller=translations&task=getorphelins",{params:{default_lang:t,lang_to:e}})}catch(a){return{status:!1,msg:a.message}}},async sendMailToInstallLanguage(t,e=""){try{const a=new FormData;return a.append("suggest_language",t),a.append("comment",e),await h().post("index.php?option=com_emundus&controller=translations&task=sendpurposenewlanguage",a,{headers:{"Content-Type":"multipart/form-data"}})}catch(a){return{status:!1,msg:a.message}}}},Wo={name:"global",props:{},components:{Multiselect:Ve.a},data(){return{defaultLang:null,secondaryLanguages:[],allLanguages:[],otherLanguages:[],orphelins_count:0,loading:!1}},created(){this.loading=!0,Jo.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages(),this.loading=!1})},methods:{async getAllLanguages(){try{const t=await h().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=t.data,this.allLanguages.forEach(t=>{t.lang_code!==this.defaultLang.lang_code&&(1==t.published&&this.secondaryLanguages.push(t),this.otherLanguages.push(t))}),this.secondaryLanguages.forEach(t=>{Jo.getOrphelins(this.defaultLang.lang_code,t.lang_code).then(t=>{this.orphelins_count=t.data.length,this.$emit("updateOrphelinsCount",this.orphelins_count)})})}catch(t){return!1}},unpublishLanguage(t){Jo.updateLanguage(t.lang_code,0)},publishLanguage(t){Jo.updateLanguage(t.lang_code,1)},updateDefaultLanguage(t){Jo.updateLanguage(t.lang_code,1,1).then(()=>{let e=this.secondaryLanguages.findIndex(e=>e.lang_code==t.lang_code);-1!==e&&this.secondaryLanguages.splice(e,1),this.getAllLanguages()})},async purposeLanguage(){const{value:t}=await j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE"),html:'<p class="em-body-16-semibold em-mb-8 em-text-align-left">'+this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_FIELD")+'</p><input id="language_purpose" class="em-input">',showCancelButton:!0,cancelButtonText:this.translate("COM_EMUNDUS_ONBOARD_CANCEL"),confirmButtonText:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_SEND"),showLoaderOnConfirm:!0,reverseButtons:!0,customClass:{title:"em-swal-title",cancelButton:"em-swal-cancel-button",confirmButton:"em-swal-confirm-button"},preConfirm:()=>{const t=document.getElementById("language_purpose").value;return Jo.sendMailToInstallLanguage(t)},allowOutsideClick:()=>!j.a.isLoading()});t&&await j.a.fire({title:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_SENDED"),text:this.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SUGGEST_LANGUAGE_SENDED_TEXT"),showCancelButton:!1,showConfirmButton:!1,timer:3e3,customClass:{title:"em-swal-title"}})}}},Xo=Wo,Ko=Object(b["a"])(Xo,zo,Vo,!1,null,"1d9727d8",null),Qo=Ko.exports,Zo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"em-h4 em-mb-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS")))]),a("p",{staticClass:"em-font-size-14 em-mb-24 em-h-25"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE")))]),a("div",{staticClass:"em-grid-4"},[a("div",[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.availableLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_LANGUAGE"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},on:{select:t.getObjects},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}})],1),t.lang?a("div",[a("multiselect",{attrs:{label:"name","track-by":"name",options:t.objects,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_OBJECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.object,callback:function(e){t.object=e},expression:"object"}})],1):t._e(),t.object?a("div",[a("multiselect",{attrs:{label:"label","track-by":"id",options:t.datas,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.data,callback:function(e){t.data=e},expression:"data"}})],1):t._e(),t.childrens.length>0?a("div",[a("multiselect",{attrs:{label:"label","track-by":"id",options:t.childrens,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.children,callback:function(e){t.children=e},expression:"children"}})],1):t._e()]),a("hr",{staticClass:"col-md-12",staticStyle:{"z-index":"0"}}),a("div",{staticClass:"col-md-12"},[""===t.lang||null==t.lang||""===t.object||null==t.object||!1===t.init_translations?a("div",{staticClass:"text-center em-mt-80"},[a("p",{staticClass:"em-h5 em-mb-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_TRANSLATION_TITLE")))]),a("p",{staticClass:"em-font-size-14 em-text-neutral-600"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_TRANSLATION_TEXT")))])]):a("div",t._l(t.object.fields.Sections,(function(e){return a("div",{staticClass:"em-mb-32"},[a("h4",[t._v(t._s(e.Label))]),a("TranslationRow",{attrs:{section:e,translations:t.translations},on:{saveTranslation:t.saveTranslation}})],1)})),0)]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},tr=[],er=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",t._l(t.translations_rows,(function(e){return a("div",{staticClass:"em-mb-32 em-neutral-100-box em-p-24"},t._l(e,(function(e,s){return a("div",{staticClass:"em-mb-24"},[a("p",[t._v(t._s(e.reference_label.toUpperCase()))]),a("div",{staticClass:"em-flex-space-between em-mt-16 em-grid-50 em-ml-24"},[a("p",{staticClass:"em-neutral-700-color"},[t._v(t._s(e.default_lang))]),"field"===e.field_type?a("input",{staticClass:"mb-0 em-input",attrs:{type:"text"},domProps:{value:e.lang_to},on:{focusout:function(a){return t.saveTranslation(a.target.value,e)}}}):t._e(),"textarea"===e.field_type?a("textarea",{staticClass:"mb-0 em-input",domProps:{value:e.lang_to},on:{focusout:function(a){return t.saveTranslation(a.target.value,e)}}}):t._e()])])})),0)})),0)},ar=[],sr={name:"TranslationRow",components:{Multiselect:Ve.a},mixins:[N],props:{section:Object,translations:Array},data(){return{translations_rows:{},key_fields:[]}},created(){this.initTranslations()},methods:{initTranslations(){this.key_fields=Object.keys(this.$props.section.indexedFields),Object.values(this.$props.translations).forEach(t=>{Object.values(t).forEach(t=>{this.key_fields.includes(t.reference_field)&&t.reference_table===this.$props.section.Name&&(t.reference_field_order=this.key_fields.indexOf(t.reference_field),t.reference_label=this.$props.section.indexedFields[t.reference_field].Label,t.field_type=this.$props.section.indexedFields[t.reference_field].Type,t.hasOwnProperty("tag")||(t.tag=t.reference_field),this.translations_rows.hasOwnProperty(t.reference_id)||(this.translations_rows[t.reference_id]=[]),this.translations_rows[t.reference_id].push(t))})}),Object.values(this.translations_rows).forEach(t=>{t.sort((t,e)=>t.reference_field_order>e.reference_field_order?1:-1)})},async saveTranslation(t,e){this.$emit("saveTranslation",{value:t,translation:e})}}},ir=sr,nr=Object(b["a"])(ir,er,ar,!1,null,"01f1c4ea",null),or=nr.exports,rr={name:"Translations",components:{TranslationRow:or,Multiselect:Ve.a},mixins:[N],data(){return{defaultLang:null,availableLanguages:[],objects:[],datas:[],childrens:[],translations:{},lang:null,object:null,data:null,children_type:null,children:null,loading:!1,init_translations:!1}},created(){this.loading=!0,Jo.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages(),this.loading=!1})},methods:{async getAllLanguages(){try{const t=await h().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=t.data,this.allLanguages.forEach(t=>{t.lang_code!==this.defaultLang.lang_code&&1==t.published&&this.availableLanguages.push(t)})}catch(t){return!1}},async getObjects(){this.loading=!0,this.translations=[],this.childrens=[],this.datas=[],this.objects=[],this.object=null,this.data=null,this.children=null,Jo.getObjects().then(t=>{this.objects=t.data,this.loading=!1})},async getDatas(t){this.loading=!0,Jo.getDatas(t.table.name,t.table.reference,t.table.label,t.table.filters).then(async e=>{if(this.datas=e.data,"true"===t.table.load_all){let t=[];await this.asyncForEach(this.object.fields.Fields,async e=>{t.push(e.Name)}),t=t.join(",");const e=async()=>{for(const e of this.datas)await Jo.getTranslations(this.object.table.type,this.defaultLang.lang_code,this.lang.lang_code,e.id,t,this.object.table.name).then(async t=>{for(const a of Object.values(t.data))this.translations[e.id]={},this.object.fields.Fields.forEach(t=>{this.translations[e.id][t.Name]=a[t.Name]})});this.init_translations=!0,this.loading=!1};await e()}else this.loading=!1})},async getTranslations(t){let e=[];this.object.fields.Fields.forEach(t=>{e.push(t.Name)}),e=e.join(","),Jo.getTranslations(this.object.table.type,this.defaultLang.lang_code,this.lang.lang_code,t.id,e,this.object.table.name).then(t=>{this.translations=t.data,this.init_translations=!0,this.loading=!1})},async saveTranslation({value:t,translation:e}){this.$emit("updateSaving",!0),Jo.updateTranslations(t,this.object.table.type,this.lang.lang_code,e.reference_id,e.tag,e.reference_table).then(t=>{this.$emit("updateLastSaving",this.formattedDate("","LT")),this.$emit("updateSaving",!1)})}},watch:{object:function(t){this.init_translations=!1,this.translations={},this.childrens=[],this.children=null,this.datas=[],this.data=null,null!=t&&this.getDatas(t)},data:function(t){this.loading=!0,this.init_translations=!1,this.translations={},this.childrens=[],this.children=null,this.children_type=null;var e=!1;null!=t?(this.object.fields.Fields.forEach(t=>{"children"===t.Type&&(this.children_type=t.Label,e=!0,Jo.getChildrens(t.Label,this.data.id,t.Name).then(t=>{this.childrens=t.data,this.loading=!1}))}),e||this.getTranslations(t)):this.getDatas(this.object)},children:function(t){if(this.loading=!0,this.init_translations=!1,this.translations={},null!=t){let e=[];this.object.fields.Sections.forEach(t=>{const a={table:t.Table,join_table:t.TableJoin,join_column:t.TableJoinColumn,reference_column:t.ReferenceColumn,fields:Object.keys(t.indexedFields)};e.push(a)}),Jo.getTranslations(this.object.table.type,this.defaultLang.lang_code,this.lang.lang_code,t.id,"",e).then(t=>{this.translations=t.data,this.init_translations=!0,this.loading=!1})}else this.loading=!1}}},lr=rr,dr=Object(b["a"])(lr,Zo,tr,!1,null,"454b049f",null),cr=dr.exports,mr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h2",{staticClass:"em-h4 em-mb-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHELINS")))]),t.saving||null!=t.last_save?t._e():a("p",{staticClass:"em-font-size-14 em-mb-24 em-h-25"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE")))]),t.saving?a("div",{staticClass:"em-mb-24 em-flex-row em-flex-start"},[a("div",{staticClass:"em-loader em-mr-8"}),a("p",{staticClass:"em-font-size-14 em-flex-row"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():a("p",{staticClass:"em-font-size-14 em-mb-24 em-h-25"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))]),a("div",{staticClass:"em-grid-4"},[a("div",[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.availableLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_LANGUAGE"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}})],1)]),a("hr",{staticClass:"col-md-12",staticStyle:{"z-index":"0"}}),a("div",{staticClass:"col-md-12"},[""===t.lang||null==t.lang||0===t.translations.length?a("div",{staticClass:"text-center em-mt-80"},[a("p",{staticClass:"em-h5 em-mb-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_ORPHELINS_TITLE")))]),""===t.lang||null==t.lang?a("p",{staticClass:"em-font-size-14 em-text-neutral-600"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_ORPHELINS_TEXT")))]):t._e()]):a("div",t._l(t.translations,(function(e,s){return a("div",{key:s},[a("div",{staticClass:"em-mb-32 em-neutral-100-box em-p-24"},[a("div",{staticClass:"em-flex-space-between em-mt-16 em-grid-50"},[a("p",{staticClass:"em-neutral-700-color"},[t._v(t._s(e.override))]),a("div",[a("input",{staticClass:"mb-0 em-input",attrs:{type:"text"},domProps:{value:e.override},on:{focusout:function(a){return t.saveTranslation(a.target.value,e,s)}}}),a("a",{staticClass:"em-pointer em-blue-500-color em-mt-16 em-font-size-12 em-hover-blue-500",on:{click:function(a){return t.saveTranslation(e.override,e,s)}}},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHELIN_CONFIRM_TRANSLATION")))])])])])])})),0)]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},ur=[],pr={name:"Orphelins",components:{Multiselect:Ve.a},mixins:[N],data(){return{defaultLang:null,availableLanguages:[],translations:[],lang:null,loading:!1,saving:!1,last_save:null}},created(){this.loading=!0,Jo.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages(),this.loading=!1})},methods:{async getAllLanguages(){try{const t=await h().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=t.data,this.allLanguages.forEach(t=>{t.lang_code!==this.defaultLang.lang_code&&1==t.published&&this.availableLanguages.push(t)})}catch(t){return!1}},async saveTranslation(t,e,a){this.saving=!0,Jo.insertTranslation(t,"override",this.lang.lang_code,e.reference_id,e.tag,e.reference_table).then(t=>{this.last_save=this.formattedDate("","LT"),this.saving=!1,this.translations.splice(a,1)})}},watch:{lang:function(t){null!==t&&void 0!==typeof t&&(this.loading=!0,this.translations=[],Jo.getOrphelins(this.defaultLang.lang_code,t.lang_code).then(t=>{this.translations=t.data,this.loading=!1}))}}},hr=pr,_r=Object(b["a"])(hr,mr,ur,!1,null,"6c28ef61",null),gr=_r.exports,fr={name:"translationTool",props:{},components:{Orphelins:gr,Translations:cr,Global:Qo},data(){return{orphelins_count:0,currentMenu:0,menus:[{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_GLOBAL",index:1},{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS",index:2},{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHELINS",index:3}],loading:!1,setup_success:!1,saving:!1,last_save:null}},methods:{beforeClose(t){this.$emit("resetMenuIndex")},updateOrphelinsCount(t){this.orphelins_count=t},checkSetup(){Jo.checkSetup().then(t=>{0===t.data?(this.loading=!0,Jo.configureSetup().then(t=>{1===t.data&&(this.loading=!1,this.setup_success=!0,this.currentMenu=1,setTimeout(()=>{this.setup_success=!1},2700))})):this.currentMenu=1})},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t}}},br=fr,vr=Object(b["a"])(br,Go,Ho,!1,null,"44ee664e",null),Or=vr.exports,Cr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"contentTool"}},[a("modal",{attrs:{name:"contentTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose}},[a("div",{staticClass:"em-modal-header"},[a("div",{staticClass:"em-flex-space-between em-flex-row em-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("contentTool")}}},[a("div",{staticClass:"em-w-max-content em-flex-row"},[a("span",{staticClass:"material-icons-outlined"},[t._v("arrow_back")]),a("span",{staticClass:"em-ml-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?a("div",{staticClass:"em-flex-row em-flex-start"},[a("div",{staticClass:"em-loader em-mr-8"}),a("p",{staticClass:"em-font-size-14 em-flex-row"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():a("p",{staticClass:"em-font-size-14"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),a("div",{staticClass:"em-modal-content"},[a("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(e){return a("div",{key:"menu_"+e.index,staticClass:"translation-menu-item em-p-16 em-flex-row em-flex-space-between pointer",class:t.currentMenu===e.index?"em-modal-menu__current":"",on:{click:function(a){t.currentMenu=e.index}}},[a("p",{staticClass:"em-font-size-16"},[t._v(t._s(t.translate(e.title)))])])})),0),a("transition",{attrs:{name:"fade"}},["article"===t.selectedMenu.type?a("EditArticle",{key:t.currentMenu,staticClass:"em-modal-component",attrs:{article_id:t.selectedMenu.id,article_alias:t.selectedMenu.alias},on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):"footer"===t.selectedMenu.type?a("EditFooter",{staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e()],1)],1),t.loading?a("div"):t._e()])],1)},Er=[],yr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},[a("div",{staticClass:"em-grid-3 em-mb-16"},[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:t.availableLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_LANGUAGE"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!1},model:{value:t.lang,callback:function(e){t.lang=e},expression:"lang"}})],1),a("div",{staticClass:"form-group controls"},[a("editor",{key:t.dynamicComponent,attrs:{height:"30em",text:t.form.content,lang:t.actualLanguage,enable_variables:!1,id:"editor"},on:{focusout:t.saveContent},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},Dr=[],Nr={name:"editArticle",components:{Editor:De,Multiselect:Ve.a},props:{actualLanguage:{type:String,default:"fr"},article_alias:{type:String,default:null},article_id:{type:Number,default:0}},mixins:[N],data(){return{defaultLang:null,availableLanguages:[],lang:null,loading:!1,dynamicComponent:0,form:{content:""}}},created(){this.loading=!0,Jo.getDefaultLanguage().then(t=>{this.defaultLang=t,this.getAllLanguages(),this.loading=!1})},methods:{async getArticle(){let t={article_id:this.$props.article_id,lang:this.lang.lang_code,field:"introtext"};null!==this.$props.article_alias&&(t={article_alias:this.$props.article_alias,lang:this.lang.lang_code,field:"introtext"}),await h().get("index.php?option=com_emundus&controller=settings&task=getarticle",{params:t}).then(t=>{this.form.content=t.data.data.introtext,this.dynamicComponent++})},async saveContent(){this.$emit("updateSaving",!0);const t=new FormData;t.append("content",this.form.content),t.append("lang",this.lang.lang_code),null!==this.$props.article_alias?t.append("article_alias",this.$props.article_alias):t.append("article_id",this.$props.article_id),t.append("field","introtext"),await h().post("index.php?option=com_emundus&controller=settings&task=updatearticle",t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})},async getAllLanguages(){await Jo.getAllLanguages().then(t=>{this.availableLanguages=t,this.lang=this.defaultLang})}},watch:{lang:function(){null!==this.lang?this.getArticle():(this.form.content="",this.dynamicComponent++)}}},Ar=Nr,Ur=Object(b["a"])(Ar,yr,Dr,!1,null,"18e80cea",null),Mr=Ur.exports,wr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},[a("div",{staticClass:"em-grid-3 em-mb-16"},[a("multiselect",{attrs:{label:"label","track-by":"index",options:t.columns,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_COLUMN"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:t.selectedColumn,callback:function(e){t.selectedColumn=e},expression:"selectedColumn"}})],1),0===t.selectedColumn.index&&null!=this.form.content.col1?a("div",{staticClass:"form-group controls"},[a("editor",{key:t.dynamicComponent,attrs:{height:"30em",text:t.form.content.col1,lang:t.actualLanguage,enable_variables:!1,id:"editor_1"},on:{focusout:t.saveFooter},model:{value:t.form.content.col1,callback:function(e){t.$set(t.form.content,"col1",e)},expression:"form.content.col1"}})],1):t._e(),1===t.selectedColumn.index&&null!=this.form.content.col2?a("div",{staticClass:"form-group controls"},[a("editor",{key:t.dynamicComponent,attrs:{height:"30em",text:t.form.content.col2,lang:t.actualLanguage,enable_variables:!1,id:"editor_2"},on:{focusout:t.saveFooter},model:{value:t.form.content.col2,callback:function(e){t.$set(t.form.content,"col2",e)},expression:"form.content.col2"}})],1):t._e()]),t.loading?a("div",{staticClass:"em-page-loader"}):t._e()])},Sr=[],Tr={name:"EditFooter",components:{Editor:De,Multiselect:Ve.a},props:{actualLanguage:String},mixins:[N],data(){return{loading:!1,dynamicComponent:0,selectedColumn:0,form:{content:{col1:null,col2:null}},columns:[{index:0,label:this.translate("COM_EMUNDUS_ONBOARD_COLUMN")+" 1"},{index:1,label:this.translate("COM_EMUNDUS_ONBOARD_COLUMN")+" 2"}]}},created(){this.loading=!0,this.getArticles(),this.selectedColumn=this.columns[0]},methods:{async getArticles(){await h().get("index.php?option=com_emundus&controller=settings&task=getfooterarticles").then(t=>{this.form.content.col1=t.data.data.column1,this.form.content.col2=t.data.data.column2,this.loading=!1})},async saveFooter(){this.$emit("updateSaving",!0);const t=new FormData;t.append("col1",this.form.content.col1),t.append("col2",this.form.content.col2),await h().post("index.php?option=com_emundus&controller=settings&task=updatefooter",t,{headers:{"Content-Type":"multipart/form-data"}}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})}},watch:{selectedColumn:function(){this.dynamicComponent++}}},xr=Tr,Rr=Object(b["a"])(xr,wr,Sr,!1,null,"73ecf13c",null),Lr=Rr.exports,Br={name:"contentTool",props:{},components:{EditFooter:Lr,EditArticle:Mr},data(){return{currentMenu:1,menus:[{type:"article",id:52,alias:null,title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_HOMEPAGE",index:1},{type:"article",alias:"mentions-legales",title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_LEGAL_MENTION",index:2},{type:"article",alias:"politique-de-confidentialite-des-donnees",title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_DATAS",index:3},{type:"article",alias:"gestion-de-vos-droits",title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_RIGHTS",index:4},{type:"article",alias:"gestion-des-cookies",title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_COOKIES",index:5},{type:"footer",title:"COM_EMUNDUS_ONBOARD_CONTENT_TOOL_FOOTER",index:6}],loading:!1,saving:!1,last_save:null}},methods:{beforeClose(t){this.$emit("resetMenuIndex")},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t}},computed:{selectedMenu(){return this.menus.find(t=>t.index===this.currentMenu)}}},kr=Br,Ir=Object(b["a"])(kr,Cr,Er,!1,null,"6b163f9a",null),jr=Ir.exports,Pr=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",{attrs:{id:"filesTool"}},[a("modal",{attrs:{name:"filesTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{closed:t.beforeClose}},[a("div",{staticClass:"em-modal-header"},[a("div",{staticClass:"em-flex-space-between em-flex-row em-pointer",on:{click:function(e){return e.preventDefault(),t.$modal.hide("filesTool")}}},[a("div",{staticClass:"em-w-max-content em-flex-row"},[a("span",{staticClass:"material-icons-outlined"},[t._v("arrow_back")]),a("span",{staticClass:"em-ml-8"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]),t.saving?a("div",{staticClass:"em-flex-row em-flex-start"},[a("div",{staticClass:"em-loader em-mr-8"}),a("p",{staticClass:"em-font-size-14 em-flex-row"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))])]):t._e(),t.saving||null==t.last_save?t._e():a("p",{staticClass:"em-font-size-14"},[t._v(t._s(t.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+t.last_save))])])]),a("div",{staticClass:"em-modal-content"},[a("div",{staticClass:"em-modal-menu__sidebar"},t._l(t.menus,(function(e){return a("div",{key:"menu_"+e.index,staticClass:"translation-menu-item em-p-16 em-flex-row em-flex-space-between pointer",class:t.currentMenu===e.index?"em-modal-menu__current":"",on:{click:function(a){t.currentMenu=e.index}}},[a("p",{staticClass:"em-font-size-16"},[t._v(t._s(t.translate(e.title)))])])})),0),a("transition",{attrs:{name:"fade"}},[1===t.currentMenu?a("EditStatus",{key:t.currentMenu,staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),2===t.currentMenu?a("EditTags",{key:t.currentMenu,staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e(),3===t.currentMenu?a("EditApplicants",{key:t.currentMenu,staticClass:"em-modal-component",on:{updateSaving:t.updateSaving,updateLastSaving:t.updateLastSaving}}):t._e()],1)],1),t.loading?a("div"):t._e()])],1)},Fr=[],$r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},t._l(t.params,(function(e,s){return a("div",{key:s,staticClass:"form-group em-flex-center em-w-100"},[a("label",{attrs:{for:"param_"+s}},[t._v(t._s(e.label))]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"param.value"}],staticClass:"dropdown-toggle w-select",staticStyle:{"margin-bottom":"0"},attrs:{id:"param_"+s},on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(e,"value",a.target.multiple?s:s[0])},function(a){return t.saveEmundusParam(e)}]}},t._l(e.options,(function(e){return a("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.label))])})),0)])})),0)])},Gr=[];const Hr=a("bef5");var zr={name:"EditApplicants",components:{},props:{},mixins:[N],data(){return{params:{applicant_can_renew:{label:this.translate("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_RENEW"),param:"applicant_can_renew",options:[{label:this.translate("JNO"),value:0},{label:this.translate("JYES"),value:1},{label:this.translate("COM_EMUNDUS_APPLICANT_CAN_RENEW_CAMPAIGN"),value:2},{label:this.translate("COM_EMUNDUS_APPLICANT_CAN_RENEW_YEAR"),value:3}],value:0},can_edit_until_deadline:{label:this.translate("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_EDIT_UNTIL_DEADLINE"),param:"can_edit_until_deadline",options:[{label:this.translate("JNO"),value:0},{label:this.translate("JYES"),value:1}],value:0},copy_application_form:{label:this.translate("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_COPY_APPLICATION_FORM"),param:"copy_application_form",options:[{label:this.translate("JNO"),value:0},{label:this.translate("JYES"),value:1}],value:0},can_submit_encrypted:{label:this.translate("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_SUBMIT_ENCRYPTED"),param:"can_submit_encrypted",options:[{label:this.translate("JNO"),value:0},{label:this.translate("JYES"),value:1}],value:0}},config:{}}},created(){this.getEmundusParams()},methods:{getEmundusParams(){p.a.get("index.php?option=com_emundus&controller=settings&task=getemundusparams").then(t=>{this.config=t.data.config,this.params.applicant_can_renew.value=parseInt(this.config.applicant_can_renew),this.params.can_edit_until_deadline.value=parseInt(this.config.can_edit_until_deadline),this.params.copy_application_form.value=parseInt(this.config.copy_application_form),this.params.can_submit_encrypted.value=parseInt(this.config.can_submit_encrypted)})},saveEmundusParam(t){this.$emit("updateSaving",!0),p()({method:"post",url:"index.php?option=com_emundus&controller=settings&task=updateemundusparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Hr.stringify({param:t.param,value:t.value})}).then(()=>{this.$emit("updateSaving",!1),this.$emit("updateLastSaving",this.formattedDate("","LT"))})}}},Vr=zr,qr=(a("4bce"),Object(b["a"])(Vr,$r,Gr,!1,null,"2e2c9870",null)),Yr=qr.exports,Jr={name:"filesTool",props:{},components:{EditApplicants:Yr,EditTags:ho,EditStatus:oo},data(){return{currentMenu:1,menus:[{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STATUS",index:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TAGS",index:2},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_APPLICANTS",index:3}],loading:!1,saving:!1,last_save:null}},methods:{beforeClose(t){this.$emit("resetMenuIndex")},updateSaving(t){this.saving=t},updateLastSaving(t){this.last_save=t}}},Wr=Jr,Xr=Object(b["a"])(Wr,Pr,Fr,!1,null,"b6a08bca",null),Kr=Xr.exports;a("bef5");var Qr={name:"globalSettings",components:{FilesTool:Kr,ContentTool:jr,TranslationTool:Or,EditStatus:oo,EditTags:ho,EditStyle:$o},props:{actualLanguage:String,coordinatorAccess:Number,manyLanguages:Number},data:()=>({menuHighlight:0,currentTitle:"",langue:0,saving:!1,endSaving:!1,menus:[{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STYLE",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STYLE_DESC",icon:"style",index:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_CONTENT",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_CONTENT_DESC",icon:"notes",index:2},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_FILES_TOOL",description:"COM_EMUNDUS_ONBOARD_SETTINGS_FILES_TOOL_DESC",icon:"source",index:3},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TRANSLATIONS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TRANSLATIONS_DESC",icon:"language",index:9}],modal_ready:!1}),created(){"en"==this.actualLanguage&&(this.langue=1)},methods:{},watch:{menuHighlight:function(t){this.modal_ready=!1,setTimeout(()=>{switch(t){case 2:this.$modal.show("contentTool"),this.modal_ready=!0;break;case 3:this.$modal.show("filesTool"),this.modal_ready=!0;break;case 9:this.$modal.show("translationTool"),this.modal_ready=!0;break;default:break}},500)}}},Zr=Qr,tl=Object(b["a"])(Zr,Xn,Kn,!1,null,"0fb76518",null),el=tl.exports,al={props:{component:String,datas:Object,actualLanguage:String,manyLanguages:String,coordinatorAccess:String,componentName:{type:String,required:!0},data:{type:Object,default:{}}},components:{Attachments:G,list:ce,addcampaign:$e,addformnextcampaign:Pi,addemail:ea,formbuilder:Gn,evaluationbuilder:Wn,settings:el},created(){"undefined"!=typeof this.$props.datas&&this.$store.commit("global/initDatas",this.$props.datas),"undefined"!=typeof this.$props.actualLanguage&&this.$store.commit("global/initCurrentLanguage",this.$props.actualLanguage),"undefined"!=typeof this.$props.manyLanguages&&this.$store.commit("global/initManyLanguages",this.$props.manyLanguages),"undefined"!=typeof this.$props.coordinatorAccess&&this.$store.commit("global/initCoordinatorAccess",this.$props.coordinatorAccess)},mounted(){this.data.lang?this.$store.dispatch("global/setLang",this.data.lang.split("-")[0]):this.$store.dispatch("global/setLang","fr"),r.a.locale(this.$store.state.global.lang),this.data.base&&this.$store.dispatch("attachment/setAttachmentPath",this.data.base+"/images/emundus/files/")}},sl=al,il=(a("5c0b"),Object(b["a"])(sl,i,n,!1,null,null,null)),nl=il.exports,ol=a("209f"),rl=a.n(ol),ll=a("3332"),dl=a("4859"),cl=(a("9e26"),a("c2ca")),ml=a("66d6"),ul=a.n(ml),pl=a("6db0"),hl=a.n(pl),_l=a("7cdb"),gl={beforeMount(){null!==this.translations&&"undefined"!==typeof this.translations&&Object.entries(this.translations).forEach(([t,e])=>{this.translations[t]=this.translate(e)})},methods:{translate(t){return void 0!=typeof t&&null!=t?Joomla.JText._(t)?Joomla.JText._(t):t:""}}};const fl={users:{},currentUser:0,displayedUser:0,rights:{}},bl={},vl={setUsers({commit:t},e){t("setUser",e)},setCurrentUser({commit:t},e){t("setCurrentUser",e)},setDisplayedUser({commit:t},e){t("setDisplayedUser",e)},setAccessRights({commit:t},e){t("setAccessRights",e)}},Ol={setUser(t,e){e&&e.length>0&&e.forEach(e=>{t.users[e.user_id]=e})},setCurrentUser(t,e){t.currentUser=e},setDisplayedUser(t,e){t.displayedUser=e},setAccessRights(t,e){t.rights[e.fnum]=e.rights}};var Cl={namespaced:!0,state:fl,getters:bl,actions:vl,mutations:Ol};const El={attachmentPath:"images/emundus/files/",attachments:{},selectedAttachment:{},previews:{},categories:{},checkedAttachments:[]},yl={},Dl={setAttachments({commit:t},e){t("setAttachments",e)},setAttachmentsOfFnum({commit:t},e){t("setAttachmentsOfFnum",e)},updateAttachmentOfFnum({commit:t},e){t("updateAttachmentOfFnum",e)},setSelectedAttachment({commit:t},e){t("setSelectedAttachment",e)},setPreview({commit:t},e){t("setPreview",e)},setCategories({commit:t},e){t("setCategories",e)},setAttachmentPath({commit:t},e){t("setAttachmentPath",e)},setCheckedAttachments({commit:t},e){t("setCheckedAttachments",e)}},Nl={setAttachments(t,e){t.attachments=e},setAttachmentsOfFnum(t,e){t.attachments[e.fnum]=e.attachments},updateAttachmentOfFnum(t,e){const a=t.attachments[e.fnum].findIndex(t=>t.aid===e.attachment.aid);t.attachments[e.fnum][a]=e.attachment},setSelectedAttachment(t,e){t.selectedAttachment=e},setPreview(t,e){t.previews[e.id]=e.preview},setCategories(t,e){t.categories=e},setAttachmentPath(t,e){t.attachmentPath=e},setCheckedAttachments(t,e){t.checkedAttachments=e}};var Al={namespaced:!0,state:El,getters:yl,actions:Dl,mutations:Nl};const Ul={list:[],selectedItems:[],formsAccess:[]},Ml={list:t=>t.list,formsAccess:t=>t.formsAccess,selectedItems:t=>t.selectedItems,isSelected:t=>e=>t.selectedItems.includes(e),isSomething:t=>Array.isArray(t.selectedItems)&&t.selectedItems.length},wl={deleteSelected({commit:t,state:e},a){a.forEach(e=>{t("deleteSelected",e)})}},Sl={selectItem(t,e){return t.selectedItems.includes(e)?t.selectedItems.splice(t.selectedItems.indexOf(e),1):t.selectedItems.push(e),t.selectedItems},resetSelectedItemsList(t){t.selectedItems=[]},listUpdate(t,e){t.list=e},formsAccessUpdate(t,e){t.formsAccess=e},listInsert(t,e){e.forEach(e=>{t.list.push(e)})},publish(t,e){t.list.forEach((a,s)=>{e.includes(a.id)&&(t.list[s].published=1)})},unpublish(t,e){t.list.forEach((a,s)=>{e.includes(a.id)&&(t.list[s].published=0)})},deleteSelected(t,e){t.list.some((a,s)=>{if(e==a.id)return t.list.splice(s,1),!0})}};var Tl={namespaced:!0,state:Ul,getters:Ml,actions:wl,mutations:Sl};const xl={fnums:[]},Rl={},Ll={},Bl={};var kl={namespaced:!0,state:xl,getters:Rl,actions:Ll,mutations:Bl},Il=a("94ea");s["default"].use(Il["a"]);var jl=new Il["a"].Store({modules:{global:Xe,user:Cl,attachment:Al,file:kl,lists:Tl}});s["default"].config.productionTip=!1,s["default"].config.devtools=!0,s["default"].component("v-popover",ll["b"]),s["default"].component("table-component",cl["TableComponent"]),s["default"].component("table-column",cl["TableColumn"]),s["default"].use(ul.a,{velocity:hl.a}),s["default"].use(rl.a),s["default"].use(dl),s["default"].use(_l["a"]),s["default"].mixin(gl),s["default"].directive("tooltip",ll["c"]),s["default"].directive("close-popover",ll["a"]);let Pl=!1,Fl="",$l={},Gl="";if(document.getElementById("em-application-attachment")){const t=document.getElementById("em-application-attachment");if(Array.prototype.slice.call(t.attributes).forEach((function(t){$l[t.name]=t.value})),Gl="attachments",Fl="#em-application-attachment",Pl=!0,Pl){const t=document.querySelectorAll("#em-appli-menu .list-group-item");function Hl(e){document.querySelector("#em-assoc-files .panel-body").empty();const a=document.querySelector(".em-check:checked");a&&(a.checked=!1);const s=document.getElementById(e.detail.fnum.fnum+"_check");s&&(s.checked=!0),t.forEach((function(t){t.setAttribute("href",t.getAttribute("href").replace(/fnum=\d+/,"fnum="+e.detail.fnum.fnum))})),openFiles(e.detail.fnum,"attachment",!0)}new s["default"]({el:Fl,store:jl,render(t){return t(nl,{props:{componentName:Gl,data:$l}})}});document.querySelector(".com_emundus_vue").addEventListener("changeFile",Hl)}}if(document.getElementById("em-component-vue")){new s["default"]({el:"#em-component-vue",store:jl,render(t){return t(nl,{props:{component:this.$el.attributes.component.value,datas:this.$el.attributes,actualLanguage:this.$el.attributes.actualLanguage.value,manyLanguages:this.$el.attributes.manyLanguages.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value}})}})}},"5b2d":function(t,e,a){},"5c0b":function(t,e,a){"use strict";a("4dc7")},"5c87":function(t,e,a){},"5fd8":function(t,e,a){"use strict";a("a64e")},"616d":function(t,e,a){"use strict";a("f4e2")},6265:function(t,e,a){"use strict";a("2fce")},"633a":function(t,e,a){"use strict";a("7304")},"63a4":function(t,e,a){},"68a2":function(t,e,a){"use strict";a("2bb7")},"6a07":function(t,e,a){},"6bfe":function(t,e,a){},"6c98":function(t,e,a){},7304:function(t,e,a){},"76c2":function(t,e,a){},"7c43":function(t,e,a){},"7d76":function(t,e,a){"use strict";a("6c98")},"7f72":function(t,e,a){"use strict";a("9181")},"7f7a":function(t,e,a){"use strict";a("abe1")},"7fb9":function(t,e,a){"use strict";a("ccbe")},"81af":function(t,e,a){},"81da":function(t,e,a){"use strict";a("4c5c")},"880c":function(t,e,a){"use strict";a("b99f")},"88bb":function(t,e,a){"use strict";a("76c2")},"8a3b":function(t,e,a){},9181:function(t,e,a){},9266:function(t,e,a){},"983b":function(t,e,a){"use strict";a("b58f")},9977:function(t,e,a){},"9a09":function(t,e,a){"use strict";a("203d")},"9be5":function(t,e,a){"use strict";a("63a4")},a1d2:function(t,e,a){"use strict";a("c966")},a35e:function(t,e,a){"use strict";a("ea95")},a38e:function(t,e,a){},a4bc:function(t,e,a){},a64e:function(t,e,a){},a82b:function(t,e,a){"use strict";a("1c87")},abe1:function(t,e,a){},acca:function(t,e,a){"use strict";a("fa42")},adea:function(t,e,a){},b270:function(t,e,a){"use strict";a("444a")},b406:function(t,e,a){},b58f:function(t,e,a){},b99f:function(t,e,a){},bb8f:function(t,e,a){"use strict";a("e219")},bcf8:function(t,e,a){"use strict";a("81af")},c0ed:function(t,e,a){"use strict";a("37a1")},c6c5:function(t,e,a){},c966:function(t,e,a){},c997:function(t,e,a){"use strict";a("efdc")},ccbe:function(t,e,a){},d196:function(t,e,a){"use strict";a("420f")},d82d:function(t,e,a){},d9aa:function(t,e,a){"use strict";a("4e62")},de37:function(t,e,a){"use strict";a("8a3b")},e052:function(t,e,a){"use strict";a("54a2")},e110:function(t,e,a){"use strict";a("1132")},e219:function(t,e,a){},e7d4:function(t,e,a){"use strict";a("7c43")},ea95:function(t,e,a){},efdc:function(t,e,a){},f276:function(t,e,a){"use strict";a("a38e")},f4e2:function(t,e,a){},f50a:function(t,e,a){"use strict";a("b406")},f586:function(t,e,a){"use strict";a("6bfe")},fa42:function(t,e,a){},fc94:function(t,e,a){"use strict";a("5572")},fd69:function(t,e,a){"use strict";a("c6c5")}});
//# sourceMappingURL=app_emundus.js.map
/*!
 * @package   admintools
 * @copyright Copyright (c)2010-2023 Nicholas K. Dionysopoulos / Akeeba Ltd
 * @license   GNU General Public License version 3, or later
 */
;var admintools_scan_error_callback=scan_dummy_error_handler;var admintools_scan_timerid=-1;var admintools_scan_responseago=0;function scan_dummy_error_handler(a){alert(a);window.location="index.php?option=com_admintools&view=Scans"}function doScanAjax(b,a){akeeba.System.doAjax({ajaxURL:b,parseResponseAsJSON:true,useTripleHash:true},function(c){a(c)},function(c){admintools_scan_error_callback(c)})}function startScan(){akeeba.Modal.open({inherit:"#admintools-scan-dim",width:"360px",height:"210px",hideClose:true,lock:true});doScanAjax(akeeba.System.getOptions("admintools.Scan.urlStart"),function(a){processScanStep(a)})}function processScanStep(a){stop_scan_timer();if(a.status==false){admintools_scan_error_callback(a.error)}else{if(a.done){window.location="index.php?option=com_admintools&view=Scans"}else{start_scan_timer();doScanAjax(akeeba.System.getOptions("admintools.Scan.urlStep"),function(b){processScanStep(b)})}}}function start_scan_timer(){if(admintools_scan_timerid>=0){window.clearInterval(admintools_scan_timerid)}admintools_scan_responseago=0;set_scan_timermsg();admintools_scan_timerid=window.setInterval("step_scan_timer()",1000)}function step_scan_timer(){admintools_scan_responseago++;set_scan_timermsg()}function stop_scan_timer(){if(admintools_scan_timerid>=0){window.clearInterval(admintools_scan_timerid)}}function set_scan_timermsg(){document.getElementById("admintools-lastupdate-text").innerHTML=akeeba.System.getOptions("admintools.Scan.lastResponseMessage").replace("%s",admintools_scan_responseago)};
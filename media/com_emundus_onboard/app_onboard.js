(function(e){function t(t){for(var s,n,r=t[0],l=t[1],d=t[2],m=0,u=[];m<r.length;m++)n=r[m],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(u.length)u.shift()();return i.push.apply(i,d||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,r=1;r<a.length;r++){var l=a[r];0!==o[l]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},o={app:0},i=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"0227":function(e,t,a){},"0391":function(e,t,a){},"03c7":function(e,t,a){},"05bc":function(e,t,a){},"0a2e":function(e,t,a){},"0bb5":function(e,t,a){},"0cb7":function(e,t,a){"use strict";a("c40c")},"0e4e":function(e,t,a){},"0fd5":function(e,t,a){var s={"./af":"8206","./af.js":"8206","./ar":"cdac","./ar-dz":"7f26","./ar-dz.js":"7f26","./ar-kw":"8e88","./ar-kw.js":"8e88","./ar-ly":"cd65","./ar-ly.js":"cd65","./ar-ma":"e8d6","./ar-ma.js":"e8d6","./ar-sa":"a284","./ar-sa.js":"a284","./ar-tn":"64f7","./ar-tn.js":"64f7","./ar.js":"cdac","./az":"b139","./az.js":"b139","./be":"98e2","./be.js":"98e2","./bg":"a1a5","./bg.js":"a1a5","./bm":"4d0d","./bm.js":"4d0d","./bn":"e8ae","./bn-bd":"5dd8","./bn-bd.js":"5dd8","./bn.js":"e8ae","./bo":"bcf2","./bo.js":"bcf2","./br":"69f1","./br.js":"69f1","./bs":"24d1","./bs.js":"24d1","./ca":"3507","./ca.js":"3507","./cs":"d15f","./cs.js":"d15f","./cv":"7bfe","./cv.js":"7bfe","./cy":"1d35","./cy.js":"1d35","./da":"a019","./da.js":"a019","./de":"0cfa","./de-at":"edea","./de-at.js":"edea","./de-ch":"9aae","./de-ch.js":"9aae","./de.js":"0cfa","./dv":"1722","./dv.js":"1722","./el":"5390","./el.js":"5390","./en-au":"dad9","./en-au.js":"dad9","./en-ca":"6f13","./en-ca.js":"6f13","./en-gb":"6267","./en-gb.js":"6267","./en-ie":"80b1","./en-ie.js":"80b1","./en-il":"ad38","./en-il.js":"ad38","./en-in":"eb60","./en-in.js":"eb60","./en-nz":"39db","./en-nz.js":"39db","./en-sg":"c30d","./en-sg.js":"c30d","./eo":"1a30","./eo.js":"1a30","./es":"48a3","./es-do":"f306","./es-do.js":"f306","./es-mx":"56d9","./es-mx.js":"56d9","./es-us":"60bf","./es-us.js":"60bf","./es.js":"48a3","./et":"f891","./et.js":"f891","./eu":"a403","./eu.js":"a403","./fa":"ce14","./fa.js":"ce14","./fi":"fc14","./fi.js":"fc14","./fil":"f46e","./fil.js":"f46e","./fo":"2bf2","./fo.js":"2bf2","./fr":"c1e8","./fr-ca":"50a2","./fr-ca.js":"50a2","./fr-ch":"b087","./fr-ch.js":"b087","./fr.js":"c1e8","./fy":"4665","./fy.js":"4665","./ga":"b396","./ga.js":"b396","./gd":"056c","./gd.js":"056c","./gl":"efde","./gl.js":"efde","./gom-deva":"12ea","./gom-deva.js":"12ea","./gom-latn":"8e2c","./gom-latn.js":"8e2c","./gu":"533d","./gu.js":"533d","./he":"7520","./he.js":"7520","./hi":"d2f3","./hi.js":"d2f3","./hr":"7e79","./hr.js":"7e79","./hu":"148f","./hu.js":"148f","./hy-am":"6711","./hy-am.js":"6711","./id":"2b10","./id.js":"2b10","./is":"1feb","./is.js":"1feb","./it":"1b21","./it-ch":"8d2c","./it-ch.js":"8d2c","./it.js":"1b21","./ja":"926e","./ja.js":"926e","./jv":"5a78","./jv.js":"5a78","./ka":"5975","./ka.js":"5975","./kk":"cc93","./kk.js":"cc93","./km":"66e1","./km.js":"66e1","./kn":"5421","./kn.js":"5421","./ko":"1297","./ko.js":"1297","./ku":"16f8","./ku.js":"16f8","./ky":"3df9","./ky.js":"3df9","./lb":"c124","./lb.js":"c124","./lo":"20a5","./lo.js":"20a5","./lt":"c14a","./lt.js":"c14a","./lv":"c553","./lv.js":"c553","./me":"ae25","./me.js":"ae25","./mi":"6f56","./mi.js":"6f56","./mk":"c8fc","./mk.js":"c8fc","./ml":"752d","./ml.js":"752d","./mn":"f09e","./mn.js":"f09e","./mr":"0a56","./mr.js":"0a56","./ms":"55b6","./ms-my":"a9e9","./ms-my.js":"a9e9","./ms.js":"55b6","./mt":"624b","./mt.js":"624b","./my":"e256","./my.js":"e256","./nb":"e1d5","./nb.js":"e1d5","./ne":"761a","./ne.js":"761a","./nl":"a0f2","./nl-be":"5cb2","./nl-be.js":"5cb2","./nl.js":"a0f2","./nn":"4fda","./nn.js":"4fda","./oc-lnc":"ec3d","./oc-lnc.js":"ec3d","./pa-in":"2f2f","./pa-in.js":"2f2f","./pl":"317f","./pl.js":"317f","./pt":"5553","./pt-br":"a9ab","./pt-br.js":"a9ab","./pt.js":"5553","./ro":"db12","./ro.js":"db12","./ru":"7aa4","./ru.js":"7aa4","./sd":"e87b","./sd.js":"e87b","./se":"a296","./se.js":"a296","./si":"51ec","./si.js":"51ec","./sk":"608b","./sk.js":"608b","./sl":"b367","./sl.js":"b367","./sq":"f68f","./sq.js":"f68f","./sr":"0991","./sr-cyrl":"c577","./sr-cyrl.js":"c577","./sr.js":"0991","./ss":"cf76","./ss.js":"cf76","./sv":"0153","./sv.js":"0153","./sw":"cb6f","./sw.js":"cb6f","./ta":"8bfa","./ta.js":"8bfa","./te":"668b","./te.js":"668b","./tet":"eae7","./tet.js":"eae7","./tg":"70b1","./tg.js":"70b1","./th":"7180","./th.js":"7180","./tk":"4912","./tk.js":"4912","./tl-ph":"f8bb","./tl-ph.js":"f8bb","./tlh":"b026","./tlh.js":"b026","./tr":"371d","./tr.js":"371d","./tzl":"c744","./tzl.js":"c744","./tzm":"787a","./tzm-latn":"71e0","./tzm-latn.js":"71e0","./tzm.js":"787a","./ug-cn":"6b5c","./ug-cn.js":"6b5c","./uk":"8c0c","./uk.js":"8c0c","./ur":"519e","./ur.js":"519e","./uz":"7982","./uz-latn":"3137","./uz-latn.js":"3137","./uz.js":"7982","./vi":"ae22","./vi.js":"ae22","./x-pseudo":"1129","./x-pseudo.js":"1129","./yo":"b4bf","./yo.js":"b4bf","./zh-cn":"fdc4","./zh-cn.js":"fdc4","./zh-hk":"747d","./zh-hk.js":"747d","./zh-mo":"fe39","./zh-mo.js":"fe39","./zh-tw":"d3e0","./zh-tw.js":"d3e0"};function o(e){var t=i(e);return a(t)}function i(e){if(!a.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}o.keys=function(){return Object.keys(s)},o.resolve=i,e.exports=o,o.id="0fd5"},1:function(e,t){},1221:function(e,t,a){},"16b4":function(e,t,a){},"177b":function(e,t,a){"use strict";a("7f30")},"18b3":function(e,t,a){"use strict";a("a5c2")},"18bf":function(e,t,a){"use strict";a("a933")},"1a8f":function(e,t,a){"use strict";a("05bc")},"1cb5":function(e,t,a){},"1f23":function(e,t,a){"use strict";a("0a2e")},2027:function(e,t,a){},2051:function(e,t,a){},"24e4":function(e,t,a){"use strict";a("4cbe")},2667:function(e,t,a){"use strict";a("ef86")},"345c":function(e,t,a){},3727:function(e,t,a){},3852:function(e,t,a){},3950:function(e,t,a){"use strict";a("9234")},"3b96":function(e,t,a){"use strict";a("345c")},"3c88":function(e,t,a){},"3c8f":function(e,t,a){},"3ccc":function(e,t,a){},"3eac":function(e,t,a){"use strict";a("a4c6")},4001:function(e,t,a){},4166:function(e,t,a){"use strict";a("3ccc")},"423e":function(e,t,a){"use strict";a("1221")},"44f3":function(e,t,a){"use strict";a("2027")},"45ca":function(e,t,a){},4632:function(e,t,a){"use strict";a("3727")},"483b":function(e,t,a){"use strict";a("83f5")},49128:function(e,t,a){"use strict";a("c2b1")},"499d":function(e,t,a){"use strict";a("f739")},"4acb":function(e,t,a){"use strict";a("7b7e")},"4bf9":function(e,t,a){"use strict";a("c4e8")},"4cbe":function(e,t,a){},"4ecd":function(e,t,a){},"4ff4":function(e,t,a){"use strict";a("b182")},"51f7":function(e,t,a){"use strict";a("ea74")},5636:function(e,t,a){"use strict";a("03c7")},5656:function(e,t,a){"use strict";a("45ca")},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("e832"),o=a("8454"),i=a.n(o),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"list"}},["files"!=e.type?a("list-header",{attrs:{data:e.actions,selected:e.selecedItems,updateTotal:e.updateTotal,filter:e.filter,sort:e.sort,cherche:e.cherche,chercheGo:e.chercheGo,validateFilters:e.validateFilters,nbresults:e.nbresults}}):e._e(),a("div",{staticClass:"filters-menu"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.recherche,expression:"recherche"}],staticClass:"searchTerm",attrs:{placeholder:e.translations.Rechercher},domProps:{value:e.recherche},on:{keyup:[function(t){e.cherche(e.recherche)||e.debounce},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.chercheGo(e.recherche)}],input:function(t){t.target.composing||(e.recherche=t.target.value)}}})]),a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[a("button",{staticClass:"tooltip-target b3 card-button"}),a("template",{slot:"popover"},["files"!=e.type?a("filters",{attrs:{data:e.actions,selected:e.selecedItems,updateTotal:e.updateTotal,filter:e.filter,sort:e.sort,cherche:e.cherche,chercheGo:e.chercheGo,validateFilters:e.validateFilters,nbresults:e.nbresults}}):e._e()],1)],2)],1),"email"==e.type&&!e.loading&&0!=e.total&&e.email_categories.length>0?a("ul",{staticClass:"form-section email-sections"},[a("li",[e._v(e._s(e.translations.Categories)+" : ")]),a("li",[a("a",{class:0===e.menuEmail?"form-section__current":"",on:{click:function(t){e.menuEmail=0}}},[e._v(e._s(e.translations.All))])]),e._l(e.email_categories,(function(t,s){return""!=t?a("li",[a("a",{class:e.menuEmail===t?"form-section__current":"",on:{click:function(a){e.menuEmail=t}}},[e._v(e._s(t))])]):e._e()}))],2):e._e(),"formulaire"!=e.type&&"grilleEval"!=e.type||e.loading?e._e():a("ul",{staticClass:"form-section email-sections"},[a("li",[a("a",{class:"form"===e.typeForAdd||"formulaire"===e.type?"form-section__current":"",on:{click:function(t){e.typeForAdd="form",e.type="formulaire"}}},[e._v("Candidature")])]),a("li",[a("a",{class:"grilleEval"===e.typeForAdd?"form-section__current":"",on:{click:function(t){e.typeForAdd="grilleEval",e.type="grilleEval"}}},[e._v("Grilles d'évaluation")])])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],class:1==e.countPages?"noPagination":"pagination-pages"},[e.total>0?a("ul",{staticClass:"pagination"},[a("a",{staticClass:"pagination-arrow arrow-left",on:{click:function(t){return e.nbpages(e.pages-1)}}},[a("em",{staticClass:"fas fa-chevron-left"})]),e._l(e.countPages,(function(t){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.countPages<=10||t<4||t>e.countPages-3||t>e.pages-3&&t<e.pages+3||t==e.pages-3||t==e.pages+3,expression:"countPages <= 10 ||\n            index < 4 ||\n            index > countPages - 3 ||\n            (index > pages - 3 && index < pages + 3) ||\n            index == pages - 3 ||\n            index == pages + 3"}],key:t,staticClass:"pagination-number"},[a("a",{staticClass:"pagination-number",class:t==e.pages?"current-number":"",on:{click:function(a){return e.nbpages(t)}}},[e._v(" "+e._s(e.countPages>10?t<4||t>e.countPages-3||t>e.pages-3&&t<e.pages+3?t:"...":t)+" ")])])})),a("a",{staticClass:"pagination-arrow arrow-right",on:{click:function(t){return e.nbpages(e.pages+1)}}},[a("em",{staticClass:"fas fa-chevron-right"})])],2):e._e()])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.total>0||"files"==e.type,expression:"total > 0 || type == 'files'"}]},[a("transition-group",{staticStyle:{display:"inline-block",margin:"16px 0",width:"100%"},attrs:{name:"slide-down",type:"transition"}},[e._l(e.list,(function(t,s){return"files"!=e.type&&"email"!=e.type?a("div",{key:s,staticClass:"col-sm-12 col-lg-4 mb-2"},[a(e.type,{tag:"component",attrs:{data:t,actions:e.actions,selectItem:e.selectItem,actualLanguage:e.actualLanguage},on:{validateFilters:function(t){return e.validateFilters()},updateLoading:e.updateLoading}})],1):e._e()})),e._l(e.list,(function(t,s){return"email"==e.type&&0==e.menuEmail?a("div",{key:s,staticClass:"col-sm-12 col-lg-4 mb-2"},[a(e.type,{tag:"component",attrs:{data:t,actions:e.actions,selectItem:e.selectItem,models:e.list},on:{validateFilters:function(t){return e.validateFilters()},updateLoading:e.updateLoading}})],1):e._e()})),e._l(e.list,(function(t,s){return"email"==e.type&&1!=e.menuEmail&&0!=e.menuEmail&&e.menuEmail==t.category?a("div",{key:s,staticClass:"col-sm-12 col-lg-4 mb-2"},[a(e.type,{tag:"component",attrs:{data:t,actions:e.actions,selectItem:e.selectItem},on:{validateFilters:function(t){return e.validateFilters()},updateLoading:e.updateLoading}})],1):e._e()})),e._l(e.list,(function(t,s){return"email"==e.type&&1==e.menuEmail&&1==t.type?a("div",{key:s,staticClass:"col-sm-12 col-lg-4 mb-2"},[a(e.type,{tag:"component",attrs:{data:t,actions:e.actions,selectItem:e.selectItem},on:{validateFilters:function(t){return e.validateFilters()},updateLoading:e.updateLoading}})],1):e._e()}))],2),a("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],class:1==e.countPages?"noPagination":"pagination-pages"},[e.total>0?a("ul",{staticClass:"pagination",staticStyle:{position:"absolute",bottom:"0",width:"100%"}},[a("a",{staticClass:"pagination-arrow arrow-left",on:{click:function(t){return e.nbpages(e.pages-1)}}},[a("em",{staticClass:"fas fa-chevron-left"})]),e._l(e.countPages,(function(t){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.countPages<=10||t<4||t>e.countPages-3||t>e.pages-3&&t<e.pages+3||t==e.pages-3||t==e.pages+3,expression:"\n              countPages <= 10 ||\n                index < 4 ||\n                index > countPages - 3 ||\n                (index > pages - 3 && index < pages + 3) ||\n                index == pages - 3 ||\n                index == pages + 3\n            "}],key:t,staticClass:"pagination-number"},[a("a",{staticClass:"pagination-number",class:t==e.pages?"current-number":"",on:{click:function(a){return e.nbpages(t)}}},[e._v(e._s(e.countPages>10?t<4||t>e.countPages-3||t>e.pages-3&&t<e.pages+3?t:"...":t))])])})),a("a",{staticClass:"pagination-arrow arrow-right",on:{click:function(t){return e.nbpages(e.pages+1)}}},[a("em",{staticClass:"fas fa-chevron-right"})])],2):e._e()])],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.total&&"files"!=e.type&&!e.loading,expression:"total == 0 && type != 'files' && !loading"}],staticClass:"noneDiscover"},[e._v(" "+e._s("campaign"==this.type?e.noCampaign:"program"==this.type?e.noProgram:"email"==this.type?e.noEmail:"formulaire"==this.type?e.noForm:e.noFiles)+" ")]),e.loading?a("div",{staticClass:"loading-form"},[a("RingLoader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},r=[],l=a("7338"),d=a.n(l),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-column-block"},[a("div",{staticClass:"column-block w-col w-col-11"},[a("div",{staticClass:"block-dash",class:e.isPublished?"":"unpublishedBlock"},[a("div",{staticClass:"column-blocks w-row"},[a("div",{staticClass:"column-inner-block w-col w-col-8 pl-30px"},[a("div",{staticClass:"list-item-header"},[a("div",{staticClass:"block-label"},[a("a",{staticClass:"item-select w-inline-block",class:{active:e.isActive},on:{click:function(t){return e.selectItem(e.data.id)}}}),a("h1",{staticClass:"nom-campagne-block white"},[e._v(e._s(e.data.label))])])]),a("div",{staticClass:"date-menu orange"}),a("div",{staticClass:"description-block white",domProps:{innerHTML:e._s(e.data.notes)}})]),a("div",{staticClass:"column-inner-block-2 w-clearfix w-col w-col-4"},[a("div",{class:e.isPublished?"publishedTag":"unpublishedTag"},[e._v(" "+e._s(e.isPublished?e.publishedTag:e.unpublishedTag)+" ")]),a("div",{staticClass:"stats-block mb-1"},[a("label",{staticClass:"mb-0"},[e._v(e._s(e.CampaignNumbers)+" : ")]),a("div",{staticClass:"nb-dossier"},[a("div",[e._v(e._s(e.data.nb_campaigns))])])]),a("div",{staticClass:"container-gerer-modifier-visualiser"},[a("a",{staticClass:"cta-block pointer",attrs:{title:e.AdvancedSettings},on:{click:function(t){return e.redirectJRoute("index.php?option=com_emundus_onboard&view=program&layout=advancedsettings&pid="+e.data.id)}}},[a("em",{staticClass:"fas fa-cog"})]),a("a",{staticClass:"cta-block ml-10px pointer",attrs:{title:e.Modify},on:{click:function(t){return e.redirectJRoute("index.php?option=com_emundus_onboard&view=program&layout=add&pid="+e.data.id)}}},[a("em",{staticClass:"fas fa-edit"})])])])])])])])},m=[],u=a("94ea");s["default"].use(u["a"]);const p={selectItem(e,t){return e.selectedItems.includes(t)?e.selectedItems.splice(e.selectedItems.indexOf(t),1):e.selectedItems.push(t),e.selectedItems},resetSelectedItemsList(e){e.selectedItems=[]},listUpdate(e,t){e.list=t},formsAccessUpdate(e,t){e.formsAccess=t},listInsert(e,t){t.forEach(t=>{e.list.push(t)})},publish(e,t){e.list.forEach((a,s)=>{t.includes(a.id)&&(e.list[s].published=1)})},unpublish(e,t){e.list.forEach((a,s)=>{t.includes(a.id)&&(e.list[s].published=0)})},deleteSelected(e,t){e.list.some((a,s)=>{if(t==a.id)return e.list.splice(s,1),!0})}},_=new u["a"].Store({state:{list:[],selectedItems:[],formsAccess:[]},getters:{list:e=>e.list,formsAccess:e=>e.formsAccess,selectedItems:e=>e.selectedItems,isSelected:e=>t=>e.selectedItems.includes(t),isSomething:e=>Array.isArray(e.selectedItems)&&e.selectedItems.length},mutations:p,actions:{deleteSelected({commit:e,state:t},a){a.forEach(t=>{e("deleteSelected",t)})}}}),h=a("bef5");var g={name:"programItem",props:{data:Object,selectItem:Function},data(){return{selectedData:[],publishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),unpublishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH"),passeeTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_CLOSE"),Modify:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),Visualize:Joomla.JText._("COM_EMUNDUS_ONBOARD_VISUALIZE"),AdvancedSettings:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADVANCED_SETTINGS"),CampaignNumbers:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_CAMPAIGN_NUMBERS")}},methods:{redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>h.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})}},computed:{isPublished(){return 1==this.data.published},isActive(){return _.getters.isSelected(this.data.id)}}},f=g,b=(a("5cee"),a("a6c2")),v=Object(b["a"])(f,c,m,!1,null,"74e726ec",null),C=v.exports,O=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-column-block"},[a("div",{staticClass:"column-block w-100"},[a("div",{staticClass:"block-dash",class:e.isPublished?"":e.isFinish?"passee":"unpublishedBlock"},[a("div",{staticClass:"column-blocks w-row"},[a("div",{staticClass:"column-inner-block w-col w-col-8 pl-30px"},[a("div",{staticClass:"list-item-header"},[a("div",{staticClass:"block-label"},[a("h2",{staticClass:"nom-campagne-block"},[e._v(e._s(e.data.label))])])]),a("div",{staticClass:"date-menu"},[e._v(" "+e._s(null!=e.data.end_date&&"0000-00-00 00:00:00"!=e.data.end_date?e.From:e.Since+" ")+" "+e._s(e.moment(e.data.start_date).format("DD/MM/YYYY"))+" "+e._s(null!=e.data.end_date&&"0000-00-00 00:00:00"!=e.data.end_date?e.To+" "+e.moment(e.data.end_date).format("DD/MM/YYYY"):"")+" ")]),a("p",{staticClass:"description-block",domProps:{innerHTML:e._s(e.data.short_description)}}),a("div",{staticClass:"d-flex"},[a("div",{class:e.isPublished?"publishedTag":e.isFinish?"passeeTag":"unpublishedTag"},[e._v(" "+e._s(e.isPublished?e.publishedTag:e.isFinish?e.passeeTag:e.unpublishedTag)+" ")]),a("div",{staticClass:"nb-dossier"},[a("div",[e._v(e._s(e.data.nb_files)+" "),e.data.nb_files>1?a("span",[e._v(e._s(e.Files))]):a("span",[e._v(e._s(e.File))])])])]),a("div",[a("hr",{staticClass:"divider-card"}),a("div",{staticClass:"stats-block"},[a("a",{staticClass:"bouton-ajouter pointer add-button-div",attrs:{title:e.AdvancedSettings},on:{click:function(t){return e.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=addnextcampaign&cid="+e.data.id+"&index=0")}}},[a("em",{staticClass:"fas fa-pen"}),a("span",[e._v(e._s(e.Modify))])]),a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arraow"}},[a("button",{staticClass:"tooltip-target b3 card-button"}),a("template",{slot:"popover"},[a("actions",{attrs:{data:e.actions,selected:this.data.id,published:e.isPublished},on:{validateFilters:function(t){return e.validateFilters()},updateLoading:e.updateLoading}})],1)],2)],1)])])])])])])},D=[],E=a("4e22"),y=a.n(E),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",[a("nav",{staticClass:"actions-dropdown",attrs:{"aria-label":"action"}},[["formulaire","email"].includes(e.data.type)||e.published?e._e():a("a",{staticClass:"action-submenu",on:{click:function(t){return e.publishSelected(e.checkItem)}}},[e._v(" "+e._s(e.translations.ActionPublish)+" ")]),!["formulaire","email"].includes(e.data.type)&&e.published?a("a",{staticClass:"action-submenu",on:{click:function(t){return e.unpublishSelected(e.checkItem)}}},[e._v(" "+e._s(e.translations.ActionUnpublish)+" ")]):e._e(),"formulaire"!==e.data.type||e.published?e._e():a("a",{staticClass:"action-submenu",staticStyle:{"border-right":"0"},on:{click:function(t){return e.publishSelected(e.checkItem)}}},[e._v(" "+e._s(e.translations.Restore)+" ")]),"campaign"===e.data.type||"formulaire"===e.data.type?a("a",{staticClass:"action-submenu w-dropdown-link",staticStyle:{"border-left":"0","border-right":"0"},on:{click:function(t){return e.duplicateSelected(e.checkItem)}}},[e._v(" "+e._s(e.translations.ActionDuplicate)+" ")]):e._e(),"formulaire"!==e.data.type&&"campaign"!==e.data.type?a("a",{staticClass:"action-submenu",on:{click:function(t){return e.deleteSelected(e.checkItem)}}},[e._v(" "+e._s(e.translations.ActionDelete)+" ")]):e._e(),"campaign"===e.data.type&&0==e.filesCount?a("a",{staticClass:"action-submenu",on:{click:function(t){return e.deleteSelected(e.checkItem)}}},[e._v(" "+e._s(e.translations.ActionDelete)+" ")]):e._e(),"formulaire"===e.data.type&&e.published?a("a",{staticClass:"action-submenu",staticStyle:{"border-left":"0"},on:{click:function(t){return e.unpublishSelected(e.checkItem)}}},[e._v(" "+e._s(e.translations.Archive)+" ")]):e._e()])])])],1),e.loading?a("div",{staticClass:"loading-form",staticStyle:{top:"10vh"}},[a("Ring-Loader",{attrs:{color:"#12db42"}})],1):e._e()])},N=[],U=a("ac68"),T=a.n(U);a("7581"),a("d22c"),a("2b9c");const A=a("bef5");var M={name:"action_menu",props:{data:Object,isEmpty:Boolean,selected:String,published:Boolean},computed:{checkItem(){return[this.selected]}},data(){return{loading:!1,filesCount:null,translations:{ActionPublish:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_PUBLISH"),ActionUnpublish:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_UNPUBLISH"),ActionDuplicate:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_DUPLICATE"),ActionDelete:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_DELETE"),Archive:Joomla.JText._("COM_EMUNDUS_ONBOARD_ARCHIVE"),Restore:Joomla.JText._("COM_EMUNDUS_ONBOARD_RESTORE")}}},mounted(){"campaign"===this.data.type&&this.filesNumber()},methods:{created(){},filesNumber(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=dashboard&task=getfilesbycampaign",params:{cid:this.selected},paramsSerializer:e=>A.stringify(e)}).then(e=>{this.filesCount=parseInt(e.data.data)})},deleteSelected(e){switch(this.data.type){case"program":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGDELETE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=deleteprogram",data:A.stringify({id:e})}).then(t=>{this.$emit("updateLoading",!1),_.commit("deleteSelected",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getprogramcount").then(e=>{this.total=e.data.data,this.updateTotal(this.total)})}).catch(e=>{console.log(e)}))});break;case"campaign":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPDELETE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=deletecampaign",data:A.stringify({id:e})}).then(t=>{this.$emit("updateLoading",!1),_.dispatch("deleteSelected",e).then(()=>{_.commit("resetSelectedItemsList")}),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getcampaigncount").then(e=>{this.total=e.data.data,this.updateTotal(this.total),this.$emit("validateFilters")})}).catch(e=>{console.log(e)}))});break;case"email":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILDELETE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=deleteemail",data:A.stringify({id:e})}).then(t=>{this.$emit("updateLoading",!1),_.dispatch("deleteSelected",e).then(()=>{_.commit("resetSelectedItemsList")}),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{d.a.get("index.php?option=com_emundus_onboard&controller=email&task=getemailcount").then(e=>{this.total=e.data.data,this.updateTotal(this.total),this.$emit("validateFilters")})}).catch(e=>{console.log(e)}))});break;case"formulaire":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMDELETE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=deleteform",data:A.stringify({id:e})}).then(t=>{this.$emit("updateLoading",!1),_.dispatch("deleteSelected",e).then(()=>{_.commit("resetSelectedItemsList")}),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMDELETED"),type:"success",showConfirmButton:!1,timer:2e3})}).then(()=>{d.a.get("index.php?option=com_emundus_onboard&controller=form&task=getformcount").then(e=>{this.total=e.data.data,this.updateTotal(this.total),this.$emit("validateFilters")})}).catch(e=>{console.log(e)}))});break}},unpublishSelected(e){switch(this.data.type){case"program":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGUNPUBLISH"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=unpublishprogram",data:A.stringify({id:e})}).then(t=>{this.$emit("updateLoading",!1),_.commit("unpublish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)}))});break;case"campaign":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNUNPUBLISH"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=unpublishcampaign",data:A.stringify({id:e})}).then(t=>{this.$emit("updateLoading",!1),_.commit("unpublish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)}))});break;case"email":d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=unpublishemail",data:A.stringify({id:e})}).then(t=>{_.commit("unpublish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)});break;case"formulaire":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMUNPUBLISH"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=unpublishform",data:A.stringify({id:e})}).then(t=>{this.$emit("updateLoading",!1),_.commit("unpublish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMUNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)}))});break}},publishSelected(e){switch(this.data.type){case"program":d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=publishprogram",data:A.stringify({id:e})}).then(t=>{_.commit("publish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)});break;case"campaign":d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=publishcampaign",data:A.stringify({id:e})}).then(t=>{_.commit("publish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)});break;case"email":d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=publishemail",data:A.stringify({id:e})}).then(t=>{_.commit("publish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)});break;case"formulaire":d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=publishform",data:A.stringify({id:e})}).then(t=>{_.commit("publish",e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMPUBLISHED"),type:"success",showConfirmButton:!1,timer:2e3}),this.$emit("validateFilters")}).catch(e=>{console.log(e)});break}},duplicateSelected(e){switch(this.data.type){case"campaign":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNDUPLICATE"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=duplicatecampaign",data:A.stringify({id:e})}).then(e=>{window.location.reload()}))});break;case"formulaire":T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMDUPLICATE"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&(this.$emit("updateLoading",!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=duplicateform",data:A.stringify({id:e})}).then(e=>{window.location.reload()}))});break}}}},R=M,S=(a("3b96"),Object(b["a"])(R,x,N,!1,null,"a4b6c1d2",null)),w=S.exports;const J=a("bef5");var k={name:"camapaignItem",components:{actions:w},props:{data:Object,selectItem:Function,actions:Object},data(){return{selectedData:[],publishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),unpublishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH"),passeeTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_CLOSE"),Modify:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),Visualize:Joomla.JText._("COM_EMUNDUS_ONBOARD_VISUALIZE"),From:Joomla.JText._("COM_EMUNDUS_ONBOARD_FROM"),To:Joomla.JText._("COM_EMUNDUS_ONBOARD_TO"),Since:Joomla.JText._("COM_EMUNDUS_ONBOARD_SINCE"),AdvancedSettings:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADVANCED_SETTINGS"),Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_PROGRAM"),Files:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILES"),File:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILE")}},methods:{updateLoading(e){this.$emit("updateLoading",e)},validateFilters(){this.$emit("validateFilters")},moment(e){return y()(e)},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>J.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})}},computed:{isPublished(){return 1==this.data.published&&y()(this.data.start_date)<=y()()&&(y()(this.data.end_date)>=y()()||null==this.data.end_date||"0000-00-00 00:00:00"==this.data.end_date)},isFinish(){return y()(this.data.end_date)<=y()()},isActive(){return _.getters.isSelected(this.data.id)}}},B=k,L=(a("96d5"),Object(b["a"])(B,O,D,!1,null,"9501b29e",null)),I=L.exports,P=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-column-block"},[a("ModalEmailPreview",{attrs:{model:this.email_to_preview,models:this.models}}),a("div",{staticClass:"column-block w-100"},[a("div",{staticClass:"block-dash",class:e.isPublished?"":"unpublishedBlock"},[a("div",{staticClass:"column-blocks w-row"},[a("div",{staticClass:"column-inner-block w-col w-col-8 pl-30px"},[a("div",{staticClass:"list-item-header"},[a("div",{staticClass:"block-label"},[a("h2",{staticClass:"nom-campagne-block"},[e._v(e._s(e.data.subject))])])]),a("div",{staticClass:"d-flex gap"},[a("div",{staticClass:"nb-dossier",class:"type-color-"+e.data.type},[a("div",[e._v(e._s(e.type[e.langue][e.data.type-1]))])]),""!==e.data.category&&null!==e.data.category?a("div",{staticClass:"nb-dossier"},[e._v(" "+e._s(e.data.category)+" ")]):e._e()]),a("div",[a("hr",{staticClass:"divider-card"}),a("div",{staticClass:"stats-block"},[a("a",{staticClass:"bouton-ajouter pointer add-button-div",attrs:{title:e.Modify},on:{click:function(t){return e.redirectJRoute("index.php?option=com_emundus_onboard&view=email&layout=add&eid="+e.data.id)}}},[a("em",{staticClass:"fas fa-pen"}),a("span",[e._v(e._s(e.Modify))])]),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"cta-block",staticStyle:{height:"unset"},attrs:{type:"button",title:e.Visualize},on:{click:function(t){return e.$modal.show("modalEmailPreview_"+e.data.id)}}},[a("em",{staticClass:"fas fa-eye"})]),e.data.lbl.startsWith("custom_")||e.data.lbl.startsWith("email_")?a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arraow"}},[a("button",{staticClass:"tooltip-target b3 card-button"}),a("template",{slot:"popover"},[a("actions",{attrs:{data:e.actions,selected:this.data.id,published:e.isPublished},on:{validateFilters:function(t){return e.validateFilters()},updateLoading:e.updateLoading}})],1)],2):e._e()],1)])])])])])])],1)},j=[],F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalEmailPreview_"+e.model}},[a("modal",{attrs:{name:"modalEmailPreview_"+e.model,height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1,width:"70%"},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"update-field-header d-flex justify-content-between"},[a("h2",{staticClass:"update-title-header",staticStyle:{"margin-bottom":"10px"}},[e._v(" "+e._s(e.ModelPreview)+" ")]),a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return e.$modal.hide("modalEmailPreview_"+e.model)}}},[a("em",{staticClass:"fas fa-times"})])])])]),a("div",{staticClass:"modalC-content"},[null!=e.email?a("p",[a("span",{domProps:{innerHTML:e._s(e.email.message)}})]):e._e()])])],1)},$=[];a("bef5");var G={name:"modalEmailPreview",props:{model:String,models:Array},data(){return{email:null,ModelPreview:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_PREVIEWMODEL")}},methods:{beforeClose(e){},beforeOpen(e){this.models.forEach(e=>{e.id==this.model&&(this.email=e)})}}},H=G,z=(a("4acb"),Object(b["a"])(H,F,$,!1,null,"71975c9e",null)),q=z.exports;const V=a("bef5");var Y={name:"emailItem",components:{ModalEmailPreview:q,actions:w},props:{data:Object,selectItem:Function,actualLanguage:String,models:Array,actions:Object},data(){return{langue:0,email_to_preview:-1,selectedData:[],publishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),unpublishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH"),passeeTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_CLOSE"),Modify:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),Visualize:Joomla.JText._("COM_EMUNDUS_ONBOARD_VISUALIZE"),type:[["Système","Modèle"],["System","Model"]]}},methods:{updateLoading(e){this.$emit("updateLoading",e)},validateFilters(){this.$emit("validateFilters")},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>V.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})}},computed:{isPublished(){return 1==this.data.published},isActive(){return _.getters.isSelected(this.data.id)}},mounted(){"en"==this.actualLanguage&&(this.langue=1),this.email_to_preview=this.data.id}},W=Y,X=(a("a078"),Object(b["a"])(W,P,j,!1,null,"65cb25c3",null)),Q=X.exports,K=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-column-block"},[a("div",{staticClass:"column-block w-100"},[a("div",{staticClass:"block-dash"},[a("div",{staticClass:"column-blocks w-row"},[a("div",{staticClass:"column-inner-block w-col w-col-8 pl-30px"},[a("div",{staticClass:"list-item-header"},[a("div",{staticClass:"block-label"},[a("a",{staticClass:"item-select w-inline-block",class:{active:e.isActive},on:{click:function(t){return e.selectItem(e.data.id)}}}),a("h2",{staticClass:"nom-campagne-block"},[e._v(e._s(e.data.label[e.actualLanguage]))])])]),a("div",[a("ul",{staticStyle:{"margin-top":"10px"}},[a("li",{staticClass:"campaigns-item"},[e._v(e._s(e.campaigns.label))])])]),a("div",{staticClass:"stats-block",staticStyle:{"justify-content":"flex-end"}},[a("a",{staticClass:"bouton-ajouter pointer add-button-div",attrs:{title:e.translations.Modify},on:{click:e.evaluationBuilder}},[a("em",{staticClass:"fas fa-pen"}),e._v(" Éditer ")])])])])])])])},Z=[];const ee=a("bef5");var te={name:"grilleEvalItem",props:{data:Object,selectItem:Function,actualLanguage:String},data(){return{selectedData:[],updateAccess:!1,campaigns:[],translations:{publishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),unpublishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH"),Modify:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),campaignAssociated:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGN_ASSOCIATED"),campaignsAssociated:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNS_ASSOCIATED")}}},methods:{redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>ee.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},getAssociatedCampaigns(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getassociatedprogram",params:{fid:this.data.id},paramsSerializer:e=>ee.stringify(e)}).then(e=>{this.campaigns=e.data.data})},evaluationBuilder(){this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid=&index=0&cid=&evaluation="+this.data.id)}},created(){_.getters.formsAccess[0].forEach(e=>{e===this.data.id&&(this.updateAccess=!0)}),this.getAssociatedCampaigns()},computed:{isPublished(){return 1==this.data.status},isActive(){return _.getters.isSelected(this.data.id)}}},ae=te,se=(a("57ce"),Object(b["a"])(ae,K,Z,!1,null,"94b667c6",null)),oe=se.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main-column-block"},[a("div",{staticClass:"column-block w-100"},[a("div",{staticClass:"block-dash",class:e.isPublished?"":"unpublishedBlock"},[a("div",{staticClass:"column-blocks w-row"},[a("div",{staticClass:"column-inner-block w-col w-col-8 pl-30px"},[a("div",{staticClass:"list-item-header"},[a("div",{staticClass:"block-label"},[a("h2",{staticClass:"nom-campagne-block"},[e._v(e._s(e.data.form_label))])])]),a("div",[1==e.campaigns.length?a("p",{staticClass:"associated-campaigns"},[e._v(e._s(e.translations.campaignAssociated)+" :")]):e._e(),e.campaigns.length>1?a("p",{staticClass:"associated-campaigns"},[e._v(e._s(e.translations.campaignsAssociated)+" :")]):e._e(),a("ul",{staticStyle:{"margin-top":"10px","margin-left":"0"}},e._l(e.campaigns,(function(t,s){return a("li",{staticClass:"campaigns-item"},[e._v(e._s(t.label))])})),0)]),a("div",{staticClass:"d-flex"},[a("div",{class:e.isPublished?"publishedTag":"unpublishedTag"},[e._v(" "+e._s(e.isPublished?e.translations.publishedTag:e.translations.unpublishedTag)+" ")])]),a("div",[a("hr",{staticClass:"divider-card"}),a("div",{staticClass:"stats-block"},[a("a",{staticClass:"bouton-ajouter pointer add-button-div",attrs:{title:e.translations.Modify},on:{click:function(t){return e.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid="+e.data.id+"&index=0&cid=")}}},[a("em",{staticClass:"fas fa-pen"}),e._v(" "+e._s(e.translations.Modify)+" ")]),a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[a("button",{staticClass:"tooltip-target b3 card-button"}),a("template",{slot:"popover"},[a("actions",{attrs:{data:e.actions,selected:this.data.id,published:e.isPublished},on:{validateFilters:function(t){return e.validateFilters()},updateLoading:e.updateLoading}})],1)],2)],1)])])])])])])},ne=[];const re=a("bef5");var le={name:"formItem",components:{actions:w},props:{data:Object,selectItem:Function,actions:Object},data(){return{selectedData:[],updateAccess:!1,campaigns:[],translations:{publishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH_FORM"),unpublishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH_FORM"),Modify:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),campaignAssociated:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGN_ASSOCIATED"),campaignsAssociated:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNS_ASSOCIATED")}}},methods:{updateLoading(e){this.$emit("updateLoading",e)},validateFilters(){this.$emit("validateFilters")},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>re.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},getAssociatedCampaigns(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getassociatedcampaign",params:{pid:this.data.id},paramsSerializer:e=>re.stringify(e)}).then(e=>{this.campaigns=e.data.data})}},created(){_.getters.formsAccess[0].forEach(e=>{e===this.data.id&&(this.updateAccess=!0)}),this.getAssociatedCampaigns()},computed:{isPublished(){return 1==this.data.status},isActive(){return _.getters.isSelected(this.data.id)}}},de=le,ce=(a("a450"),Object(b["a"])(de,ie,ne,!1,null,"d0fe8888",null)),me=ce.exports,ue=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"section-recherche",class:0==e.total?"noneDiscoverRecherche":""},[a("div",{staticClass:"w-container"},[e._m(0),a("div",{staticClass:"wrapper-add-recherche"},[a("div",{staticClass:"w-form"},[a("form",{attrs:{id:"email-form",name:"email-form","data-name":"Email Form"}},[a("div",{staticClass:"container-flexbox-choisir-ou-plus-droite w-clearfix"},[a("div",{staticClass:"wraper-dropdown-search"},[a("a",{staticClass:"link",on:{click:function(t){e.prog="reset",e.onProgChange()}}},[e._v("x")]),a("select",{staticClass:"dropdown-toggle-recherche w-select",attrs:{id:"Programme",name:"Programme","data-name":"Programme"},on:{change:function(t){e.prog="",e.onProgChange(t)}}},[a("option",{attrs:{value:""},domProps:{selected:"reset"==this.prog}},[e._v("Programme")]),e._l(e.distinctProg,(function(t,s){return a("option",{key:s},[e._v(e._s(t))])}))],2)]),a("div",{staticClass:"wraper-dropdown-search"},[a("select",{staticClass:"dropdown-toggle-recherche w-select",attrs:{id:"Campagne",name:"Campagne","data-name":"Campagne"},on:{change:function(t){e.camp="",e.onCampChange(t)}}},[a("option",{attrs:{value:""},domProps:{selected:"reset"==this.camp}},[e._v("Campagne")]),e._l(e.distinctCamp,(function(t,s){return a("option",{key:s},[e._v(e._s(t))])}))],2),a("a",{staticClass:"link",on:{click:function(t){e.camp="reset",e.onCampChange()}}},[e._v("x")])]),a("div",{staticClass:"wraper-dropdown-search"},[a("select",{staticClass:"dropdown-toggle-recherche w-select",attrs:{id:"Ann-e",name:"Ann-e","data-name":"Année"},on:{change:function(t){e.session="",e.onSessionChange(t)}}},[a("option",{attrs:{value:""},domProps:{selected:"reset"==this.session}},[e._v("Session")]),e._l(e.distinctSession,(function(t,s){return a("option",{key:s},[e._v(e._s(t))])}))],2),a("a",{staticClass:"link",on:{click:function(t){e.session="reset",e.onSessionChange()}}},[e._v("x")])]),a("div",{staticClass:"wraper-dropdown-search"},[a("select",{staticClass:"dropdown-toggle-recherche w-select",attrs:{id:"Statut",name:"Statut","data-name":"Statut"},on:{change:function(t){e.status="",e.onStatusChange(t)}}},[a("option",{attrs:{value:""},domProps:{selected:"reset"==this.status}},[e._v("Statut")]),e._l(e.distinctStatus,(function(t,s){return a("option",{key:s},[e._v(e._s(t))])}))],2),a("a",{staticClass:"link",on:{click:function(t){e.status="reset",e.onStatusChange()}}},[e._v("x")])])])])])])])]),a("table",{directives:[{name:"show",rawName:"v-show",value:0!=e.total,expression:"total != 0"}],staticClass:"table"},[a("thead",{staticClass:"content-results"},[a("tr",[a("th",{staticClass:"row-check",attrs:{scope:"col"}}),e._l(e.categoriesName,(function(t,s){return a("th",{directives:[{name:"show",rawName:"v-show",value:e.newCategories.includes(s),expression:"newCategories.includes(index)"}],key:s,attrs:{scope:"col"}},[e._v(" "+e._s(t)+" ")])})),a("div",{staticClass:"pin-add-column"},[a("a",{staticClass:"pin-add w-inline-block",on:{click:function(t){return e.show()}}},[a("div",{staticClass:"add-col"},[e._v("+")])])])],2)]),a("tbody",{staticClass:"title-results"},e._l(e.files,(function(t,s){return a("tr",{key:s},[e._m(1,!0),e._l(e.categoriesValue,(function(o,i){return a("th",{directives:[{name:"show",rawName:"v-show",value:e.newCategories.includes(i),expression:"newCategories.includes(valueIndex)"}],key:i,attrs:{scope:"row"}},[e._v(" "+e._s("lastname"==o||"firstname"==o?e.filesUsers[s][o]:t[o])+" ")])}))],2)})),0)]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.total,expression:"total == 0"}],staticClass:"noneDiscover"},[e._v(" "+e._s(e.noDossiers)+" ")]),a("modal",{attrs:{name:"modalAddCat"}},[a("div",{staticClass:"modalHeader"},[e._v("Select a new category")]),a("div",{staticClass:"hr"}),e._l(e.categoriesName,(function(t,s){return a("div",{key:s,staticClass:"modalContent"},[a("div",{staticClass:"modalNewCategory",class:e.newCategories.includes(s)?"selectedElem":"",attrs:{id:s},on:{click:function(t){return e.toggleActive(s)}}},[e._v(" "+e._s(t)+" ")])])})),a("div",{staticClass:"hr"}),a("div",{staticClass:"modalFooter"},[a("button",{staticClass:"modalAdd",attrs:{type:"button"},on:{click:function(t){return e.resetCategories()}}},[e._v(e._s(e.ResetButton))]),a("button",{staticClass:"modalCancel",attrs:{type:"button"},on:{click:function(t){return e.removeCategories()}}},[e._v(" "+e._s(e.RemoveButton)+" ")]),a("button",{staticClass:"modalCancel",attrs:{type:"button"},on:{click:function(t){return e.cancelCategories()}}},[e._v(" "+e._s(e.CloseButton)+" ")])])],2)],1)},pe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper-rechercher w-row"},[a("div",{staticClass:"column-recherche w-col w-col-6"},[a("div",{staticClass:"form-recherche w-form"},[a("form",{staticClass:"form",attrs:{id:"email-form-2",name:"email-form-2","data-name":"Email Form 2"}},[a("div",{staticClass:"w-row"},[a("div",{staticClass:"column-5 w-col w-col-8"},[a("input",{staticClass:"text-recherche-hp w-input",attrs:{type:"text",maxlength:"256",name:"Rechercher","data-name":"Rechercher",placeholder:"Rechercher...",id:"Rechercher",required:""}})]),a("div",{staticClass:"w-clearfix w-col w-col-4"},[a("a",{staticClass:"sauvegarder w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"recherche w-inline-block",attrs:{href:"#","data-ix":"show-result"}})])])])])]),a("div",{staticClass:"column-recherche w-col w-col-6"},[a("div",{staticClass:"form-recherche w-form"},[a("form",{staticClass:"form",attrs:{id:"email-form-2",name:"email-form-2","data-name":"Email Form 2"}},[a("select",{staticClass:"profil-search w-select",attrs:{id:"Profil",name:"Profil","data-name":"Profil"}},[a("option",{attrs:{value:""}},[e._v("Dossier")]),a("option",{attrs:{value:""}},[e._v("Evaluation")]),a("option",{attrs:{value:"Décision"}},[e._v("Décision")])])])])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("th",{staticClass:"row-check",attrs:{scope:"row"}},[a("input",{staticClass:"w-checkbox-input",attrs:{type:"checkbox",id:"checkbox-77",name:"checkbox","data-name":"Checkbox"}})])}];const _e=a("bef5");var he={name:"files",data(){return{total:-1,prog:"",camp:"",session:"",status:"",files:[],filesUsers:[],campaignsId:[],distinctProg:[],distinctCamp:[],distinctStatus:[],distinctSession:[],filtersProg:"&prog=",filtersCamp:"&camp=",filtersSession:"&session",filtersStatus:"&status=",newCategories:[0,1,2,3,4],categoriesName:["Nom","Prénom","Campagne","Programme","Statut","Session","Created","Profile Label","Start date","End date"],categoriesValue:["lastname","firstname","label","program_label","status_value","year","create_date_time","profile_label","start_date","end_date"],currentElement:"",publishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),unpublishedTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH"),Lastname:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_LASTNAME"),Firstname:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_FIRSTNAME"),Campaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_CAMPAIGN"),Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_PROGRAM"),Status:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_STATUS"),Start:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_START"),End:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_END"),Created_at:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_CREATED"),Profile_name:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_PROFILE"),CloseButton:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_CLOSE"),ResetButton:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_RESET"),RemoveButton:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_REMOVE"),noDossiers:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOFILES")}},computed:{console:()=>console},created(){d.a.get("index.php?option=com_emundus_onboard&controller=files&task=getallfiles").then(e=>{this.total=e.data.data.length;for(let t=0;t<e.data.data.length;t++)this.files.push(e.data.data[t][0]),this.filesUsers.push(e.data.data[t][1]),this.campaignsId.push(e.data.data[t][0].id)}).then(()=>{d.a.get("index.php?option=com_emundus_onboard&controller=files&task=getdistincts",{params:{ids:this.campaignsId},paramsSerializer:function(e){return _e.stringify(e)}}).then(e=>{for(let a=0;a<e.data.data.length;a++)this.distinctProg.push(e.data.data[a].distinctProg),this.distinctCamp.push(e.data.data[a].distinctCamp),this.distinctStatus.push(e.data.data[a].distinctStatus),this.distinctSession.push(e.data.data[a].distinctSession);const t=(e,t,a)=>a.indexOf(e)===t;this.distinctProg=this.distinctProg.filter(t),this.distinctCamp=this.distinctCamp.filter(t),this.distinctStatus=this.distinctStatus.filter(t),this.distinctSession=this.distinctSession.filter(t)}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})},methods:{changeDate(e){const t=/\d{4}/gm,a=/-\d{2}-/gm,s=/-\d{2} /gm,o=e;let i;var n="";while(null!==(i=s.exec(o)))i.index===s.lastIndex&&s.lastIndex++,i.forEach((e,t)=>{n=e.substring(1,3)+"/"});while(null!==(i=a.exec(o)))i.index===a.lastIndex&&a.lastIndex++,i.forEach((e,t)=>{n=n+e.substring(1,3)+"/"});while(null!==(i=t.exec(o)))i.index===t.lastIndex&&t.lastIndex++,i.forEach((e,t)=>{n+=e});return n},changeFullDate(e){const t=/\d{4}/gm,a=/-\d{2}-/gm,s=/-\d{2} /gm,o=/\d{2}:\d{2}:\d{2}/gm,i=e;let n;var r="";while(null!==(n=s.exec(i)))n.index===s.lastIndex&&s.lastIndex++,n.forEach((e,t)=>{r=e.substring(1,3)+"/"});while(null!==(n=a.exec(i)))n.index===a.lastIndex&&a.lastIndex++,n.forEach((e,t)=>{r=r+e.substring(1,3)+"/"});while(null!==(n=t.exec(i)))n.index===t.lastIndex&&t.lastIndex++,n.forEach((e,t)=>{r+=e});while(null!==(n=o.exec(i)))n.index===o.lastIndex&&o.lastIndex++,n.forEach((e,t)=>{r=r+" à "+e});return r},show(){this.$modal.show("modalAddCat")},hide(){this.$modal.hide("modalAddCat")},toggleActive(e){this.currentElement=document.getElementById(e),this.newCategories.includes(e)?this.deselectElement(e):this.selectElement(e)},selectElement(e){this.newCategories.push(e)},deselectElement(e){const t=this.newCategories.indexOf(e);t>-1&&this.newCategories.splice(t,1)},resetCategories(){this.newCategories=[0,1,2,3,4]},removeCategories(){this.newCategories=[0,1]},cancelCategories(){this.hide()},onProgChange(e){this.filtersProg=void 0==e?"&prog=":"&prog="+e.target.value,this.validateFilters()},onCampChange(e){this.filtersCamp=void 0==e?"&camp=":"&camp="+e.target.value,this.validateFilters()},onSessionChange(e){this.filtersSession=void 0==e?"&session=":"&session="+e.target.value,this.validateFilters()},onStatusChange(e){this.filtersStatus=void 0==e?"&status=":"&status="+e.target.value,this.validateFilters()},validateFilters(){this.filters=this.filtersProg+this.filtersCamp+this.filtersSession+this.filtersStatus,this.allFilters(this.filters)},allFilters(e){d.a.get("index.php?option=com_emundus_onboard&controller=files&task=getallfiles"+e).then(e=>{this.total=e.data.data.length,this.files=[],this.filesUsers=[];for(let t=0;t<e.data.data.length;t++)this.files.push(e.data.data[t][0]),this.filesUsers.push(e.data.data[t][1])}).catch(e=>{console.log(e)})}}},ge=he,fe=(a("5fa4"),Object(b["a"])(ge,ue,pe,!1,null,"1ff3f6dc",null)),be=fe.exports,ve=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset","min-width":"200px"}},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",[a("div",[a("div",[a("div",{staticClass:"filter-subtitle"},[a("div",[e._v(e._s(e.translations.Filter))])]),a("nav",{staticClass:"actions-dropdown",attrs:{"aria-label":"filter"}},[a("a",{staticClass:"action-submenu",class:"all"==e.filtre?"selected":"",on:{click:function(t){e.filter("all"),e.updateFilter("all")}}},[e._v(" "+e._s(e.translations.FilterAll)+" ")]),"campaign"==e.data.type?a("a",{staticClass:"action-submenu",class:"notTerminated"==e.filtre?"selected":"",on:{click:function(t){e.filter("notTerminated"),e.updateFilter("notTerminated")}}},[e._v(" "+e._s(e.translations.FilterOpen)+" ")]):e._e(),"campaign"==e.data.type?a("a",{staticClass:"action-submenu",class:"Terminated"==e.filtre?"selected":"",on:{click:function(t){e.filter("Terminated"),e.updateFilter("Terminated")}}},[e._v(" "+e._s(e.translations.FilterClose)+" ")]):e._e(),"formulaire"!==e.data.type?a("a",{staticClass:"action-submenu",class:"Publish"==e.filtre?"selected":"",on:{click:function(t){e.filter("Publish"),e.updateFilter("Publish")}}},[e._v(" "+e._s(e.translations.FilterPublish)+" ")]):e._e(),"formulaire"!==e.data.type?a("a",{staticClass:"action-submenu",class:"Unpublish"==e.filtre?"selected":"",on:{click:function(t){e.filter("Unpublish"),e.updateFilter("Unpublish")}}},[e._v(" "+e._s(e.translations.FilterUnpublish)+" ")]):e._e(),"formulaire"===e.data.type?a("a",{staticClass:"action-submenu",class:"Unpublish"==e.filtre?"selected":"",on:{click:function(t){e.filter("Unpublish"),e.updateFilter("Unpublish")}}},[e._v(" "+e._s(e.translations.Archived)+" ")]):e._e()])]),a("div",{staticClass:"mt-1"},[a("div",{staticClass:"filter-subtitle"},[a("div",[e._v(e._s(e.translations.NbResults))])]),a("nav",{staticClass:"actions-dropdown",attrs:{"aria-label":"Nb Results"}},[a("a",{staticClass:"action-submenu",class:"max"==e.afficher?"selected":"",on:{click:function(t){e.nbresults(999999),e.updateDisplay("max")}}},[e._v(" "+e._s(e.translations.AllResults)+" ")]),a("a",{staticClass:"action-submenu",class:10==e.afficher?"selected":"",on:{click:function(t){e.nbresults(10),e.updateDisplay(10)}}},[e._v(" 10 ")]),a("a",{staticClass:"action-submenu",class:25==e.afficher?"selected":"",on:{click:function(t){e.nbresults(25),e.updateDisplay(25)}}},[e._v(" 25 ")]),a("a",{staticClass:"action-submenu",class:50==e.afficher?"selected":"",on:{click:function(t){e.nbresults(50),e.updateDisplay(50)}}},[e._v(" 50 ")]),a("a",{staticClass:"action-submenu",class:100==e.afficher?"selected":"",on:{click:function(t){e.nbresults(100),e.updateDisplay(100)}}},[e._v(" 100 ")])])])])])])],1),e.loading?a("div",{staticClass:"loading-form",staticStyle:{top:"10vh"}},[a("Ring-Loader",{attrs:{color:"#12db42"}})],1):e._e()])},Ce=[];a("bef5");var Oe={name:"action_menu",props:{data:Object,updateTotal:Function,filter:Function,sort:Function,cherche:Function,chercheGo:Function,validateFilters:Function,nbresults:Function},computed:{checkItem(){return _.getters.selectedItems}},data(){return{recherche:"",filterHover:!1,actionHover:!1,sortHover:!1,resultsHover:!1,loading:!1,translations:{NbResults:Joomla.JText._("COM_EMUNDUS_ONBOARD_RESULTS"),AllResults:Joomla.JText._("COM_EMUNDUS_ONBOARD_ALL_RESULTS"),Sort:Joomla.JText._("COM_EMUNDUS_ONBOARD_SORT"),SortCreasing:Joomla.JText._("COM_EMUNDUS_ONBOARD_SORT_CREASING"),SortDecreasing:Joomla.JText._("COM_EMUNDUS_ONBOARD_SORT_DECREASING"),Filter:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER"),FilterAll:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_ALL"),FilterOpen:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_OPEN"),FilterClose:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_CLOSE"),FilterPublish:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),FilterUnpublish:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_UNPUBLISH"),Rechercher:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEARCH"),Archived:Joomla.JText._("COM_EMUNDUS_ONBOARD_ARCHIVED")},filtre:"all",tri:"DESC",afficher:25}},methods:{updateFilter(e){this.filtre=e},updateSort(e){this.tri=e},updateDisplay(e){this.afficher=e}}},De=Oe,Ee=(a("7011"),Object(b["a"])(De,ve,Ce,!1,null,"11b9b378",null)),ye=Ee.exports,xe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-sub-menu"},[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",["campaign"===e.data.type?a("div",{staticClass:"d-flex"},[a("img",{staticClass:"tchooz-icon-title",attrs:{src:"images/emundus/menus/megaphone.svg",srcset:"/images/emundus/menus/megaphone.svg",alt:"megaphone"}}),a("h1",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.translations.Campaigns))])]):e._e(),"email"===e.data.type?a("div",{staticClass:"d-flex"},[a("img",{staticClass:"tchooz-icon-title",attrs:{src:"images/emundus/menus/email.png",srcset:"/images/emundus/menus/email.png",alt:"email"}}),a("h1",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.translations.Emails))])]):e._e(),"form"===e.data.type||"grilleEval"===e.data.type||"formulaire"===e.data.type?a("div",{staticClass:"d-flex"},[a("img",{staticClass:"tchooz-icon-title",attrs:{src:"images/emundus/menus/form.png",srcset:"/images/emundus/menus/form.png",alt:"form"}}),a("h1",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.translations.Forms))])]):e._e(),a("div",{staticClass:"actions-add-block"},["campaign"===e.data.type?a("p",{staticClass:"tchooz-section-description"},[e._v(e._s(e.translations.CampaignsDesc))]):e._e(),"form"===e.data.type||"grilleEval"===e.data.type||"formulaire"===e.data.type?a("p",{staticClass:"tchooz-section-description"},[e._v(e._s(e.translations.FormsDesc))]):e._e(),"email"===e.data.type?a("p",{staticClass:"tchooz-section-description"},[e._v(e._s(e.translations.EmailsDesc))]):e._e(),e.addHidden?e._e():a("a",{staticClass:"bouton-ajouter pointer",on:{click:e.redirectToAdd}},["campaign"===e.data.type?a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.translations.AddCampaign)+" ")]):e._e(),"email"===e.data.type?a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.translations.AddEmail)+" ")]):e._e(),"form"===e.data.type||"grilleEval"===e.data.type||"formulaire"===e.data.type?a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.translations.AddForm)+" ")]):e._e()])])])])],1),e.loading?a("div",{staticClass:"loading-form",staticStyle:{top:"10vh"}},[a("Ring-Loader",{attrs:{color:"#12db42"}})],1):e._e()])},Ne=[];const Ue=a("bef5");var Te={name:"action_menu",props:{data:Object,updateTotal:Function,filter:Function,sort:Function,cherche:Function,chercheGo:Function,validateFilters:Function,nbresults:Function},computed:{checkItem(){return _.getters.selectedItems}},data(){return{form:{label:"Nouveau formulaire",description:"",published:1},loading:!1,translations:{AddCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CAMPAIGN"),AddProgram:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_PROGRAM"),AddEmail:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_EMAIL"),AddForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_FORM"),Campaigns:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNS"),CampaignsDesc:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMPAIGNS_DESC"),Emails:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILS"),Forms:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMS"),FormsDesc:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMS_DESC"),EmailsDesc:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILS_DESC")},addHidden:!1}},methods:{redirectToAdd(){"index.php?option=com_emundus_onboard&view=form&layout=add"==this.data.add_url?this.createForm():this.redirectJRoute(this.data.add_url)},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>Ue.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},createForm(){this.loading=!0,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=createform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ue.stringify({body:this.form})}).then(e=>{this.loading=!1,this.profileId=e.data.data,this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid="+this.profileId+"&index=0&cid=")}).catch(e=>{console.log(e)})}}},Ae=Te,Me=(a("4632"),Object(b["a"])(Ae,xe,Ne,!1,null,"3d961c4c",null)),Re=Me.exports,Se=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div")},we=[],Je={name:"tasks",data:()=>({openTasks:!0}),created(){this.getTasks()},methods:{getTasks(){document.getElementsByClassName("swal2-shown")[0]?setTimeout(()=>{this.getTasks()},1e3):d()({method:"GET",url:"index.php?option=com_emundus_onboard&controller=settings&task=gettasks"}).then(e=>{let t="<div id='open-tasks' style='display: none' onclick=\"document.getElementsByClassName('task-container')[0].style.transform = 'translateY(0)';document.getElementById('close-tasks').style.display = 'block';document.getElementById('open-tasks').style.display = 'none'\"><i class='fas fa-plus'></i></div><div id='close-tasks' onclick=\"document.getElementsByClassName('task-container')[0].style.transform = 'translateY(80%)';document.getElementById('open-tasks').style.display = 'block';document.getElementById('close-tasks').style.display = 'none'\"><i class='fas fa-minus'></i></div><ul id='tasks_list'>",a=Object.values(e.data.params).some(e=>!0===e);a&&(Object.keys(e.data.params).forEach(a=>{switch(a){case"first_campaign":e.data.params[a]?t+="<li><div class='col-md-2'><i class='far fa-times-circle' style='color: darkred'></i></div><a href='configuration-campaigns?view=campaign&layout=add'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_CAMPAIGN")+"</span></a></li><hr>":t+="<li><div class='col-md-2'><i class='far fa-check-circle' style='color: green'></i></div><a href='configuration-campaigns?view=campaign&layout=add'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_CAMPAIGN")+"</span></a></li><hr>";break;case"first_form":e.data.params[a]?t+="<li><div class='col-md-2'><i class='far fa-times-circle' style='color: darkred'></i></div><a href='configuration-forms?view=form&layout=add'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_FORM")+"</span></a></li><hr>":t+="<li><div class='col-md-2'><i class='far fa-check-circle' style='color: green'></i></div><a href='configuration-forms?view=form&layout=add'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_FORM")+"</span></a></li><hr>";break;case"first_formbuilder":e.data.params[a]?t+="<li><div class='col-md-2'><i class='far fa-times-circle' style='color: darkred'></i></div><a href='configuration-forms'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_FORMBUILDER")+"</span></a></li><hr>":t+="<li><div class='col-md-2'><i class='far fa-check-circle' style='color: green'></i></div><a href='configuration-forms'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_FORMBUILDER")+"</span></a></li><hr>";break;case"first_documents":e.data.params[a]?t+="<li><div class='col-md-2'><i class='far fa-times-circle' style='color: darkred'></i></div><a href='configuration-campaigns'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_DOCUMENTS")+"</span></a></li><hr>":t+="<li><div class='col-md-2'><i class='far fa-check-circle' style='color: green'></i></div><a href='configuration-campaigns'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_DOCUMENTS")+"</span></a></li><hr>";break;case"first_program":e.data.params[a]?t+="<li><div class='col-md-2'><i class='far fa-times-circle' style='color: darkred'></i></div><a href='configuration-programs'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_PROGRAM")+"</span></a></li><hr>":t+="<li><div class='col-md-2'><i class='far fa-check-circle' style='color: green'></i></div><a href='configuration-programs'><span>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_PROGRAM")+"</span></a></li><hr>";break}}),setTimeout(()=>{document.getElementById("close-tasks").click()},3e3),t+="</ul>",T.a.fire({position:"bottom-end",backdrop:!1,allowOutsideClick:!1,title:"Progression",html:t,customClass:{container:"task-container",title:"task-title",content:"task-content"},showConfirmButton:!1}))})}},watch:{openTasks:function(){document.getElementsByClassName("task-content")[0].style.display="none"}}},ke=Je,Be=Object(b["a"])(ke,Se,we,!1,null,"7641f07e",null),Le=Be.exports;a("e382"),a("81b3"),a("16b4"),a("8d2f"),a("0391"),a("0e4e"),a("f717");a("bef5");var Ie={components:{program:C,campaign:I,email:Q,formulaire:me,files:be,filters:ye,listHeader:Re,tasks:Le,grilleEval:oe},name:"list",props:{type:String},data:()=>({selecedItems:[],actions:{type:"",add_url:""},loading:!1,actualLanguage:"",recherche:"",timer:null,translations:{Select:Joomla.JText._("COM_EMUNDUS_ONBOARD_SELECT"),Deselect:Joomla.JText._("COM_EMUNDUS_ONBOARD_DESELECT"),Total:Joomla.JText._("COM_EMUNDUS_ONBOARD_TOTAL"),noCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOCAMPAIGN"),noProgram:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOPROGRAM"),noEmail:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOEMAIL"),noForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOFORM"),noFiles:Joomla.JText._("COM_EMUNDUS_ONBOARD_NOFILES"),All:Joomla.JText._("COM_EMUNDUS_ONBOARD_ALL"),System:Joomla.JText._("COM_EMUNDUS_ONBOARD_SYSTEM"),Categories:Joomla.JText._("COM_EMUNDUS_ONBOARD_CATEGORIES"),Rechercher:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEARCH")},total:0,filtersCount:"",filters:"",filtersCountFilter:"&filterCount=",filtersCountSearch:"&rechercheCount=",filtersFilter:"&filter=",filtersSort:"&sort=",filtersSearch:"&recherche=",filtersLim:"&lim=",filtersPage:"&page=",filtre:"",tri:"",search:"",limit:25,pages:1,countPages:1,menuEmail:0,email_categories:[],tasks:""}),computed:{list(){return _.getters.list},isEmpty:()=>_.getters.isSomething},created(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getActualLanguage"}).then(e=>{this.actualLanguage=e.data.msg}),this.actions.type=this.type,this.typeForAdd=this.type,"form"==this.typeForAdd&&(this.type="formulaire"),"files"!=this.typeForAdd&&(this.actions.add_url="index.php?option=com_emundus_onboard&view="+this.typeForAdd+"&layout=add"),this.validateFilters()},watch:{type:function(e){if(this.actions.type=e,this.typeForAdd="formulaire"==e?"form":e,"form"==this.typeForAdd&&(this.type="formulaire"),"files"!=this.typeForAdd){let e="grilleEval"==this.typeForAdd?"form":this.typeForAdd;this.actions.add_url="index.php?option=com_emundus_onboard&view="+e+"&layout=add"}this.validateFilters()}},methods:{updateLoading(e){this.loading=e},validateFilters(){this.loading=!0,this.filtersCount=this.filtersCountFilter+this.filtersCountSearch,this.filters=this.filtersFilter+this.filtersSort+this.filtersSearch+this.filtersLim+this.filtersPage,this.allFilters(this.filtersCount,this.filters)},filter(e){this.filtersCountFilter="&filterCount="+e,this.filtersFilter="&filter="+e,this.filtre=e,this.validateFilters()},sort(e){this.filtersSort="&sort="+e,this.tri=e,this.validateFilters()},cherche(e){this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout(()=>{this.filtersCountSearch="&rechercheCount="+e,this.filtersSearch="&recherche="+e,this.search=e,this.validateFilters()},800)},chercheGo(e){this.cherche(e),this.validateFilters()},nbresults(e){this.filtersLim="&lim="+e,this.limit=e,this.validateFilters()},nbpages(e){e>=1&&e<=this.countPages&&(this.filtersPage="&page="+e,this.pages=e,this.validateFilters())},allFilters(e,t){let a="grilleEval"==this.typeForAdd?"form":this.typeForAdd;"files"!=this.type&&d.a.get("index.php?option=com_emundus_onboard&controller="+a+"&task=get"+this.typeForAdd+"count"+e).then(e=>{d.a.get("index.php?option=com_emundus_onboard&controller="+a+"&task=getall"+this.typeForAdd+t).then(t=>{this.total=e.data.data,_.commit("listUpdate",t.data.data),this.countPages=Math.ceil(this.total/this.limit),"email"==this.type&&d.a.get("index.php?option=com_emundus_onboard&controller=email&task=getemailcategories").then(e=>{this.email_categories=e.data.data}),this.loading=!1}).catch(e=>{console.log(e),this.loading=!1})}).catch(e=>{console.log(e),this.loading=!1})},updateTotal(e){this.total=e},selectAllItem(){return this.list.filter((function(e){_.commit("selectItem",e.id)}))},deselectItem(){_.commit("resetSelectedItemsList")},selectItem(e){_.commit("selectItem",e)}}},Pe=Ie,je=(a("a722"),Object(b["a"])(Pe,n,r,!1,null,"34e47ef6",null)),Fe=je.exports,$e=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-principale"},[a("div",{staticClass:"w-container"},[a("div",{staticClass:"sous-container"},[a("p",{staticClass:"required"},[e._v(e._s(e.RequiredFieldsIndicate))]),a("div",{staticClass:"heading-form"},[a("div",{staticClass:"icon-title programme"}),a("h2",{staticClass:"heading"},[e._v(e._s(e.Program))])]),a("p",{staticClass:"paragraphe-sous-titre"},[e._v(" "+e._s(e.AddProgramDesc)+" ")]),a("div",{staticClass:"w-form"},[a("form",{attrs:{id:"program-form"},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[a("div",{staticClass:"form-group prog-label"},[a("label",{attrs:{for:"prog_label"}},[e._v(e._s(e.ProgName)+" *")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.label,expression:"form.label"},{name:"focus",rawName:"v-focus"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.label},attrs:{id:"prog_label",type:"text",placeholder:" "},domProps:{value:e.form.label},on:{keyup:e.updateCode,input:function(t){t.target.composing||e.$set(e.form,"label",t.target.value)}}})]),e.errors.label?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.LabelRequired))])]):e._e(),a("div",{staticClass:"form-group prog-label"},[a("label",{staticStyle:{top:"10.7em"},attrs:{for:"prog_category"}},[e._v(e._s(e.ChooseCategory))]),a("autocomplete",{attrs:{id:"prog_category",items:this.categories,year:e.form.programmes},on:{searched:e.onSearchCategory}})],1),a("div",{staticClass:"form-group controls"},[e.dynamicComponent?a("editor",{attrs:{height:"30em",text:e.form.notes,lang:e.actualLanguage,enable_variables:!1,id:"program",placeholder:e.ProgramResume},model:{value:e.form.notes,callback:function(t){e.$set(e.form,"notes",t)},expression:"form.notes"}}):e._e()],1),a("div",{staticClass:"form-group d-flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.published,expression:"form.published"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"published",name:"published"},domProps:{checked:Array.isArray(e.form.published)?e._i(e.form.published,null)>-1:e._q(e.form.published,"1")},on:{change:function(t){var a=e.form.published,s=t.target,o=s.checked?"1":"0";if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.form,"published",a.concat([i])):n>-1&&e.$set(e.form,"published",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.form,"published",o)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("label",{staticClass:"ml-10px mb-0",attrs:{for:"published"}},[e._v(e._s(e.Publish))])]),a("div",{staticClass:"form-group d-flex last-container"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.apply_online,expression:"form.apply_online"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"apply",name:"apply"},domProps:{checked:Array.isArray(e.form.apply_online)?e._i(e.form.apply_online,null)>-1:e._q(e.form.apply_online,"1")},on:{change:function(t){var a=e.form.apply_online,s=t.target,o=s.checked?"1":"0";if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.form,"apply_online",a.concat([i])):n>-1&&e.$set(e.form,"apply_online",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.form,"apply_online",o)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("label",{staticClass:"ml-10px mb-0",attrs:{for:"apply"}},[e._v(e._s(e.DepotDeDossier))])]),a("div",{staticClass:"section-sauvegarder-et-continuer"},[a("div",{staticClass:"w-container"},[a("div",{staticClass:"container-evaluation w-clearfix"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){e.quit=1,e.submit()}}},[e._v(" "+e._s(e.Continuer)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer w-quitter",attrs:{type:"button"},on:{click:function(t){e.quit=0,e.submit()}}},[e._v(" "+e._s(e.Quitter)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button",onclick:"history.go(-1)"}},[e._v(" "+e._s(e.Retour)+" ")])])])])])])])]),e.submitted?a("div",{staticClass:"loading-form"},[a("RingLoader",{attrs:{color:"#de6339"}})],1):e._e(),a("tasks")],1)},Ge=[],He=a("9341"),ze=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editor"},[a("div",{attrs:{id:"tiny_"+e.selector_id}})])},qe=[],Ve=a("8e5c"),Ye=a.n(Ve),We=a("f6f6"),Xe=a.n(We),Qe=(a("a881"),a("59d1"),a("9908"),a("53b8"),a("66c5"),a("26ab"),a("2efd"),a("5cb9"),a("0898"),a("5aa7"),a("750b"),a("8f8e"),a("bedc"),{components:{editor:Ye.a},props:{text:String,lang:String,placeholder:String,id:String,height:String,enable_variables:Boolean},data(){return{selector_id:this.id+Xe.a.random(1e4,99999),variables:{},data:null}},methods:{saveText(){this.$emit("input",Ye.a.activeEditor.getContent())}},watch:{text:function(){this.$forceUpdate()}},mounted(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=geteditorvariables"}).then(e=>{this.variables=e.data.data});var e=window.location.protocol+"//"+window.location.host+"/media/com_emundus_onboard/";let t={selector:"#tiny_"+this.selector_id,images_upload_url:"index.php?option=com_emundus_onboard&controller=settings&task=uploadimages",plugins:"paste link media preview image code anchor advlist hr emoticons lists searchreplace charmap quickbars imagetools pagebreak autolink print mention",toolbar:"undo redo | forecolor bold italic underline strikethrough | fontsizeselect formatselect | image link preview | alignleft aligncenter alignright alignjustify hr | bullist numlist | outdent indent | insertfile media anchor| charmap emoticons backcolor | searchreplace print",fontsize_formats:"8pt 10pt 12pt 14pt 18pt 24pt 36pt",content_css:e+"skins/ui/oxide/content.min.css",convert_urls:!1,height:this.height,branding:!1,elementpath:!1,statusbar:!1,menubar:!1,a11y_advanced_options:!1,toolbar_sticky:!1,quickbars_insert_toolbar:"",quickbars_selection_toolbar:"bold italic underline | quicklink h2 h3 blockquote",toolbar_mode:"sliding",placeholder:this.placeholder,file_picker_types:"image",file_picker_callback:function(e,t,a){var s=document.createElement("input");s.setAttribute("type","file"),s.setAttribute("accept","image/*"),s.onchange=function(){var t=this.files[0],a=new FileReader;a.onload=function(){var s="blobid"+(new Date).getTime(),o=Ye.a.activeEditor.editorUpload.blobCache,i=a.result.split(",")[1],n=o.create(s,t,i);o.add(n),e(n.blobUri(),{title:t.name})},a.readAsDataURL(t)},s.click()},mentions:{delimiter:"/",source:(e,t,a)=>{"/"===a&&1==this.enable_variables&&t(this.variables)},queryBy:"tag",delay:200,insert:e=>(setTimeout(()=>{this.$emit("input",Ye.a.activeEditor.getContent())},500),"<span>["+e.tag+"]</span>"),render:function(e){return'<li class="email-tags"><a href="javascript:;"><span>'+e.tag+"</span><p>"+e.description+"</p></a></li>"},renderDropdown:function(){return'<ul class="rte-autocomplete dropdown-menu"></ul>'}},setup:e=>{e.on("keyup",()=>{this.$emit("input",Ye.a.activeEditor.getContent())}),e.on("init",()=>{Ye.a.activeEditor.setContent(this.text)})}};"fr"==this.lang?(t.language="fr_FR",t.language_url=e+"languages/fr_FR.js",Ye.a.init(t)):Ye.a.init(t),this.$forceUpdate(),setInterval(this.saveText,3e3)}}),Ke=Qe,Ze=(a("5636"),Object(b["a"])(Ke,ze,qe,!1,null,"bca367e2",null)),et=Ze.exports,tt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"autocomplete"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],class:""!==e.year?"":"placeholder",attrs:{type:"text",id:e.id,placeholder:""!==e.year?e.year:e.name},domProps:{value:e.search},on:{input:[function(t){t.target.composing||(e.search=t.target.value)},e.onChange],keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:e.onArrowDown.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:e.onArrowUp.apply(null,arguments)},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.onEnter.apply(null,arguments)}]}}),a("ul",{directives:[{name:"show",rawName:"v-show",value:e.isOpen,expression:"isOpen"}],staticClass:"autocomplete-results"},e._l(e.results,(function(t,s){return a("li",{key:s,staticClass:"autocomplete-result",class:{"is-active":s===e.arrowCounter},on:{click:function(a){return e.setResult(t)}}},[e._v(" "+e._s(t)+" ")])})),0)])},at=[],st={name:"autocomplete",props:{items:{type:Array,required:!1,default:()=>[]},name:String,year:String,id:String},data(){return{search:"",results:[],isOpen:!1,sLoading:!1,arrowCounter:-1}},created(){const e=e=>new Promise(t=>setTimeout(t,e));e(2e3).then(()=>{this.search=this.year})},methods:{onSearching(e){this.$emit("searched",this.search)},onChange(){this.isOpen=!0,this.filterResults(),this.onSearching()},filterResults(){this.results=this.items.filter(e=>e.toLowerCase().indexOf(this.search.toLowerCase())>-1)},setResult(e){this.search=e,this.isOpen=!1,this.onSearching()},onArrowDown(){this.arrowCounter<this.results.length&&(this.arrowCounter=this.arrowCounter+1)},onArrowUp(){this.arrowCounter>0&&(this.arrowCounter=this.arrowCounter-1)},onEnter(){this.search=this.results[this.arrowCounter],this.isOpen=!1,this.arrowCounter=-1,this.onSearching()},handleClickOutside(e){this.$el.contains(e.target)||(this.isOpen=!1,this.arrowCounter=-1)}},mounted(){document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)}},ot=st,it=(a("bb8f"),Object(b["a"])(ot,tt,at,!1,null,"d62d9cce",null)),nt=it.exports;const rt=a("bef5");var lt={name:"addProgram",components:{Tasks:Le,Editor:et,Autocomplete:nt},directives:{focus:{inserted:function(e){e.focus()}}},props:{prog:Number,actualLanguage:String},data:()=>({dynamicComponent:!1,isHidden:!1,new_category:"",categories:[],cats:[],programs:[],quit:1,Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM"),AddProgram:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDPROGRAM"),ChooseProg:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_CHOOSEPROG"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Quitter:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_QUITTER"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Publish:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),DepotDeDossier:Joomla.JText._("COM_EMUNDUS_ONBOARD_DEPOTDEDOSSIER"),ProgName:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGNAME"),ProgCode:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGCODE"),ChooseCategory:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSECATEGORY"),NameCategory:Joomla.JText._("COM_EMUNDUS_ONBOARD_NAMECATEGORY"),LabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),CodeRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROG_REQUIRED_CODE"),CategoryRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROG_REQUIRED_CATEGORY"),RequiredFieldsIndicate:Joomla.JText._("COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE"),ProgramResume:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_RESUME"),AdvancedSettings:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADVANCED_SETTINGS"),form:{label:"",code:"",programmes:"",notes:"",synthesis:'<ul><li><strong>[APPLICANT_NAME]</strong></li><li><a href="mailto:[EMAIL]">[EMAIL]</a></li></ul>',tmpl_trombinoscope:'<table cellpadding="2" style="width: 100%;"><tbody><tr style="border-collapse: collapse;"><td align="center" valign="top" style="text-align: center;"><p style="text-align: center;"><img src="[PHOTO]" alt="Photo" height="100" /> </p><p style="text-align: center;"><b>[NAME]</b><br /></p></td></tr></tbody></table>',tmpl_badge:'<table width="100%"><tbody><tr><td style="vertical-align: top; width: 100px;" align="left" valign="middle" width="30%"><img src="[LOGO]" alt="Logo" height="50" /></td><td style="vertical-align: top;" align="left" valign="top" width="70%"><b>[NAME]</b></td></tr></tbody></table>\n',published:1,apply_online:1},submitted:!1,errors:{label:!1,code:!1,category:!1}}),validations:{form:{label:{required:He["required"]},code:{required:He["required"]}}},methods:{submit(){return this.errors.label=!1,this.errors.code=!1,this.errors.category=!1,""==this.form.label?(this.errors.label=!0,0):""==this.form.code?(this.errors.code=!0,0):(""!==this.new_category&&(this.form.programmes=this.new_category),this.$v.$touch(),void(this.$v.$invalid||(this.submitted=!0,""!==this.prog?d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=updateprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:rt.stringify({body:this.form,code:this.prog})}).then(e=>{this.quitFunnelOrContinue(this.quit)}).catch(e=>{console.log(e)}):d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=createprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:rt.stringify({body:this.form})}).then(e=>{this.prog=e.data.data,this.quitFunnelOrContinue(this.quit)}).catch(e=>{console.log(e)}))))},onSearchCategory(e){this.form.programmes=e},updateCode(){""!==this.form.label?(this.form.code=this.form.label.toUpperCase().replace(/[^a-zA-Z0-9]/g,"_").substring(0,10)+"_00",this.programs.forEach((e,t)=>{if(this.form.code==e.code){let t=parseInt(e.code.split("_")[1])+1;this.form.code=t>10?this.form.label.toUpperCase()+"_"+t:this.form.label.toUpperCase()+"_0"+t}})):this.form.code=""},checkCode(){this.programs.forEach((e,t)=>{if(this.form.code.toUpperCase()==e.code){let t=parseInt(e.code.split("_")[1])+1;this.form.code=t>10?this.form.label.toUpperCase()+"_"+t:this.form.label.toUpperCase()+"_0"+t}})},quitFunnelOrContinue(e){0==e?window.location.href="/configuration-programs":1==e&&window.location.replace("index.php?option=com_emundus_onboard&view=program&layout=advancedsettings&pid="+this.prog)}},created(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getprogramcategories").then(e=>{this.categories=e.data.data;for(var t=0;t<this.categories.length;t++)this.cats.push(this.categories[t]);""!==this.prog?d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getprogrambyid&id="+this.prog).then(e=>{this.form.code=e.data.data.code,this.form.label=e.data.data.label,this.form.notes=e.data.data.notes,this.form.programmes=e.data.data.programmes,this.form.tmpl_badge=e.data.data.tmpl_badge,this.form.published=e.data.data.published,this.form.apply_online=e.data.data.apply_online,null!=e.data.data.synthesis&&(this.form.synthesis=e.data.data.synthesis.replace(/>\s+</g,"><")),null!=e.data.data.tmpl_trombinoscope&&(this.form.tmpl_trombinoscope=e.data.data.tmpl_trombinoscope.replace(/>\s+</g,"><")),this.dynamicComponent=!0}).catch(e=>{console.log(e)}):this.dynamicComponent=!0}).catch(e=>{console.log(e)}),d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getallprogram").then(e=>{this.programs=e.data.data,this.programs.sort((e,t)=>e.id-t.id)}).catch(e=>{console.log(e)})}},dt=lt,ct=Object(b["a"])(dt,$e,Ge,!1,null,"e119ddfe",null),mt=ct.exports,ut=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"column-menu-main w-row",staticStyle:{"margin-top":"120px"}},[a("div",{staticClass:"w-row"},[a("div",{staticClass:"col-md-4 p-1"},[a("div",{staticClass:"mb-1"},[a("h1",{staticClass:"nom-campagne"},[e._v(e._s(e.Program)+" : "+e._s(e.program.label))]),a("div",{staticClass:"prog-info"},[a("div",[a("p",[e._v(" "+e._s(e.Code)+" : "+e._s(e.program.code)+" ")]),a("p",[e._v(" "+e._s(e.Category)+" : "+e._s(e.program.programmes)+" ")])]),a("a",{staticClass:"modifier-la-campagne pointer",on:{click:function(t){return e.redirectJRoute("index.php?option=com_emundus_onboard&view=program&layout=add&pid="+e.prog)}}},[e._m(0)])])]),a("div",{staticClass:"divider-menu"}),a("transition",{attrs:{name:"slide-right"}},[a("div",{staticClass:"col-md-12 mt-2"},[a("div",{staticClass:"container-menu-funnel"},e._l(e.progCategories[e.langue],(function(t,s){return a("div",{key:s},[a("a",{staticClass:"menu-item",class:e.menuHighlight==s?"w--current":"",on:{click:function(t){e.menuHighlight=s}}},[e._v(e._s(t))])])})),0)])])],1),a("div",{staticClass:"col-md-8 p-1",staticStyle:{"padding-left":"2em !important"}},[a("h2",[e._v(e._s(e.progCategories[e.langue][e.menuHighlight]))]),a("p",{staticClass:"paragraphe-sous-titre"},[e._v(e._s(e.funnelDescription[e.langue][e.menuHighlight]))]),a("transition",{attrs:{name:"slide-right"}},[0==e.menuHighlight?a("addGestionnaires",{attrs:{funnelCategorie:e.progCategories[e.langue][e.menuHighlight],group:this.prog_group,coordinatorAccess:e.coordinatorAccess}}):e._e(),1==e.menuHighlight?a("addEvaluationGrid",{attrs:{funnelCategorie:e.progCategories[e.langue][e.menuHighlight],prog:this.prog}}):e._e(),2==e.menuHighlight?a("addEmail",{attrs:{funnelCategorie:e.progCategories[e.langue][e.menuHighlight],prog:this.prog}}):e._e()],1)],1)]),a("div",{staticClass:"section-sauvegarder-et-continuer-funnel"},[a("div",{staticClass:"w-container"},[a("div",{staticClass:"container-evaluation w-clearfix"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer",on:{click:function(t){return e.next()}}},[e._v(e._s(e.Continuer))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",on:{click:function(t){return e.previous()}}},[e._v(" "+e._s(e.Retour)+" ")])])])]),a("tasks")],1)},pt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"w-inline-block edit-icon"},[a("em",{staticClass:"fas fa-edit"})])}],_t=a("0065"),ht=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation"},[a("ModalAddUser",{attrs:{group:this.group,coordinatorAccess:e.coordinatorAccess,userManage:0},on:{Updatemanager:function(t){return e.getManagersInGroup()},Updateevaluator:function(t){return e.getEvaluatorsInGroup()}}}),0!=e.coordinatorAccess?a("ModalAffect",{attrs:{group:this.group,groupProfile:"manager"},on:{Updatemanager:function(t){return e.getManagersInGroup()}}}):e._e(),a("ModalAffect",{attrs:{group:this.group,groupProfile:"evaluator"},on:{Updateevaluator:function(t){return e.getEvaluatorsInGroup()}}}),a("a",{staticClass:"bouton-ajouter bouton-ajouter-green pointer",staticStyle:{width:"max-content"},on:{click:function(t){return e.$modal.show("modalAddUser")}}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.addUser)+" ")])]),0!=e.coordinatorAccess?a("div",{staticClass:"choices-buttons"},[a("h2",{staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e.Administrators))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return e.$modal.show("modalAffectmanager")}}},[e._v(e._s(e.affectUsers))])]):e._e(),a("transition-group",{attrs:{name:"slide-down",type:"transition"}},e._l(e.managers,(function(t,s){return 0!=e.coordinatorAccess?a("div",{key:s,staticClass:"manager-item"},[a("div",[a("p",[e._v(e._s(t.name))]),a("p",[e._v(e._s(t.email))])]),a("button",{staticClass:"remove-user",attrs:{type:"button"},on:{click:function(a){return e.removeManager(t,s)}}},[a("em",{staticClass:"fas fa-minus"})])]):e._e()})),0),a("div",{staticClass:"choices-buttons"},[a("h2",{staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e.Evaluators))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return e.$modal.show("modalAffectevaluator")}}},[e._v(e._s(e.affectUsers))])]),a("transition-group",{attrs:{name:"slide-down",type:"transition"}},e._l(e.evaluators,(function(t,s){return a("div",{key:s,staticClass:"manager-item"},[a("div",[a("p",[e._v(e._s(t.name))]),a("p",[e._v(e._s(t.email))])]),a("button",{staticClass:"remove-user",attrs:{type:"button"},on:{click:function(a){return e.removeEvaluator(t,s)}}},[a("em",{staticClass:"fas fa-minus"})])])})),0)],1)},gt=[],ft=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalAddUser"}},[a("modal",{attrs:{name:"modalAddUser",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddUser")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.addUser)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Lastname)+"* :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.lastname,expression:"form.lastname"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.lastname},attrs:{type:"text",maxlength:"40"},domProps:{value:e.form.lastname},on:{input:function(t){t.target.composing||e.$set(e.form,"lastname",t.target.value)}}}),e.errors.lastname?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.LastnameRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Firstname)+"* :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.firstname,expression:"form.firstname"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.firstname},attrs:{type:"text",maxlength:"40"},domProps:{value:e.form.firstname},on:{input:function(t){t.target.composing||e.$set(e.form,"firstname",t.target.value)}}}),e.errors.firstname?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.FirstnameRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Email)+"* :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.email,expression:"form.email"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.email},attrs:{type:"text",maxlength:"40"},domProps:{value:e.form.email},on:{input:function(t){t.target.composing||e.$set(e.form,"email",t.target.value)}}}),e.errors.email?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.EmailRequired))])]):e._e()]),1==e.userManage?a("div",{staticClass:"form-group"},[a("label",{staticClass:"mb-1"},[e._v(e._s(e.Program)+"* :")]),a("div",{staticClass:"select-all"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectall,expression:"selectall"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectall)?e._i(e.selectall,null)>-1:e.selectall},on:{click:e.selectAllPrograms,change:function(t){var a=e.selectall,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.selectall=a.concat([i])):n>-1&&(e.selectall=a.slice(0,n).concat(a.slice(n+1)))}else e.selectall=o}}}),a("label",[e._v(" "+e._s(e.SelectAll)+" ")])]),a("div",{staticClass:"users-block"},e._l(e.programs,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.affected_programs[t.id],expression:"affected_programs[program.id]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.affected_programs[t.id])?e._i(e.affected_programs[t.id],null)>-1:e.affected_programs[t.id]},on:{change:function(a){var s=e.affected_programs[t.id],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.affected_programs,t.id,s.concat([n])):r>-1&&e.$set(e.affected_programs,t.id,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.affected_programs,t.id,i)}}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.label))])])])})),0)]):e._e(),0!=e.userManage&&e.least_one_program?e._e():a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Role)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.profile,expression:"form.profile"}],staticClass:"dropdown-toggle",class:{"is-invalid":e.errors.profile},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"profile",t.target.multiple?a:a[0])}}},[0!=e.coordinatorAccess?a("option",{attrs:{value:"5"}},[e._v(e._s(e.Administrator))]):e._e(),a("option",{attrs:{value:"6"}},[e._v(e._s(e.Evaluator))])]),e.errors.profile?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.RoleRequired))])]):e._e()])]),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddUser")}}},[e._v(e._s(e.Retour))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.createUser()}}},[e._v(e._s(e.Continuer))])]),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()])],1)},bt=[];const vt=a("bef5");var Ct={name:"modalAddUser",props:{group:Object,coordinatorAccess:Number,userManage:Number},data(){return{errors:{firstname:!1,lastname:!1,login:!1,email:!1},form:{login:"",firstname:"",lastname:"",campaigns:"",oprofiles:"",groups:"",profile:5,jgr:13,email:"",newsletter:0,university_id:0,ldap:0},affected_programs:[],least_one_program:!0,programs:[],selectall:!1,changes:!1,loading:!1,addUser:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADDUSER"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Firstname:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIRSTNAME"),FirstnameRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIRSTNAME_REQUIRED"),Lastname:Joomla.JText._("COM_EMUNDUS_ONBOARD_LASTNAME"),LastnameRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_LASTNAME_REQUIRED"),Email:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL"),EmailRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_REQUIRED"),Role:Joomla.JText._("COM_EMUNDUS_ONBOARD_ROLE"),RoleRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_ROLE_REQUIRED"),Administrator:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATOR"),Evaluator:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATOR"),Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM"),SelectAll:Joomla.JText._("COM_EMUNDUS_ONBOARD_SELECT_ALL")}},methods:{beforeClose(e){},beforeOpen(e){},selectAllPrograms(){this.selectall?this.least_one_program=!0:this.least_one_program=!1,this.programs.forEach(e=>{this.selectall?this.affected_programs[e.id]=!1:this.affected_programs[e.id]=!0}),this.$forceUpdate()},getProgramsList(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getallprogram",params:{filter:"",sort:"",recherche:"",lim:100,page:1},paramsSerializer:e=>vt.stringify(e)}).then(e=>{this.programs=e.data.data})},createUser(){return this.errors={firstname:!1,lastname:!1,identifier:!1,email:!1},""==this.form.lastname?(this.errors.lastname=!0,0):""==this.form.firstname?(this.errors.firstname=!0,0):""==this.form.email?(this.errors.email=!0,0):(this.form.login=this.form.email,this.loading=!0,void d()({method:"post",url:"index.php?option=com_emundus&controller=users&task=adduser",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:vt.stringify(this.form)}).then(e=>{1==e.data.status?this.least_one_program||1!=this.userManage?0==this.userManage?this.affectUserToRole(this.group):(this.loading=!1,this.$emit("UpdateUsers",this.form),this.$modal.hide("modalAddUser")):d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getgroupsbyprograms",params:{programs:this.affected_programs},paramsSerializer:e=>vt.stringify(e)}).then(e=>{Object.values(e.data.groups).forEach(e=>{console.log(e),this.affectUserToRole(e)})}):(this.loading=!1,T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),text:e.data.msg,type:"error",showCancelButton:!1,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK")}))}).catch(e=>{console.log(e)}))},affectUserToRole(e){let t=null;t=5==this.form.profile?e.manager:e.evaluator,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=affectusertogroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:vt.stringify({group:t,prog_group:e.prog,email:this.form.email})}).then(e=>{this.loading=!1,1==this.userManage?this.$emit("UpdateUsers",this.form):5==this.form.profile?this.$emit("Updatemanager"):this.$emit("Updateevaluator"),this.$modal.hide("modalAddUser")})}},created(){1==this.userManage&&this.getProgramsList()},watch:{affected_programs:function(){this.least_one_program=this.affected_programs.every(e=>!1===e)}}},Ot=Ct,Dt=(a("f1cf"),Object(b["a"])(Ot,ft,bt,!1,null,"9cafee18",null)),Et=Dt.exports,yt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalAffect"+e.groupProfile}},[a("modal",{attrs:{name:"modalAffect"+e.groupProfile,height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAffect"+e.groupProfile)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.affectUsers)+" ")])])]),a("div",{staticClass:"modalC-content"},[0===e.users.length?a("p",{staticClass:"mt-1 mb-1"},[e._v(e._s(e.usersEmpty))]):e._e(),0!==e.users.length?a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:e.Search},domProps:{value:e.searchTerm},on:{keyup:e.searchUserByTerm,input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),a("button",{staticClass:"searchButton",attrs:{type:"button"},on:{click:e.searchUserByTerm}},[a("em",{staticClass:"fas fa-search"})])])]):e._e(),e._l(e.users,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.affectedUsers[t.id],expression:"affectedUsers[user.id]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.affectedUsers[t.id])?e._i(e.affectedUsers[t.id],null)>-1:e.affectedUsers[t.id]},on:{change:function(a){var s=e.affectedUsers[t.id],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.affectedUsers,t.id,s.concat([n])):r>-1&&e.$set(e.affectedUsers,t.id,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.affectedUsers,t.id,i)}}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.name))]),a("p",[e._v(e._s(t.email))])])])}))],2),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAffect"+e.groupProfile)}}},[e._v(e._s(e.Retour))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.affectToGroup.apply(null,arguments)}}},[e._v(e._s(e.Continuer))])])])],1)},xt=[];const Nt=a("bef5");var Ut={name:"modalAffect",props:{group:Object,groupProfile:String},data(){return{users:[],affectedUsers:[],searchTerm:"",Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),affectUsers:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_AFFECTUSERS"),usersEmpty:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_USERSEMPTY")}},methods:{beforeClose(e){},beforeOpen(e){this.getUsers()},affectToGroup(){let e=[];this.users.forEach(t=>{this.affectedUsers[t.id]&&e.push(t.id)});let t=null;t="manager"==this.groupProfile?this.group.manager:this.group.evaluator,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=affectuserstogroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Nt.stringify({group:t,prog_group:this.group.prog,users:e})}).then(()=>{this.affectedUsers=[],this.$emit("Update"+this.groupProfile),this.$modal.hide("modalAffect"+this.groupProfile)})},getUsers(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getuserstoaffect&group="+this.group.prog).then(e=>{this.users=e.data.data})},searchUserByTerm(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getuserstoaffectbyterm&group="+this.group.prog+"&term="+this.searchTerm).then(e=>{this.users=e.data.data})}}},Tt=Ut,At=Object(b["a"])(Tt,yt,xt,!1,null,"05cd240c",null),Mt=At.exports;const Rt=a("bef5");var St={name:"addGestionnaires",components:{ModalAffect:Mt,ModalAddUser:Et},props:{funnelCategorie:String,group:Object,coordinatorAccess:Number},data(){return{managers:[],evaluators:[],addUser:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADDUSER"),affectUsers:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_AFFECTUSERS"),Administrators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS")}},methods:{getManagersInGroup(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getmanagers&group="+this.group.manager).then(e=>{this.managers=e.data.data})},getEvaluatorsInGroup(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getevaluators&group="+this.group.evaluator).then(e=>{this.evaluators=e.data.data})},removeManager(e,t){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=removefromgroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rt.stringify({id:e.id,group:this.group.manager,prog_group:this.group.prog})}).then(()=>{this.managers.splice(t,1)})},removeEvaluator(e,t){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=removefromgroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rt.stringify({id:e.id,group:this.group.evaluator,prog_group:this.group.prog})}).then(()=>{this.evaluators.splice(t,1)})}},created(){this.getManagersInGroup(),this.getEvaluatorsInGroup()}},wt=St,Jt=(a("74c0"),Object(b["a"])(wt,ht,gt,!1,null,"67cd5cb3",null)),kt=Jt.exports,Bt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation"},[a("ModalAddTrigger",{key:e.candidate_trigger,attrs:{prog:this.prog,trigger:this.triggerSelected,triggerAction:"candidate"},on:{UpdateTriggers:e.getTriggers}}),a("ModalAddTrigger",{key:e.manual_trigger,attrs:{prog:this.prog,trigger:this.triggerSelected,triggerAction:"manual"},on:{UpdateTriggers:e.getTriggers}}),a("div",{staticClass:"choices-buttons"},[a("h2",{staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e.CandidateAction))]),a("a",{staticClass:"bouton-ajouter bouton-ajouter-green pointer",staticStyle:{width:"max-content"},on:{click:function(t){e.$modal.show("modalAddTriggercandidate"),e.triggerSelected=null}}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.addTrigger)+" ")])])]),a("p",[e._v(e._s(e.TheCandidateDescription))]),a("transition-group",{attrs:{name:"slide-down",type:"transition"}},e._l(e.triggers,(function(t,s){return 1==t.candidate?a("div",{key:s,staticClass:"trigger-item"},[a("div",{staticStyle:{"max-width":"80%"}},[a("p",[e._v(e._s(t.subject))]),a("p",[a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.Target)+" : ")]),e._l(t.users,(function(s,o){return null==t.profile?a("span",[e._v(" "+e._s(s.firstname)+" "+e._s(s.lastname)+" "),o!=Object.keys(t.users).length-1?a("span",[e._v(", ")]):e._e()]):e._e()})),0==t.users.length&&5!=t.profile&&6!=t.profile?a("span",[e._v(e._s(e.TheCandidate))]):e._e(),5==t.profile?a("span",[e._v(e._s(e.Administrators))]):e._e(),6==t.profile?a("span",[e._v(e._s(e.Evaluators))]):e._e()],2),a("p",[e._v(e._s(e.Status)+" "+e._s(t.status))])]),a("div",{staticStyle:{display:"grid"}},[a("button",{staticClass:"buttonDeleteDoc",attrs:{type:"button",title:e.removeTrig},on:{click:function(a){return e.removeTrigger(t.trigger_id)}}},[a("em",{staticClass:"fas fa-times"})]),a("a",{staticClass:"cta-block pointer",on:{click:function(a){return e.editTrigger(t)}}},[a("em",{staticClass:"fas fa-pen"})])])]):e._e()})),0),a("div",{staticClass:"choices-buttons"},[a("h2",{staticStyle:{"margin-bottom":"0"}},[e._v(e._s(e.ManagerAction))]),a("a",{staticClass:"bouton-ajouter bouton-ajouter-green pointer",staticStyle:{width:"max-content"},on:{click:function(t){e.$modal.show("modalAddTriggermanual"),e.triggerSelected=null}}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.addTrigger)+" ")])])]),a("p",[e._v(e._s(e.ManualDescription))]),a("transition-group",{attrs:{name:"slide-down",type:"transition"}},e._l(e.triggers,(function(t,s){return 1==t.manual?a("div",{key:s,staticClass:"trigger-item"},[a("div",{staticStyle:{"max-width":"80%"}},[a("p",[e._v(e._s(t.subject))]),a("p",[a("span",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.Target)+" : ")]),e._l(t.users,(function(s,o){return null==t.profile&&t.users.length>0?a("span",[e._v(" "+e._s(s.firstname)+" "+e._s(s.lastname)+" "),o!=Object.keys(t.users).length-1?a("span",[e._v(", ")]):e._e()]):e._e()})),0==t.users.length&&5!=t.profile&&6!=t.profile?a("span",[e._v(e._s(e.TheCandidate))]):e._e(),5==t.profile?a("span",[e._v(e._s(e.Administrators))]):e._e(),6==t.profile?a("span",[e._v(e._s(e.Evaluators))]):e._e()],2),a("p",[e._v(e._s(e.Status)+" "+e._s(t.status))])]),a("div",{staticStyle:{display:"grid"}},[a("button",{staticClass:"buttonDeleteDoc",attrs:{type:"button"},on:{click:function(a){return e.removeTrigger(t.trigger_id)}}},[a("em",{staticClass:"fas fa-times"})]),a("a",{staticClass:"cta-block pointer",on:{click:function(a){return e.editTrigger(t)}}},[a("em",{staticClass:"fas fa-pen"})])])]):e._e()})),0)],1)},Lt=[],It=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalAddTrigger"+e.triggerAction}},[a("modal",{attrs:{name:"modalAddTrigger"+e.triggerAction,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("ModalEmailPreview",{attrs:{model:this.form.model,models:this.models}}),a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddTrigger"+e.triggerAction)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.addTrigger)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Model)+"* :")]),a("div",{staticClass:"input-can-translate"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.model,expression:"form.model"}],staticClass:"dropdown-toggle",class:{"is-invalid":e.errors.model},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"model",t.target.multiple?a:a[0])}}},e._l(e.models,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(e._s(t.subject))])})),0),-1!=e.form.model?a("button",{staticClass:"btnPreview mb-0",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.show("modalEmailPreview_"+e.form.model)}}},[a("em",{staticClass:"fas fa-eye"})]):e._e()]),e.errors.model?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.ModelRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Status)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.status,expression:"form.status"}],staticClass:"dropdown-toggle",class:{"is-invalid":e.errors.status},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"status",t.target.multiple?a:a[0])}}},e._l(e.status,(function(t,s){return a("option",{key:s,domProps:{value:t.step}},[e._v(e._s(t.value))])})),0),e.errors.status?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.StatusRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Target)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.target,expression:"form.target"}],staticClass:"dropdown-toggle",class:{"is-invalid":e.errors.target},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"target",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"5"}},[e._v(e._s(e.Administrators))]),a("option",{attrs:{value:"6"}},[e._v(e._s(e.Evaluators))]),a("option",{attrs:{value:"1000"}},[e._v(e._s(e.Candidates))])]),e.errors.target?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.TargetRequired))])]):e._e()]),0==e.form.target?a("div",{staticClass:"form-group",staticStyle:{"align-items":"baseline"}},[a("label",[e._v(e._s(e.ChooseUsers)+"* :")]),a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:e.Search},domProps:{value:e.searchTerm},on:{keyup:e.searchUserByTerm,input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),a("button",{staticClass:"searchButton",attrs:{type:"button"},on:{click:e.searchUserByTerm}},[a("em",{staticClass:"fas fa-search"})])])]),a("div",{staticClass:"select-all"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectall,expression:"selectall"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectall)?e._i(e.selectall,null)>-1:e.selectall},on:{click:e.selectAllUsers,change:function(t){var a=e.selectall,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.selectall=a.concat([i])):n>-1&&(e.selectall=a.slice(0,n).concat(a.slice(n+1)))}else e.selectall=o}}}),a("label",{staticClass:"mb-0 ml-10px"},[e._v(" "+e._s(e.SelectAll)+" ")])]),a("div",{staticClass:"users-block",class:{"is-invalid":e.errors.selectedUsers}},e._l(e.users,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUsers[t.id],expression:"selectedUsers[user.id]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectedUsers[t.id])?e._i(e.selectedUsers[t.id],null)>-1:e.selectedUsers[t.id]},on:{change:function(a){var s=e.selectedUsers[t.id],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.selectedUsers,t.id,s.concat([n])):r>-1&&e.$set(e.selectedUsers,t.id,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.selectedUsers,t.id,i)}}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.name))]),a("p",[e._v(e._s(t.email))])])])})),0),e.errors.selectedUsers?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.UsersRequired))])]):e._e()]):e._e()]),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddTrigger"+e.triggerAction)}}},[e._v(e._s(e.Retour))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.createTrigger()}}},[e._v(e._s(e.Continuer))])])],1)],1)},Pt=[];const jt=a("bef5");var Ft={name:"modalAddTrigger",components:{ModalEmailPreview:q},props:{prog:Number,trigger:Number,triggerAction:String},data(){return{errors:{model:!1,status:!1,action_status:!1,target:!1,selectedUsers:!1},form:{model:-1,status:null,action_status:null,target:null,program:this.prog},users:[],selectedUsers:[],models:[],status:[],searchTerm:"",changes:!1,selectall:!1,addTrigger:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_ADDTRIGGER"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Model:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERMODEL"),ModelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERMODEL_REQUIRED"),Status:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS"),StatusRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS_REQUIRED"),Target:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERTARGET"),TargetRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERTARGET_REQUIRED"),Administrators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS"),Candidates:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_CANDIDATES"),DefinedUsers:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_DEFINED_USERS"),ChooseUsers:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGER_CHOOSE_USERS"),UsersRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGER_USERS_REQUIRED"),Search:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEARCH_USERS"),ChangedActionStatus:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHANGED_ACTION_STATUS"),TheCandidate:Joomla.JText._("COM_EMUNDUS_ONBOARD_THE_CANDIDATE"),Manual:Joomla.JText._("COM_EMUNDUS_ONBOARD_MANUAL"),SelectAll:Joomla.JText._("COM_EMUNDUS_ONBOARD_SELECT_ALL")}},methods:{beforeClose(e){this.trigger=null,this.form={model:-1,status:null,action_status:null,target:null,program:this.prog}},beforeOpen(e){this.searchTerm="",this.getUsers(),this.getEmailModels(),this.getStatus(),setTimeout(()=>{null!=this.trigger&&this.getTrigger()},200),"candidate"===this.triggerAction?this.form.action_status="to_current_user":this.form.action_status="to_applicant"},createTrigger(){return this.errors={model:!1,status:!1,action_status:!1,target:!1,selectedUsers:!1},-1===this.form.model?(this.errors.model=!0,0):null==this.form.status?(this.errors.status=!0,0):null==this.form.action_status?(this.errors.action_status=!0,0):null==this.form.target?(this.errors.target=!0,0):0==this.form.target&&0===this.selectedUsers.length?(this.errors.selectedUsers=!0,0):void(null!=this.trigger?d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=updatetrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jt.stringify({tid:this.trigger,trigger:this.form,users:this.selectedUsers})}).then(e=>{this.selectedUsers=[],this.$emit("UpdateTriggers"),this.$modal.hide("modalAddTrigger"+this.triggerAction)}):d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=createtrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jt.stringify({trigger:this.form,users:this.selectedUsers})}).then(e=>{this.selectedUsers=[],this.$emit("UpdateTriggers"),this.$modal.hide("modalAddTrigger"+this.triggerAction)}))},getUsers(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getuserswithoutapplicants").then(e=>{this.users=e.data.data})},searchUserByTerm(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=searchuserbytermwithoutapplicants&term="+this.searchTerm).then(e=>{this.users=e.data.data})},getEmailModels(){d.a.get("index.php?option=com_emundus_onboard&controller=email&task=getallemail").then(e=>{this.models=e.data.data})},getStatus(){d.a.get("index.php?option=com_emundus_onboard&controller=email&task=getstatus").then(e=>{this.status=e.data.data})},getTrigger(){d.a.get("index.php?option=com_emundus_onboard&controller=email&task=gettriggerbyid&tid="+this.trigger).then(e=>{this.form.model=e.data.data.model,this.form.status=e.data.data.status,null==e.data.data.target?(this.form.target=0,e.data.data.users.forEach(e=>{this.selectedUsers[e.user_id]=!0})):5!=e.data.data.target&&6!=e.data.data.target?this.form.target=1e3:this.form.target=e.data.data.target})},selectAllUsers(){this.users.forEach(e=>{this.selectall?this.selectedUsers[e.id]=!1:this.selectedUsers[e.id]=!0}),this.$forceUpdate()}}},$t=Ft,Gt=(a("8dc1"),Object(b["a"])($t,It,Pt,!1,null,"39ff61c5",null)),Ht=Gt.exports;const zt=a("bef5");var qt={name:"addEmail",components:{ModalAddTrigger:Ht},props:{funnelCategorie:String,prog:Number},data(){return{triggers:[],triggerSelected:null,manual_trigger:0,candidate_trigger:0,addTrigger:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_ADDTRIGGER"),removeTrig:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_REMOVETRIGGER"),affectTriggers:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_AFFECTTRIGGERS"),ChooseEmailTrigger:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_EMAIL_TRIGGER"),Target:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERTARGET"),Status:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS"),Administrators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS"),TheCandidate:Joomla.JText._("COM_EMUNDUS_ONBOARD_THE_CANDIDATE"),Manual:Joomla.JText._("COM_EMUNDUS_ONBOARD_MANUAL"),TheCandidateDescription:Joomla.JText._("COM_EMUNDUS_ONBOARD_THE_CANDIDATE_DESCRIPTION"),ManualDescription:Joomla.JText._("COM_EMUNDUS_ONBOARD_MANUAL_DESCRIPTION"),CandidateAction:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANDIDATE_ACTION"),ManagerAction:Joomla.JText._("COM_EMUNDUS_ONBOARD_MANAGER_ACTION")}},methods:{editTrigger(e){this.triggerSelected=e.trigger_id,this.manual_trigger+=1,this.candidate_trigger+=1,setTimeout(()=>{1==e.candidate?this.$modal.show("modalAddTriggercandidate"):this.$modal.show("modalAddTriggermanual")},500)},removeTrigger(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=removetrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:zt.stringify({tid:e})}).then(e=>{this.getTriggers()})},getTriggers(){d.a.get("index.php?option=com_emundus_onboard&controller=email&task=gettriggersbyprogram&pid="+this.prog).then(e=>{this.triggers=e.data.data})}},created(){this.getTriggers()}},Vt=qt,Yt=(a("44f3"),Object(b["a"])(Vt,Bt,Lt,!1,null,"a3b539e4",null)),Wt=Yt.exports,Xt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation"},[a("p",{staticClass:"heading"},[e._v(e._s(e.chooseCampaign)+" :")]),a("div",{staticClass:"heading-block mb-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.cid,expression:"cid"}],staticClass:"dropdown-toggle",staticStyle:{width:"90%"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.cid=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:null}}),e._l(e.campaigns,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(" "+e._s(t.label)+" ")])}))],2),null!=e.cid?a("a",{staticClass:"modifier-la-campagne",attrs:{href:"index.php?option=com_emundus_onboard&view=campaign&layout=add&cid="+e.cid}},[e._m(0)]):e._e()]),null==e.cid?a("div",{staticClass:"required mt-1",staticStyle:{display:"flex"}},[a("em",{staticClass:"fas fa-exclamation-circle icon-warning-margin"}),a("p",[e._v(e._s(e.chooseCampaignWarning))])]):e._e(),null!=e.cid&&null==e.profile?a("div",{staticClass:"required mt-1",staticStyle:{display:"flex"}},[a("em",{staticClass:"fas fa-exclamation-circle icon-warning-margin"}),a("p",[e._v(e._s(e.NoFormAffectedToThisCampaign))])]):e._e(),null!=e.cid&&null!==e.profile?a("div",[a("div",[a("add-formulaire",{key:e.formReload,attrs:{profileId:e.profile,visibility:e.cid}})],1)]):e._e()])},Qt=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"w-inline-block edit-icon"},[a("em",{staticClass:"fas fa-edit"})])}],Kt=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation formulairedepresentation"},[a("p",{staticClass:"heading"},[e._v(e._s(e.ChooseForm))]),a("div",{staticClass:"heading-block",staticStyle:{"margin-left":"unset"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.profileId,expression:"profileId"}],staticClass:"dropdown-toggle",attrs:{id:"select_profile"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.profileId=t.target.multiple?a:a[0]},e.updateProfileCampaign]}},e._l(e.profiles,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(" "+e._s(t.form_label)+" ")])})),0),a("a",{staticClass:"bouton-ajouter bouton-ajouter-green pointer",on:{click:e.addNewForm}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.AddForm)+" ")])])]),this.formList?a("FormCarrousel",{key:e.formListReload,attrs:{formList:this.formList,documentsList:this.documentsList,visibility:this.visibility},on:{getEmitIndex:e.getEmitIndex,formbuilder:e.formbuilder}}):e._e()],1)},Zt=[],ea=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"menu-block"},[a("div",{staticClass:"col-md-8 form-viewer-builder",staticStyle:{padding:"30px"}},[e.formLinkArray[e.indexHighlight]?a("FormViewer",{attrs:{link:e.formLinkArray[e.indexHighlight],visibility:this.visibility},on:{editPage:e.EditPage}}):e._e()],1),a("ul",{staticClass:"col-md-3 sticky-form-pages"},[a("div",{staticClass:"form-pages"},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{margin:"0",padding:"0 10px"}},[a("img",{staticClass:"mr-1",attrs:{src:"/images/emundus/menus/form.png",alt:e.Form}}),e._v(e._s(e.Form))]),e._l(e.formNameArray,(function(t,s){return a("li",{key:s,staticClass:"MenuForm"},[a("a",{staticClass:"MenuFormItem",class:e.indexHighlight==s?"MenuFormItem_current":"",domProps:{innerHTML:e._s(t.value)},on:{click:function(t){return e.ChangeIndex(s)}}},[e._v(e._s(t.value))])])}))],2),a("div",{staticClass:"form-pages"},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{margin:"0",padding:"0 10px"}},[a("em",{staticClass:"far fa-folder-open mr-1",attrs:{alt:e.Documents}}),e._v(e._s(e.Documents))]),e._l(e.documentsList,(function(t,s){return a("li",{key:s,staticClass:"MenuForm"},[a("a",{staticClass:"MenuFormItem"},[e._v(e._s(t.label))])])}))],2)])])])},ta=[],aa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"FormViewer container-fluid",attrs:{id:"FormViewer"}},[e.object_json.show_page_heading?a("div",{class:e.object_json.show_page_heading.class,domProps:{innerHTML:e._s(e.object_json.show_page_heading.page_heading)}}):e._e(),a("div",{staticClass:"d-flex justify-content-between"},[e.object_json.show_title?a("h2",{staticClass:"page_header",domProps:{innerHTML:e._s(e.object_json.show_title.value)}}):e._e(),a("a",{staticClass:"cta-block pointer",on:{click:e.formbuilder}},[a("em",{staticClass:"fas fa-pen"})])]),e.object_json.intro_value?a("p",{staticClass:"introP",staticStyle:{"margin-top":"2em"},domProps:{innerHTML:e._s(e.object_json.intro_value)}}):e._e(),a("form",{staticClass:"form-page",attrs:{method:"post","object_json.attribs":""}},[e.object_json.plugintop?a("div",{domProps:{innerHTML:e._s(e.object_json.plugintop)}}):e._e(),e._l(e.object_json.Groups,(function(t){return a("div",{key:t.index,class:{unpublished:t.visibility&&null!=e.visibility},staticStyle:{padding:"5px"}},[a("fieldset",{class:t.group_class,style:t.group_css,attrs:{id:"group"+t.group_id}},[t.group_showLegend?a("legend",{staticClass:"legend ViewerLegend"},[e._v(" "+e._s(t.group_showLegend)+" "),null!=e.visibility?a("button",{staticClass:"eye-button",attrs:{type:"button"},on:{click:function(a){return e.updateVisibility(t.group_id)}}},[a("em",{class:t.visibility?"eye-slash-icon":"eye-icon"})]):e._e()]):e._e(),t.group_intro?a("div",{staticClass:"groupintro",domProps:{innerHTML:e._s(t.group_intro)}}):e._e(),a("div",{staticClass:"elements-block"},e._l(t.elements,(function(t){return a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.hidden,expression:"element.hidden === false"}],key:t.index,staticClass:"builder-item-element"},[t.label_value?a("span",{directives:[{name:"show",rawName:"v-show",value:2!=t.labelsAbove,expression:"element.labelsAbove != 2"}],domProps:{innerHTML:e._s(t.label_value)}}):e._e(),t.params.date_table_format?a("div",[a("date-picker",{attrs:{config:e.options},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1):0==t.labelsAbove?a("div",{staticClass:"controls"},[t.error?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:e._s(t.error)}}):e._e(),t.element?a("div",{class:t.errorClass,domProps:{innerHTML:e._s(t.element)}}):e._e(),t.tipSide?a("span",{domProps:{innerHTML:e._s(t.tipSide)}}):e._e()]):a("span",[t.element?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:e._s(t.error)}}):e._e(),t.element?a("div",{class:t.errorClass,domProps:{innerHTML:e._s(t.element)}}):e._e(),t.tipSide?a("span",{domProps:{innerHTML:e._s(t.tipSide)}}):e._e()]),t.tipBelow?a("span",{domProps:{innerHTML:e._s(t.tipBelow)}}):e._e()])})),0),t.group_outro?a("div",{staticClass:"groupoutro",domProps:{innerHTML:e._s(e.group_outro)}}):e._e()])])})),e.object_json.pluginbottom?a("div",{domProps:{innerHTML:e._s(e.object_json.pluginbottom)}}):e._e()],2),e.submitted?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()])},sa=[],oa=a("daef"),ia=a.n(oa);const na=a("bef5");var ra={name:"FormViewer",props:{link:String,visibility:Number},components:{datePicker:ia.a},data(){return{object_json:"",date:new Date,submitted:!1,options:{format:"DD/MM/YYYY",useCurrent:!1}}},methods:{splitProfileIdfromLabel(e){return e.split(/-(.+)/)[1]},formbuilder(){this.$emit("editPage")},getDataObject:Xe.a.debounce((function(){this.submitted=!0;let e=this.link.link.replace("fabrik","emundus_onboard");d.a.get(e+"&format=vue_jsonclean").then(e=>{this.object_json=e.data,null!=this.visibility&&d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=checkconstraintgroup",params:{cid:this.visibility},paramsSerializer:e=>na.stringify(e)}).then(e=>{Object.keys(this.object_json.Groups).forEach(t=>{null!=e.data.data?d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=checkvisibility",params:{group:this.object_json.Groups[t]["group_id"],cid:this.visibility},paramsSerializer:e=>na.stringify(e)}).then(e=>{parseInt(e.data.data)>0?this.object_json.Groups[t].visibility=!0:this.object_json.Groups[t].visibility=!1}):this.object_json.Groups[t].visibility=!0}),this.$forceUpdate()}),this.submitted=!1}).catch(e=>{console.log(e)})}),150),updateVisibility(e){this.object_json.Groups["group_"+e]["visibility"]=!this.object_json.Groups["group_"+e]["visibility"],d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=updatevisibility",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:na.stringify({visibility:this.object_json.Groups["group_"+e]["visibility"],gid:e,cid:this.visibility})}).then(e=>{this.$forceUpdate()})}},created(){this.getDataObject()},watch:{link:function(){this.getDataObject()}}},la=ra,da=(a("d465"),Object(b["a"])(la,aa,sa,!1,null,"08f9be02",null)),ca=da.exports;a("2051");a("bef5");var ma={name:"FormCarrousel",props:{formList:Object,documentsList:Object,visibility:Number},components:{FormViewer:ca},data(){return{indexHighlight:"0",formNameArray:[],documentsList:[],formLinkArray:[],formArray:[],FormPage:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_PAGE"),Form:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM"),Documents:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOCUMENTS")}},methods:{splitProfileIdfromLabel(e){return e.split(/-(.+)/)[1]},ChangeIndex(e){this.indexHighlight=e},EditPage(){this.$emit("formbuilder",this.indexHighlight)},getDataObject:function(){this.formList.forEach(e=>{let t=e.link.replace("fabrik","emundus_onboard");d.a.get(t+"&format=vue_jsonclean").then(t=>{this.formNameArray.push({value:t.data.show_title.value,rgt:e.rgt}),this.formLinkArray.push({link:e.link,rgt:e.rgt})}).then(e=>{this.formNameArray.sort((e,t)=>e.rgt-t.rgt),this.formLinkArray.sort((e,t)=>e.rgt-t.rgt)}).catch(e=>{console.log(e)})})}},created(){this.getDataObject()}},ua=ma,pa=(a("5a0c"),Object(b["a"])(ua,ea,ta,!1,null,"9ea97eae",null)),_a=pa.exports;const ha=a("bef5");var ga={name:"addFormulaire",props:{profileId:String,campaignId:String,profiles:Array,formulaireEmundus:Number,visibility:Number},components:{FormCarrousel:_a},data(){return{ChooseForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_FORM"),AddForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_FORM"),EmitIndex:"0",formList:"",documentsList:[],formListReload:0,form:{label:"Nouveau formulaire",description:"",published:1},formdescription:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORMDESCRIPTION")}},methods:{getEmitIndex(e){this.EmitIndex=e},getForms(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getFormsByProfileId",params:{profile_id:e},paramsSerializer:e=>ha.stringify(e)}).then(e=>{this.formList=e.data.data,this.formListReload+=1}).catch(e=>{console.log(e)})},getDocuments(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getDocuments",params:{pid:e},paramsSerializer:e=>ha.stringify(e)}).then(e=>{this.documentsList=e.data.data})},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>ha.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},addNewForm(){this.loading=!0,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=createform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ha.stringify({body:this.form})}).then(e=>{this.loading=!1,this.profileId=e.data.data,this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid="+this.profileId+"&index=0&cid="+this.campaignId)}).catch(e=>{console.log(e)})},updateProfileCampaign(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updateprofile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ha.stringify({profile:this.profileId,campaign:this.campaignId})}).then(e=>{this.getForms(this.profileId),this.getDocuments(this.profileId),this.$emit("profileId",this.profileId)})},formbuilder(e){d.a.get("index.php?option=com_emundus_onboard&controller=form&task=getfilesbyform&pid="+this.profileId).then(t=>{0!=t.data.data?this.$modal.show("modalWarningFormBuilder"):this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid="+this.profileId+"&index="+e+"&cid="+this.campaignId)})}},created(){this.getForms(this.profileId),this.getDocuments(this.profileId)}},fa=ga,ba=(a("4166"),Object(b["a"])(fa,Kt,Zt,!1,null,"afe7c07a",null)),va=ba.exports;a("bef5");var Ca={name:"addEvalVisi",components:{AddFormulaire:va},props:{funnelCategorie:Object,prog:Number},data(){return{formReload:0,cid:null,profile:null,profiles:[],campaigns:[],EnableVisibility:Joomla.JText._("COM_EMUNDUS_ONBOARD_VISIBILITY_ENABLE"),ChooseForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_FORM"),chooseCampaignWarning:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_CAMPAIGN_WARNING"),chooseCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_CAMPAIGN"),NoFormAffectedToThisCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_NO_AFFECTED_FORM")}},methods:{getFormByCampaign(){d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getcampaignbyid&id="+this.cid).then(e=>{this.profile=e.data.data.campaign.profile_id,null!=this.profile&&(this.formReload+=1)})},getCampaignsByProgram(){d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getcampaignsbyprogram&pid="+this.prog).then(e=>{this.campaigns=e.data.data})}},watch:{cid:function(e){e&&this.getFormByCampaign()}},created(){this.getCampaignsByProgram()}},Oa=Ca,Da=(a("423e"),Object(b["a"])(Oa,Xt,Qt,!1,null,null,null)),Ea=Da.exports,ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation"},[a("h2",{staticClass:"heading"},[e._v(e._s(e.funnelCategorie[0]))]),a("p",{staticClass:"paragraphe-sous-titre"},[e._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. ")]),e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),e._m(6),e._m(7),e._m(8),e._m(9),a("div",{staticClass:"icon-title equipe"})])},xa=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ajouter-une-ligne"},[a("a",{staticClass:"waiting-for-everyone w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Groupe d'évaluateur 1")]),a("a",{staticClass:"bin w-inline-block",attrs:{href:"#"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eval-detail"},[a("a",{staticClass:"tick w-inline-block",attrs:{href:"#"}}),a("div",[e._v("John Doe")]),a("a",{staticClass:"minus w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"edit w-inline-block",attrs:{href:"#"}}),a("div",{staticClass:"text-block-7"},[e._v("Dernier envoi : 06/08/2019")]),a("a",{staticClass:"resend w-inline-block",attrs:{href:"#","data-ix":"hover-date"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eval-detail"},[a("a",{staticClass:"tick w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Benjamin Rivaland")]),a("a",{staticClass:"minus w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"edit w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"resend w-inline-block",attrs:{href:"#","data-ix":"hover-date"}}),a("div",{staticClass:"text-block-7"},[e._v("Dernier envoi : 06/08/2019")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eval-detail"},[a("a",{staticClass:"tick w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Tom Bach")]),a("a",{staticClass:"minus w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"edit w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"resend w-inline-block",attrs:{href:"#","data-ix":"hover-date"}}),a("div",{staticClass:"text-block-7"},[e._v("Dernier envoi : 06/08/2019")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eval-detail"},[a("a",{staticClass:"tick-pending w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Claude François")]),a("div",{staticClass:"statut-invitation"},[e._v("en attente de confirmation")]),a("a",{staticClass:"minus w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"resend w-inline-block",attrs:{href:"#","data-ix":"hover-date"}}),a("a",{staticClass:"edit w-inline-block",attrs:{href:"#"}}),a("div",{staticClass:"text-block-7"},[e._v("Dernier envoi : 06/08/2019")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"ajouter-une-ligne"},[a("a",{staticClass:"tick w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Groupe d'évaluateur 2")]),a("a",{staticClass:"bin w-inline-block",attrs:{href:"#"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eval-detail"},[a("a",{staticClass:"tick w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Will Smith")]),a("a",{staticClass:"minus w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"edit w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"resend w-inline-block",attrs:{href:"#","data-ix":"hover-date"}}),a("div",{staticClass:"text-block-7"},[e._v("Dernier envoi : 06/08/2019")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eval-detail"},[a("a",{staticClass:"tick w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Peter Pan")]),a("a",{staticClass:"minus w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"edit w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"resend w-inline-block",attrs:{href:"#","data-ix":"hover-date"}}),a("div",{staticClass:"text-block-7"},[e._v("Dernier envoi : 06/08/2019")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"eval-detail"},[a("a",{staticClass:"tick w-inline-block",attrs:{href:"#"}}),a("div",[e._v("Vincent Cassel")]),a("a",{staticClass:"minus w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"edit w-inline-block",attrs:{href:"#"}}),a("a",{staticClass:"resend w-inline-block",attrs:{href:"#","data-ix":"hover-date"}}),a("div",{staticClass:"text-block-7"},[e._v("Dernier envoi : 06/08/2019")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-form"},[a("form",{attrs:{id:"email-form",name:"email-form","data-name":"Email Form"}},[a("div",{staticClass:"container-flexbox-choisir-ou-plus w-clearfix"},[a("select",{staticClass:"dropdown-toggle w-select",attrs:{id:"Groupe-d-valuateur",name:"Groupe-d-valuateur","data-name":"Groupe d'évaluateur"}},[a("option",{attrs:{value:""}},[e._v("Choisir un groupe d'évaluateur")]),a("option",{attrs:{value:"Groupe d'évaluateur 1"}},[e._v("Groupe d'évaluateur 1")]),a("option",{attrs:{value:"Groupe d'évaluateur 2"}},[e._v("Groupe d'évaluateur 2")]),a("option",{attrs:{value:"Groupe d'évaluateur 3"}},[e._v("Groupe d'évaluateur 3")])]),a("a",{staticClass:"plus w-inline-block",attrs:{href:"#"}},[a("div",{staticClass:"text-block"},[e._v("+")])])])])])}],Na={name:"addEvalEval",props:{funnelCategorie:Object},data(){return{}},methods:{},created(){}},Ua=Na,Ta=Object(b["a"])(Ua,ya,xa,!1,null,null,null),Aa=Ta.exports,Ma=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ModalAddEvaluation",{attrs:{prog:this.prog,grid:this.grid},on:{updateGrid:function(t){return e.getEvaluationGridByProgram(1)}}}),a("div",{staticClass:"container-evaluation"},[null==e.grid?a("div",{staticClass:"text-center"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{float:"none"},attrs:{type:"button"},on:{click:function(t){return e.$modal.show("modalAddEvaluation")}}},[e._v(e._s(e.translations.addGrid))])]):e._e(),null!=e.grid?a("div",{staticClass:"d-flex"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer mr-1",staticStyle:{float:"none"},attrs:{type:"button"},on:{click:e.evaluationBuilder}},[e._v(e._s(e.translations.editGrid))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer w-delete",staticStyle:{float:"none"},attrs:{type:"button"},on:{click:e.deleteGrid}},[e._v(" "+e._s(e.translations.deleteGrid))])]):e._e(),null!=e.grid?a("FormViewerEvaluation",{key:e.viewer,attrs:{link:e.link,prog:e.prog}}):e._e()],1)],1)},Ra=[],Sa=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"FormViewer container-fluid",attrs:{id:"FormViewerEvaluation"}},[a("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css"}}),a("notifications",{attrs:{group:"foo-velocity",position:"top right","animation-type":"velocity",speed:500}}),e.object_json.show_page_heading?a("div",{class:e.object_json.show_page_heading.class,domProps:{innerHTML:e._s(e.object_json.show_page_heading.page_heading)}}):e._e(),a("form",{attrs:{method:"post","object_json.attribs":""},on:{submit:function(e){e.preventDefault()}}},[e.object_json.plugintop?a("div",{domProps:{innerHTML:e._s(e.object_json.plugintop)}}):e._e(),e._l(e.object_json.Groups,(function(t,s){return a("div",{key:t.index},[a("fieldset",{class:t.group_class,style:t.group_css,attrs:{id:"group_"+t.group_id}},[a("div",{staticClass:"d-flex"},[t.group_showLegend?a("legend",{staticClass:"legend ViewerLegend"},[e._v(e._s(t.group_showLegend))]):e._e()]),t.group_intro?a("div",{staticClass:"groupintro",domProps:{innerHTML:e._s(t.group_intro)}}):e._e(),a("div",{staticClass:"elements-block"},[a("transition-group",{attrs:{name:"slide-down",type:"transition"}},e._l(t.elts,(function(t,s){return a("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.hidden,expression:"element.hidden === false"}],key:t.id,staticClass:"builder-item-element",class:{unpublished:!t.publish}},[a("div",{staticClass:"d-flex builder-item-element__properties"},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"d-flex",staticStyle:{"align-items":"baseline"}},[t.label_value?a("span",{directives:[{name:"show",rawName:"v-show",value:2!=t.labelsAbove,expression:"element.labelsAbove != 2"}],domProps:{innerHTML:e._s(t.label_value)}}):e._e()]),t.params.date_table_format?a("div",[a("date-picker",{attrs:{config:e.options},model:{value:e.date,callback:function(t){e.date=t},expression:"date"}})],1):0==t.labelsAbove?a("div",{staticClass:"controls"},[t.error?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:e._s(t.error)}}):e._e(),t.element?a("div",{class:t.errorClass,domProps:{innerHTML:e._s(t.element)}}):e._e(),t.tipSide?a("span",{domProps:{innerHTML:e._s(t.tipSide)}}):e._e()]):a("span",{staticClass:"d-flex w-100"},[t.element?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:e._s(t.error)}}):e._e(),t.element?a("div",{staticClass:"w-100",class:t.errorClass,domProps:{innerHTML:e._s(t.element)}}):e._e(),t.tipSide?a("span",{domProps:{innerHTML:e._s(t.tipSide)}}):e._e()]),t.tipBelow?a("span",{domProps:{innerHTML:e._s(t.tipBelow)}}):e._e()])])])})),0)],1),t.group_outro?a("div",{staticClass:"groupoutro",domProps:{innerHTML:e._s(e.group_outro)}}):e._e()])])})),e.object_json.pluginbottom?a("div",{domProps:{innerHTML:e._s(e.object_json.pluginbottom)}}):e._e()],2),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},wa=[],Ja=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalEditElement"}},[a("modal",{attrs:{name:"modalEditElement"+e.ID,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalEditElement"+e.ID)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.ElementOptions)+" ")])])]),null!=e.element?a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"mb-1"},[a("a",{staticClass:"d-flex tool-icon mb-1",on:{click:function(t){return e.publishUnpublishElement()}}},[a("em",{class:[e.element.publish?"fa-eye-slash":"fa-eye","far"],staticStyle:{width:"45px"},attrs:{id:"publish_icon_"+e.element.id}}),e.element.publish?a("span",{staticClass:"ml-10px"},[e._v(e._s(e.Unpublish))]):e._e(),e.element.publish?e._e():a("span",{staticClass:"ml-10px"},[e._v(e._s(e.Publish))])]),"display"!=e.plugin?a("a",{staticClass:"d-flex tool-icon"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.FRequire,expression:"element.FRequire"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.element.FRequire)?e._i(e.element.FRequire,null)>-1:e.element.FRequire},on:{click:function(t){return e.updateRequireElement()},change:function(t){var a=e.element.FRequire,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.element,"FRequire",a.concat([i])):n>-1&&e.$set(e.element,"FRequire",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.element,"FRequire",o)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px"},[e._v(e._s(e.Required))])]):e._e()]),a("div",{staticClass:"form-group mb-2"},[a("label",[e._v(e._s(e.fieldType)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.plugin,expression:"plugin"}],staticClass:"dropdown-toggle",attrs:{id:"select_type",disabled:0!=e.files&&"birthday"==e.element.plugin||0!=e.files&&6==e.element.params.password},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.plugin=t.target.multiple?a:a[0]}}},e._l(e.plugins,(function(t,s){return a("option",{key:s,domProps:{value:t.value}},[e._v(" "+e._s(t.name)+" ")])})),0)]),a("div",{staticClass:"col-md-12 separator-top top-responsive"},["field"==e.plugin?a("fieldF",{attrs:{files:e.files,element:e.element}}):e._e(),"birthday"==e.plugin?a("birthdayF",{attrs:{element:e.element}}):e._e(),"checkbox"==e.plugin?a("checkboxF",{attrs:{element:e.element,databases:e.databases},on:{subOptions:e.subOptions}}):e._e(),"dropdown"==e.plugin?a("dropdownF",{attrs:{element:e.element,databases:e.databases},on:{subOptions:e.subOptions}}):e._e(),"radiobutton"==e.plugin?a("radiobtnF",{attrs:{element:e.element},on:{subOptions:e.subOptions}}):e._e(),"textarea"==e.plugin?a("textareaF",{attrs:{element:e.element}}):e._e(),"display"==e.plugin?a("displayF",{attrs:{element:e.element}}):e._e(),"emundus_fileupload"==e.plugin?a("fileF",{attrs:{element:e.element,prid:e.profileId}}):e._e(),"yesno"==e.plugin?a("yesnoF",{attrs:{element:e.element}}):e._e()],1)]):e._e(),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalEditElement"+e.ID)}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.UpdateParams.apply(null,arguments)}}},[e._v(e._s(e.Continuer))])]),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()])],1)},ka=[],Ba=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"fieldF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.placeholdertext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.placeholder,expression:"element.params.placeholder"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.element.params.placeholder},on:{input:function(t){t.target.composing||e.$set(e.element.params,"placeholder",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.element.params.rollover},on:{input:function(t){t.target.composing||e.$set(e.element.params,"rollover",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.maxlength)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.maxlength,expression:"element.params.maxlength"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"1"},domProps:{value:e.element.params.maxlength},on:{input:function(t){t.target.composing||e.$set(e.element.params,"maxlength",t.target.value)}}})]),0==e.element.params.password?a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.inputmasktitle))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.text_input_mask,expression:"element.params.text_input_mask"}],staticClass:"form__input field-general w-input",attrs:{type:"text",id:"format",placeholder:[[e.inputmaskplaceholder]]},domProps:{value:e.element.params.text_input_mask},on:{input:function(t){t.target.composing||e.$set(e.element.params,"text_input_mask",t.target.value)}}}),a("label",{staticStyle:{"font-size":"small"}},[e._v(e._s(e.tipData))])]):e._e()])])},La=[],Ia={name:"fieldF",props:{element:Object,files:Number},data(){return{msg:"",path:window.location.protocol+"//"+window.location.host+"/media/com_emundus_onboard/",helptext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),placeholdertext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER"),sizetext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_SIZE"),maxlength:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_MAXLENGTH"),fieldtype:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_FIELDTYPE"),textfield:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_FIELDTEXT"),phonefield:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_FIELDPHONE"),emailfield:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EMAIL"),numberfield:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_NUMBER"),placeholderHelp:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER_HELP"),text_input_mask:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK"),inputmasktitle:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_TITLE"),inputmaskplaceholder:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_PLACEHOLDER"),tipData:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_INPUT_MASK_HINT")}},methods:{},created(){this.msg='<p style="color: white">'+this.placeholderHelp+'</p><img src="'+this.path+'placeholder.gif" />',"undefined"==typeof this.element.params.password&&(this.element.params.password=0),"undefined"==typeof this.element.params.maxlength&&(this.element.params.maxlength=255),"undefined"==typeof this.element.params.text_input_mask&&(this.element.params.text_input_mask=""),"undefined"==typeof this.element.params.placeholder&&(this.element.params.placeholder="")}},Pa=Ia,ja=(a("18b3"),Object(b["a"])(Pa,Ba,La,!1,null,"880ada44",null)),Fa=ja.exports,$a=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"birthdayF"}},[a("div",{staticClass:"rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Format))]),a("div",{staticClass:"flex mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.datepicker,expression:"datepicker"}],attrs:{type:"radio",id:"radio_default",value:"1"},domProps:{checked:e._q(e.datepicker,"1")},on:{change:function(t){e.datepicker="1"}}}),a("span",{staticClass:"ml-10px"},[e._v(e._s(e.birthdaySelect))])]),a("div",{staticClass:"flex mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.datepicker,expression:"datepicker"}],attrs:{type:"radio",id:"radio_years",value:"2"},domProps:{checked:e._q(e.datepicker,"2")},on:{change:function(t){e.datepicker="2"}}}),a("span",{staticClass:"ml-10px"},[e._v(e._s(e.yearSelect))])]),a("div",{staticClass:"flex mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.datepicker,expression:"datepicker"}],attrs:{type:"radio",id:"radio_dayMonth",value:"3"},domProps:{checked:e._q(e.datepicker,"3")},on:{change:function(t){e.datepicker="3"}}}),a("span",{staticClass:"ml-10px"},[e._v(e._s(e.dateSelect))])])]),1==e.datepicker||2==e.datepicker?a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.yearrange))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.birthday_forward,expression:"element.params.birthday_forward"}],staticClass:"form__input field-general w-input",attrs:{type:"text",id:"format"},domProps:{value:e.element.params.birthday_forward},on:{input:function(t){t.target.composing||e.$set(e.element.params,"birthday_forward",t.target.value)}}}),a("label",{staticStyle:{"font-size":"small"}},[e._v(e._s(e.yeararrangetip))])]):e._e()])])},Ga=[],Ha={name:"birthdayF",components:{},props:{element:Object},data(){return{datepicker:null,birthdaySelect:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DATE_FORMAT_BIRTHDAY"),yearSelect:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DATE_FORMAT_YEAR"),dateSelect:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_CALENDAR"),Format:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DATE_FORMATTING"),birthday_forward:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_FUTURE_YEARS"),yearrange:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_YEAR_RANGE"),yeararrangetip:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_TIP_YEARS_FUTURE")}},created(){"birthday"==this.element.plugin?this.datepicker=1:"date"==this.element.plugin?this.datepicker=3:this.datepicker=2},watch:{datepicker:function(e){this.element.plugin=3==e?"date":2==e?"years":"birthday"}}},za=Ha,qa=(a("177b"),Object(b["a"])(za,$a,Ga,!1,null,"0d93f4bc",null)),Va=qa.exports,Ya=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"checkboxF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.element.params.rollover},on:{input:function(t){t.target.composing||e.$set(e.element.params,"rollover",t.target.value)}}})]),a("div",{staticClass:"d-flex mb-1"},[a("label",{staticClass:"require col-md-3"},[e._v(e._s(e.suboptions)+" :")])]),a("div",{staticClass:"col-md-10"},[1!=e.databasejoin?a("draggable",{attrs:{handle:".handle"},on:{end:function(t){return e.needtoemit()}},model:{value:e.arraySubValues,callback:function(t){e.arraySubValues=t},expression:"arraySubValues"}},e._l(e.arraySubValues,(function(t,s){return a("div",{key:s,staticClass:"d-flex mb-1"},[a("span",{staticClass:"icon-handle"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.arraySubValues[s],expression:"arraySubValues[i]"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{height:"35px"},attrs:{type:"text",id:"suboption_"+s},domProps:{value:e.arraySubValues[s]},on:{change:function(t){return e.needtoemit()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.arraySubValues,s,t.target.value)}}}),a("button",{staticClass:"remove-option",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.leave(s)}}},[e._v("-")])])})),0):e._e(),1!=e.databasejoin?a("button",{staticClass:"bouton-sauvergarder-et-continuer-3 button-add-option",staticStyle:{"margin-bottom":"2em"},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.add.apply(null,arguments)}}},[e._v(e._s(e.AddOption))]):e._e(),1==e.databasejoin?a("select",{directives:[{name:"model",rawName:"v-model",value:e.databasejoin_data,expression:"databasejoin_data"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.databasejoin_data=t.target.multiple?a:a[0]}}},e._l(e.databases,(function(t,s){return a("option",{domProps:{value:s}},[e._v(e._s(t.label))])})),0):e._e()],1)])])},Wa=[],Xa=a("ca98"),Qa=a.n(Xa);const Ka=a("bef5");var Za={name:"checkboxF",components:{draggable:Qa.a},props:{element:Object,databases:Array},data(){return{arraySubValues:[],databasejoin:"0",databasejoin_data:0,helptext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),suboptions:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_OPTIONS"),AddOption:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADD_OPTIONS"),DataTables:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN")}},methods:{add:Xe.a.debounce((function(){let e=Object.keys(this.arraySubValues).length;this.$set(this.arraySubValues,e,""),this.needtoemit();let t="suboption_"+e.toString();setTimeout(()=>{document.getElementById(t).focus()},100)}),150),leave:function(e){this.$delete(this.arraySubValues,e),this.needtoemit()},initialised:function(){"databasejoin"===this.element.plugin?(this.databasejoin=1,this.databases.forEach((e,t)=>{e.database_name==this.element.params.join_db_name&&(this.databasejoin_data=t)})):"undefined"!==typeof this.element.params.sub_options?d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getJTEXTA",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ka.stringify({toJTEXT:this.element.params.sub_options.sub_labels})}).then(e=>{Object.values(e.data).forEach(e=>{this.arraySubValues.push(e)}),this.needtoemit()}).catch(e=>{console.log(e)}):(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels)},needtoemit:Xe.a.debounce((function(){this.$emit("subOptions",this.arraySubValues)})),checkOnboarding(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=checkfirstdatabasejoin"}).then(e=>{e.data.status&&T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN_TEXT"),type:"info",showCancelButton:!1,showCloseButton:!0,allowOutsideClick:!1,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK")}).then(e=>{e.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=removeparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ka.stringify({param:"first_databasejoin"})})})})}},created:function(){this.initialised()},watch:{databasejoin:function(e){e?(this.checkOnboarding(),this.element.params.join_db_name=this.databases[this.databasejoin_data].database_name,this.element.params.database_join_display_type="checkbox",this.element.params.join_key_column=this.databases[this.databasejoin_data].join_column_id,"1"==this.databases[this.databasejoin_data].translation?(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val+"_fr",this.element.params.join_val_column_concat="{thistable}."+this.databases[this.databasejoin_data].join_column_val+"_{shortlang}"):(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val,this.element.params.join_val_column_concat="")):(this.element.plugin="checkbox",delete this.element.params.join_db_name,delete this.element.params.database_join_display_type,delete this.element.params.join_key_column,delete this.element.params.join_val_column,delete this.element.params.join_val_column_concat,"undefined"===typeof this.element.params.sub_options&&(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels))},databasejoin_data:function(e){this.element.params.join_db_name=this.databases[e].database_name,this.element.params.join_key_column=this.databases[e].join_column_id,this.element.params.database_join_display_type="checkbox","1"==this.databases[e].translation?(this.element.params.join_val_column=this.databases[e].join_column_val+"_fr",this.element.params.join_val_column_concat="{thistable}."+this.databases[e].join_column_val+"_{shortlang}"):(this.element.params.join_val_column=this.databases[e].join_column_val,this.element.params.join_val_column_concat="")}}},es=Za,ts=(a("7a8c"),Object(b["a"])(es,Ya,Wa,!1,null,"699f3142",null)),as=ts.exports,ss=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"dropdownF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.element.params.rollover},on:{input:function(t){t.target.composing||e.$set(e.element.params,"rollover",t.target.value)}}})]),a("div",{staticClass:"d-flex mb-1"},[a("label",{staticClass:"require col-md-3"},[e._v(e._s(e.translations.suboptions)+" :")])]),a("div",{staticClass:"col-md-12 form-group flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.no_default_value,expression:"no_default_value"}],staticClass:"check",attrs:{type:"checkbox","true-value":"true","false-value":"false",id:"no_default_value"},domProps:{checked:Array.isArray(e.no_default_value)?e._i(e.no_default_value,null)>-1:e._q(e.no_default_value,"true")},on:{change:function(t){var a=e.no_default_value,s=t.target,o=s.checked?"true":"false";if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.no_default_value=a.concat([i])):n>-1&&(e.no_default_value=a.slice(0,n).concat(a.slice(n+1)))}else e.no_default_value=o}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("label",{staticClass:"ml-10px mb-0",attrs:{for:"no_default_value"}},[e._v(e._s(e.translations.No_Default_Value))])]),a("div",{staticClass:"col-md-10 form-group flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.databasejoin,expression:"databasejoin"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"databasejoin_check",name:"'databasejoin_check'"},domProps:{checked:Array.isArray(e.databasejoin)?e._i(e.databasejoin,null)>-1:e._q(e.databasejoin,"1")},on:{change:function(t){var a=e.databasejoin,s=t.target,o=s.checked?"1":"0";if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.databasejoin=a.concat([i])):n>-1&&(e.databasejoin=a.slice(0,n).concat(a.slice(n+1)))}else e.databasejoin=o}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("label",{staticClass:"ml-10px mb-0",attrs:{for:"databasejoin_check"}},[e._v(e._s(e.translations.DataTables))])]),a("div",{staticClass:"col-md-10"},[1!=e.databasejoin?a("draggable",{attrs:{handle:".handle"},on:{end:function(t){return e.needtoemit()}},model:{value:e.arraySubValues,callback:function(t){e.arraySubValues=t},expression:"arraySubValues"}},e._l(e.arraySubValues,(function(t,s){return e.display_first_option!=s?a("div",{key:s,staticClass:"d-flex mb-1"},[a("span",{staticClass:"icon-handle"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.arraySubValues[s],expression:"arraySubValues[i]"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{height:"35px"},attrs:{type:"text",id:"suboption_"+s},domProps:{value:e.arraySubValues[s]},on:{change:function(t){return e.needtoemit()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.arraySubValues,s,t.target.value)}}}),a("button",{staticClass:"remove-option",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.leave(s)}}},[e._v("-")])]):e._e()})),0):e._e(),1!=e.databasejoin?a("button",{staticClass:"bouton-sauvergarder-et-continuer-3 button-add-option",staticStyle:{"margin-bottom":"2em"},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.add.apply(null,arguments)}}},[e._v(e._s(e.translations.AddOption))]):e._e(),1==e.databasejoin?a("select",{directives:[{name:"model",rawName:"v-model",value:e.databasejoin_data,expression:"databasejoin_data"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.databasejoin_data=t.target.multiple?a:a[0]},function(t){return e.retrieveDataBaseJoinColumns()}]}},e._l(e.databases,(function(t,s){return a("option",{domProps:{value:s}},[e._v(e._s(t.label))])})),0):e._e(),1==e.databasejoin?a("div",[a("label",[e._v(e._s(e.translations.OrderBy))]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.databasejoin_data_order,expression:"databasejoin_data_order"}],staticClass:"dropdown-toggle",staticStyle:{margin:"20px 0 30px 0"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.databasejoin_data_order=t.target.multiple?a:a[0]}}},e._l(e.databases_colums,(function(t){return a("option",{domProps:{value:t.COLUMN_NAME}},[e._v(e._s(t.COLUMN_NAME))])})),0)]):e._e()],1)])])},os=[];const is=a("bef5");var ns={name:"dropdownF",components:{draggable:Qa.a},props:{element:Object,databases:Array},data(){return{arraySubValues:[],databases_colums:[],databasejoin:"0",no_default_value:!1,display_first_option:null,databasejoin_data:0,databasejoin_data_order:"",translations:{helptext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),suboptions:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_OPTIONS"),AddOption:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADD_OPTIONS"),DataTables:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),No_Default_Value:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_NO_DEFAULT_VALUE"),OrderBy:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ORDER_BY")}}},methods:{add:Xe.a.debounce((function(){const e=Object.keys(this.arraySubValues).length;this.$set(this.arraySubValues,e,""),this.needtoemit();const t="suboption_"+e.toString();setTimeout(()=>{document.getElementById(t).focus()},100)}),150),leave(e){this.$delete(this.arraySubValues,e),this.needtoemit()},initialised(){"databasejoin"===this.element.plugin?(this.databasejoin=1,this.databases.forEach((e,t)=>{if(e.database_name==this.element.params.join_db_name){this.databasejoin_data=t,this.retrieveDataBaseJoinColumns();const e=this.element.params.database_join_where_sql;this.databasejoin_data_order=e.replace(/order by /g,"")}})):(this.element.params.default_value=!1,this.no_default_value=!1,this.retrieveDataBaseJoinColumns(),"undefined"!==typeof this.element.params.sub_options?("undefined"!==typeof this.element.params.sub_options.sub_initial_selection&&(this.element.params.sub_options.sub_values.forEach((e,t)=>{e==this.element.params.sub_options.sub_initial_selection[0]&&(this.display_first_option=t)}),null!=this.display_first_option&&(this.element.params.default_value=!0,this.no_default_value=!0)),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getJTEXTA",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:is.stringify({toJTEXT:this.element.params.sub_options.sub_labels})}).then(e=>{Object.values(e.data).forEach(e=>{this.arraySubValues.push(e)}),this.needtoemit()}).catch(e=>{console.log(e)})):(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels))},retrieveDataBaseJoinColumns(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getdatabasesjoinOrdonancementColomns",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:is.stringify({database_name:this.databases[this.databasejoin_data].database_name})}).then(e=>{this.databases_colums=e.data.data}).catch(e=>{console.log(e)})},needtoemit:Xe.a.debounce((function(){this.$emit("subOptions",this.arraySubValues)})),checkOnboarding(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=checkfirstdatabasejoin"}).then(e=>{e.data.status&&T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP_DATABASEJOIN_TEXT"),type:"info",showCancelButton:!1,showCloseButton:!0,allowOutsideClick:!1,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK")}).then(e=>{e.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=removeparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:is.stringify({param:"first_databasejoin"})})})})}},created(){this.initialised()},watch:{databasejoin(e){1==e?(this.checkOnboarding(),this.element.plugin="databasejoin",this.element.params.join_db_name=this.databases[this.databasejoin_data].database_name,this.element.params.database_join_display_type="dropdown",this.element.params.join_key_column=this.databases[this.databasejoin_data].join_column_id,"1"==this.databases[this.databasejoin_data].translation?(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val+"_fr",this.element.params.join_val_column_concat=`{thistable}.${this.databases[this.databasejoin_data].join_column_val}_{shortlang}`):(this.element.params.join_val_column=this.databases[this.databasejoin_data].join_column_val,this.element.params.join_val_column_concat="")):(this.element.plugin="dropdown",delete this.element.params.join_db_name,delete this.element.params.database_join_display_type,delete this.element.params.join_key_column,delete this.element.params.join_val_column,delete this.element.params.join_val_column_concat,delete this.element.params.database_join_where_sql,"undefined"===typeof this.element.params.sub_options&&(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels))},databasejoin_data(e){const t=this.databases[e];this.element.params.join_db_name=t.database_name,this.element.params.join_key_column=t.join_column_id,"1"===t.translation?(this.element.params.join_val_column=t.join_column_val+"_fr",this.element.params.join_val_column_concat=`{thistable}.${t.join_column_val}_{shortlang}`):(this.element.params.join_val_column=t.join_column_val,this.element.params.join_val_column_concat="")},databasejoin_data_order(e){1==this.databasejoin&&(this.element.params.database_join_where_sql="order by "+e)},no_default_value(e){this.element.params.default_value=e}}},rs=ns,ls=(a("6f4e"),Object(b["a"])(rs,ss,os,!1,null,"58c0dbd7",null)),ds=ls.exports,cs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"radiobtnF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.element.params.rollover},on:{input:function(t){t.target.composing||e.$set(e.element.params,"rollover",t.target.value)}}})]),a("div",{staticClass:"d-flex mb-1"},[a("label",{staticClass:"require col-md-3"},[e._v(e._s(e.suboptions)+" :")])]),a("div",{staticClass:"col-md-10"},[a("draggable",{staticStyle:{"padding-bottom":"2em"},attrs:{handle:".handle"},on:{end:function(t){return e.needtoemit()}},model:{value:e.arraySubValues,callback:function(t){e.arraySubValues=t},expression:"arraySubValues"}},e._l(e.arraySubValues,(function(t,s){return a("div",{key:s,staticClass:"d-flex mb-1"},[a("span",{staticClass:"icon-handle"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.arraySubValues[s],expression:"arraySubValues[i]"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{height:"35px"},attrs:{type:"text",id:"suboption_"+s},domProps:{value:e.arraySubValues[s]},on:{change:function(t){return e.needtoemit()},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.arraySubValues,s,t.target.value)}}}),a("button",{staticClass:"remove-option",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.leave(s)}}},[e._v("-")])])})),0),a("button",{staticClass:"bouton-sauvergarder-et-continuer-3 button-add-option",staticStyle:{"margin-bottom":"2em"},attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.add.apply(null,arguments)}}},[e._v(e._s(e.AddOption))])],1)])])},ms=[];const us=a("bef5");var ps={name:"radiobtnF",components:{draggable:Qa.a},props:{element:Object},data(){return{arraySubValues:[],helptext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),suboptions:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_OPTIONS"),AddOption:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADD_OPTIONS")}},methods:{add:Xe.a.debounce((function(){let e=Object.keys(this.arraySubValues).length;this.$set(this.arraySubValues,e,""),this.needtoemit();let t="suboption_"+e.toString();setTimeout(()=>{document.getElementById(t).focus()},100)}),150),leave:function(e){this.$delete(this.arraySubValues,e),this.needtoemit()},initialised:function(){"undefined"!==typeof this.element.params.sub_options?d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getJTEXTA",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:us.stringify({toJTEXT:this.element.params.sub_options.sub_labels})}).then(e=>{Object.values(e.data).forEach(e=>{this.arraySubValues.push(e)}),this.needtoemit()}).catch(e=>{console.log(e)}):(this.element.params.sub_options={sub_values:[],sub_labels:[]},this.arraySubValues=this.element.params.sub_options.sub_labels)},needtoemit:Xe.a.debounce((function(){this.$emit("subOptions",this.arraySubValues)}))},created:function(){this.initialised()}},_s=ps,hs=(a("5c32"),Object(b["a"])(_s,cs,ms,!1,null,"19b5ef68",null)),gs=hs.exports,fs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"textareaF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group dpflex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.wysiwyg,expression:"wysiwyg"}],staticClass:"form__input field-general w-input",attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.wysiwyg)?e._i(e.wysiwyg,"1")>-1:e.wysiwyg},on:{change:function(t){var a=e.wysiwyg,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i="1",n=e._i(a,i);s.checked?n<0&&(e.wysiwyg=a.concat([i])):n>-1&&(e.wysiwyg=a.slice(0,n).concat(a.slice(n+1)))}else e.wysiwyg=o}}}),a("label",{staticClass:"ml-10px mb-0"},[e._v(e._s(e.UseAdvancedEditor))])]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.heightext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.height,expression:"element.params.height"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"3"},domProps:{value:e.element.params.height},on:{input:function(t){t.target.composing||e.$set(e.element.params,"height",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.placeholdertext)+" "),a("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.msg,placement:"top-center",offset:5,delay:{show:500,hide:300}},expression:"{\n        content: msg,\n        placement: 'top-center',\n        offset: 5,\n        delay: {\n          show: 500,\n          hide: 300,\n          },\n        }"}]},[a("em",{staticClass:"fas fa-question-circle"})]),e._v(" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.textarea_placeholder,expression:"element.params.textarea_placeholder"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.element.params.textarea_placeholder},on:{input:function(t){t.target.composing||e.$set(e.element.params,"textarea_placeholder",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.helptext)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params.rollover,expression:"element.params.rollover"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.element.params.rollover},on:{input:function(t){t.target.composing||e.$set(e.element.params,"rollover",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.maxlength)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.element.params["textarea-maxlength"],expression:"element.params['textarea-maxlength']"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"1"},domProps:{value:e.element.params["textarea-maxlength"]},on:{input:function(t){t.target.composing||e.$set(e.element.params,"textarea-maxlength",t.target.value)}}})]),a("div",{staticClass:"form-group dpflex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.showmax,expression:"showmax"}],staticClass:"form__input field-general w-input",staticStyle:{margin:"0 !important"},attrs:{type:"checkbox",value:"1"},domProps:{checked:Array.isArray(e.showmax)?e._i(e.showmax,"1")>-1:e.showmax},on:{change:function(t){var a=e.showmax,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i="1",n=e._i(a,i);s.checked?n<0&&(e.showmax=a.concat([i])):n>-1&&(e.showmax=a.slice(0,n).concat(a.slice(n+1)))}else e.showmax=o}}}),a("label",{staticClass:"ml-10px mb-0"},[e._v(e._s(e.DisplayMaxLength))])])])])},bs=[],vs={name:"textareaF",props:{element:Object},data(){return{msg:"",path:window.location.protocol+"//"+window.location.host+"/media/com_emundus_onboard/",arraySubValues:[],wysiwyg:!1,showmax:!1,widthtext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_WIDTH"),heightext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HEIGHT"),helptext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),placeholdertext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER"),sizetext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_SIZE"),maxlength:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_MAXLENGTH"),DisplayMaxLength:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_MAXLENGTH"),UseAdvancedEditor:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_USE_ADVANCED_EDITOR"),placeholderHelp:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER_HELP")}},methods:{},created(){this.msg='<p style="color: black">'+this.placeholderHelp+'</p><img src="'+this.path+'placeholder.gif" />',"undefined"==typeof this.element.params.height&&(this.element.params.height=6),"undefined"==typeof this.element.params["textarea-maxlength"]&&(this.element.params["textarea-maxlength"]=255),"undefined"==typeof this.element.params.use_wysiwyg?this.element.params.use_wysiwyg=0:"1"==this.element.params.use_wysiwyg&&(this.wysiwyg=!0),"undefined"==typeof this.element.params["textarea-showmax"]?this.element.params["textarea-showmax"]=0:"1"==this.element.params["textarea-showmax"]&&(this.showmax=!0)},watch:{wysiwyg:function(e){this.element.params.use_wysiwyg=e?"1":"0"},showmax:function(e){this.element.params["textarea-showmax"]=e?"1":"0"}}},Cs=vs,Os=(a("82f3"),Object(b["a"])(Cs,fs,bs,!1,null,"6c4e659c",null)),Ds=Os.exports,Es=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"displayF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Text)+" :")]),a("editor",{attrs:{height:"30em",text:e.element.default,lang:"fr",enable_variables:!1,id:"element_"+e.element.id},model:{value:e.element.default,callback:function(t){e.$set(e.element,"default",t)},expression:"element.default"}})],1)])])},ys=[],xs={name:"displayF",props:{element:Object,files:Number},components:{Editor:et},data(){return{Text:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_TEXT"),dynamicComponent:!1}},methods:{},created(){}},Ns=xs,Us=(a("ffd0"),Object(b["a"])(Ns,Es,ys,!1,null,"17440783",null)),Ts=Us.exports,As=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"fileF"}},[a("div",{staticClass:"row rowmodal"},[a("div",{staticClass:"form-group"},[a("label",[e._v("Max size (Mb) :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.size,expression:"size"}],staticClass:"form__input field-general w-input",attrs:{type:"number",min:"1",max:"10"},domProps:{value:e.size},on:{keyup:function(t){return e.convertToByte()},input:function(t){t.target.composing||(e.size=t.target.value)}}}),e.errors.maxSize?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v("Saisir une valeur comprise entre 1 et 10 Mb")])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",{class:{"is-invalid":e.errors.selectedTypes},attrs:{for:"max_size"}},[e._v(e._s(e.FileType)+"* :")]),a("div",{staticClass:"users-block",class:{"is-invalid":e.errors.selectedUsers}},e._l(e.types,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.selectedTypes[t.value],expression:"form.selectedTypes[type.value]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.selectedTypes[t.value])?e._i(e.form.selectedTypes[t.value],null)>-1:e.form.selectedTypes[t.value]},on:{change:function(a){var s=e.form.selectedTypes[t.value],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.form.selectedTypes,t.value,s.concat([n])):r>-1&&e.$set(e.form.selectedTypes,t.value,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.form.selectedTypes,t.value,i)}}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.title)+" ("+e._s(t.value)+")")])])])})),0)])])])},Ms=[];const Rs=a("bef5");var Ss={name:"fileF",props:{value:File,element:Object,prid:String},data(){return{msg:"",size:this.element.params.size/1048576,types:[{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PDF_DOCUMENTS"),value:"pdf"},{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PICTURES_DOCUMENTS"),value:"jpg;png;gif"},{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_OFFICE_DOCUMENTS"),value:"doc;docx;odt"},{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_EXCEL_DOCUMENTS"),value:"xls;xlsx;odf"}],labels_name:{text_fr:"",text_en:"",did:""},form:{name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpg;png;gif":!1,"doc;docx;odt":!1,"xls;xlsx;odf":!1}},errors:{name:!1,nbmax:!1,selectedTypes:!1,maxSize:!1},selectedTypes:[],path:window.location.protocol+"//"+window.location.host+"/media/com_emundus_onboard/",heightext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HEIGHT"),helptext:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HELPTEXT"),MaxRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAXPERUSER_REQUIRED"),TypeRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED_REQUIRED"),placeholderHelp:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_PLACEHOLDER_HELP"),MaxPerUser:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAXPERUSER"),FileType:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED")}},methods:{handleFileChange(e){this.$emit("input",e.target.files[0])},convertToByte(){this.size>10||this.size<1?this.errors.maxSize=!0:(this.element.params.size=1048576*this.size,this.errors.maxSize=!1)},retrieveAssociateElementDoc(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=retriveElementFormAssociatedDoc",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rs.stringify({gid:2,docid:e})}).then(e=>{this.form.description[this.actualLanguage]=e.data.description,e.data.allowed_types.includes("pdf")?this.form.selectedTypes.pdf=!0:this.form.selectedTypes.pdf=!1,e.data.allowed_types.includes("jpg")||e.data.allowed_types.includes("png")||e.data.allowed_types.includes("gif")?this.form.selectedTypes["jpg;png;gif"]=!0:this.form.selectedTypes["jpg;png;gif"]=!1,e.data.allowed_types.includes("xls")||e.data.allowed_types.includes("xlsx")||e.data.allowed_types.includes("odf")?this.form.selectedTypes["xls;xlsx;odf"]=!0:this.form.selectedTypes["xls;xlsx;odf"]=!1,this.form.nbmax=e.data.nbmax})},retrieveDocumentNameFalangs(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=getDocumentFalang",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rs.stringify({gid:2,docid:e})}).then(t=>{this.labels_name.text_fr=t.data.data.fr.value,this.labels_name.text_en=t.data.data.en.value,this.labels_name.did=e})},updateDocumentFalengs(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updateDocumentFalang",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rs.stringify(e)}).then(e=>{})},updateAssociateDocElement(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updatedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rs.stringify(e)}).then(e=>{this.$emit("UpdateDocuments")})}},created(){this.msg='<p style="color: black">'+this.placeholderHelp+'</p><img src="'+this.path+'placeholder.gif" />',this.retrieveAssociateElementDoc(this.element.params.attachmentId),this.retrieveDocumentNameFalangs(this.element.params.attachmentId)},beforeDestroy(){let e=[];Object.keys(this.form.selectedTypes).forEach(t=>{1==this.form.selectedTypes[t]&&e.push(t)});let t={document:this.form,types:e,cid:this.cid,pid:this.prid,did:this.element.params.attachmentId};this.updateAssociateDocElement(t),this.updateDocumentFalengs(this.labels_name)}},ws=Ss,Js=(a("ca99"),Object(b["a"])(ws,As,Ms,!1,null,"c470e512",null)),ks=Js.exports,Bs=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},Ls=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"yesnoF"}},[a("div",{staticClass:"row rowmodal"})])}],Is={name:"yesnoF"},Ps=Is,js=Object(b["a"])(Ps,Bs,Ls,!1,null,"e617e150",null),Fs=js.exports;const $s=a("bef5");var Gs={name:"modalEditElement",props:{ID:Number,gid:Number,files:Number,manyLanguages:Number,actualLanguage:String,profileId:Number},components:{fieldF:Fa,birthdayF:Va,checkboxF:as,dropdownF:ds,radiobtnF:gs,textareaF:Ds,displayF:Ts,fileF:ks,yesnoF:Fs},data(){return{label:{fr:"",en:""},done:!1,changes:!1,loading:!1,sublabel:"",plugin:"",element:null,translate:{label:!1},plugins:{field:{value:"field",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_FIELD")},birthday:{value:"birthday",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_BIRTHDAY")},checkbox:{value:"checkbox",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_CHECKBOX")},dropdown:{value:"dropdown",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_DROPDOWN")},radiobutton:{value:"radiobutton",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_RADIOBUTTON")},textarea:{value:"textarea",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_TEXTAREA")},display:{value:"display",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_DISPLAY")},fileupload:{value:"emundus_fileupload",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_FILE")},yesno:{value:"yesno",name:"yesno"}},databases:[],Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_NAME"),Require:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_REQUIRED"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVE"),dataSaved:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DATASAVED"),informations:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_INFORMATIONS"),fieldType:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_TYPE"),Delete:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_DELETE"),LabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),ElementOptions:Joomla.JText._("COM_EMUNDUS_ONBOARD_ELEMENT_OPTIONS"),Unpublish:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_UNPUBLISH"),Publish:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_PUBLISH"),Required:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS_REQUIRED"),update:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),updating:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATING"),updateSuccess:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATESUCESS"),updateFailed:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATEFAILED")}},methods:{subOptions(e){this.sublabel=e},UpdateParams(){this.changes=!0,"undefined"!==typeof this.element.params.sub_options&&(this.element.params.sub_options.sub_values=this.sublabel),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updateparams",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$s.stringify({element:this.element})}).then(e=>{setTimeout(()=>{this.$emit("reloadElement")},200),this.$modal.hide("modalEditElement"+this.ID)}).catch(e=>{console.log(e)})},axiostrad:function(e){return d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getalltranslations",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$s.stringify({toJTEXT:e})})},getElement(){this.loading=!0,d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:this.ID,gid:this.gid},paramsSerializer:e=>$s.stringify(e)}).then(e=>{this.element=e.data,"databasejoin"==this.element.plugin?this.plugin=this.element.params.database_join_display_type:"date"==this.element.plugin||"years"==this.element.plugin?this.plugin="birthday":this.plugin=this.element.plugin,this.axiostrad(this.element.label_tag).then(e=>{this.label.fr=e.data.fr,this.label.en=e.data.en}),0!=this.files&&"birthday"!=this.element.plugin&&delete this.plugins.birthday,this.loading=!1})},getDatabases(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getdatabasesjoin"}).then(e=>{this.databases=e.data.data})},beforeClose(e){!0===this.changes&&(this.changes=!1,this.$emit("show","foo-velocity","warn",this.dataSaved,this.informations)),this.$emit("modalClosed")},beforeOpen(e){this.initialisation()},initialisation(){this.getElement(),this.getDatabases()},publishUnpublishElement(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=publishunpublishelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$s.stringify({element:this.element.id})}).then(e=>{this.element.publish=!this.element.publish,this.$emit("publishUnpublishEvent"),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating),console.log(e)})},updateRequireElement(){setTimeout(()=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=changerequire",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:$s.stringify({element:this.element})}).then(()=>{this.$emit("updateRequireEvent")}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating),console.log(e)})},300)}},computed:{getlabel:function(){return this.tempEl.label_raw}},watch:{element:function(){this.tempEl=JSON.parse(JSON.stringify(this.element))},plugin:function(e){switch(e){case"dropdown":"databasejoin"!==this.element.plugin&&(this.element.plugin=e);break;case"birthday":"date"!==this.element.plugin&&"years"!==this.element.plugin&&(this.element.plugin=e);break;default:this.element.plugin=e}}}},Hs=Gs,zs=(a("7dea"),Object(b["a"])(Hs,Ja,ka,!1,null,"70b8047c",null)),qs=zs.exports;a("bef5");var Vs={name:"FormViewerEvaluation",props:{link:String,prog:Number},components:{datePicker:ia.a,modalEditElement:qs},data(){return{object_json:"",date:new Date,groups:[],loading:!1,options:{format:"DD/MM/YYYY",useCurrent:!1}}},methods:{getDataObject:Xe.a.debounce((function(){this.loading=!0;let e=this.link.link.replace("fabrik","emundus_onboard");d.a.get(e+"&format=vue_jsonclean").then(e=>{this.object_json=e.data,this.convertGroupElementsToArray(),this.loading=!1}).catch(e=>{this.loading=!1,console.log(e)})}),150),convertGroupElementsToArray(){Object.keys(this.object_json.Groups).forEach(e=>{this.groups.push(this.object_json.Groups[e]),this.object_json.Groups[e].elts=[],Object.keys(this.object_json.Groups[e].elements).forEach(t=>{this.object_json.Groups[e].elts.push(this.object_json.Groups[e].elements[t])})})}},created(){this.getDataObject()},computed:{dragOptions(){return{group:{name:"items",pull:"clone",put:!1},sort:!1,disabled:!1,ghostClass:"ghost"}}},watch:{}},Ys=Vs,Ws=(a("870a"),Object(b["a"])(Ys,Sa,wa,!1,null,"581e2ffa",null)),Xs=Ws.exports,Qs=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalAddEvaluation"}},[a("modal",{attrs:{name:"modalAddEvaluation",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddEvaluation")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.addGrid)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.ChooseExistingGridModel)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.model_id,expression:"model_id"}],staticClass:"dropdown-toggle",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.model_id=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"-1"}}),e._l(e.models,(function(t,s){return a("option",{domProps:{value:t.form_id}},[e._v(e._s(t.label))])}))],2)]),a("div",{staticClass:"form-group",class:{"mb-0":e.translate.label}},[a("label",[e._v(e._s(e.Name)),a("span",{staticClass:"em-red-500-color"},[e._v("*")]),e._v(" :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.label.fr,expression:"label.fr"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40",id:"menu_label"},domProps:{value:e.label.fr},on:{input:function(t){t.target.composing||e.$set(e.label,"fr",t.target.value)}}}),a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.label},attrs:{type:"button"},on:{click:function(t){e.translate.label=!e.translate.label}}})])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[e.translate.label?a("div",{staticClass:"inlineflex"},[a("label",{staticClass:"translate-label"},[e._v(" "+e._s(e.TranslateEnglish)+" ")]),a("i",{staticClass:"fas fa-sort-down"})]):e._e()]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[e.translate.label?a("div",{staticClass:"form-group mb-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.label.en,expression:"label.en"}],staticClass:"form__input field-general w-input",attrs:{type:"text",maxlength:"40"},domProps:{value:e.label.en},on:{input:function(t){t.target.composing||e.$set(e.label,"en",t.target.value)}}})]):e._e()]),e.errors&&-1==e.model_id?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.LabelRequired))])]):e._e(),a("div",{staticClass:"form-group mt-1",class:{"mb-0":e.translate.intro}},[a("label",[e._v(e._s(e.Intro)+" :")]),a("div",{staticClass:"input-can-translate"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.intro.fr,expression:"intro.fr"}],staticClass:"form__input field-general w-input",staticStyle:{margin:"0"},attrs:{rows:"3",maxlength:"300"},domProps:{value:e.intro.fr},on:{input:function(t){t.target.composing||e.$set(e.intro,"fr",t.target.value)}}}),a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.intro},attrs:{type:"button"},on:{click:function(t){e.translate.intro=!e.translate.intro}}})])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[e.translate.intro?a("div",{staticClass:"inlineflex"},[a("label",{staticClass:"translate-label"},[e._v(" "+e._s(e.TranslateEnglish)+" ")]),a("em",{staticClass:"fas fa-sort-down"})]):e._e()]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[e.translate.intro?a("div",{staticClass:"form-group mb-1"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.intro.en,expression:"intro.en"}],staticClass:"form__input field-general w-input",attrs:{rows:"3",maxlength:"300"},domProps:{value:e.intro.en},on:{input:function(t){t.target.composing||e.$set(e.intro,"en",t.target.value)}}})]):e._e()]),-1==e.model_id?a("div",{staticClass:"col-md-12 d-flex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.template,expression:"template"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.template)?e._i(e.template,null)>-1:e.template},on:{change:function(t){var a=e.template,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.template=a.concat([i])):n>-1&&(e.template=a.slice(0,n).concat(a.slice(n+1)))}else e.template=o}}}),a("label",{staticClass:"ml-10px"},[e._v(e._s(e.SaveAsTemplate)+" :")])]):e._e()],1),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddEvaluation")}}},[e._v(e._s(e.Retour))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.createGrid()}}},[e._v(e._s(e.Continuer))])]),e.submitted?a("div",{staticClass:"loading-form",staticStyle:{top:"10vh"}},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()])],1)},Ks=[];const Zs=a("bef5");var eo={name:"modalAddEvaluation",components:{},props:{prog:Number,grid:Number},data(){return{translate:{label:!1,intro:!1},label:{fr:"",en:""},intro:{fr:"",en:""},model_id:-1,template:0,models:[],errors:!1,changes:!1,submitted:!1,addGrid:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDGRID"),ChooseExistingGridModel:Joomla.JText._("COM_EMUNDUS_ONBOARD_GRIDMODEL"),Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_NAME"),Intro:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_INTRO"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),LabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),SaveAsTemplate:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVE_AS_TEMPLATE")}},methods:{beforeClose(e){},beforeOpen(e){this.getExistingGrids()},getExistingGrids(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getgridsmodel"}).then(e=>{this.models=e.data.data})},createGrid(){this.changes=!0,""!=this.label.fr||-1!=this.model_id?(this.translate.label||(this.label.en=this.label.fr),this.translate.intro||(this.intro.en=this.intro.fr),this.submitted=!0,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=creategrid",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Zs.stringify({label:this.label,intro:this.intro,modelid:this.model_id,template:this.template,pid:this.prog})}).then(e=>{this.submitted=!1,this.$emit("updateGrid"),this.$modal.hide("modalAddEvaluation")}).catch(e=>{console.log(e)})):this.errors=!0}},watch:{model_id:function(e){-1!=e?this.models.forEach(e=>{e.form_id==this.model_id&&(this.label.fr=e.label,this.intro.fr=e.intro)}):(this.label.fr="",this.intro.fr="")}}},to=eo,ao=Object(b["a"])(to,Qs,Ks,!1,null,"0c419193",null),so=ao.exports;const oo=a("bef5");var io={name:"addEvaluationGrid",components:{ModalAddEvaluation:so,Datetime:_t["Datetime"],FormViewerEvaluation:Xs},props:{funnelCategorie:Object,prog:Number},data(){return{link:{link:""},visibility:null,viewer:0,grid:null,translations:{addGrid:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDGRID"),editGrid:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EDITGRID"),deleteGrid:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGRID")}}},methods:{getEvaluationGridByProgram(e){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getevaluationgrid&pid="+this.prog).then(t=>{this.grid=t.data.data,null!=this.grid&&(this.link.link="index.php?option=com_fabrik&view=form&formid="+t.data.data,this.viewer++,e&&this.evaluationBuilder())})},evaluationBuilder(){this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid=&index=0&cid="+this.prog+"&evaluation="+this.grid)},deleteGrid(){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGRID"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGRID_QUESTION"),type:"warning",showCancelButton:!0}).then(e=>{e.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=deletegrid",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:oo.stringify({grid:this.grid,pid:this.prog})}).then(()=>{T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_GRIDDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.getEvaluationGridByProgram(0)})}).catch(e=>{console.log(e)})})},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>oo.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})}},created(){this.getEvaluationGridByProgram(0)}},no=io,ro=Object(b["a"])(no,Ma,Ra,!1,null,null,null),lo=ro.exports;const co=a("bef5");var mo={name:"addProgramAdvancedSettings",components:{Tasks:Le,Datetime:_t["Datetime"],addGestionnaires:kt,addEmail:Wt,addEvalVisi:Ea,addEvalEval:Aa,addEvaluationGrid:lo,ModalAddUser:Et},props:{prog:Number,actualLanguage:String,coordinatorAccess:Number},data:()=>({menuHighlight:null,dynamicComponent:!1,categories:[],cats:[],prog_group:{prog:null,evaluator:null,manager:null},langue:0,funnelDescription:[[Joomla.JText._("COM_EMUNDUS_ONBOARD_USERSDESCRIPTION"),Joomla.JText._("COM_EMUNDUS_ONBOARD_EVALUATIONGRIDDESCRIPTION"),Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILSDESCRIPTION")],[Joomla.JText._("COM_EMUNDUS_ONBOARD_USERSDESCRIPTION"),Joomla.JText._("COM_EMUNDUS_ONBOARD_EVALUATIONGRIDDESCRIPTION"),Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILSDESCRIPTION")]],progCategories:[["Utilisateurs","Grille d'évaluation","Emails"],["Users","Evaluation grid","Emails"]],program:{label:"",code:"",programmes:"",notes:"",synthesis:'<ul><li><strong>[APPLICANT_NAME]</strong></li><li><a href="mailto:[EMAIL]">[EMAIL]</a></li></ul>',tmpl_trombinoscope:'<table cellpadding="2" style="width: 100%;"><tbody><tr style="border-collapse: collapse;"><td align="center" valign="top" style="text-align: center;"><p style="text-align: center;"><img src="[PHOTO]" alt="Photo" height="100" /> </p><p style="text-align: center;"><b>[NAME]</b><br /></p></td></tr></tbody></table>',tmpl_badge:'<table width="100%"><tbody><tr><td style="vertical-align: top; width: 100px;" align="left" valign="middle" width="30%"><img src="[LOGO]" alt="Logo" height="50" /></td><td style="vertical-align: top;" align="left" valign="top" width="70%"><b>[NAME]</b></td></tr></tbody></table>\n',published:1,apply_online:1},From:Joomla.JText._("COM_EMUNDUS_ONBOARD_FROM"),To:Joomla.JText._("COM_EMUNDUS_ONBOARD_TO"),Since:Joomla.JText._("COM_EMUNDUS_ONBOARD_SINCE"),Modify:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM"),Code:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_CODE"),Category:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_CATEGORY"),FORM:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER")}),methods:{moment(e){return y()(e)},next(){this.menuHighlight<3?this.menuHighlight++:window.location.href="/configuration-programs"},previous(){this.menuHighlight>0?this.menuHighlight--:window.location.href="/configuration-programs"},getCampaignsByProgram(){d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getcampaignsbyprogram&pid="+this.prog).then(e=>{this.campaigns=e.data.data})},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>co.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})}},computed:{console:()=>console},created(){"en"==this.actualLanguage&&(this.langue=1),d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getprogramcategories").then(e=>{this.categories=e.data.data;for(var t=0;t<this.categories.length;t++)this.cats.push(this.categories[t]);""!==this.prog?d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getprogrambyid&id="+this.prog).then(e=>{this.program.code=e.data.data.code,this.program.label=e.data.data.label,this.program.notes=e.data.data.notes,this.program.programmes=e.data.data.programmes,this.program.tmpl_badge=e.data.data.tmpl_badge,this.program.published=e.data.data.published,this.program.apply_online=e.data.data.apply_online,null!=e.data.data.synthesis&&(this.program.synthesis=e.data.data.synthesis.replace(/>\s+</g,"><")),null!=e.data.data.tmpl_trombinoscope&&(this.program.tmpl_trombinoscope=e.data.data.tmpl_trombinoscope.replace(/>\s+</g,"><")),this.dynamicComponent=!0,this.prog_group.prog=e.data.data.group,this.prog_group.evaluator=e.data.data.evaluator_group,this.prog_group.manager=e.data.data.manager_group,this.menuHighlight=0}).catch(e=>{console.log(e)}):this.dynamicComponent=!0}).catch(e=>{console.log(e)}),this.getCampaignsByProgram()}},uo=mo,po=(a("4bf9"),Object(b["a"])(uo,ut,pt,!1,null,"27fbc144",null)),_o=po.exports,ho=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-principale"},[a("notifications",{attrs:{group:"foo-velocity",position:"bottom left","animation-type":"velocity",speed:500,classes:"vue-notification-custom"}}),a("div",{staticClass:"w-container general-information"},[""==e.campaign?a("div",{staticClass:"section-sub-menu sub-form"},[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("div",{staticClass:"d-flex"},[a("img",{staticClass:"tchooz-icon-title",attrs:{src:"/images/emundus/menus/megaphone.svg",srcset:"/images/emundus/menus/megaphone.svg",alt:"megaphone"}}),a("h1",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.translations.AddCampaign))])])])]):e._e(),a("form",{attrs:{id:"campaign-form"},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[a("div",{staticClass:"sous-container"},[a("p",{staticClass:"required mb-1"},[e._v(e._s(e.translations.RequiredFieldsIndicate))]),a("div",{staticClass:"form-group campaign-label"},[a("label",{attrs:{for:"campLabel"}},[e._v(e._s(e.translations.CampName)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:e.form.label[e.actualLanguage],expression:"form.label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.label,"mb-0":e.translate.label},attrs:{id:"campLabel",type:"text",required:""},domProps:{value:e.form.label[e.actualLanguage]},on:{keyup:e.enableTranslationTip,input:function(t){t.target.composing||e.$set(e.form.label,e.actualLanguage,t.target.value)}}}),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.label},attrs:{type:"button"},on:{click:e.enableLabelTranslation}}):e._e()]),e.translate.label?a("translation",{attrs:{label:e.form.label,actualLanguage:e.actualLanguage}}):e._e()],1),e.errors.label?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.LabelRequired))])]):e._e(),a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"w-col col-md-5"},[a("div",{staticClass:"w-form"},[a("label",{attrs:{for:"startDate"}},[e._v(e._s(e.translations.StartDate)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("datetime",{attrs:{id:"startDate",placeholder:e.translations.StartDate,type:"datetime","input-id":"start_date",phrases:{ok:e.translations.OK,cancel:e.translations.Cancel}},model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}})],1)]),a("div",{staticClass:"w-col col-md-5"},[a("div",{staticClass:"w-form"},[a("label",{attrs:{for:"endDate"}},[e._v(e._s(e.translations.EndDate)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("datetime",{attrs:{id:"endDate",placeholder:e.translations.EndDate+" *",type:"datetime","input-id":"end_date","min-datetime":e.minDate,phrases:{ok:e.translations.OK,cancel:e.translations.Cancel}},model:{value:e.form.end_date,callback:function(t){e.$set(e.form,"end_date",t)},expression:"form.end_date"}})],1)])]),a("div",{staticClass:"form-group campaign-label"},[a("label",{attrs:{for:"year"}},[e._v(e._s(e.translations.PickYear)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("autocomplete",{attrs:{id:"year",items:this.session,year:e.form.year,name:"2020 - 2021"},on:{searched:e.onSearchYear}})],1),a("div",{staticClass:"form-group d-flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.published,expression:"form.published"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"published",name:"published"},domProps:{checked:Array.isArray(e.form.published)?e._i(e.form.published,null)>-1:e._q(e.form.published,"1")},on:{change:function(t){var a=e.form.published,s=t.target,o=s.checked?"1":"0";if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.form,"published",a.concat([i])):n>-1&&e.$set(e.form,"published",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.form,"published",o)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px",attrs:{for:"published"}},[e._v(e._s(e.translations.Publish))])]),a("div",{staticClass:"form-group d-flex"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.is_limited,expression:"form.is_limited"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"limit",name:"limit"},domProps:{checked:Array.isArray(e.form.is_limited)?e._i(e.form.is_limited,null)>-1:e._q(e.form.is_limited,"1")},on:{change:function(t){var a=e.form.is_limited,s=t.target,o=s.checked?"1":"0";if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&e.$set(e.form,"is_limited",a.concat([i])):n>-1&&e.$set(e.form,"is_limited",a.slice(0,n).concat(a.slice(n+1)))}else e.$set(e.form,"is_limited",o)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px",attrs:{for:"limit"}},[e._v(e._s(e.translations.FilesLimit))])]),a("transition",{attrs:{name:"'slide-down'"}},[1==e.form.is_limited?a("div",[a("div",{staticClass:"form-group campaign-label"},[a("label",{attrs:{for:"campLabel"}},[e._v(e._s(e.translations.FilesNumberLimit)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.limit,expression:"form.limit"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.limit_files_number},attrs:{type:"number"},domProps:{value:e.form.limit},on:{input:function(t){t.target.composing||e.$set(e.form,"limit",t.target.value)}}})]),e.errors.limit_files_number?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.FilesLimitRequired))])]):e._e(),a("div",{staticClass:"form-group campaign-label"},[a("label",{attrs:{for:"campLabel"}},[e._v(e._s(e.translations.StatusLimit)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("div",{staticClass:"users-block",class:{"is-invalid":e.errors.limit_status}},e._l(e.status,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.limit_status[t.step],expression:"form.limit_status[statu.step]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.limit_status[t.step])?e._i(e.form.limit_status[t.step],null)>-1:e.form.limit_status[t.step]},on:{change:function(a){var s=e.form.limit_status[t.step],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.form.limit_status,t.step,s.concat([n])):r>-1&&e.$set(e.form.limit_status,t.step,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.form.limit_status,t.step,i)}}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.value))])])])})),0),e.errors.limit_status?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.StatusLimitRequired))])]):e._e()])]):e._e()])],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"sous-container"},[a("div",{staticClass:"heading-form"},[a("h2",{staticClass:"heading"},[e._v(e._s(e.translations.Information))])]),a("div",{staticClass:"form-group campaign-label"},[a("label",{staticStyle:{top:"5em"}},[e._v(e._s(e.translations.Resume)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.short_description,expression:"form.short_description"}],staticClass:"form__input field-general w-input",attrs:{type:"textarea",rows:"2",id:"campResume",maxlength:"500",placeholder:" "},domProps:{value:e.form.short_description},on:{keyup:function(t){return e.checkMaxlength("campResume")},focusout:function(t){return e.removeBorderFocus("campResume")},input:function(t){t.target.composing||e.$set(e.form,"short_description",t.target.value)}}})]),e.errors.short_description?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.ResumeRequired))])]):e._e(),null!=e.form.description?a("div",{staticClass:"form-group controls"},[a("editor",{key:e.editorKey,attrs:{height:"30em",text:e.form.description,enable_variables:!1,placeholder:e.translations.Description,id:"campaign_description"},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1):e._e()]),a("div",{staticClass:"divider"}),a("div",{staticClass:"sous-container last-container"},[a("div",{staticClass:"heading-form"},[a("h2",{staticClass:"heading"},[e._v(e._s(e.translations.Program))])]),a("p",[e._v(e._s(e.translations.ProgramDesc)),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("div",{staticClass:"form-group container-flexbox-choisir-ou-plus w-clearfix mt-1"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.training,expression:"form.training"}],staticClass:"dropdown-toggle w-select",staticStyle:{"margin-bottom":"0"},attrs:{id:"select_prog",disabled:this.programs.length<=0},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.form,"training",t.target.multiple?a:a[0])},e.setCategory]}},[a("option",{attrs:{value:""}},[e._v(e._s(e.translations.ChooseProg))]),e._l(this.programs,(function(t,s){return a("option",{key:s,attrs:{"data-category":t.programmes},domProps:{value:t.code}},[e._v(" "+e._s(t.label)+" ")])}))],2),0!=e.coordinatorAccess?a("button",{staticClass:"buttonAddDoc",attrs:{title:e.translations.AddProgram,type:"button",id:"add-program"},on:{click:e.displayProgram}},[a("em",{staticClass:"fas fa-plus"})]):e._e()]),a("transition",{attrs:{name:"slide-fade"}},[e.isHiddenProgram?a("div",{staticClass:"program-addCampaign"},[a("div",{staticClass:"w-form"},[a("div",{staticClass:"form-group prog-label"},[a("label",{staticStyle:{top:"5.7em"},attrs:{for:"prog_label"}},[e._v(e._s(e.translations.ProgName)+" "),a("span",{staticClass:"em-red-500-color"},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.programForm.label,expression:"programForm.label"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.progLabel},attrs:{type:"text",id:"prog_label",placeholder:" "},domProps:{value:e.programForm.label},on:{keyup:e.updateCode,input:function(t){t.target.composing||e.$set(e.programForm,"label",t.target.value)}}})]),e.errors.progLabel?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.ProgLabelRequired))])]):e._e()])]):e._e()])],1),a("div",{staticClass:"divider"}),a("div",{staticClass:"section-sauvegarder-et-continuer"},[a("div",{staticClass:"w-container btns-sauvegarder-et-continuer"},[a("div",{staticClass:"container-evaluation d-flex justify-content-between"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button",onclick:"history.go(-1)"}},[e._v(" "+e._s(e.translations.Retour)+" ")]),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer bouton-sauvergarder-et-continuer-green",attrs:{type:"button"},on:{click:function(t){e.quit=1,e.submit()}}},[e._v(" "+e._s(e.translations.Continuer)+" ")])])])])])])]),e.submitted?a("div",{staticClass:"loading-form"},[a("RingLoader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},go=[],fo=a("aaac"),bo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"translation"},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{staticClass:"inlineflex",staticStyle:{margin:"25px"}},[a("label",{staticClass:"translate-label"},[e._v(e._s(e.TranslateIn))]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.currentLangTranslation,expression:"currentLangTranslation"}],staticClass:"dropdown-toggle ml-10px",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.currentLangTranslation=t.target.multiple?a:a[0]}}},e._l(e.languages,(function(t){return a("option",{domProps:{value:t.sef}},[e._v(e._s(t.title_native))])})),0)])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.label[e.currentLangTranslation],expression:"label[currentLangTranslation]"}],staticClass:"form__input field-general w-input",attrs:{type:"text",id:"label_"+e.currentLangTranslation},domProps:{value:e.label[e.currentLangTranslation]},on:{input:function(t){t.target.composing||e.$set(e.label,e.currentLangTranslation,t.target.value)}}})])],1)},vo=[],Co={name:"translation",props:{label:Object,actualLanguage:String},data(){return{currentLangTranslation:"en",languages:[],TranslateIn:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_IN")}},created(){this.getLanguages()},methods:{getLanguages(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=getactivelanguages"}).then(e=>{this.languages=e.data.data,this.languages.forEach((e,t)=>{e.sef==this.actualLanguage&&this.languages.splice(t,1)}),this.currentLangTranslation=this.languages[0].sef})}},mounted(){document.addEventListener("click",this.handleClickOutside)},destroyed(){document.removeEventListener("click",this.handleClickOutside)}},Oo=Co,Do=Object(b["a"])(Oo,bo,vo,!1,null,"200ce60d",null),Eo=Do.exports;const yo=a("bef5");var xo={name:"addCampaign",components:{Tasks:Le,Datetime:_t["Datetime"],Editor:et,Autocomplete:nt,Translation:Eo},directives:{focus:{inserted:function(e){e.focus()}}},quit:1,props:{campaign:Number,actualLanguage:String,coordinatorAccess:Number,manyLanguages:Number},data:()=>({isHiddenProgram:!1,olderDate:"",minDate:"",programs:[],years:[],status:[],languages:[],session:[],old_training:"",old_program_form:"",editorKey:0,form:{label:{},start_date:"",end_date:"",short_description:"",description:null,training:"",year:"",published:1,is_limited:0,profile_id:9,limit:50,limit_status:[]},translate:{label:!1},enableTip:!1,programForm:{code:"",label:"",notes:"",programmes:"",published:1,apply_online:1},year:{label:"",code:"",schoolyear:"",published:1,profile_id:"",programmes:""},errors:{label:!1,progCode:!1,progLabel:!1,short_description:!1,limit_files_number:!1,limit_status:!1},translations:{Parameter:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PARAMETER"),CampName:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_CAMPNAME"),StartDate:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_STARTDATE"),EndDate:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_ENDDATE"),Information:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_INFORMATION"),Resume:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_RESUME"),Description:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_DESCRIPTION"),Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM"),AddProgram:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDPROGRAM"),ChooseProg:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_CHOOSEPROG"),PickYear:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PICKYEAR"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Quitter:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_QUITTER"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Publish:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),DepotDeDossier:Joomla.JText._("COM_EMUNDUS_ONBOARD_DEPOTDEDOSSIER"),ProgName:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGNAME"),ProgCode:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGCODE"),ChooseCategory:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSECATEGORY"),NameCategory:Joomla.JText._("COM_EMUNDUS_ONBOARD_NAMECATEGORY"),LabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),RequiredFieldsIndicate:Joomla.JText._("COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE"),ProgramResume:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_RESUME"),ProgLabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROG_REQUIRED_LABEL"),ResumeRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_CAMP_REQUIRED_RESUME"),OK:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),Cancel:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),FilesLimit:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILES_LIMIT"),FilesNumberLimit:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILES_LIMIT_NUMBER"),StatusLimit:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILES_LIMIT_STATUS"),StatusLimitRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS_REQUIRED"),FilesLimitRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILES_LIMIT_REQUIRED"),AddCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CAMPAIGN"),ProgramDesc:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_INTRO_DESC")},submitted:!1}),created(){fo["Settings"].defaultLocale=this.actualLanguage;let e=new Date;this.form.start_date=fo["DateTime"].local(e.getFullYear(),e.getMonth()+1,e.getDate(),0,0,0).toISO(),this.getLanguages(),""!==this.campaign&&d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getcampaignbyid&id="+this.campaign).then(e=>{let t=e.data.data.campaign.label;this.form=e.data.data.campaign,this.$emit("getInformations",this.form),this.programForm=e.data.data.program,this.form.label=e.data.data.label,this.languages.forEach(e=>{""!==this.form.label[e.sef]&&null!=this.form.label[e.sef]||(this.form.label[e.sef]=t)}),this.form.start_date=fo["DateTime"].fromSQL(this.form.start_date),this.form.end_date=fo["DateTime"].fromSQL(this.form.end_date),"0000-00-00T00:00:00.000Z"==this.form.end_date?this.form.end_date="":this.olderDate=this.form.end_date,"undefined"!=typeof e.data.data.campaign.status?(this.form.limit_status=[],this.form.is_limited=1,Object.values(e.data.data.campaign.status).forEach(e=>{this.form.limit_status[parseInt(e.limit_status)]=!0})):this.form.limit_status=[]}).catch(e=>{console.log(e)}),d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getallprogram").then(e=>{this.programs=e.data.data,0!==Object.keys(this.programs).length&&this.programs.sort((e,t)=>e.id-t.id)}).catch(e=>{console.log(e)}),d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getyears").then(e=>{this.years=e.data.data;for(let t=0;t<this.years.length;t++)this.session.push(this.years[t].schoolyear)}).catch(e=>{console.log(e)}),this.getStatus()},methods:{getLanguages(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=getactivelanguages"}).then(e=>{this.languages=e.data.data})},setCategory(e){this.year.programmes=e.target.options[e.target.options.selectedIndex].dataset.category,this.programForm=this.programs.find(e=>e.code==this.form.training)},updateCode(){""!==this.programForm.label?(this.programForm.code=this.programForm.label.toUpperCase().replace(/[^a-zA-Z0-9]/g,"_").substring(0,10)+"_00",0!==Object.keys(this.programs).length&&this.programs.forEach((e,t)=>{if(this.programForm.code==e.code){let t=parseInt(e.code.split("_")[1])+1;this.programForm.code=t>10?this.programForm.label.toUpperCase()+"_"+t:this.programForm.label.toUpperCase()+"_0"+t}})):this.programForm.code=""},enableLabelTranslation(){this.translate.label=!this.translate.label,this.translate.label&&setTimeout(()=>{document.getElementById("label_en").focus()},100)},getStatus(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=getstatus").then(e=>{this.status=e.data.data})},createCampaignWithExistingProgram(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=createcampaign",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:yo.stringify({body:e})}).then(e=>{this.campaign=e.data.data,this.quitFunnelOrContinue(this.quit)}).catch(e=>{console.log(e)})},createCampainWithNoExistingProgram(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=createprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:yo.stringify({body:e})}).then(()=>{this.form.training=e.code,this.form.start_date=fo["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=fo["DateTime"].fromISO(this.form.end_date).toISO(),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=createcampaign",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:yo.stringify({body:this.form})}).then(e=>{this.campaign=e.data.data,this.quitFunnelOrContinue(this.quit)}).catch(e=>{console.log(e)})})},submit(){if(this.errors={label:!1,progCode:!1,progLabel:!1,short_description:!1,limit_files_number:!1,limit_status:!1},""==this.form.label.fr&&""==this.form.label.en)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.label=!0,0;if(""==this.form.end_date)return window.scrollTo({top:0,behavior:"smooth"}),document.getElementById("end_date").focus(),0;if(""==this.form.year)return window.scrollTo({top:0,behavior:"smooth"}),document.getElementById("year").focus(),0;if(1==this.form.is_limited){let e=this.form.limit_status.every(e=>!1===e);if(""==this.form.limit)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.limit_files_number=!0,0;if(0==this.form.limit_status.length||e)return window.scrollTo({top:0,behavior:"smooth"}),this.errors.limit_status=!0,0}if(""==this.form.training){if(!this.isHiddenProgram)return document.getElementById("select_prog").focus(),0;if(""==this.programForm.label)return this.errors.progLabel=!0,document.getElementById("prog_label").focus(),0;if(""==this.programForm.code)return this.errors.progCode=!0,document.getElementById("prog_code").focus(),0}if(this.year.label=this.form.label,this.year.code=this.form.training,this.year.schoolyear=this.form.year,this.year.published=this.form.published,this.year.profile_id=this.form.profile_id,""==this.form.label.en&&(this.form.label.en=this.form.label.fr),this.submitted=!0,""!==this.campaign){let e="createprogram",t={body:this.programForm};""!=this.form.training&&(e="updateprogram",t={body:this.programForm,id:this.form.progid}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task="+e,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:yo.stringify(t)}).then(()=>{this.form.training=this.programForm.code,this.form.start_date=fo["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=fo["DateTime"].fromISO(this.form.end_date).toISO(),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updatecampaign",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:yo.stringify({body:this.form,cid:this.campaign})}).then(()=>{this.$emit("nextSection")}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})}else""!==this.form.training?(this.programForm=this.programs.find(e=>e.code==this.form.training),this.form.training=this.programForm.code,this.form.start_date=fo["DateTime"].fromISO(this.form.start_date).toISO(),this.form.end_date=fo["DateTime"].fromISO(this.form.end_date).toISO(),this.createCampaignWithExistingProgram(this.form)):this.createCampainWithNoExistingProgram(this.programForm)},quitFunnelOrContinue(e){0==e?this.redirectJRoute("index.php?option=com_emundus_onboard&view=campaign"):1==e&&(document.cookie="campaign_"+this.campaign+"_menu = 2; expires=Session; path=/",this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=addnextcampaign&cid="+this.campaign+"&index=0"))},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>yo.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},onSearchYear(e){this.form.year=e},displayProgram(){this.isHiddenProgram?(document.getElementById("add-program").style="transform: rotate(0)",this.form.training=this.old_training,this.programForm=this.old_program_form,document.getElementById("select_prog").removeAttribute("disabled")):(this.old_training=this.form.training,this.old_program_form=this.programForm,this.form.training="",this.programForm={code:"",label:"",notes:"",programmes:"",published:1,apply_online:1},document.getElementById("add-program").style="transform: rotate(135deg)",document.getElementById("select_prog").setAttribute("disabled","disabled")),this.isHiddenProgram=!this.isHiddenProgram},enableTranslationTip(){this.enableTip||(this.enableTip=!0,this.tip())},checkMaxlength(e){var t=document.getElementById(e).getAttribute("maxlength");t==this.form.short_description.length?document.getElementById(e).style.borderColor="red":document.getElementById(e).style.borderColor="#3898ec"},removeBorderFocus(e){document.getElementById(e).style.borderColor="#cccccc"},tip(){0!=this.manyLanguages&&this.show("foo-velocity",Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATETIP")+'<em class="translate-icon"></em>',Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP"))},show(e,t="",a="Information"){this.$notify({group:e,title:""+a,text:t,duration:1e5})},clean(e){this.$notify({group:e,clean:!0})}},watch:{"form.start_date":function(e,t){this.minDate=fo["DateTime"].fromISO(e).plus({days:1}),""==this.form.end_date&&(this.form.end_date=fo["DateTime"].fromISO(e).plus({days:1}))}}},No=xo,Uo=(a("f3a0"),Object(b["a"])(No,ho,go,!1,null,"52405f49",null)),To=Uo.exports,Ao=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-principale"},[a("notifications",{attrs:{group:"foo-velocity",position:"bottom left","animation-type":"velocity",speed:500,classes:"vue-notification-custom"}}),a("div",{staticClass:"w-container"},[""==e.email?a("div",{staticClass:"section-sub-menu sub-form"},[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("div",{staticClass:"d-flex"},[a("img",{staticClass:"tchooz-icon-title",attrs:{src:"/images/emundus/menus/email.png",srcset:"/images/emundus/menus/email.png",alt:"email"}}),a("h1",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.translations.AddEmail))])])])]):e._e(),a("form",{attrs:{id:"program-form"},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[a("div",{staticClass:"sous-container"},[a("p",{staticClass:"required mb-1"},[e._v(e._s(e.translations.RequiredFieldsIndicate))]),a("div",{staticClass:"heading-form"},[a("h2",{staticClass:"heading"},[e._v(e._s(e.translations.Informations))])]),a("div",{staticClass:"w-form"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.emailName)+" "),a("span",{staticStyle:{color:"#E5283B"}},[e._v("*")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.subject,expression:"form.subject"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.subject},attrs:{type:"text"},domProps:{value:e.form.subject},on:{input:function(t){t.target.composing||e.$set(e.form,"subject",t.target.value)}}})]),e.errors.subject?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.SubjectRequired))])]):e._e(),a("div",{staticClass:"form-group controls forms-emails-editor"},[a("label",[e._v(e._s(e.translations.emailBody)+" "),a("span",{staticStyle:{color:"#E5283B"}},[e._v("*")])]),e.dynamicComponent?a("editor",{class:{"is-invalid":e.errors.message},attrs:{height:"30em",text:e.form.message,lang:e.actualLanguage,enable_variables:!0,id:"email",placeholder:e.translations.EmailResume},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}}):e._e()],1),e.errors.message?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.BodyRequired))])]):e._e()])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"sous-container last-container"},[a("div",{staticClass:"heading-form d-flex"},[a("h2",{staticClass:"heading mb-0"},[e._v(e._s(e.translations.Advanced))]),a("button",{directives:[{name:"show",rawName:"v-show",value:!e.displayAdvancedParameters,expression:"!displayAdvancedParameters"}],staticClass:"buttonAddDoc",attrs:{title:e.translations.Advanced,type:"button"},on:{click:e.displayAdvanced}},[a("em",{staticClass:"fas fa-plus"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:e.displayAdvancedParameters,expression:"displayAdvancedParameters"}],staticClass:"buttonAddDoc",attrs:{title:e.translations.Advanced,type:"button"},on:{click:e.displayAdvanced}},[a("em",{staticClass:"fas fa-minus"})])]),e.displayAdvancedParameters?a("div",[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.receiverName))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name,expression:"form.name"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.form.name},on:{input:function(t){t.target.composing||e.$set(e.form,"name",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.emailAddress))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.emailfrom,expression:"form.emailfrom"}],staticClass:"form__input field-general w-input",attrs:{type:"text"},domProps:{value:e.form.emailfrom},on:{input:function(t){t.target.composing||e.$set(e.form,"emailfrom",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.emailCategory))]),a("autocomplete",{attrs:{items:this.categories,year:this.form.category},on:{searched:e.onSearchCategory}})],1),a("div",{staticClass:"form-group",attrs:{id:"receivers_cc"}},[a("label",[e._v(e._s(e.translations.ReceiversCC))]),a("multiselect",{attrs:{label:"email","track-by":"email",options:e.receivers_cc,multiple:!0,searchable:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translations.ReceiversCCPlaceHolder,"close-on-select":!1,"clear-on-select":!1},on:{tag:e.addNewCC},model:{value:e.selectedReceiversCC,callback:function(t){e.selectedReceiversCC=t},expression:"selectedReceiversCC"}})],1),a("div",{staticClass:"form-group",attrs:{id:"receivers_bcc"}},[a("label",[e._v(e._s(e.translations.ReceiversBCC))]),a("multiselect",{attrs:{label:"email","track-by":"email",options:e.receivers_bcc,multiple:!0,searchable:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translations.ReceiversBCCPlaceHolder,"close-on-select":!1,"clear-on-select":!1},on:{tag:e.addNewBCC},model:{value:e.selectedReceiversBCC,callback:function(t){e.selectedReceiversBCC=t},expression:"selectedReceiversBCC"}})],1),e.attached_letters?a("div",{staticClass:"form-group",attrs:{id:"attached_letters"}},[a("label",[e._v(e._s(e.translations.Letters))]),a("multiselect",{attrs:{label:"value","track-by":"id",options:e.attached_letters,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translations.LettersPlaceHolder,"close-on-select":!1,"clear-on-select":!1},model:{value:e.selectedLetterAttachments,callback:function(t){e.selectedLetterAttachments=t},expression:"selectedLetterAttachments"}})],1):e._e(),e.tags?a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.Tags))]),a("multiselect",{attrs:{label:"label","track-by":"id",options:e.action_tags,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translations.TagsPlaceHolder,"close-on-select":!1,"clear-on-select":!1},model:{value:e.selectedTags,callback:function(t){e.selectedTags=t},expression:"selectedTags"}})],1):e._e(),a("div",{staticClass:"form-group",attrs:{id:""}},[a("label",[e._v(e._s(e.translations.CandidateAttachments))]),a("multiselect",{attrs:{label:"value","track-by":"id",options:e.candidate_attachments,multiple:!0,taggable:!0,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translations.CandidateAttachmentsPlaceholder,"close-on-select":!1,"clear-on-select":!1},model:{value:e.selectedCandidateAttachments,callback:function(t){e.selectedCandidateAttachments=t},expression:"selectedCandidateAttachments"}})],1)]):e._e()]),a("div",{staticClass:"divider"}),""==e.email?a("div",{staticClass:"sous-container last-container"},[a("div",{staticClass:"heading-form"},[a("h2",{staticClass:"heading"},[e._v(e._s(e.translations.Trigger))])]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.Program))]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.trigger.program,expression:"trigger.program"}],staticClass:"dropdown-toggle w-select",on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.trigger,"program",t.target.multiple?a:a[0])},e.addTrigger]}},[a("option",{domProps:{value:null}}),e._l(e.programs,(function(t,s){return a("option",{domProps:{value:t.id}},[e._v(e._s(t.label))])}))],2)]),e.triggered?a("div",[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.Actions)),a("span",{staticStyle:{color:"#E5283B"}},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.trigger.action_status,expression:"trigger.action_status"}],staticClass:"dropdown-toggle w-select",class:{"is-invalid":e.errors.trigger.action_status},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.trigger,"action_status",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"to_current_user"}},[e._v(e._s(e.translations.TheCandidate))]),a("option",{attrs:{value:"to_applicant"}},[e._v(e._s(e.translations.Manual))])]),e.errors.trigger.action_status?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.StatusRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.Status)),a("span",{staticStyle:{color:"#E5283B"}},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.trigger.status,expression:"trigger.status"}],staticClass:"dropdown-toggle w-select",class:{"is-invalid":e.errors.trigger.status},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.trigger,"status",t.target.multiple?a:a[0])}}},e._l(e.status,(function(t,s){return a("option",{key:s,domProps:{value:t.step}},[e._v(e._s(t.value))])})),0),e.errors.trigger.status?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.StatusRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.Target)),a("span",{staticStyle:{color:"#E5283B"}},[e._v("*")])]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.trigger.target,expression:"trigger.target"}],staticClass:"dropdown-toggle w-select",class:{"is-invalid":e.errors.trigger.target},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.trigger,"target",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"5"}},[e._v(e._s(e.translations.Administrators))]),a("option",{attrs:{value:"6"}},[e._v(e._s(e.translations.Evaluators))]),a("option",{attrs:{value:"1000"}},[e._v(e._s(e.translations.Candidates))])]),e.errors.trigger.target?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.TargetRequired))])]):e._e()]),0==e.trigger.target?a("div",{staticClass:"form-group",staticStyle:{"align-items":"baseline"}},[a("label",[e._v(e._s(e.translations.ChooseUsers)),a("span",{staticStyle:{color:"#E5283B"}},[e._v("*")]),e._v(" :")]),a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:e.Search},domProps:{value:e.searchTerm},on:{keyup:e.searchUserByTerm,input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),a("button",{staticClass:"searchButton",attrs:{type:"button"},on:{click:e.searchUserByTerm}},[a("em",{staticClass:"fas fa-search"})])])]),a("div",{staticClass:"select-all"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectall,expression:"selectall"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectall)?e._i(e.selectall,null)>-1:e.selectall},on:{click:e.selectAllUsers,change:function(t){var a=e.selectall,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.selectall=a.concat([i])):n>-1&&(e.selectall=a.slice(0,n).concat(a.slice(n+1)))}else e.selectall=o}}}),a("label",[e._v(" "+e._s(e.translations.SelectAll)+" ")])]),a("div",{staticClass:"users-block",class:{"is-invalid":e.errors.trigger.selectedUsers}},e._l(e.users,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedUsers[t.id],expression:"selectedUsers[user.id]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selectedUsers[t.id])?e._i(e.selectedUsers[t.id],null)>-1:e.selectedUsers[t.id]},on:{change:function(a){var s=e.selectedUsers[t.id],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.selectedUsers,t.id,s.concat([n])):r>-1&&e.$set(e.selectedUsers,t.id,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.selectedUsers,t.id,i)}}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.name))]),a("p",[e._v(e._s(t.email))])])])})),0),e.errors.trigger.selectedUsers?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.UsersRequired))])]):e._e()]):e._e()]):e._e()]):e._e(),a("div",{staticClass:"section-sauvegarder-et-continuer"},[a("div",{staticClass:"w-container"},[a("div",{staticClass:"container-evaluation d-flex justify-content-between"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button",onclick:"history.go(-1)"}},[e._v(" "+e._s(e.translations.retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer bouton-sauvergarder-et-continuer-green",attrs:{type:"submit"}},[e._v(" "+e._s(e.translations.continuer)+" ")])])])])])])],1)},Mo=[],Ro=a("e191"),So=a.n(Ro);const wo=a("bef5");var Jo={name:"addEmail",components:{Tasks:Le,Editor:et,Autocomplete:nt,Multiselect:So.a},props:{email:Number,actualLanguage:String},data:()=>({langue:0,dynamicComponent:!1,displayAdvancedParameters:!1,translations:{AddEmail:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_EMAIL"),Advanced:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADVANCED_CUSTOMING"),Informations:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_INFORMATION"),Trigger:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_TRIGGER"),emailType:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDEMAIL_CHOOSETYPE"),emailCategory:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSECATEGORY"),retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),emailName:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDEMAIL_NAME"),emailBody:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDEMAIL_BODY"),receiverName:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDEMAIL_RECEIVER"),emailAddress:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDEMAIL_ADDRESS"),EmailResume:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDEMAIL_RESUME"),RequiredFieldsIndicate:Joomla.JText._("COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE"),EmailType:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAILTYPE"),SubjectRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_SUBJECT_REQUIRED"),BodyRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_BODY_REQUIRED"),Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM"),Model:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERMODEL"),ModelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERMODEL_REQUIRED"),Status:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS"),StatusRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERSTATUS_REQUIRED"),Target:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERTARGET"),TargetRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGERTARGET_REQUIRED"),Administrators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATORS"),Evaluators:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATORS"),Candidates:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_CANDIDATES"),DefinedUsers:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_DEFINED_USERS"),ChooseUsers:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGER_CHOOSE_USERS"),UsersRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGER_USERS_REQUIRED"),Search:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEARCH_USERS"),TheCandidate:Joomla.JText._("COM_EMUNDUS_ONBOARD_THE_CANDIDATE"),Manual:Joomla.JText._("COM_EMUNDUS_ONBOARD_MANUAL"),Actions:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRIGGER_ACTIONS"),Tags:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_TAGS"),DocumentType:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_DOCUMENT"),Letters:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL_DOCUMENT"),LettersPlaceHolder:Joomla.JText._("COM_EMUNDUS_ONBOARD_PLACEHOLDER_EMAIL_DOCUMENT"),ReceiversCC:Joomla.JText._("COM_EMUNDUS_ONBOARD_RECEIVER_CC_TAGS"),ReceiversCCPlaceHolder:Joomla.JText._("COM_EMUNDUS_ONBOARD_RECEIVER_CC_TAGS_PLACEHOLDER"),ReceiversBCC:Joomla.JText._("COM_EMUNDUS_ONBOARD_RECEIVER_BCC_TAGS"),ReceiversBCCPlaceHolder:Joomla.JText._("COM_EMUNDUS_ONBOARD_RECEIVER_BCC_TAGS_PLACEHOLDER"),CopiesTooltips:Joomla.JText._("COM_EMUNDUS_ONBOARD_CC_BCC_TOOLTIPS"),TagsPlaceHolder:Joomla.JText._("COM_EMUNDUS_ONBOARD_PLACEHOLDER_EMAIL_TAGS"),CandidateAttachments:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANDIDAT_ATTACHMENTS"),CandidateAttachmentsPlaceholder:Joomla.JText._("COM_EMUNDUS_ONBOARD_PLACEHOLDER_CANDIDAT_ATTACHMENTS")},categories:[],programs:[],status:[],users:[],selectedUsers:[],enableTip:!1,searchTerm:"",selectall:!1,tags:[],documents:[],selectedTags:[],selectedCandidateAttachments:[],form:{lbl:"",subject:"",name:"",emailfrom:"",message:"",type:2,category:"",published:1},trigger:{model:null,status:null,action_status:null,target:null,program:null},triggered:!1,errors:{subject:!1,message:!1,trigger:{model:!1,status:!1,target:!1,selectedUsers:!1,action_status:!1}},submitted:!1,selectedReceiversCC:[],selectedReceiversBCC:[],selectedLetterAttachments:[],receivers_cc:[],receivers_bcc:[],attached_letters:[],action_tags:[],candidate_attachments:[]}),methods:{displayAdvanced(){this.displayAdvancedParameters=!this.displayAdvancedParameters},addNewCC(e){const t={email:e,id:e.substring(0,2)+Math.floor(1e7*Math.random())};this.receivers_cc.push(t),this.selectedReceiversCC.push(t)},addNewBCC(e){const t={email:e,id:e.substring(0,2)+Math.floor(1e7*Math.random())};this.receivers_bcc.push(t),this.selectedReceiversBCC.push(t)},getAllUsers:function(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=getallusers",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{this.receivers_cc=e.data.users,this.receivers_bcc=e.data.users}).catch(e=>{console.log(e)})},getProgramsList(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getallprogram",params:{filter:"",sort:"",recherche:"",lim:100,page:1},paramsSerializer:e=>wo.stringify(e)}).then(e=>{this.programs=e.data.data})},getStatus(){d.a.get("index.php?option=com_emundus_onboard&controller=email&task=getstatus").then(e=>{this.status=e.data.data})},getUsers(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getuserswithoutapplicants").then(e=>{this.users=e.data.data})},searchUserByTerm(){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=searchuserbytermwithoutapplicants&term="+this.searchTerm).then(e=>{this.users=e.data.data})},addTrigger(){null!=this.trigger.program?this.triggered=!0:this.triggered=!1},selectAllUsers(){this.users.forEach(e=>{this.selectall?this.selectedUsers[e.id]=!1:this.selectedUsers[e.id]=!0}),this.$forceUpdate()},submit(){if(this.errors={subject:!1,message:!1,trigger:{model:!1,status:!1,target:!1,selectedUsers:!1}},""==this.form.subject)return this.errors.subject=!0,0;if(""==this.form.message)return this.errors.message=!0,0;if(null!=this.trigger.program){if(null==this.trigger.action_status)return this.errors.trigger.action_status=!0,0;if(null==this.trigger.status)return this.errors.trigger.status=!0,0;if(null==this.trigger.target)return this.errors.trigger.target=!0,0;if(0==this.trigger.target&&0===this.selectedUsers.length)return this.errors.trigger.selectedUsers=!0,0}this.submitted=!0,""!==this.email?d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=updateemail",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:wo.stringify({body:this.form,code:this.email,selectedReceiversCC:this.selectedReceiversCC,selectedReceiversBCC:this.selectedReceiversBCC,selectedLetterAttachments:this.selectedLetterAttachments,selectedCandidateAttachments:this.selectedCandidateAttachments,selectedTags:this.selectedTags})}).then(e=>{this.redirectJRoute("index.php?option=com_emundus_onboard&view=email")}).catch(e=>{console.log(e)}):d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=createemail",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:wo.stringify({body:this.form,selectedReceiversCC:this.selectedReceiversCC,selectedReceiversBCC:this.selectedReceiversBCC,selectedLetterAttachments:this.selectedLetterAttachments,selectedCandidateAttachments:this.selectedCandidateAttachments,selectedTags:this.selectedTags})}).then(e=>{this.trigger.model=e.data.data,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=email&task=createtrigger",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:wo.stringify({trigger:this.trigger,users:this.selectedUsers})}).then(e=>{this.redirectJRoute("index.php?option=com_emundus_onboard&view=email")})}).catch(e=>{console.log(e)})},onSearchCategory(e){this.form.category=e},enableVariablesTip(){this.enableTip||(this.enableTip=!0,this.tip())},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>wo.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},tip(){this.show("foo-velocity",Joomla.JText._("COM_EMUNDUS_ONBOARD_VARIABLESTIP")+' <strong style="font-size: 16px">/</strong>',Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP"))},show(e,t="",a="Information"){this.$notify({group:e,title:""+a,text:t,duration:1e4})},clean(e){this.$notify({group:e,clean:!0})},getAllTags:function(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=gettags",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{let t=e.data.data;this.action_tags=t}).catch(e=>{console.log(e)})},getAllDocumentLetter:function(){d()({method:"post",url:"index.php?option=com_emundus&controller=messages&task=getalldocumentsletters",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{this.attached_letters=e.data.documents}).catch(e=>{console.log(e)})},getAllAttachments:function(){d()({method:"get",url:"index.php?option=com_emundus&controller=messages&task=getallattachments",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{this.candidate_attachments=e.data.attachments}).catch(e=>{console.log(e)})}},created(){this.getAllAttachments(),this.getAllTags(),this.getAllDocumentLetter(),d.a.get("index.php?option=com_emundus_onboard&controller=email&task=getemailcategories").then(e=>{this.categories=e.data.data,""!==this.email?d.a.get("index.php?option=com_emundus_onboard&controller=email&task=getemailbyid&id="+this.email).then(e=>{if(this.form.lbl=e.data.data.email.lbl,this.form.subject=e.data.data.email.subject,this.form.name=e.data.data.email.name,this.form.emailfrom=e.data.data.email.emailfrom,this.form.message=e.data.data.email.message,this.form.type=e.data.data.email.type,this.form.category=e.data.data.email.category,this.form.published=e.data.data.email.published,this.dynamicComponent=!0,e.data.data.letter_attachment){let t=e.data.data.letter_attachment;this.selectedLetterAttachments=t}if(e.data.data.candidate_attachment){let t=e.data.data.candidate_attachment;this.selectedCandidateAttachments=t}if(e.data.data.tags){let t=e.data.data.tags;this.selectedTags=t}if(null!==e.data.data.receivers&&void 0!==e.data.data.receivers&&""!==e.data.data.receivers){let t=[],a=[],s=e.data.data.receivers;for(let e=0;e<s.length;e++)t[e]={},a[e]={},"receiver_cc_email"==s[e].type||"receiver_cc_fabrik"==s[e].type?(t[e]["id"]=s[e].id,t[e]["email"]=s[e].receivers):"receiver_bcc_email"!=s[e].type&&"receiver_bcc_fabrik"!=s[e].type||(a[e]["id"]=s[e].id,a[e]["email"]=s[e].receivers);const o=t.filter(e=>null!==e["id"]&&void 0!==e["id"]),i=a.filter(e=>null!==e["id"]&&void 0!==e["id"]);this.selectedReceiversCC=o,this.selectedReceiversBCC=i}}).catch(e=>{console.log(e)}):this.dynamicComponent=!0}).catch(e=>{console.log(e)}),setTimeout(()=>{this.enableVariablesTip()},2e3),this.getProgramsList(),this.getStatus(),this.getUsers()},mounted(){"en"==this.actualLanguage&&(this.langue=1)}},ko=Jo,Bo=Object(b["a"])(ko,Ao,Mo,!1,null,null,null),Lo=Bo.exports,Io=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"section-principale"},[a("div",{staticClass:"w-container"},[a("form",{attrs:{id:"campaign-form"},on:{submit:function(t){return t.preventDefault(),e.submit.apply(null,arguments)}}},[a("div",{staticClass:"sous-container"},[a("p",{staticClass:"required"},[e._v(e._s(e.RequiredFieldsIndicate))]),a("div",{staticClass:"heading-form"},[a("div",{staticClass:"icon-title"}),a("h2",{staticClass:"heading"},[e._v(e._s(e.CreateForm))])]),a("p",{staticClass:"paragraphe-sous-titre"}),a("div",{staticClass:"form-group form-label"},[a("label",{attrs:{for:"formLabel"}},[e._v(e._s(e.FormName)+" *")]),a("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.$v.form.label.$model,expression:"$v.form.label.$model",modifiers:{lazy:!0}},{name:"focus",rawName:"v-focus"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors||e.formTouched},attrs:{id:"formLabel",type:"text",placeholder:" ",maxlength:"100"},domProps:{value:e.$v.form.label.$model},on:{change:function(t){return e.$set(e.$v.form.label,"$model",t.target.value)}}})]),e.errors||e.formTouched?a("p",{staticClass:"error"},[e.$v.form.label.required?e._e():a("span",{staticClass:"error"},[e._v(e._s(e.LabelRequired))])]):e._e(),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Description))]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description,expression:"form.description"}],staticClass:"form__input field-general w-input",attrs:{type:"textarea",rows:"4",maxlength:"400"},domProps:{value:e.form.description},on:{input:function(t){t.target.composing||e.$set(e.form,"description",t.target.value)}}})])]),a("div",{staticClass:"divider"}),a("div",{staticClass:"section-sauvegarder-et-continuer"},[a("div",{staticClass:"w-container"},[a("div",{staticClass:"container-evaluation d-flex justify-content-between"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button",onclick:"history.go(-1)"}},[e._v(" "+e._s(e.Retour)+" ")]),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-quitter",attrs:{type:"button"},on:{click:function(t){e.quit=0,e.submit()}}},[e._v(" "+e._s(e.Quitter)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){e.quit=1,e.submit()}}},[e._v(" "+e._s(e.Continuer)+" ")])])])])])])]),e.submitted?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()])},Po=[];const jo=a("bef5");var Fo={name:"addForm",props:{profileId:Number,campaignId:Number},components:{Tasks:Le},directives:{focus:{inserted:function(e){e.focus()}}},data:()=>({form:{label:"",description:"",published:1},CreateForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_FORM"),FormName:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDFORM_FORMNAME"),Description:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_DESCRIPTION"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Quitter:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_QUITTER"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Publish:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILTER_PUBLISH"),LabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),RequiredFieldsIndicate:Joomla.JText._("COM_EMUNDUS_ONBOARD_REQUIRED_FIELDS_INDICATE"),submitted:!1,errors:"",formTouched:"",quit:1}),validations:{form:{label:{required:He["required"]}}},created(){""!==this.profileId&&d.a.get("index.php?option=com_emundus_onboard&controller=form&task=getformbyid&id="+this.profileId).then(e=>{this.form.label=e.data.data.label,this.form.description=e.data.data.description}).catch(e=>{console.log(e)})},methods:{submit(){this.formTouched=!this.$v.form.$anyDirty,this.errors=this.$v.form.$anyError,!1===this.errors&&(""===this.form.label?this.formTouched=!0:(this.submitted=!0,""!==this.profileId?d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=updateform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jo.stringify({body:this.form,pid:this.profileId})}).then(e=>{this.quitFunnelOrContinue(this.quit)}).catch(e=>{console.log(e)}):d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=createform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jo.stringify({body:this.form})}).then(e=>{this.profileId=e.data.data,this.quitFunnelOrContinue(this.quit)}).catch(e=>{console.log(e)})))},quitFunnelOrContinue(e){if(""!=this.campaignId){let t=[];t.push(this.campaignId),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=affectcampaignstoform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:jo.stringify({prid:this.profileId,campaigns:t})}).then(()=>{0==e?this.redirectJRoute("index.php?option=com_emundus_onboard&view=form"):1==e&&this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid="+this.profileId+"&index=0&cid="+this.campaignId)})}else 0==e?this.redirectJRoute("index.php?option=com_emundus_onboard&view=form"):1==e&&this.redirectJRoute("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid="+this.profileId+"&index=0&cid=")},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>jo.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})}}},$o=Fo,Go=Object(b["a"])($o,Io,Po,!1,null,"df21bcc0",null),Ho=Go.exports,zo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("ModalWarningFormBuilder",{attrs:{pid:e.profileId,cid:e.campaignId}}),a("div",{staticClass:"w-row"},[a("div",{staticClass:"col-md-12 col-sm-10 p-1",staticStyle:{"padding-left":"2em !important"}},[a("div",{staticClass:"section-sub-menu"},[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("div",{staticClass:"d-flex"},[a("img",{staticClass:"tchooz-icon-title",attrs:{src:"/images/emundus/menus/megaphone.svg",srcset:"/images/emundus/menus/megaphone.svg",alt:"megaphone"}}),-1!=e.menuHighlight?a("h2",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.formCategories[e.langue][e.menuHighlight]))]):e._e(),-1!=e.menuHighlightProg?a("h2",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.formPrograms[e.langue][e.menuHighlightProg]))]):e._e()]),-1!=e.menuHighlight?a("p",{staticClass:"tchooz-section-description",staticStyle:{"margin-top":"20px"},domProps:{innerHTML:e._s(e.formCategoriesDesc[e.langue][e.menuHighlight])}}):e._e(),-1!=e.menuHighlightProg?a("p",{staticClass:"tchooz-section-description",staticStyle:{"margin-top":"20px"},domProps:{innerHTML:e._s(e.formProgramsDesc[e.langue][e.menuHighlightProg])}}):e._e(),a("hr"),a("div",{staticClass:"d-flex"},[a("p",[a("b",{staticStyle:{color:"#16afe1","font-weight":"700 !important"}},[e._v(" "+e._s(e.form.label))]),e._v(" "+e._s(e.translations.From)+" "),a("strong",[e._v(e._s(e.form.start_date))]),e._v(" "+e._s(e.translations.To)+" "),a("strong",[e._v(e._s(e.form.end_date))])])]),null==e.profileId&&0==e.loading?a("div",{staticClass:"d-flex required",staticStyle:{display:"flex"}},[a("em",{staticClass:"fas fa-exclamation-circle icon-warning-margin"}),a("p",[e._v(e._s(e.translations.chooseProfileWarning))])]):e._e()])]),a("div",{staticClass:"d-flex"},[a("ul",{staticClass:"nav nav-tabs topnav"},[e._l(e.formCategories[e.langue],(function(t,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.closeSubmenu,expression:"closeSubmenu"}],key:s},[a("a",{staticClass:"menu-item",class:[e.menuHighlight==s?"w--current":"",null==e.profileId?"grey-link":""],on:{click:function(t){null!=e.profileId&&e.changeToCampMenu(s)}}},[e._v(" "+e._s(t)+" ")])])})),e._l(e.formPrograms[e.langue],(function(t,s){return a("li",{directives:[{name:"show",rawName:"v-show",value:e.closeSubmenu,expression:"closeSubmenu"}],key:s},[a("a",{staticClass:"menu-item",class:[e.menuHighlightProg==s?"w--current":"",null==e.profileId?"grey-link":""],on:{click:function(t){null!=e.profileId&&e.changeToProgMenu(s)}}},[e._v(" "+e._s(t)+" ")])])}))],2)]),a("br"),-1!=e.menuHighlightProg?a("div",{staticClass:"warning-message-program mb-1"},[a("p",{staticStyle:{color:"#e5283b"}},[a("em",{staticClass:"fas fa-exclamation-triangle mr-1 red"}),e._v(e._s(e.translations.ProgramWarning))]),e.campaignsByProgram.length>0?a("ul",e._l(e.campaignsByProgram,(function(t,s){return a("li",[e._v(e._s(t.label))])})),0):e._e()]):e._e(),a("transition",{attrs:{name:"slide-right"}},[0==e.menuHighlight?a("add-campaign",{attrs:{campaign:e.campaignId,coordinatorAccess:!0,actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages},on:{nextSection:function(t){e.menuHighlight++},getInformations:e.initInformations}}):e._e(),2==e.menuHighlight?a("addFormulaire",{key:e.formReload,attrs:{profileId:e.profileId,campaignId:e.campaignId,profiles:e.profiles,visibility:null},on:{profileId:e.setProfileId}}):e._e(),1==e.menuHighlight?a("add-documents-dropfiles",{attrs:{funnelCategorie:e.formCategories[e.langue][e.menuHighlight],profileId:e.profileId,campaignId:e.campaignId,menuHighlight:e.menuHighlight,langue:e.actualLanguage,manyLanguages:e.manyLanguages}}):e._e(),0==e.menuHighlightProg&&0!=e.program.id?a("add-evaluation-grid",{attrs:{funnelCategorie:e.formPrograms[e.langue][e.menuHighlight],prog:e.program.id}}):e._e(),1==e.menuHighlightProg&&0!=e.program.id?a("add-email",{attrs:{funnelCategorie:e.formPrograms[e.langue][e.menuHighlight],prog:e.program.id}}):e._e()],1)],1)]),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},qo=[],Vo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation"},[a("ModalAddDocuments",{attrs:{cid:this.campaignId,pid:this.profileId,doc:this.currentDoc,langue:e.langue,manyLanguages:e.manyLanguages},on:{UpdateDocuments:e.updateList}}),a("a",{staticClass:"bouton-ajouter bouton-ajouter-green pointer",staticStyle:{width:"max-content"},on:{click:function(t){return e.$modal.show("modalAddDocuments")}}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.createDocument)+" ")])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{staticClass:"w-form d-flex",staticStyle:{"align-items":"unset"}},[a("ul",{staticClass:"ml-0 w-50",staticStyle:{"padding-left":"0"}},[a("h2",{staticClass:"blue-text-instruction",domProps:{innerHTML:e._s(e.documentNoAssigned)}}),a("draggable",e._b({staticClass:"list-group ml-0",attrs:{tag:"ul",handle:".handle",group:"documents"},on:{end:function(t){return e.addingToDocs(t)}},model:{value:e.undocuments,callback:function(t){e.undocuments=t},expression:"undocuments"}},"draggable",e.dragOptionsUndoc,!1),[a("transition-group",{attrs:{type:"transition",value:e.drag?null:"flip-list"}},e._l(e.undocuments,(function(t,s){return a("li",{key:s,staticClass:"list-doc-item undocuments-item",class:1==t.need?"documentObligatoire":0==t.need?"documentFacultatif":"",attrs:{id:"undoc_"+s}},[a("div",{staticClass:"justify-content-between d-flex"},[a("div",{staticClass:"d-flex"},[a("em",{staticClass:"fas fa-grip-vertical handle",staticStyle:{color:"#cecece"}}),a("span",{staticClass:"d-flex ml-10px"},[e._v(" "+e._s(t.value)+" "),a("span",{staticClass:"document-allowed_types"},[e._v("("+e._s(t.allowed_types)+")")])])]),a("div",{staticClass:"text-no-assigned",attrs:{id:"spanDoc"+t.id}},[a("button",{staticClass:"buttonAddDoc",attrs:{type:"button",title:e.addDoc},on:{click:function(t){return e.addUndoc(s)}}},[a("em",{staticClass:"fas fa-plus"})]),a("button",{directives:[{name:"show",rawName:"v-show",value:t.can_be_deleted,expression:"undocument.can_be_deleted"}],staticClass:"ml-10px buttonDeleteDoc",attrs:{type:"button",title:e.deleteDoc},on:{click:function(a){return e.deleteDocument(t.id,s)}}},[a("em",{staticClass:"fas fa-trash-alt",staticStyle:{color:"white"}})])])]),a("div",{staticClass:"d-flex doc-desc"},[a("p",{domProps:{innerHTML:e._s(t.description)}}),a("a",{staticClass:"cta-block pointer",on:{click:function(a){return e.openUpdateDoc(t)}}},[a("em",{staticClass:"fas fa-pen"})])])])})),0)],1)],1),a("hr",{staticClass:"vertical-divider"}),a("ul",{staticClass:"ml-0 w-50",staticStyle:{"padding-left":"0"}},[a("h2",{staticClass:"blue-text-instruction",domProps:{innerHTML:e._s(e.documentAssigned)}}),a("draggable",e._b({staticClass:"list-group ml-0",attrs:{tag:"ul",handle:".handle",group:"documents"},on:{end:function(t){return e.removeToDocs(t)}},model:{value:e.documents,callback:function(t){e.documents=t},expression:"documents"}},"draggable",e.dragOptions,!1),[a("transition-group",{staticStyle:{display:"block","min-height":"200px"},attrs:{type:"transition",value:e.drag?null:"flip-list"}},e._l(e.documents,(function(t,s){return a("li",{key:s,staticClass:"list-doc-item",attrs:{id:"itemDoc"+t.id}},[a("div",{staticClass:"justify-content-between d-flex"},[a("div",{staticClass:"d-flex"},[a("em",{staticClass:"fas fa-grip-vertical handle",staticStyle:{color:"#cecece"}}),a("span",{staticClass:"d-flex ml-10px"},[a("span",[e._v(e._s(t.value))]),a("span",{staticClass:"document-allowed_types"},[e._v("("+e._s(t.allowed_types)+")")])])]),a("div",{staticClass:"d-flex"},[a("div",{staticClass:"d-flex",staticStyle:{"margin-right":"30px"}},[a("div",{staticClass:"toggle changeStateDoc",staticStyle:{float:"right",margin:"0 12px"},attrs:{id:"spanDoc"+t.id},on:{click:function(a){return e.updateMandatory(t)}}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.need,expression:"document.need"}],staticClass:"check",attrs:{type:"checkbox","true-value":"1","false-value":"0",id:"published",name:"published"},domProps:{checked:Array.isArray(t.need)?e._i(t.need,null)>-1:e._q(t.need,"1")},on:{change:function(a){var s=t.need,o=a.target,i=o.checked?"1":"0";if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(t,"need",s.concat([n])):r>-1&&e.$set(t,"need",s.slice(0,r).concat(s.slice(r+1)))}else e.$set(t,"need",i)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("div",{class:1==t.need?"text-required":""},[e._v(" "+e._s(e.Mandatory)+" ")])]),a("button",{staticClass:"buttonDeleteDoc",attrs:{type:"button",title:e.removeDoc},on:{click:function(t){return e.deleteDocFromForm(s)}}},[a("em",{staticClass:"fas fa-times"})])])]),a("div",{staticClass:"d-flex doc-desc"},[a("p",[e._v(e._s(t.description))]),a("a",{staticClass:"cta-block pointer",on:{click:function(a){return e.openUpdateDoc(t)}}},[a("em",{staticClass:"fas fa-pen"})])])])})),0)],1)],1)])]),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},Yo=[],Wo=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalAddDocuments"}},[a("modal",{attrs:{name:"modalAddDocuments",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddDocuments")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[null==e.currentDoc?a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.translations.createDocument)+" ")]):e._e(),null!=e.currentDoc?a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.translations.editDocument)+" ")]):e._e()])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"mb-1"},[a("a",{staticClass:"d-flex tool-icon"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.req,expression:"req"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.req)?e._i(e.req,null)>-1:e.req},on:{click:function(t){return e.updateRequireMandatory()},change:function(t){var a=e.req,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.req=a.concat([i])):n>-1&&(e.req=a.slice(0,n).concat(a.slice(n+1)))}else e.req=o}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px"},[e._v(e._s(e.translations.Required))])])]),e.can_be_deleted?a("div",{staticClass:"form-group"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-delete",attrs:{type:"button"},on:{click:e.deleteModel}},[e._v(e._s(e.translations.DeleteDocTemplate))])]):e._e(),null==e.currentDoc?a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"modelName"}},[e._v(e._s(e.translations.DocTemplate)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.doc,expression:"doc"}],staticClass:"dropdown-toggle",attrs:{id:"modelName",disabled:Object.keys(e.models).length<=0},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.doc=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:null}}),e._l(e.models,(function(t,s){return a("option",{domProps:{value:t.id}},[e._v(e._s(t.name[e.langue])+" ("+e._s(t.allowed_types)+")")])}))],2)]):e._e(),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"name"}},[e._v(e._s(e.translations.Name)+"* :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name[e.langue],expression:"form.name[langue]"}],staticClass:"form__input field-general w-input mb-0",class:{"is-invalid":e.errors.name},attrs:{type:"text",maxlength:"100",id:"name"},domProps:{value:e.form.name[e.langue]},on:{input:function(t){t.target.composing||e.$set(e.form.name,e.langue,t.target.value)}}}),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.name},attrs:{type:"button"},on:{click:function(t){e.translate.name=!e.translate.name}}}):e._e()]),e.translate.name?a("translation",{attrs:{label:e.form.name,actualLanguage:e.langue}}):e._e(),e.errors.name?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.NameRequired))])]):e._e()],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"description"}},[e._v(e._s(e.translations.Description)+" :")]),a("div",{staticClass:"input-can-translate"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.description[e.langue],expression:"form.description[langue]"}],staticClass:"form__input field-general w-input mb-0",attrs:{type:"text",id:"description"},domProps:{value:e.form.description[e.langue]},on:{input:function(t){t.target.composing||e.$set(e.form.description,e.langue,t.target.value)}}}),e._v(" "),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.description},attrs:{type:"button"},on:{click:function(t){e.translate.description=!e.translate.description}}}):e._e()]),e.translate.description?a("translation",{attrs:{label:e.form.description,actualLanguage:e.langue}}):e._e()],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nbmax"}},[e._v(e._s(e.translations.MaxPerUser)+"* :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.nbmax,expression:"form.nbmax"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.nbmax},attrs:{type:"number",min:"1",id:"nbmax"},domProps:{value:e.form.nbmax},on:{input:function(t){t.target.composing||e.$set(e.form,"nbmax",t.target.value)}}}),e.errors.nbmax?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.MaxRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",{class:{"is-invalid":e.errors.selectedTypes},attrs:{for:"nbmax"}},[e._v(e._s(e.translations.FileType)+"* :")]),a("div",{staticClass:"users-block",class:{"is-invalid":e.errors.selectedUsers}},e._l(e.types,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.selectedTypes[t.value],expression:"form.selectedTypes[type.value]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.form.selectedTypes[t.value])?e._i(e.form.selectedTypes[t.value],null)>-1:e.form.selectedTypes[t.value]},on:{change:[function(a){var s=e.form.selectedTypes[t.value],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.form.selectedTypes,t.value,s.concat([n])):r>-1&&e.$set(e.form.selectedTypes,t.value,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.form.selectedTypes,t.value,i)},function(a){return e.selectType(t)}]}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.title)+" ("+e._s(t.value)+")")])])])})),0),e.errors.selectedTypes?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.TypeRequired))])]):e._e()])]),1==e.show?a("div",{attrs:{id:"imageResolutionZone"}},[a("hr"),a("h4",{staticClass:"image-resolution-header"},[e._v(e._s(e.translations.ImageDimensionsTitle))]),a("div",{staticClass:"image-resolution-tooltips"},[a("i",[e._v(e._s(e.translations.ImageResolutionTooltips))])]),a("br"),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image-min-width"}},[e._v(e._s(e.translations.ImageWidth))]),a("div",{staticClass:"input-can-translate d-flex justify-content-between"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.minResolution.width,expression:"form.minResolution.width"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-min-width",min:"300",placeholder:e.translations.MinResolutionPlaceholder},domProps:{value:e.form.minResolution.width},on:{keyup:function(t){return e.ZeroOrNegative()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.ZeroOrNegative()},input:function(t){t.target.composing||e.$set(e.form.minResolution,"width",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.maxResolution.width,expression:"form.maxResolution.width"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-max-width",min:"300",placeholder:e.translations.MaxResolutionPlaceholder},domProps:{value:e.form.maxResolution.width},on:{keyup:function(t){return e.ZeroOrNegative()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.ZeroOrNegative()},input:function(t){t.target.composing||e.$set(e.form.maxResolution,"width",t.target.value)}}})]),a("transition",{attrs:{name:"fade"}},[e.errorWidth.error?a("span",{staticStyle:{"font-size":"smaller",color:"red"}},[e._v(" "+e._s(e.errorWidth.message)+" ")]):e._e()])],1),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"image-min-height"}},[e._v(e._s(e.translations.ImageHeight))]),a("div",{staticClass:"input-can-translate d-flex justify-content-between"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.minResolution.height,expression:"form.minResolution.height"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-min-height",min:"300",placeholder:e.translations.MinResolutionPlaceholder},domProps:{value:e.form.minResolution.height},on:{keyup:function(t){return e.ZeroOrNegative()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.ZeroOrNegative()},input:function(t){t.target.composing||e.$set(e.form.minResolution,"height",t.target.value)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.maxResolution.height,expression:"form.maxResolution.height"}],staticClass:"form__input field-general w-input mb-0",staticStyle:{"max-width":"48%"},attrs:{type:"number",maxlength:"100",id:"image-max-height",min:"300",placeholder:e.translations.MaxResolutionPlaceholder},domProps:{value:e.form.maxResolution.height},on:{keyup:function(t){return e.ZeroOrNegative()},keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:e.ZeroOrNegative()},input:function(t){t.target.composing||e.$set(e.form.maxResolution,"height",t.target.value)}}})]),a("transition",{attrs:{name:"fade"}},[e.errorHeight.error?a("span",{staticStyle:{"font-size":"smaller",color:"red"}},[e._v(" "+e._s(e.errorHeight.message)+" ")]):e._e()])],1)]):e._e(),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddDocuments")}}},[e._v(" "+e._s(e.translations.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.createNewDocument()}}},[e._v(" "+e._s(e.translations.Continuer)+" ")])])])],1)},Xo=[];const Qo=a("bef5");var Ko={name:"modalAddDocuments",props:{cid:Number,pid:Number,currentDoc:Number,manyLanguages:Number,langue:String},components:{Translation:Eo},data(){return{show:!1,errorWidth:{error:!1,message:""},errorHeight:{error:!1,message:""},doc:null,model:{allowed_types:"",can_be_deleted:!1,category:"",description:{fr:"",en:""},id:"",lbl:"",mandatory:0,name:{fr:"",en:""},nbmax:"",ocr_keywords:null,ordering:"",published:"",value:"",video_max_length:"",minResolution:{width:300,height:300},maxResolution:{width:null,height:null}},form:{name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpeg;jpg;png;gif":!1,"doc;docx;odt":!1,"xls;xlsx;odf":!1},mandatory:0,minResolution:{width:null,height:null},maxResolution:{width:null,height:null}},translate:{name:!1,description:!1},req:!1,errors:{name:!1,nbmax:!1,selectedTypes:!1},types:[{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PDF_DOCUMENTS"),value:"pdf"},{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_PICTURES_DOCUMENTS"),value:"jpeg;jpg;png;gif"},{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_OFFICE_DOCUMENTS"),value:"doc;docx;odt"},{title:Joomla.JText._("COM_EMUNDUS_ONBOARD_EXCEL_DOCUMENTS"),value:"xls;xlsx;odf"}],selectedTypes:[],models:[],can_be_deleted:!1,translations:{DeleteDocTemplate:Joomla.JText._("COM_EMUNDUS_ONBOARD_DELETE_TEMPLATE_DOC"),createDocument:Joomla.JText._("COM_EMUNDUS_ONBOARD_CREATE_DOCUMENT"),editDocument:Joomla.JText._("COM_EMUNDUS_ONBOARD_EDIT_DOCUMENT"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),DocTemplate:Joomla.JText._("COM_EMUNDUS_ONBOARD_TEMPLATE_DOC"),Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_LASTNAME"),Description:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDDOC_DESCRIPTION"),MaxPerUser:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAXPERUSER"),FileType:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED"),NameRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROG_REQUIRED_LABEL"),MaxRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAXPERUSER_REQUIRED"),TypeRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILETYPE_ACCEPTED_REQUIRED"),TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),Required:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS_REQUIRED"),ImageWidth:Joomla.JText._("COM_EMUNDUS_ONBOARD_IMAGE_WIDTH"),ImageHeight:Joomla.JText._("COM_EMUNDUS_ONBOARD_IMAGE_HEIGHT"),ImageResolutionTooltips:Joomla.JText._("COM_EMUNDUS_ONBOARD_IMAGE_RESOLUTION_TOOLTIPS"),MinResolutionPlaceholder:Joomla.JText._("COM_EMUNDUS_ONBOARD_MIN_RESOLUTION_PLACEHOLDER"),MaxResolutionPlaceholder:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAX_RESOLUTION_PLACEHOLDER"),ErrorResolution:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION"),ErrorResolutionNegative:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION_NEGATIVE"),ErrorResolutionTooSmall:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION_TOO_SMALL"),ErrorResolutionNotNumber:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR_RESOLUTION_NOT_NUMBER"),ImageDimensionsTitle:Joomla.JText._("COM_EMUNDUS_ONBOARD_IMAGE_DIMENSION_TITLE")}}},methods:{beforeClose(e){this.show=!1,this.doc=null,this.currentDoc=null,this.can_be_deleted=!1,this.errorWidth.error=!1,this.errorHeight.error=!1,this.form={name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpeg;jpg;png;gif":!1,"doc;docx;odt":!1,"xls;xlsx;odf":!1},minResolution:{width:null,height:null},maxResolution:{width:null,height:null}},this.$emit("modalClosed")},beforeOpen(e){this.getModelsDocs()},createNewDocument(){if(this.errors={name:!1,nbmax:!1,selectedTypes:!1},""===this.form.name[this.langue])return this.errors.name=!0,0;if(""===this.form.nbmax||0===this.form.nbmax)return this.errors.nbmax=!0,0;if(Object.values(this.form.selectedTypes).every((e,t)=>!1===e))return this.errors.selectedTypes=!0,0;!1===this.translate.name&&(0==this.manyLanguages&&"en"==this.langue&&(this.form.name.fr=this.form.name.en),0==this.manyLanguages&&"fr"===this.langue&&(this.form.name.en=this.form.name.fr)),!1===this.translate.description&&(0==this.manyLanguages&&"en"==this.langue?this.form.description.fr=this.form.description.en:this.form.description.en=this.form.description.fr);let e=[];Object.keys(this.form.selectedTypes).forEach(t=>{1==this.form.selectedTypes[t]&&e.push(t)});let t={document:this.form,types:e,cid:this.cid,pid:this.pid,isModeleAndUpdate:!1};this.form.name[this.langue]!=this.model.value&&null==this.currentDoc&&(t.isModeleAndUpdate=!0);let a=[];this.model.allowed_types.includes("pdf")&&a.push("pdf"),(this.model.allowed_types.includes("jpg")||this.model.allowed_types.includes("jpeg")||this.model.allowed_types.includes("png")||this.model.allowed_types.includes("gif"))&&a.push("jpeg;jpg;png;gif"),(this.model.allowed_types.includes("xls")||this.model.allowed_types.includes("xlsx")||this.model.allowed_types.includes("odf"))&&a.push("xls;xlsx;odf");let s=a.filter(t=>!e.includes(t));s.length>0&&null==this.currentDoc&&(t.isModeleAndUpdate=!0);let o=!1;if(e.includes("jpeg;jpg;png;gif")&&(o=this.isImageError()),o)return!1;{let e="index.php?option=com_emundus_onboard&controller=campaign&task=createdocument";this.form.name[this.langue]===this.model.value&&null!=this.doc&&(e="index.php?option=com_emundus_onboard&controller=campaign&task=updatedocument",t.did=this.doc),null!=this.currentDoc&&(e="index.php?option=com_emundus_onboard&controller=campaign&task=updatedocument",t.did=this.doc),d()({method:"post",url:e,headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Qo.stringify(t)}).then(e=>{this.req=!1,this.$emit("UpdateDocuments"),this.$modal.hide("modalAddDocuments")})}},isImageError(){let e=!1;const t=Object.values(this.form.minResolution).some(e=>e),a=Object.values(this.form.maxResolution).some(e=>e);return t||a?(this.form.minResolution.height&&this.form.maxResolution.height?parseInt(this.form.minResolution.width)>=300&&parseInt(this.form.maxResolution.width)>=300?parseInt(this.form.minResolution.width)>parseInt(this.form.maxResolution.width)?(this.errorWidth.error=!0,this.errorWidth.message=parseInt(this.form.minResolution.width)<=0?this.translations.ErrorResolutionNegative:this.translations.ErrorResolution,document.getElementById("image-min-width").style.setProperty("border-color","red","important"),e=!0):(this.errorWidth.error=!1,this.errorWidth.message="",document.getElementById("image-min-width").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-width").style.setProperty("border-color","#ccc","important")):(this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolutionTooSmall,e=!0,parseInt(this.form.minResolution.width)<300&&document.getElementById("image-min-width").style.setProperty("border-color","red","important"),parseInt(this.form.maxResolution.width)<300&&document.getElementById("image-max-width").style.setProperty("border-color","red","important")):(this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolutionTooSmall,e=!0,this.form.minResolution.height&&""!==this.form.minResolution.height||document.getElementById("image-min-height").style.setProperty("border-color","red","important"),this.form.maxResolution.height&&""!==this.form.maxResolution.height||document.getElementById("image-max-height").style.setProperty("border-color","red","important")),this.form.minResolution.width&&this.form.maxResolution.width?parseInt(this.form.minResolution.height)>=300&&parseInt(this.form.maxResolution.height)>=300?parseInt(this.form.minResolution.height)>parseInt(this.form.maxResolution.height)?(this.errorHeight.error=!0,this.errorHeight.message=parseInt(this.form.minResolution.height)<=0?this.translations.ErrorResolutionNegative:this.translations.ErrorResolution,document.getElementById("image-min-height").style.setProperty("border-color","red","important"),e=!0):(this.errorHeight.error=!1,this.errorHeight.message="",document.getElementById("image-min-height").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-height").style.setProperty("border-color","#ccc","important")):(this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolutionTooSmall,e=!0,parseInt(this.form.minResolution.height)<300&&document.getElementById("image-min-height").style.setProperty("border-color","red","important"),parseInt(this.form.maxResolution.height)<300&&document.getElementById("image-max-height").style.setProperty("border-color","red","important")):(this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolutionTooSmall,e=!0,this.form.minResolution.width&&""!==this.form.minResolution.width||document.getElementById("image-min-width").style.setProperty("border-color","red","important"),this.form.maxResolution.width&&""!==this.form.maxResolution.width||document.getElementById("image-max-width").style.setProperty("border-color","red","important"))):(document.getElementById("image-min-width").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-width").style.setProperty("border-color","#ccc","important"),document.getElementById("image-min-height").style.setProperty("border-color","#ccc","important"),document.getElementById("image-max-height").style.setProperty("border-color","#ccc","important"),e=!1,this.errorWidth.message="",this.errorHeight.message=""),e},deleteModel(){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_DELETE_TEMPLATE_DOC"),type:"warning",showCancelButton:!0,confirmButtonColor:"#12db42",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=deletemodeldocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Qo.stringify({did:this.doc})}).then(e=>{console.log(e),e.data.allowed?T.a.fire({backdrop:!0,title:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODEL_DELETED"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODEL_DELETED_TEXT"),showConfirmButton:!0,timer:5e3}).then(()=>{this.$modal.hide("modalAddDocuments")}):T.a.fire({backdrop:!0,title:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANNOT_DELETE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANNOT_DELETE_TEXT"),showConfirmButton:!0,timer:5e3})})})},getModelsDocs(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getundocuments"}).then(e=>{this.models=e.data.data,null!=this.currentDoc&&(this.doc=this.currentDoc)})},updateRequireMandatory(){1==this.req?this.form.mandatory=0:this.form.mandatory=1},selectType(e){let t=e.value,a=t.split(";");(a.includes("jpeg")||a.includes("jpg")||a.includes("png")||a.includes("gif"))&&(this.show=!this.show)},ZeroOrNegative(){let e=event.target.id,t=parseInt(event.target.value),a=this.form.minResolution.width,s=this.form.maxResolution.width,o=this.form.minResolution.height,i=this.form.maxResolution.height;isNaN(t)?(document.getElementById(e).style.color="red",document.getElementById(e).style.setProperty("border-color","red","important"),"image-min-width"!=e&&"image-max-width"!=e||(this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolutionTooSmall),"image-min-height"!=e&&"image-max-height"!=e||(this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolutionTooSmall)):t<300?(document.getElementById(e).style.color="red",document.getElementById(e).style.setProperty("border-color","red","important"),"image-min-width"!=e&&"image-max-width"!=e||(this.errorWidth.error=!0,(parseInt(a)<300||!a)&&document.getElementById("image-min-width").style.setProperty("border-color","red","important"),(parseInt(s)<300||!s)&&document.getElementById("image-max-width").style.setProperty("border-color","red","important"),this.errorWidth.message=this.translations.ErrorResolutionTooSmall),"image-min-height"!=e&&"image-max-height"!=e||(this.errorHeight.error=!0,(parseInt(o)<300||!o)&&document.getElementById("image-min-height").style.setProperty("border-color","red","important"),(parseInt(i)<300||!i)&&document.getElementById("image-max-height").style.setProperty("border-color","red","important"),this.errorHeight.message=this.translations.ErrorResolutionTooSmall)):(document.getElementById(e).style.color="unset",document.getElementById(e).style.setProperty("border-color","#ccc","important"),parseInt(a)>=300&&parseInt(s)>=300&&(parseInt(a)>parseInt(s)?(document.getElementById("image-min-width").style.setProperty("border-color","red","important"),this.errorWidth.error=!0,this.errorWidth.message=this.translations.ErrorResolution):(document.getElementById("image-min-width").style.setProperty("border-color","#ccc","important"),this.errorWidth.error=!1,this.errorWidth.message="")),o>=300&&i>=300&&(parseInt(o)>parseInt(i)?(document.getElementById("image-min-height").style.setProperty("border-color","red","important"),this.errorHeight.error=!0,this.errorHeight.message=this.translations.ErrorResolution):(document.getElementById("image-min-height").style.setProperty("border-color","#ccc","important"),this.errorHeight.error=!1,this.errorHeight.message="")),a>=300&&s>=300&&o>=300&&i>=300&&s>=a&&i>=o&&(this.errorWidth.error=!1,this.errorWidth.message="",this.errorHeight.error=!1,this.errorHeight.message=""))}},watch:{doc:function(e){null!=e?(this.model=this.models.find(t=>t.id==e),this.form.name=this.model.name,this.form.description=this.model.description,this.form.mandatory=parseInt(this.model.mandatory),this.form.minResolution={},this.form.maxResolution={},this.req=parseInt(this.model.mandatory),this.form.selectedTypes.pdf=this.model.allowed_types.includes("pdf"),this.model.allowed_types.includes("jpg")||this.model.allowed_types.includes("jpeg")||this.model.allowed_types.includes("png")||this.model.allowed_types.includes("gif")?(null!==this.model.min_width&&null!==this.model.min_height&&(this.form.minResolution.width=this.model.min_width,this.form.minResolution.height=this.model.min_height),null!==this.model.max_width&&null!==this.model.max_height&&(this.form.maxResolution.width=this.model.max_width,this.form.maxResolution.height=this.model.max_height),this.form.selectedTypes["jpeg;jpg;png;gif"]=!0,this.show=!0):(this.form.selectedTypes["jpeg;jpg;png;gif"]=!1,this.show=!1),this.form.selectedTypes["xls;xlsx;odf"]=this.model.allowed_types.includes("xls")||this.model.allowed_types.includes("xlsx")||this.model.allowed_types.includes("odf"),this.can_be_deleted=this.model.can_be_deleted,this.form.nbmax=this.model.nbmax):this.form={name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,mandatory:0,selectedTypes:{pdf:!1,"jpeg;jpg;png;gif":!1,"doc;docx;odt":!1,"xls;xlsx;odf":!1}}}}},Zo=Ko,ei=(a("7fe1"),Object(b["a"])(Zo,Wo,Xo,!1,null,"572e0bc8",null)),ti=ei.exports;const ai=a("bef5");var si={name:"addDocuments",display:"Handle",components:{ModalAddDocuments:ti,draggable:Qa.a},props:{funnelCategorie:String,obligatoireDoc:Number,profileId:Number,campaignId:Number,langue:String,formulaireEmundus:Number,menuHighlight:Number,manyLanguages:Number},data(){return{drag:!1,loading:!1,obligatoireDoc:0,currentDoc:null,documents:[],undocuments:[],attachments:[],attachmentsId:[],unattachments:[],unid:[],Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Mandatory:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS_REQUIRED"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),createDocument:Joomla.JText._("COM_EMUNDUS_ONBOARD_CREATE_DOCUMENT"),deleteDoc:Joomla.JText._("COM_EMUNDUS_ONBOARD_DELETE_DOCUMENT"),removeDoc:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_DOCUMENT"),addDoc:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_DOCUMENT"),documentAssigned:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOCUMENT_ASSIGNED_TO_FORM"),documentNoAssigned:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOCUMENT_NO_ASSIGNED_TO_FORM")}},methods:{updateList(){this.documents=[],this.undocuments=[],this.attachments=[],this.attachmentsId=[],this.unattachments=[],this.unid=[],this.getDocuments()},getDocuments(){this.loading=!0,d.a.get("index.php?option=com_emundus_onboard&controller=form&task=getalldocuments&prid="+this.profileId+"&cid="+this.campaignId).then(e=>{for(let t=0;t<e.data.data.length;t++)this.unid.push(e.data.data[t].id),this.documents.push(e.data.data[t])}).then(()=>{d.a.get("index.php?option=com_emundus_onboard&controller=form&task=getundocuments").then(e=>{var t=0;for(let a=0;a<e.data.data.length;a++)t=e.data.data[a].id,this.unid.includes(t)||this.unattachments.push(e.data.data[a]);this.undocuments=this.unattachments.map((function(e){var t={id:e.id,value:e.value,value_fr:e.value_fr,value_en:e.value_en,description_fr:e.description_fr,description_en:e.description_en,nbmax:e.nbmax,ordering:e.ordering,can_be_deleted:e.can_be_deleted,allowed_types:e.allowed_types,need:-1};return t})),this.currentDoc=null,this.loading=!1}).catch(e=>{console.log(e)})}).catch(e=>{console.log(e)})},updateMandatory(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=updatemandatory",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ai.stringify({did:e.id,prid:this.profileId,cid:this.campaignId})}).then(()=>{}).catch(e=>{console.log(e)})},addDocument(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=adddocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ai.stringify({did:e.id,prid:this.profileId,cid:this.campaignId})}).then(()=>{}).catch(e=>{console.log(e)})},removeDocument(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=removedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ai.stringify({did:e,prid:this.profileId,cid:this.campaignId})}).then(()=>{}).catch(e=>{console.log(e)})},deleteDocument(e,t){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEDOCUMENTTYPE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEDOCUMENTTYPE_MESSAGE"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(a=>{a.value&&d()({method:"POST",url:"index.php?option=com_emundus_onboard&controller=form&task=deletedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ai.stringify({did:e})}).then(()=>{this.undocuments.splice(t,1)})})},deleteDocFromForm(e){let t=this.undocuments.push(this.documents[e])-1;this.documents.splice(e,1),this.removeDocument(this.undocuments[t].id)},addingToDocs:function(e){this.addDocument(this.documents[e.newIndex])},removeToDocs:function(e){let t=e.newIndex;this.deleteDoc(t,this.undocuments[t])},addUndoc(e){let t=this.documents.push(this.undocuments[e])-1;this.undocuments.splice(e,1),this.addDocument(this.documents[t])},openUpdateDoc(e){this.currentDoc=e,setTimeout(()=>{this.$modal.show("modalAddDocuments")},100)}},computed:{console:()=>console,dragOptions(){return{group:{name:"documents",put:!1},animation:200,sort:!0,disabled:!1,ghostClass:"ghost"}},dragOptionsUndoc(){return{group:{name:"documents",put:!1},animation:200,sort:!1,disabled:!1,ghostClass:"ghost"}},previousMenu(){this.$parent.previous()}},mounted(){},created(){this.getDocuments()}},oi=si,ii=(a("a7fe"),Object(b["a"])(oi,Vo,Yo,!1,null,"025820a3",null)),ni=ii.exports,ri=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container-evaluation"},[a("h2",{staticClass:"heading"},[e._v(e._s(e.funnelCategorie[0]))]),a("p",{staticClass:"paragraphe-sous-titre"},[e._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. ")]),a("div",{staticClass:"w-row"},[a("div",{staticClass:"w-col w-col-6"},[a("div",{staticClass:"w-form"},[a("form",{staticClass:"form-2",attrs:{id:"email-form",name:"email-form","data-name":"Email Form"}},[a("datetime",{attrs:{placeholder:e.StartDate,type:"datetime",id:"start_date",language:e.fr},model:{value:e.form.start_date,callback:function(t){e.$set(e.form,"start_date",t)},expression:"form.start_date"}})],1)])]),a("div",{staticClass:"w-col w-col-6"},[a("div",{staticClass:"w-form"},[a("form",{attrs:{id:"email-form",name:"email-form","data-name":"Email Form"}},[a("datetime",{attrs:{placeholder:e.EndDate,type:"datetime",id:"end_date",language:e.fr},model:{value:e.form.end_date,callback:function(t){e.$set(e.form,"end_date",t)},expression:"form.end_date"}})],1)])])]),a("div",{staticClass:"icon-title evaluation"})]),a("div",{staticClass:"divider"}),a("div",{staticClass:"container-evaluation"},[a("h2",{staticClass:"heading"},[e._v(e._s(e.funnelCategorie[1]))]),a("p",{staticClass:"paragraphe-sous-titre"},[e._v(" Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique. ")]),a("div",{staticClass:"w-form"},[a("form",{attrs:{id:"email-form",name:"email-form","data-name":"Email Form"}},[a("div",{staticClass:"container-flexbox-choisir-ou-plus w-clearfix"},[a("select",{staticClass:"dropdown-toggle",attrs:{id:"Grille-d-valuation",name:"Grille-d-valuation","data-name":"Grille D Valuation"}},[a("option",{attrs:{value:""}},[e._v(e._s(e.ChooseEvalutationGrid))]),a("option",{attrs:{value:"Grille d'évaluation 1"}},[e._v("Grille d'évaluation 1")]),a("option",{attrs:{value:"Grille d'évaluation 2"}},[e._v("Grille d'évaluation 2")]),a("option",{attrs:{value:"Grille d'évaluation 3"}},[e._v("Grille d'évaluation 3")])]),a("button",{staticClass:"plus w-inline-block"},[e._v("+")])])])]),a("div",{staticClass:"icon-title evaluation"})])])},li=[],di={name:"addEvaluation",components:{Datetime:_t["Datetime"]},props:{funnelCategorie:Object,form:Object},data(){return{ChooseEvalutationGrid:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_EVALUATION_GRID"),StartDate:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_STARTDATE"),EndDate:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_ENDDATE")}},methods:{},created(){}},ci=di,mi=Object(b["a"])(ci,ri,li,!1,null,null,null),ui=mi.exports,pi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalWarningFormBuilder"}},[a("modal",{attrs:{name:"modalWarningFormBuilder",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalWarningFormBuilder")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.Warning)+" ")]),a("p",[e._v(" "+e._s(e.FormAffectedToFiles)+" ")])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalWarningFormBuilder")}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer mr-1",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.formbuilder()}}},[e._v(" "+e._s(e.Update)+" ")])])])])])],1)},_i=[];a("bef5");var hi={name:"modalWarningFormBuilder",props:{pid:Number,cid:Number},data(){return{Warning:Joomla.JText._("COM_EMUNDUS_ONBOARD_WARNING"),FormAffectedToFiles:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_AFFECTEDFILES"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Duplicate:Joomla.JText._("COM_EMUNDUS_ONBOARD_DUPLICATE"),Update:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY")}},methods:{beforeClose(e){},beforeOpen(e){},formbuilder(){window.location.replace("index.php?option=com_emundus_onboard&view=form&layout=formbuilder&prid="+this.pid+"&index=0&cid="+this.cid)}}},gi=hi,fi=(a("483b"),Object(b["a"])(gi,pi,_i,!1,null,"989747a8",null)),bi=fi.exports,vi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation"},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{staticClass:"w-form"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:e.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":e.afterAdded,"vdropzone-removed-file":e.afterRemoved,"vdropzone-success":e.onComplete,"vdropzone-error":e.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[a("em",{staticClass:"fas fa-file-upload"}),e._v(" "+e._s(e.DropHere)+" ")])]),a("hr"),a("ul",{staticClass:"w-100",staticStyle:{"padding-left":"0",margin:"0"}},[a("draggable",e._b({staticClass:"list-group",staticStyle:{margin:"0"},attrs:{tag:"ul",handle:".handle"},on:{end:e.updateDocumentsOrder},model:{value:e.documents,callback:function(t){e.documents=t},expression:"documents"}},"draggable",e.dragOptions,!1),[a("transition-group",{attrs:{type:"transition",value:e.drag?null:"flip-list"}},e._l(e.documents,(function(t,s){return a("li",{key:s,staticClass:"list-group-item",attrs:{id:"itemDoc"+t.id}},[a("div",{staticClass:"d-flex justify-content-between"},[a("div",{staticClass:"d-flex w-100"},[a("em",{staticClass:"fas fa-grip-vertical handle",staticStyle:{color:"#cecece"}}),a("span",{staticClass:"draggable em-overflow-ellipsis em-max-width-250 em-mr-4"},[e._v(" "+e._s(t.title)+" ")]),a("span",{staticClass:"document-allowed_types"},[e._v("("+e._s(t.ext)+")")]),a("a",{staticClass:"cta-block pointer",on:{click:function(a){return e.editName(t)}}},[a("em",{staticClass:"fas fa-pen em-font-size-16"})])]),a("button",{staticClass:"buttonDeleteDoc",attrs:{type:"button"},on:{click:function(a){return e.deleteDoc(s,t.id)}}},[a("em",{staticClass:"fas fa-times"})])])])})),0)],1)],1)],1)])],1)},Ci=[],Oi=a("d9b7"),Di=a.n(Oi);const Ei=a("bef5"),yi=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var xi={name:"addDocumentsDropfiles",components:{vueDropzone:Di.a,draggable:Qa.a},props:{funnelCategorie:String,profileId:Number,campaignId:Number,langue:String,menuHighlight:Number,manyLanguages:Number},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus_onboard&controller=settings&task=uploaddropfiledoc&cid="+this.campaignId,maxFilesize:10,maxFiles:1,autoProcessQueue:!0,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:"image/*,application/pdf,.doc,.csv,.xls,.xlsx,.docx,.odf",previewTemplate:yi(),dictCancelUpload:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:Joomla.JText._("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},documents:[],Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:Joomla.JText._("COM_EMUNDUS_ONBOARD_DROP_FILE_HERE"),Error:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),DocumentName:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOCUMENT_NAME")}},methods:{getDocumentsDropfiles(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=campaign&task=getdocumentsdropfiles",params:{cid:this.campaignId},paramsSerializer:e=>Ei.stringify(e)}).then(e=>{this.documents=e.data.documents})},updateDocumentsOrder(){this.documents.forEach((e,t)=>{e.ordering=t}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updateorderdropfiledocuments",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ei.stringify({documents:this.documents})})},editName(e){T.a.fire({title:"",html:'<div class="form-group campaign-label"><label for="campLabel">'+this.DocumentName+'</label><input type="text" id="label_'+e.id+'" value="'+e.title+'"/></div>',confirmButtonColor:"#de6339",showCloseButton:!0,allowOutsideClick:!1,customClass:{popup:"swal-popup-custom"}}).then(t=>{if(t){let t=document.getElementById("label_"+e.id).value;d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=editdocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ei.stringify({did:e.id,name:t})}).then(()=>{e.title=t})}})},deleteDoc(e,t){this.documents.splice(e,1),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=deletedocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ei.stringify({did:t})})},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(e){this.documents.push(JSON.parse(e.xhr.response)),this.$refs.dropzone.removeFile(e)},catchError:function(e,t,a){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),text:t,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(e)}},computed:{dragOptions(){return{animation:200,group:"description",disabled:!1,ghostClass:"ghost"}}},created(){this.getDocumentsDropfiles()}},Ni=xi,Ui=(a("3950"),Object(b["a"])(Ni,vi,Ci,!1,null,"afe47fa8",null)),Ti=Ui.exports,Ai=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation"},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",{staticClass:"w-form"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:e.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":e.afterAdded,"vdropzone-removed-file":e.afterRemoved,"vdropzone-success":e.onComplete,"vdropzone-error":e.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[a("em",{staticClass:"fas fa-file-upload"}),e._v(" "+e._s(e.DropHere)+" ")])]),a("hr"),a("ul",{staticClass:"w-100",staticStyle:{"padding-left":"0",margin:"0"}},e._l(e.documents,(function(t,s){return a("li",{key:s,staticClass:"list-group-item"},[a("div",{staticClass:"d-flex justify-content-between"},[a("span",{staticClass:"draggable"},[e._v(" "+e._s(t.name)+" ")]),a("button",{staticClass:"buttonDeleteDoc",attrs:{type:"button"},on:{click:function(a){return e.deleteDoc(s,t.id)}}},[a("em",{staticClass:"fas fa-times"})])]),a("a",{staticClass:"cta-block pointer",staticStyle:{"font-size":"27px",float:"right",position:"relative",bottom:"-20px"},on:{click:function(a){return e.editName(t)}}},[a("em",{staticClass:"fas fa-pen"})])])})),0)],1)])],1)},Mi=[];const Ri=a("bef5"),Si=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var wi={name:"addDocumentsForm",components:{vueDropzone:Di.a},props:{funnelCategorie:String,profileId:Number,campaignId:Number,langue:String,menuHighlight:Number,manyLanguages:Number},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus_onboard&controller=settings&task=uploadformdoc&pid="+this.profileId,maxFilesize:10,maxFiles:1,autoProcessQueue:!0,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,acceptedFiles:"image/*,application/pdf,.doc,.csv,.xls,.xlsx,.docx,.odf",previewTemplate:Si(),dictCancelUpload:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:Joomla.JText._("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},documents:[],Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:Joomla.JText._("COM_EMUNDUS_ONBOARD_DROP_FILE_HERE"),Error:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),DocumentName:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOCUMENT_NAME")}},methods:{getDocumentsDropfiles(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=campaign&task=getdocumentsform",params:{pid:this.profileId},paramsSerializer:e=>Ri.stringify(e)}).then(e=>{this.documents=e.data.documents})},editName(e){T.a.fire({title:"",html:'<div class="form-group campaign-label"><label for="campLabel">'+this.DocumentName+'</label><input type="text" id="label_'+e.id+'" value="'+e.name+'"/></div>',confirmButtonColor:"#de6339",showCloseButton:!0,allowOutsideClick:!1,customClass:{popup:"swal-popup-custom"}}).then(t=>{if(t){let t=document.getElementById("label_"+e.id).value;d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=editdocumentform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ri.stringify({pid:this.profileId,did:e.id,name:t})}).then(()=>{e.name=t})}})},deleteDoc(e,t){this.documents.splice(e,1),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=deletedocumentform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ri.stringify({pid:this.profileId,did:t})})},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(e){this.documents.push(JSON.parse(e.xhr.response)),this.$refs.dropzone.removeFile(e)},catchError:function(e,t,a){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),text:t,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(e)}},created(){this.getDocumentsDropfiles()}},Ji=wi,ki=(a("90fa"),Object(b["a"])(Ji,Ai,Mi,!1,null,"35dae86b",null)),Bi=ki.exports;const Li=a("bef5");var Ii={name:"addFormNextCampaign",components:{AddEvaluationGrid:lo,AddDocumentsForm:Bi,Tasks:Le,AddDocumentsDropfiles:Ti,addCampaign:To,ModalWarningFormBuilder:bi,Datetime:_t["Datetime"],addFormulaire:va,addDocuments:ni,addGestionnaires:kt,addEmail:Wt,addEvaluation:ui,addEvalVisi:Ea,addEvalEval:Aa},props:{campaignId:Number,actualLanguage:String,index:Number,manyLanguages:Number},data:()=>({prid:"",EmitIndex:"0",menuHighlight:0,menuHighlightProg:-1,formReload:0,selectedform:"default",formList:"",prog:0,loading:!1,closeSubmenu:!0,profileId:null,profiles:[],campaignsByProgram:[],currentElement:"",currentSpan:"",langue:0,formCategoriesDesc:[["Vous pouvez modifier vos dates limites de campagne, vos descriptifs et définir une limite de dossiers","Proposez à vos visiteurs des documents d'informations avant même qu'il se connecte. Ces documents seront disponibles dans la section <em>Plus d'informations</em> de votre campagne","Choississez le formulaire de votre campagne. Nous vous proposons des modèles que vous pouvez modifier à tout moment.","Proposez des documents des documents à vos candidats qui remplissent le formulaire. Cela peut être des modèles que les candidats doivent compléter puis déposer ou simplement des documents complémentaires à certains informations demandées","Ajoutez des types de documents que le candidat doit déposer à la suite du formulaire. Glissez simplement les documents entre les 2 colonnes ou ajouter un nouveau type de document"],["You can change your campaign deadlines, your descriptions and set a file limit","Offer your visitors information documents before they even log in. These documents will be available in the <em>More information</em> section of your campaign","Choose the form for your campaign. We offer templates that you can modify at any time.","Offer documents to your applicants when they fill in the form. These can be templates that applicants need to complete and then submit, or simply documents to supplement some of the information requested","Add document types that the applicant should file after the form. Simply drag and drop documents between the 2 columns or add a new document type"]],formCategories:[["Informations générales","Documents préalables","Formulaire"],["Global informations","Preliminary documents","Form"]],formPrograms:[["Grille d'évaluation","Emails"],["Evaluation grid","Emails"]],formProgramsDesc:[["Définissez une phase d'évaluation en créant une grille avec différents critères.","Configurer des envois d'emails automatique aux changements de statuts de vos différents candidats."],["Evaluation grid","Emails"]],form:{},program:{id:0,label:"",code:"",programmes:"",notes:"",synthesis:'<ul><li><strong>[APPLICANT_NAME]</strong></li><li><a href="mailto:[EMAIL]">[EMAIL]</a></li></ul>',tmpl_trombinoscope:'<table cellpadding="2" style="width: 100%;"><tbody><tr style="border-collapse: collapse;"><td align="center" valign="top" style="text-align: center;"><p style="text-align: center;"><img src="[PHOTO]" alt="Photo" height="100" /> </p><p style="text-align: center;"><b>[NAME]</b><br /></p></td></tr></tbody></table>',tmpl_badge:'<table width="100%"><tbody><tr><td style="vertical-align: top; width: 100px;" align="left" valign="middle" width="30%"><img src="[LOGO]" alt="Logo" height="50" /></td><td style="vertical-align: top;" align="left" valign="top" width="70%"><b>[NAME]</b></td></tr></tbody></table>\n',published:1,apply_online:1},prog_group:{prog:null,evaluator:null,manager:null},translations:{DATE_FORMAT:Joomla.JText._("DATE_FORMAT_JS_LC2"),From:Joomla.JText._("COM_EMUNDUS_ONBOARD_FROM"),To:Joomla.JText._("COM_EMUNDUS_ONBOARD_TO"),chooseProfileWarning:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_PROFILE_WARNING"),ProgramWarning:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_WARNING")}}),methods:{initInformations(e){this.form.label=e.label,this.form.profile_id=e.profile_id,this.form.program_id=e.progid,this.form.start_date=e.start_date,this.form.end_date=e.end_date,this.form.start_date=y()(this.form.start_date).format(this.translations.DATE_FORMAT),"0000-00-00 00:00:00"==this.form.end_date?this.form.end_date=null:this.form.end_date=y()(this.form.end_date).format(this.translations.DATE_FORMAT),d.a.get("index.php?option=com_emundus_onboard&controller=form&task=getallformpublished").then(e=>{this.profiles=e.data.data,null==this.form.profile_id?(0!=this.profiles.length?this.profileId=this.profiles[0].id:this.profileId=null,null!=this.profileId&&(this.formReload+=1)):(this.formReload+=1,this.profileId=this.form.profile_id),this.loading=!1}),setTimeout(()=>{"undefined"==typeof this.menuHighlight&&(this.menuHighlight=0)},500)},changeToProgMenu(e){d.a.get("index.php?option=com_emundus_onboard&controller=program&task=getprogrambyid&id="+this.form.program_id).then(e=>{this.program.id=e.data.data.id,this.program.code=e.data.data.code,this.program.label=e.data.data.label,this.program.notes=e.data.data.notes,this.program.programmes=e.data.data.programmes,this.program.tmpl_badge=e.data.data.tmpl_badge,this.program.published=e.data.data.published,this.program.apply_online=e.data.data.apply_online,null!=e.data.data.synthesis&&(this.program.synthesis=e.data.data.synthesis.replace(/>\s+</g,"><")),null!=e.data.data.tmpl_trombinoscope&&(this.program.tmpl_trombinoscope=e.data.data.tmpl_trombinoscope.replace(/>\s+</g,"><")),this.prog_group.prog=e.data.data.group,this.prog_group.evaluator=e.data.data.evaluator_group,this.prog_group.manager=e.data.data.manager_group,d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getcampaignsbyprogram",params:{pid:this.program.id},paramsSerializer:e=>Li.stringify(e)}).then(e=>{this.campaignsByProgram=e.data.campaigns})}).catch(e=>{console.log(e)}),this.menuHighlightProg=e,this.menuHighlight=-1},changeToCampMenu(e){this.menuHighlight=e,this.menuHighlightProg=-1},setProfileId(e){this.profileId=e},moment(e){return y()(e)},next(){this.menuHighlight<1?this.menuHighlight++:this.redirectJRoute("index.php?option=com_emundus_onboard&view=campaign")},previous(){this.menuHighlight>0?this.menuHighlight--:this.redirectJRoute("index.php?option=com_emundus_onboard&view=campaign")},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>Li.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},getCookie(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),s=a.split(";"),o=0;o<s.length;o++){var i=s[o];while(" "==i.charAt(0))i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}},computed:{console:()=>console},created(){this.loading=!0,"en"==this.actualLanguage&&(this.langue=1)}},Pi=Ii,ji=(a("1f23"),Object(b["a"])(Pi,zo,qo,!1,null,"9b33ab64",null)),Fi=ji.exports,$i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"w-row em-mt-80"},[a("div",{staticClass:"w-100"},[0!==e.menuHighlight&&9!==e.menuHighlight?a("div",{staticClass:"em-flex-row em-pointer em-m-24",staticStyle:{"margin-left":"10%"},on:{click:function(t){e.menuHighlight=0}}},[a("span",{staticClass:"material-icons-outlined"},[e._v("arrow_back")]),a("span",{staticClass:"em-ml-8"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])]):e._e(),0===e.menuHighlight?a("h5",{staticClass:"em-h5 em-m-24",staticStyle:{"margin-left":"10%"}},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_ADDCAMP_PARAMETER")))]):a("h5",{staticClass:"em-h5 em-m-24",staticStyle:{"margin-left":"10%"}},[e._v(e._s(e.translate(e.currentTitle)))]),a("transition",{attrs:{name:"slide-right"}},[0===e.menuHighlight?a("div",{staticClass:"em-settings-menu"},e._l(e.menus,(function(t,s){return a("div",{directives:[{name:"wave",rawName:"v-wave"}],key:"menu_"+t.index,staticClass:"em-shadow-cards col-md-3",on:{click:function(a){e.menuHighlight=t.index,e.currentTitle=t.title}}},[a("span",{staticClass:"material-icons-outlined em-gradient-icons em-mb-16"},[e._v(e._s(t.icon))]),a("p",{staticClass:"em-body-16-semibold em-mb-8"},[e._v(e._s(e.translate(t.title)))]),a("p",{staticClass:"em-font-size-14"},[e._v(e._s(e.translate(t.description)))])])})),0):e._e()]),a("transition",{attrs:{name:"fade"}},[1===e.menuHighlight?a("editStyle",{ref:"styling",on:{LaunchLoading:e.updateLoading,StopLoading:e.updateLoading}}):e._e(),2===e.menuHighlight?a("editHomepage",{ref:"homepage",attrs:{actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages}}):e._e(),3===e.menuHighlight?a("editCGV",{ref:"cgv",attrs:{actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages}}):e._e(),4===e.menuHighlight?a("editFooter",{ref:"footer",attrs:{actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages}}):e._e(),5===e.menuHighlight?a("editStatus",{ref:"status",attrs:{actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages},on:{LaunchLoading:e.updateLoading,StopLoading:e.updateLoading}}):e._e(),6===e.menuHighlight?a("editTags",{ref:"tags",on:{LaunchLoading:e.updateLoading,StopLoading:e.updateLoading}}):e._e(),7===e.menuHighlight?a("edit-applicants",{ref:"applicants",on:{LaunchLoading:e.updateLoading,StopLoading:e.updateLoading}}):e._e(),8==e.menuHighlight&&0!=e.coordinatorAccess?a("editDatas",{ref:"datas",attrs:{actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages}}):e._e(),a("TranslationTool",{on:{resetMenuIndex:function(t){e.menuHighlight=0}}})],1)],1)])},Gi=[],Hi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("a",{staticClass:"bouton-ajouter-green bouton-ajouter pointer mb-1",staticStyle:{width:"max-content"},on:{click:e.pushStatus}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.addStatus)+" ")])]),e._l(e.status,(function(t,s){return a("div",{staticClass:"status-item",attrs:{id:"step_"+t.step}},[a("div",{staticClass:"status-field"},[a("div",{staticStyle:{width:"100%"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label[e.actualLanguage],expression:"statu.label[actualLanguage]"}],attrs:{type:"text"},domProps:{value:t.label[e.actualLanguage]},on:{input:function(a){a.target.composing||e.$set(t.label,e.actualLanguage,a.target.value)}}}),t.translate?a("translation",{attrs:{label:t.label,actualLanguage:e.actualLanguage}}):e._e()],1),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":t.translate},attrs:{type:"button"},on:{click:function(a){t.translate=!t.translate,e.$forceUpdate()}}}):e._e(),a("input",{class:"label-"+t.class,attrs:{type:"hidden"}})]),a("v-swatches",{attrs:{swatches:e.swatches,shapes:"circles","row-length":"8","show-border":"","popover-x":"left","popover-y":"top"},model:{value:t.class,callback:function(a){e.$set(t,"class",a)},expression:"statu.class"}}),1==t.edit&&0!=t.step&&1!=t.step?a("button",{staticClass:"remove-tag",attrs:{type:"button",title:e.Delete},on:{click:function(a){return e.removeStatus(t,s)}}},[a("i",{staticClass:"fas fa-times"})]):e._e()],1)}))],2)},zi=[],qi=a("b26c"),Vi=a.n(qi);a("afdb");const Yi=a("bef5");var Wi={name:"editStatus",components:{VSwatches:Vi.a,Translation:Eo},props:{actualLanguage:String,manyLanguages:Number},data(){return{status:[],show:!1,swatches:["#DCC6E0","#947CB0","#663399","#6BB9F0","#19B5FE","#013243","#7BEFB2","#3FC380","#1E824C","#FFFD7E","#FFFD54","#F7CA18","#FABE58","#E87E04","#D35400","#EC644B","#CF000F","#E5283B","#E08283","#D2527F","#DB0A5B","#999999"],TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),addStatus:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_STATUS"),Delete:Joomla.JText._("COM_EMUNDUS_ONBOARD_DELETE_STATUS")}},methods:{getStatus(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=getstatus").then(e=>{this.status=e.data.data,setTimeout(()=>{this.status.forEach(e=>{this.getHexColors(e)})},100)})},pushStatus(){this.$emit("LaunchLoading"),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=createstatus",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{this.status.push(e.data),setTimeout(()=>{this.getHexColors(e.data)},100),this.$emit("StopLoading")})},removeStatus(e,t){this.$emit("LaunchLoading"),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=deletestatus",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Yi.stringify({id:e.id,step:e.step})}).then(()=>{this.status.splice(t,1),this.$emit("StopLoading")})},getHexColors(e){e.translate=!1;let t=document.querySelector(".label-"+e.class),a=getComputedStyle(t),s=a.backgroundColor.split("(")[1].split(")")[0].split(",");e.class=this.rgbToHex(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]))},rgbToHex(e,t,a){return"#"+((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1).toUpperCase()}},created(){this.getStatus()}},Xi=Wi,Qi=(a("5656"),Object(b["a"])(Xi,Hi,zi,!1,null,"20855404",null)),Ki=Qi.exports,Zi=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("a",{staticClass:"bouton-ajouter-green bouton-ajouter pointer mb-1",staticStyle:{width:"max-content"},on:{click:e.pushTag}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.addTag)+" ")])]),e._l(e.tags,(function(t,s){return a("div",{staticClass:"status-item tags-item",attrs:{id:"tag_"+t.id}},[a("div",{staticClass:"status-field"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label,expression:"tag.label"}],attrs:{type:"text"},domProps:{value:t.label},on:{input:function(a){a.target.composing||e.$set(t,"label",a.target.value)}}}),a("input",{class:t.class,attrs:{type:"hidden"}})]),a("v-swatches",{attrs:{swatches:e.swatches,shapes:"circles","row-length":"8","show-border":"","popover-x":"left","popover-y":"top"},model:{value:t.class,callback:function(a){e.$set(t,"class",a)},expression:"tag.class"}}),a("button",{staticClass:"remove-tag",attrs:{type:"button"},on:{click:function(a){return e.removeTag(t,s)}}},[a("i",{staticClass:"fas fa-times"})])],1)}))],2)},en=[];const tn=a("bef5");var an={name:"editTags",components:{VSwatches:Vi.a},props:{},data(){return{tags:[],show:!1,swatches:["#DCC6E0","#947CB0","#663399","#6BB9F0","#19B5FE","#013243","#7BEFB2","#3FC380","#1E824C","#FFFD7E","#FFFD54","#F7CA18","#FABE58","#E87E04","#D35400","#EC644B","#CF000F","#E5283B","#E08283","#D2527F","#DB0A5B","#999999"],addTag:Joomla.JText._("COM_EMUNDUS_ONBOARD_SETTINGS_ADDTAG")}},methods:{getTags(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=gettags").then(e=>{this.tags=e.data.data,setTimeout(()=>{this.tags.forEach(e=>{this.getHexColors(e)})},100)})},getHexColors(e){let t=document.querySelector("."+e.class),a=getComputedStyle(t),s=a.backgroundColor.split("(")[1].split(")")[0].split(",");e.class=this.rgbToHex(parseInt(s[0]),parseInt(s[1]),parseInt(s[2]))},rgbToHex(e,t,a){return"#"+((1<<24)+(e<<16)+(t<<8)+a).toString(16).slice(1).toUpperCase()},pushTag(){this.$emit("LaunchLoading"),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=createtag",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{this.tags.push(e.data),setTimeout(()=>{this.getHexColors(e.data)},100),this.$emit("StopLoading")})},removeTag(e,t){this.$emit("LaunchLoading"),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=deletetag",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:tn.stringify({id:e.id})}).then(()=>{this.tags.splice(t,1),this.$emit("StopLoading")})}},created(){this.getTags()}},sn=an,on=(a("bca8"),Object(b["a"])(sn,Zi,en,!1,null,"46eec4d4",null)),nn=on.exports,rn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},[a("label",{staticClass:"mb-1"},[e._v(e._s(e.HomeContent))]),"0"!==e.manyLanguages?a("ul",{staticClass:"menus-home-row"},e._l(e.languages,(function(t,s){return a("li",{key:s,staticClass:"MenuFormHome"},[a("a",{staticClass:"MenuFormItemHome",class:e.indexHighlight===s?"MenuFormItemHome_current":"",on:{click:function(t){return e.changeTranslation(s)}}},[e._v(" "+e._s(t)+" ")])])})),0):e._e(),0===e.indexHighlight&&null!=this.form.content.fr?a("div",{staticClass:"form-group controls"},[a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.form.content.fr,lang:e.actualLanguage,enable_variables:!1,id:"editor_fr"},model:{value:e.form.content.fr,callback:function(t){e.$set(e.form.content,"fr",t)},expression:"form.content.fr"}})],1):e._e(),1===e.indexHighlight&&null!=this.form.content.en?a("div",{staticClass:"form-group controls"},[a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.form.content.en,lang:e.actualLanguage,enable_variables:!1,id:"editor_en"},model:{value:e.form.content.en,callback:function(t){e.$set(e.form.content,"en",t)},expression:"form.content.en"}})],1):e._e()])])},ln=[],dn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalUpdateImage"}},[a("modal",{attrs:{name:"modalUpdateImage",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalUpdateImage")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.updateBackground)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:e.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":e.afterAdded,"vdropzone-thumbnail":e.thumbnail,"vdropzone-removed-file":e.afterRemoved,"vdropzone-complete":e.onComplete,"vdropzone-error":e.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[a("em",{staticClass:"fas fa-file-image"}),e._v(" "+e._s(e.DropHere)+" ")])])],1),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalUpdateImage")}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.uploadNewBackground()}}},[e._v(" "+e._s(e.Continuer)+" ")])])])],1)},cn=[];a("bef5");const mn=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var un={name:"modalUpdateLogo",props:{},components:{vueDropzone:Di.a},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus_onboard&controller=settings&task=updatehomebackground",maxFilesize:10,maxFiles:1,autoProcessQueue:!1,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,resizeMimeType:"image/png",acceptedFiles:"image/*",previewTemplate:mn(),dictCancelUpload:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:Joomla.JText._("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},updateBackground:Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATE_BACKGROUND"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:Joomla.JText._("COM_EMUNDUS_ONBOARD_DROP_HERE"),Error:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR")}},methods:{beforeClose(e){},beforeOpen(e){},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(e){"success"==e.status&&(this.$emit("UpdateImage",e.dataURL),this.$modal.hide("modalUpdateImage"))},catchError:function(e,t,a){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),text:t,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(e)},thumbnail:function(e,t){var a,s,o,i;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=e.previewElement.querySelectorAll("[data-dz-thumbnail-bg]"),a=0,s=o.length;a<s;a++)i=o[a],i.alt=e.name,i.style.backgroundImage='url("'+t+'")';return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(),1)}},uploadNewBackground(){this.$refs.dropzone.processQueue()}}},pn=un,_n=(a("49128"),Object(b["a"])(pn,dn,cn,!1,null,"200a5c24",null)),hn=_n.exports;const gn=a("bef5");var fn={name:"editHomepage",components:{Editor:et,ModalUpdateImage:hn,Translation:Eo},props:{actualLanguage:String,manyLanguages:Number},data(){return{backgroundLink:"/images/custom/home_background.png",enableBackground:0,dynamicComponent:0,indexHighlight:0,form:{titleColor:"#fff",label:{fr:"",en:""},content:{fr:null,en:null}},languages:["Français","Anglais"],translate:{label:!1},TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),DisplayBackground:Joomla.JText._("COM_EMUNDUS_ONBOARD_DISPLAY_BACKGROUND"),Background:Joomla.JText._("COM_EMUNDUS_ONBOARD_BACKGROUND"),HomeTitle:Joomla.JText._("COM_EMUNDUS_ONBOARD_HOME_TITLE"),HomeContent:Joomla.JText._("COM_EMUNDUS_ONBOARD_HOME_CONTENT"),InsertHeaderImage:Joomla.JText._("COM_EMUNDUS_ONBOARD_INSERT_HEADER_IMAGE")}},methods:{updateView(e){this.backgroundLink=e,this.$forceUpdate()},getArticle(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=gethomepagearticle").then(e=>{this.form.content.fr=e.data.data.introtext,this.form.content.en=e.data.data.introtext_en,"fr"==this.actualLanguage?this.indexHighlight=0:this.indexHighlight=1})},changeTranslation(e){this.indexHighlight=e,this.dynamicComponent++},getBackground(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=getbackgroundoption").then(e=>{this.enableBackground=e.data.data;let t=e.data.content,a=new DOMParser,s=a.parseFromString(t,"text/html");"undefined"!=typeof s.getElementsByClassName("welcome-message")[0]&&(this.form.label.fr=s.getElementsByClassName("welcome-message")[0].textContent)})},updateBackgroundVisibility(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updatebackgroundmodule",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:gn.stringify({published:this.enableBackground})})},enableLabelTranslation(){this.translate.label=!this.translate.label,this.translate.label&&setTimeout(()=>{document.getElementById("label_en").focus()},100)}},created(){this.getArticle(),this.getBackground()}},bn=fn,vn=(a("499d"),Object(b["a"])(bn,rn,ln,!1,null,"4a5d4190",null)),Cn=vn.exports,On=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-flex-column"},[a("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),a("ModalUpdateLogo",{on:{UpdateLogo:e.updateView}}),a("ModalUpdateIcon",{on:{UpdateIcon:e.updateIcon}}),a("ModalUpdateColors",{on:{UpdateColors:e.updateColors}}),a("div",{staticClass:"em-w-80",staticStyle:{display:"flex","flex-direction":"column"}},[a("div",{staticClass:"em-h-auto em-flex-row col-md-4 em-mb-32",staticStyle:{"align-items":"start"}},[a("div",{staticClass:"em-logo-box pointer",on:{click:function(t){return e.$modal.show("modalUpdateLogo")}}},[a("img",{staticClass:"logo-settings",attrs:{src:e.imageLink,srcset:"/"+e.imageLink,alt:e.InsertLogo}})]),a("div",{staticClass:"w-100 em-ml-24"},[a("div",{staticClass:"em-flex-row justify-content-between"},[a("h2",{staticStyle:{margin:"0"}},[e._v("Logo")]),a("a",{staticClass:"pointer em-main-500-color",on:{click:function(t){return e.$modal.show("modalUpdateLogo")}}},[e._v(" "+e._s(e.translate("COM_EMUNDUS_ONBOARD_MODIFY"))+" ")])])])]),a("div",{staticClass:"em-h-auto em-flex-row col-md-4 em-mb-32",staticStyle:{"align-items":"start"}},[a("div",{staticClass:"em-logo-box pointer",on:{click:function(t){return e.$modal.show("modalUpdateIcon")}}},[a("img",{staticClass:"logo-settings",attrs:{src:e.iconLink,srcset:"/"+e.iconLink,alt:e.InsertIcon}})]),a("div",{staticClass:"w-100 em-ml-24"},[a("div",{staticClass:"em-flex-row justify-content-between"},[a("h2",{staticStyle:{margin:"0"}},[e._v(e._s(e.Icon))]),a("a",{staticClass:"pointer em-main-500-color",on:{click:function(t){return e.$modal.show("modalUpdateIcon")}}},[e._v(" "+e._s(e.translate("COM_EMUNDUS_ONBOARD_MODIFY"))+" ")])])])]),a("div",{staticClass:"em-h-auto em-flex-row col-md-4 em-mb-32",staticStyle:{"align-items":"start"}},[a("div",{staticClass:"em-logo-box pointer",on:{click:function(t){return e.$modal.show("modalUpdateColors")}}},[a("div",{staticClass:"color-preset",style:"background-color:"+e.primary+";border-right: 25px solid"+e.secondary})]),a("div",{staticClass:"w-100 em-ml-24"},[a("div",{staticClass:"em-flex-row justify-content-between"},[a("h2",{staticStyle:{margin:"0"}},[e._v(e._s(e.Colors))]),a("a",{staticClass:"pointer em-main-500-color",on:{click:function(t){return e.$modal.show("modalUpdateColors")}}},[e._v(" "+e._s(e.translate("COM_EMUNDUS_ONBOARD_MODIFY"))+" ")])])])])])],1)},Dn=[],En=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalUpdateLogo"}},[a("modal",{attrs:{name:"modalUpdateLogo",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalUpdateLogo")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.updateLogo)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:e.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":e.afterAdded,"vdropzone-thumbnail":e.thumbnail,"vdropzone-removed-file":e.afterRemoved,"vdropzone-complete":e.onComplete,"vdropzone-error":e.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[a("em",{staticClass:"fas fa-file-image"}),e._v(" "+e._s(e.DropHere)+" ")])])],1),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalUpdateLogo")}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.uploadNewLogo()}}},[e._v(" "+e._s(e.Continuer)+" ")])])])],1)},yn=[];a("bef5");const xn=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var Nn={name:"modalUpdateLogo",props:{},components:{vueDropzone:Di.a},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus_onboard&controller=settings&task=updatelogo",maxFilesize:10,maxFiles:1,autoProcessQueue:!1,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,resizeMimeType:"image/png",acceptedFiles:"image/*",previewTemplate:xn(),dictCancelUpload:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:Joomla.JText._("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},updateLogo:Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATE_LOGO"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:Joomla.JText._("COM_EMUNDUS_ONBOARD_DROP_HERE"),Error:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR")}},methods:{beforeClose(e){},beforeOpen(e){},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(e){"success"==e.status&&(this.$emit("UpdateLogo",e.dataURL),this.$modal.hide("modalUpdateLogo"))},catchError:function(e,t,a){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),text:t,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(e)},thumbnail:function(e,t){var a,s,o,i;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=e.previewElement.querySelectorAll("[data-dz-thumbnail-bg]"),a=0,s=o.length;a<s;a++)i=o[a],i.alt=e.name,i.style.backgroundImage='url("'+t+'")';return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(),1)}},uploadNewLogo(){this.$refs.dropzone.processQueue()}}},Un=Nn,Tn=(a("4ff4"),Object(b["a"])(Un,En,yn,!1,null,"0f331ae1",null)),An=Tn.exports,Mn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalUpdateIcon"}},[a("modal",{attrs:{name:"modalUpdateIcon",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalUpdateIcon")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.updateIcon)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("vue-dropzone",{ref:"dropzone",attrs:{id:"customdropzone","include-styling":!1,options:e.dropzoneOptions,useCustomSlot:!0},on:{"vdropzone-file-added":e.afterAdded,"vdropzone-thumbnail":e.thumbnail,"vdropzone-removed-file":e.afterRemoved,"vdropzone-complete":e.onComplete,"vdropzone-error":e.catchError}},[a("div",{staticClass:"dropzone-custom-content",attrs:{id:"dropzone-message"}},[a("em",{staticClass:"fas fa-file-image"}),e._v(" "+e._s(e.DropHere)+" ")])])],1),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalUpdateIcon")}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.uploadNewLogo()}}},[e._v(" "+e._s(e.Continuer)+" ")])])])],1)},Rn=[];a("bef5");const Sn=()=>'\n<div class="dz-preview dz-file-preview">\n  <div class="dz-image">\n    <div data-dz-thumbnail-bg></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark"><i class="fa fa-check"></i></div>\n  <div class="dz-error-mark"><i class="fa fa-close"></i></div>\n</div>\n';var wn={name:"modalUpdateIcon",props:{},components:{vueDropzone:Di.a},data(){return{dropzoneOptions:{url:"index.php?option=com_emundus_onboard&controller=settings&task=updateicon",maxFilesize:10,maxFiles:1,autoProcessQueue:!1,addRemoveLinks:!0,thumbnailWidth:null,thumbnailHeight:null,resizeMimeType:"image/png",acceptedFiles:"image/*",previewTemplate:Sn(),dictCancelUpload:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD"),dictCancelUploadConfirmation:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL_UPLOAD_CONFIRMATION"),dictRemoveFile:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_FILE"),dictInvalidFileType:Joomla.JText._("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE"),dictFileTooBig:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILE_TOO_BIG"),dictMaxFilesExceeded:Joomla.JText._("COM_EMUNDUS_ONBOARD_MAX_FILES_EXCEEDED")},updateIcon:Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATE_ICON"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),DropHere:Joomla.JText._("COM_EMUNDUS_ONBOARD_DROP_HERE"),Error:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR")}},methods:{beforeClose(e){},beforeOpen(e){},afterAdded(){document.getElementById("dropzone-message").style.display="none"},afterRemoved(){0===this.$refs.dropzone.getAcceptedFiles().length&&(document.getElementById("dropzone-message").style.display="block")},onComplete:function(e){"success"==e.status&&(this.$emit("UpdateIcon",e.dataURL),this.$modal.hide("modalUpdateIcon"))},catchError:function(e,t,a){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR"),text:t,type:"error",showCancelButton:!1,showConfirmButton:!1,timer:3e3}),this.$refs.dropzone.removeFile(e)},thumbnail:function(e,t){var a,s,o,i;if(e.previewElement){for(e.previewElement.classList.remove("dz-file-preview"),o=e.previewElement.querySelectorAll("[data-dz-thumbnail-bg]"),a=0,s=o.length;a<s;a++)i=o[a],i.alt=e.name,i.style.backgroundImage='url("'+t+'")';return setTimeout(function(t){return function(){return e.previewElement.classList.add("dz-image-preview")}}(),1)}},uploadNewLogo(){this.$refs.dropzone.processQueue()}}},Jn=wn,kn=(a("946e"),Object(b["a"])(Jn,Mn,Rn,!1,null,"508cafe1",null)),Bn=kn.exports,Ln=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalUpdateColors"}},[a("modal",{attrs:{name:"modalUpdateColors",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalUpdateColors")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.updateColors)+" ")])])]),a("div",{staticClass:"modalC-content"},e._l(e.presets,(function(t){return a("div",{staticClass:"preset-presentation",style:"background-color:"+t.primary+";border-right: 100px solid"+t.secondary,on:{click:function(a){return e.changeColors(t)}}})})),0)])],1)},In=[];const Pn=a("bef5");var jn={name:"modalUpdateColors",props:{},components:{},data(){return{presets:[{primary:"#1b1f3c",secondary:"#de6339"},{primary:"#DA3832",secondary:"#204382"},{primary:"#727378",secondary:"#A0BD51"},{primary:"#727378",secondary:"#000000"},{primary:"#000000",secondary:"#5AA6DC"},{primary:"#A0BD51",secondary:"#204382"}],updateColors:Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATE_COLORS"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Error:Joomla.JText._("COM_EMUNDUS_ONBOARD_ERROR")}},methods:{changeColors(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updatecolor",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Pn.stringify({preset:e})}).then(t=>{this.$emit("UpdateColors",e),this.$modal.hide("modalUpdateColors")})}}},Fn=jn,$n=(a("e55b"),Object(b["a"])(Fn,Ln,In,!1,null,"03ca3722",null)),Gn=$n.exports;a("bef5");var Hn={name:"editStyle",components:{ModalUpdateColors:Gn,ModalUpdateIcon:Bn,ModalUpdateLogo:An,VSwatches:Vi.a},props:{actualLanguage:String},data(){return{imageLink:"images/custom/logo_custom.png",iconLink:"images/custom/favicon.png",primary:"",secondary:"",swatches:["#DCC6E0","#947CB0","#663399","#6BB9F0","#19B5FE","#013243","#7BEFB2","#3FC380","#1E824C","#FFFD7E","#FFFD54","#F7CA18","#FABE58","#E87E04","#D35400","#EC644B","#CF000F","#E5283B","#E08283","#D2527F","#DB0A5B","#999999"],changes:!1,PrimaryColor:Joomla.JText._("COM_EMUNDUS_ONBOARD_PRIMARY_COLOR"),SecondaryColor:Joomla.JText._("COM_EMUNDUS_ONBOARD_SECONDARY_COLOR"),Colors:Joomla.JText._("COM_EMUNDUS_ONBOARD_COLORS"),Icon:Joomla.JText._("COM_EMUNDUS_ONBOARD_ICON"),InsertLogo:Joomla.JText._("COM_EMUNDUS_ONBOARD_INSERT_LOGO"),InsertIcon:Joomla.JText._("COM_EMUNDUS_ONBOARD_INSERT_ICON")}},methods:{updateView(e){this.imageLink=e,this.$forceUpdate()},updateIcon(e){this.iconLink=e,this.$forceUpdate()},updateColors(e){this.primary=e.primary,this.secondary=e.secondary},removeIcon(){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_ICON"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_REMOVE_ICON_TEXT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#12db42",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=removeicon",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{this.iconLink="",this.$forceUpdate()})})},imageExists(e,t){var a=new Image;a.onload=function(){t(!0)},a.onerror=function(){t(!1)},a.src=e},tip(){this.show("foo-velocity",Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),Joomla.JText._("COM_EMUNDUS_ONBOARD_COLOR_SUCCESS"))},show(e,t="",a="Information"){this.$notify({group:e,title:""+a,text:t,duration:3e3})},clean(e){this.$notify({group:e,clean:!0})}},created(){this.changes=!1,this.imageExists(this.imageLink,e=>{e||(this.imageLink="images/custom/logo.png")}),d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=getappcolors"}).then(e=>{this.primary=e.data.primary,this.secondary=e.data.secondary,setTimeout(()=>{this.changes=!0},1e3)})}},zn=Hn,qn=(a("0cb7"),Object(b["a"])(zn,On,Dn,!1,null,"11af61c4",null)),Vn=qn.exports,Yn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),a("ModalAddDatas",{attrs:{actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages},on:{updateDatabases:e.getDatabases}}),a("ModalImportDatas",{on:{updateDatabases:e.getDatabases}}),a("div",{staticClass:"d-flex"},[a("a",{staticClass:"bouton-ajouter-green bouton-ajouter pointer mr-1",staticStyle:{width:"max-content"},on:{click:function(t){return e.$modal.show("modalAddDatas")}}},[a("div",{staticClass:"add-button-div"},[a("em",{staticClass:"fas fa-plus mr-1"}),e._v(" "+e._s(e.CreateDatas)+" ")])]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return e.$modal.show("modalImportDatas")}}},[e._v(" "+e._s(e.ImportDatas)+" ")])]),a("div",{staticClass:"mt-1"},e._l(e.databases,(function(t,s){return a("div",{staticClass:"db-table"},[a("div",{staticClass:"db-item",class:[s==e.indexOpen?"down-arrow":"right-arrow"],on:{click:function(a){return e.getDatas(t.database_name,s)}}},[a("h3",[e._v(e._s(t.label))]),a("p",[e._v(e._s(t.description))])]),a("transition",{attrs:{name:"slide-down",type:"transition"}},[s==e.indexOpen?a("div",{staticClass:"mt-1"},[a("table",{staticClass:"db-description"},[a("tr",{staticClass:"db-columns"},e._l(e.datas.columns,(function(t,s){return a("th",{attrs:{id:"column_"+t}},[e._v(e._s(t))])})),0),e._l(e.datas.datas,(function(t,s){return a("tr",{staticClass:"db-values"},e._l(t,(function(t){return a("th",[e._v(e._s(t))])})),0)}))],2)]):e._e()])],1)})),0),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12db42"}})],1):e._e()],1)},Wn=[],Xn=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalAddDatas"}},[a("modal",{attrs:{name:"modalAddDatas",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddDatas")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.CreateDatasTable)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Name)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.label,expression:"form.label"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.label},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40"},domProps:{value:e.form.label},on:{input:function(t){t.target.composing||e.$set(e.form,"label",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Description)+" :")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.desc,expression:"form.desc"}],staticClass:"form__input field-general w-input",staticStyle:{margin:"0"},attrs:{maxlength:"150"},domProps:{value:e.form.desc},on:{input:function(t){t.target.composing||e.$set(e.form,"desc",t.target.value)}}})]),a("div",{staticClass:"col-md-8 flex"},[a("label",{staticClass:"require col-md-3"},[e._v(e._s(e.Values)+" :")]),a("button",{staticClass:"add-option",on:{click:function(t){return t.preventDefault(),e.add.apply(null,arguments)}}},[e._v("+")])]),a("div",{staticClass:"col-md-12"},e._l(e.form.db_values,(function(t,s){return a("div",{key:s,staticClass:"dpflex"},[a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.db_values[s][e.actualLanguage],expression:"form.db_values[i][actualLanguage]"}],staticClass:"form__input field-general w-input db-values",attrs:{type:"text",id:"values_fr_"+s},domProps:{value:e.form.db_values[s][e.actualLanguage]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.form.db_values[s],e.actualLanguage,t.target.value)}}}),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.form.db_values[s].translate},attrs:{type:"button",title:e.Translate},on:{click:function(t){e.form.db_values[s].translate=!e.form.db_values[s].translate}}}):e._e()]),e.form.db_values[s].translate?a("translation",{attrs:{label:e.form.db_values[s],actualLanguage:e.actualLanguage}}):e._e(),a("button",{staticClass:"remove-option",on:{click:function(t){return t.preventDefault(),e.leave(s)}}},[e._v("-")])],1)})),0)]),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAddDatas")}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.saveDatas()}}},[e._v(" "+e._s(e.Continuer)+" ")])])])],1)},Qn=[];const Kn=a("bef5");var Zn={name:"modalAddDatas",props:{actualLanguage:String,manyLanguages:Number},components:{Translation:Eo},data(){return{form:{label:"",desc:"",db_values:[]},errors:{label:!1},Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_LASTNAME"),Translate:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),Values:Joomla.JText._("COM_EMUNDUS_ONBOARD_VALUES"),Description:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_DESCRIPTION"),CreateDatasTable:Joomla.JText._("COM_EMUNDUS_ONBOARD_CREATE_DATAS"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER")}},methods:{beforeClose(e){},beforeOpen(e){},add:Xe.a.debounce((function(){let e=Object.keys(this.form.db_values).length;this.$set(this.form.db_values,e,{fr:"",en:"",translate:!1});let t="values_fr_"+e.toString();setTimeout(()=>{document.getElementById(t).focus()},100)}),150),leave:function(e){this.$delete(this.form.db_values,e)},saveDatas(){if(this.errors={label:!1},""==this.form.label)return this.errors.label=!0,!1;this.form.db_values.forEach(e=>{e.translate||(e.en=e.fr)}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=savedatas",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Kn.stringify({form:this.form})}).then(()=>{this.$emit("updateDatabases"),this.$modal.hide("modalAddDatas")})}}},er=Zn,tr=(a("a592"),Object(b["a"])(er,Xn,Qn,!1,null,"4ca3ebf0",null)),ar=tr.exports,sr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalImportDatas"}},[a("modal",{attrs:{name:"modalImportDatas",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalImportDatas")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.ImportDatasTable)+" ")])])]),a("div",{staticClass:"modalC-content"},[e.importCSV?e._e():a("div",[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Name)+" :")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.label,expression:"form.label"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors.label},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40"},domProps:{value:e.form.label},on:{input:function(t){t.target.composing||e.$set(e.form,"label",t.target.value)}}}),e.errors.label?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.NameRequired))])]):e._e()]),a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.Description)+" :")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.form.desc,expression:"form.desc"}],staticClass:"form__input field-general w-input",staticStyle:{margin:"0"},attrs:{maxlength:"150"},domProps:{value:e.form.desc},on:{input:function(t){t.target.composing||e.$set(e.form,"desc",t.target.value)}}})]),a("div",{staticClass:"col-md-8 flex"},[a("label",{staticClass:"require col-md-3"},[e._v(e._s(e.Columns)+" :")]),a("button",{staticClass:"add-option",on:{click:function(t){return t.preventDefault(),e.add.apply(null,arguments)}}},[e._v("+")])]),a("div",{staticClass:"col-md-12"},[e._l(e.form.db_columns,(function(t,s){return a("div",{key:s,staticClass:"dpflex"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.db_columns[s],expression:"form.db_columns[i]"}],staticClass:"form__input field-general w-input db-values",attrs:{type:"text",id:"columns_"+s},domProps:{value:e.form.db_columns[s]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.add.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.form.db_columns,s,t.target.value)}}}),a("button",{staticClass:"remove-option",on:{click:function(t){return t.preventDefault(),e.leave(s)}}},[e._v("-")])])})),e.errors.db_columns?a("p",{staticClass:"error"},[a("span",{staticClass:"error"},[e._v(e._s(e.LeastOneColumnRequired))])]):e._e()],2)]),e.importCSV?a("vue-csv-import",{key:e.csv_comp,ref:"csvimport",attrs:{"map-fields":e.form.db_columns,tableSelectClass:"dropdown-toggle",tableClass:"custom-table-csv"},scopedSlots:e._u([{key:"hasHeaders",fn:function(t){var s=t.headers,o=t.toggle;return[a("label",{staticStyle:{display:"none"}},[a("input",{attrs:{type:"checkbox",id:"hasHeaders"},domProps:{value:s},on:{change:o}}),e._v(" Headers? ")])]}},{key:"next",fn:function(t){var s=t.load;return[a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{float:"left"},on:{click:function(e){return e.preventDefault(),s.apply(null,arguments)}}},[e._v(e._s(e.Load))])]}},{key:"submit",fn:function(t){var s=t.submit;return[a("button",{on:{click:function(e){return e.preventDefault(),s.apply(null,arguments)}}},[e._v("send!")])]}}],null,!1,504235837),model:{value:e.csv,callback:function(t){e.csv=t},expression:"csv"}},[a("template",{slot:"error"},[e._v(" "+e._s(e.FileTypeInvalid)+" ")]),a("template",{slot:"thead"},[a("p",{staticStyle:{"margin-top":"2em",width:"max-content"}},[e._v(e._s(e.CSVAssociate))]),a("tr",[a("th",[e._v(e._s(e.MyColumns))]),a("th",[e._v(e._s(e.CSVColumns))])])])],2):e._e()],1),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.goBack.apply(null,arguments)}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.saveDatas()}}},[e._v(" "+e._s(e.Continuer)+" ")])])])],1)},or=[],ir=a("1b04");const nr=a("bef5");var rr={name:"modalImportDatas",props:{},components:{VueCsvImport:ir["VueCsvImport"]},data(){return{form:{label:"",desc:"",db_columns:[]},errors:{label:!1,db_columns:!1},csv:null,csv_comp:0,importCSV:!1,Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_LASTNAME"),NameRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_LASTNAME_REQUIRED"),Translate:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),Columns:Joomla.JText._("COM_EMUNDUS_ONBOARD_COLUMNS"),Description:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_DESCRIPTION"),ImportDatasTable:Joomla.JText._("COM_EMUNDUS_ONBOARD_IMPORT_DATAS"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_NEXT"),Load:Joomla.JText._("COM_EMUNDUS_ONBOARD_LOAD_FILE"),MyColumns:Joomla.JText._("COM_EMUNDUS_ONBOARD_MY_COLUMNS"),CSVColumns:Joomla.JText._("COM_EMUNDUS_ONBOARD_CSV_COLUMNS"),CSVAssociate:Joomla.JText._("COM_EMUNDUS_ONBOARD_CSV_ASSOCIATION"),LeastOneColumnRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_LEAST_ONE_COLUMN_REQUIRED"),FileTypeInvalid:Joomla.JText._("COM_EMUNDUS_ONBOARD_INVALID_FILE_TYPE")}},methods:{beforeClose(e){},beforeOpen(e){},goBack(){this.importCSV?this.importCSV=!1:this.$modal.hide("modalImportDatas")},add:Xe.a.debounce((function(){let e=Object.keys(this.form.db_columns).length;this.$set(this.form.db_columns,e,"");let t="columns_"+e.toString();setTimeout(()=>{document.getElementById(t).focus()},100)}),150),leave:function(e){this.$delete(this.form.db_columns,e)},saveDatas(){return this.errors={label:!1,db_columns:!1},""==this.form.label?(this.errors.label=!0,!1):0==this.form.db_columns.length?(this.errors.db_columns=!0,!1):void(this.importCSV?d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=saveimporteddatas",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:nr.stringify({form:this.form,datas:this.csv})}).then(()=>{this.$emit("updateDatabases"),this.$modal.hide("modalImportDatas")}):(this.importCSV=!0,this.csv_comp+=1))}}},lr=rr,dr=(a("6d71"),Object(b["a"])(lr,sr,or,!1,null,"3737c766",null)),cr=dr.exports;const mr=a("bef5");var ur={name:"editDatas",components:{ModalAddDatas:ar,ModalImportDatas:cr},props:{actualLanguage:String,manyLanguages:Number},data(){return{databases:[],datas:{columns:[],datas:[]},indexOpen:-1,loading:!1,CreateDatas:Joomla.JText._("COM_EMUNDUS_ONBOARD_CREATE_DATAS"),ImportDatas:Joomla.JText._("COM_EMUNDUS_ONBOARD_IMPORT_DATAS"),UpdateDatas:Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATE_DATAS")}},methods:{getDatabases(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getdatabasesjoin"}).then(e=>{this.databases=e.data.data})},getDatas(e,t){t==this.indexOpen?this.indexOpen=-1:(this.loading=!0,this.indexOpen=t,this.datas={columns:[],datas:[]},d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=getdatasfromtable",params:{db:e},paramsSerializer:e=>mr.stringify(e)}).then(e=>{this.loading=!1,this.datas.datas=e.data.data,this.datas.columns=Object.keys(this.datas.datas[0])}))},tip(){this.show("foo-velocity",Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),Joomla.JText._("COM_EMUNDUS_ONBOARD_COLOR_SUCCESS"))},show(e,t="",a="Information"){this.$notify({group:e,title:""+a,text:t,duration:3e3})},clean(e){this.$notify({group:e,clean:!0})}},created(){this.getDatabases()},watch:{}},pr=ur,_r=(a("18bf"),Object(b["a"])(pr,Yn,Wn,!1,null,null,null)),hr=_r.exports,gr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("ModalAddUser",{attrs:{group:this.group,coordinatorAccess:1,userManage:1},on:{UpdateUsers:e.getUsers}}),a("button",{staticClass:"create-user-admin__button bouton-sauvergarder-et-continuer-3",on:{click:function(t){return e.$modal.show("modalAddUser")}}},[e._v(e._s(e.addUser))]),a("div",{staticClass:"mt-1",attrs:{id:"blocked_filter"}},[a("div",{staticClass:"d-flex mr-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.block,expression:"block"}],staticClass:"mr-1",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.block)?e._i(e.block,null)>-1:e.block},on:{change:function(t){var a=e.block,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.block=a.concat([i])):n>-1&&(e.block=a.slice(0,n).concat(a.slice(n+1)))}else e.block=o}}}),a("p",[e._v(e._s(e.BlockedUsers))])]),a("div",{staticClass:"d-flex mt-1"},[a("div",{staticClass:"d-flex"},[a("p",{staticClass:"mb-0 mr-1",staticStyle:{"white-space":"nowrap"}},[e._v(e._s(e.Program)+" : ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.searchProgram,expression:"searchProgram"}],staticClass:"dropdown-toggle",staticStyle:{"min-width":"80%"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.searchProgram=t.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",value:"-1"}}),e._l(e.programs,(function(t){return a("option",{domProps:{value:t.id}},[e._v(e._s(t.label))])}))],2)]),a("div",{staticClass:"d-flex",staticStyle:{"margin-left":"5em"}},[a("p",{staticClass:"mb-0 mr-1",staticStyle:{"white-space":"nowrap"}},[e._v(e._s(e.Role)+" : ")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.searchRole,expression:"searchRole"}],staticClass:"dropdown-toggle",staticStyle:{"min-width":"80%"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.searchRole=t.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",value:"-1"}}),a("option",{attrs:{value:"5"}},[e._v(e._s(e.Administrator))]),a("option",{attrs:{value:"6"}},[e._v(e._s(e.Evaluator))])])])])]),a("table-component",{key:e.table_users,ref:"table",attrs:{data:e.fetchData,"sort-by":"name","sort-order":"asc","show-caption":"false","filter-placeholder":e.Search+"...","filter-no-results":e.NoResultsFound}},[a("table-column",{attrs:{show:"id",label:"ID","data-type":"numeric",hidden:""}}),a("table-column",{attrs:{show:"name",label:e.Name}}),a("table-column",{attrs:{show:"email",label:e.Email}}),a("table-column",{attrs:{show:"profile",label:e.Role,formatter:e.roleFormatter}}),a("table-column",{attrs:{show:"lastvisitDate",label:e.LastConnected,filterable:!1,"data-type":"date:DD/MM/YYYY"}}),a("table-column",{attrs:{show:"block",label:e.Status,filterable:!1,formatter:e.statusFormatter}}),a("table-column",{attrs:{label:e.Actions,sortable:!1,filterable:!1,"cell-class":"user-list__actions"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.block?a("a",{attrs:{title:e.LockUser},on:{click:function(a){return e.lockUser(t.id)}}},[a("i",{staticClass:"fas fa-unlock user-unlock__icon"})]):e._e(),1==t.block?a("a",{attrs:{title:e.UnlockUser},on:{click:function(a){return e.unlockUser(t.id)}}},[a("i",{staticClass:"fas fa-lock user-lock__icon"})]):e._e(),a("a",{attrs:{title:e.ResetPassword},on:{click:function(a){return e.resetPassword(t.id,t.name)}}},[a("i",{staticClass:"fas fa-redo"})])]}}])})],1),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},fr=[];const br=a("bef5");var vr={name:"editUsers",components:{ModalAddUser:Et},props:{actualLanguage:String},data(){return{options:{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric"},loading:!1,tableUsers:0,users:[],programs:[],filters:{block:!1,searchProgram:-1,searchRole:-1},pagination:{currentPage:0,totalPages:1},block:!1,searchProgram:-1,searchRole:-1,table_users:0,Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_LASTNAME"),Email:Joomla.JText._("COM_EMUNDUS_ONBOARD_EMAIL"),LastConnected:Joomla.JText._("COM_EMUNDUS_ONBOARD_LAST_CONNECTED"),Status:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOSSIERS_STATUS"),Search:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEARCH"),Activated:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIVATED"),Blocked:Joomla.JText._("COM_EMUNDUS_ONBOARD_BLOCKED"),NoResultsFound:Joomla.JText._("COM_EMUNDUS_ONBOARD_NO_RESULTS_FOUND"),Actions:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS"),addUser:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADDUSER"),LockUser:Joomla.JText._("COM_EMUNDUS_ONBOARD_LOCK_USER"),UnlockUser:Joomla.JText._("COM_EMUNDUS_ONBOARD_UNLOCK_USER"),ResetPassword:Joomla.JText._("COM_EMUNDUS_ONBOARD_RESET_PASSWORD"),BlockedUsers:Joomla.JText._("COM_EMUNDUS_ONBOARD_BLOCKED_USERS"),Program:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PROGRAM"),Role:Joomla.JText._("COM_EMUNDUS_ONBOARD_ROLE"),Administrator:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_ADMINISTRATOR"),Evaluator:Joomla.JText._("COM_EMUNDUS_ONBOARD_PROGRAM_EVALUATOR")}},methods:{fetchData({page:e}){return new Promise(t=>{d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getusers",params:{filters:this.filters,page:{page:e}},paramsSerializer:e=>br.stringify(e)}).then(a=>t({data:a.data.data.users,pagination:{totalPages:a.data.data.users_count/10,currentPage:e,count:a.data.data.users_count}}))})},getUsers(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getusers",params:{filters:this.filters},paramsSerializer:e=>br.stringify(e)}).then(e=>{this.users=e.data.data.users,this.users.forEach((e,t)=>{e.lastvisitDate=new Date(e.lastvisitDate).toLocaleDateString(this.actualLanguage,this.options)}),document.getElementsByClassName("table-component__filter")[0].append(document.getElementById("blocked_filter")),this.$refs.table.refresh()})},getProgramsList(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=program&task=getallprogram",params:{filter:"",sort:"",recherche:"",lim:100,page:1},paramsSerializer:e=>br.stringify(e)}).then(e=>{this.programs=e.data.data})},unlockUser(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=unlockuser",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:br.stringify({user:e})}).then(t=>{1==t.data.status&&(this.users.find(t=>t.id==e).block=0,this.$refs.table.refresh())})},lockUser(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=lockuser",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:br.stringify({user:e})}).then(t=>{1==t.data.status&&(this.users.find(t=>t.id==e).block=1,this.$refs.table.refresh())})},resetPassword(e,t){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_RESET_PASSWORD"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_RESET_PASSWORD_MESSAGE")+t,type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&d()({method:"post",url:"index.php?option=com_emundus&controller=users&task=regeneratepassword",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:br.stringify({user:e})}).then(e=>{console.log(e),T.a.fire({text:e.data.msg,type:"success",showCancelButton:!1,showConfirmButton:!1,confirmButtonColor:"#de6339",timer:2e3})})})},showInfos(e){console.log(e)},statusFormatter(e,t){return 0==e?'<i class="fas fa-check-circle activated col-md-2"></i><span class="ml-10px">'+this.Activated+"</span>":'<i class="fas fa-minus-circle blocked col-md-2"></i><span class="ml-10px">'+this.Blocked+"</span>"},roleFormatter(e,t){return 5==e?"<span>"+this.Administrator+"</span>":"<span>"+this.Evaluator+"</span>"}},created(){this.getUsers(),this.getProgramsList()},watch:{block:function(e){this.filters.block=e,this.getUsers()},searchProgram:function(e){this.filters.searchProgram=e,this.getUsers()},searchRole:function(e){this.filters.searchRole=e,this.getUsers()}}},Cr=vr,Or=(a("1a8f"),Object(b["a"])(Cr,gr,fr,!1,null,null,null)),Dr=Or.exports,Er=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},["0"!==e.manyLanguages?a("ul",{staticClass:"menus-home-row"},e._l(e.languages,(function(t,s){return a("li",{key:s,staticClass:"MenuFormHome"},[a("a",{staticClass:"MenuFormItemHome",class:e.indexHighlight===s?"MenuFormItemHome_current":"",on:{click:function(t){return e.changeTranslation(s)}}},[e._v(" "+e._s(t)+" ")])])})),0):e._e(),0===e.indexHighlight&&null!=this.form.content.fr?a("div",{staticClass:"form-group controls",staticStyle:{"margin-top":"5em"}},[a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.form.content.fr,lang:e.actualLanguage,enable_variables:!1,id:"editor_fr"},model:{value:e.form.content.fr,callback:function(t){e.$set(e.form.content,"fr",t)},expression:"form.content.fr"}})],1):e._e(),1===e.indexHighlight&&null!=this.form.content.en?a("div",{staticClass:"form-group controls",staticStyle:{"margin-top":"5em"}},[a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.form.content.en,lang:e.actualLanguage,enable_variables:!1,id:"editor_en"},model:{value:e.form.content.en,callback:function(t){e.$set(e.form.content,"en",t)},expression:"form.content.en"}})],1):e._e()])])},yr=[];a("bef5");var xr={name:"editCGV",components:{Editor:et},props:{actualLanguage:String,manyLanguages:Number},data(){return{dynamicComponent:0,indexHighlight:0,form:{content:{fr:null,en:null}},languages:["Français","Anglais"],TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH")}},methods:{getArticle(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=getcgvarticle").then(e=>{this.form.content.fr=e.data.data.introtext,this.form.content.en=e.data.data.introtext_en,"fr"==this.actualLanguage?this.indexHighlight=0:this.indexHighlight=1})},changeTranslation(e){this.indexHighlight=e,this.dynamicComponent++}},created(){this.getArticle()}},Nr=xr,Ur=Object(b["a"])(Nr,Er,yr,!1,null,"24cb4852",null),Tr=Ur.exports,Ar=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"em-w-80"},[a("ul",{staticClass:"menus-home-row"},e._l(e.columns,(function(t,s){return a("li",{key:s,staticClass:"MenuFormHome"},[a("a",{staticClass:"MenuFormItemHome",class:e.indexHighlight==s?"MenuFormItemHome_current":"",on:{click:function(t){return e.changeColumn(s)}}},[e._v(" "+e._s(t)+" ")])])})),0),0==e.indexHighlight&&null!=this.form.content.col1?a("div",{staticClass:"form-group controls"},[a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.form.content.col1,lang:e.actualLanguage,enable_variables:!1,id:"editor_fr"},model:{value:e.form.content.col1,callback:function(t){e.$set(e.form.content,"col1",t)},expression:"form.content.col1"}})],1):e._e(),1==e.indexHighlight&&null!=this.form.content.col2?a("div",{staticClass:"form-group controls"},[a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.form.content.col2,lang:e.actualLanguage,enable_variables:!1,id:"editor_en"},model:{value:e.form.content.col2,callback:function(t){e.$set(e.form.content,"col2",t)},expression:"form.content.col2"}})],1):e._e()])])},Mr=[];a("bef5");var Rr={name:"editFooter",components:{Editor:et},props:{actualLanguage:String},data(){return{dynamicComponent:0,indexHighlight:0,form:{content:{col1:null,col2:null}},columns:[Joomla.JText._("COM_EMUNDUS_ONBOARD_COLUMN")+" 1",Joomla.JText._("COM_EMUNDUS_ONBOARD_COLUMN")+" 2"],TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH")}},methods:{getArticles(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=getfooterarticles").then(e=>{this.form.content.col1=e.data.data.column1.content,this.form.content.col2=e.data.data.column2.content})},changeColumn(e){this.indexHighlight=e,this.dynamicComponent++}},created(){this.getArticles()}},Sr=Rr,wr=Object(b["a"])(Sr,Ar,Mr,!1,null,"57ebec81",null),Jr=wr.exports,kr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-evaluation",staticStyle:{width:"auto"}},[a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{float:"left"},attrs:{type:"button"},on:{click:function(t){return e.rewind()}}},[e._v(e._s(e.REWINDTUTORIAL))])])},Br=[];a("bef5");var Lr={name:"helpSettings",props:{actualLanguage:String,manyLanguages:Number},data:()=>({REWINDTUTORIAL:Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_REWIND")}),methods:{rewind(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=rewindtutorial",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(e=>{T.a.fire({backdrop:!0,title:Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_REWIND"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_TUTORIAL_REWIND_SUCCESS"),showConfirmButton:!0,timer:5e3})})}}},Ir=Lr,Pr=Object(b["a"])(Ir,kr,Br,!1,null,"93c1dec0",null),jr=Pr.exports,Fr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"em-settings-menu"},[a("div",{staticClass:"section-sub-menu sub-form"},[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("div",{staticClass:"d-flex"},[a("img",{staticClass:"tchooz-icon-title",attrs:{src:"images/emundus/menus/megaphone.svg",srcset:"/images/emundus/menus/megaphone.svg",alt:"megaphone"}}),a("h1",{staticClass:"tchooz-section-titles"},[e._v(e._s(e.Applicants))])]),a("p",{staticClass:"mt-1"},[e._v(e._s(e.Desc))])])]),e._l(e.params,(function(t,s){return a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"param_"+s}},[e._v(e._s(t.label))]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"param.value"}],staticClass:"dropdown-toggle w-select",staticStyle:{"margin-bottom":"0"},attrs:{id:"param_"+s},on:{change:[function(a){var s=Array.prototype.filter.call(a.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"value",a.target.multiple?s:s[0])},function(a){return e.saveEmundusParam(t)}]}},e._l(t.options,(function(t,s){return a("option",{domProps:{value:t.value}},[e._v(e._s(t.label))])})),0)])}))],2)},$r=[];const Gr=a("bef5");var Hr={name:"editApplicants",components:{VSwatches:Vi.a},props:{},data(){return{params:{applicant_can_renew:{label:Joomla.JText._("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_RENEW"),param:"applicant_can_renew",options:[{label:Joomla.JText._("JNO"),value:0},{label:Joomla.JText._("JYES"),value:1},{label:Joomla.JText._("COM_EMUNDUS_APPLICANT_CAN_RENEW_CAMPAIGN"),value:2},{label:Joomla.JText._("COM_EMUNDUS_APPLICANT_CAN_RENEW_YEAR"),value:3}],value:0},can_edit_until_deadline:{label:Joomla.JText._("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_EDIT_UNTIL_DEADLINE"),param:"can_edit_until_deadline",options:[{label:Joomla.JText._("JNO"),value:0},{label:Joomla.JText._("JYES"),value:1}],value:0},copy_application_form:{label:Joomla.JText._("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_COPY_APPLICATION_FORM"),param:"copy_application_form",options:[{label:Joomla.JText._("JNO"),value:0},{label:Joomla.JText._("JYES"),value:1}],value:0},can_submit_encrypted:{label:Joomla.JText._("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANT_CAN_SUBMIT_ENCRYPTED"),param:"can_submit_encrypted",options:[{label:Joomla.JText._("JNO"),value:0},{label:Joomla.JText._("JYES"),value:1}],value:0}},config:{},Desc:Joomla.JText._("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANTS_DESC"),Applicants:Joomla.JText._("COM_EMUNDUS_ONBOARD_SETTINGS_APPLICANTS")}},methods:{getEmundusParams(){d.a.get("index.php?option=com_emundus_onboard&controller=settings&task=getemundusparams").then(e=>{this.config=e.data.config,this.params.applicant_can_renew.value=parseInt(this.config.applicant_can_renew),this.params.can_edit_until_deadline.value=parseInt(this.config.can_edit_until_deadline),this.params.copy_application_form.value=parseInt(this.config.copy_application_form),this.params.can_submit_encrypted.value=parseInt(this.config.can_submit_encrypted)})},saveEmundusParam(e){this.$emit("LaunchLoading"),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updateemundusparam",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Gr.stringify({param:e.param,value:e.value})}).then(()=>{this.$emit("StopLoading")})}},created(){this.getEmundusParams()}},zr=Hr,qr=(a("ac7f"),Object(b["a"])(zr,Fr,$r,!1,null,"4e0b7aa3",null)),Vr=qr.exports,Yr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"translationTool"}},[a("modal",{attrs:{name:"translationTool",height:"auto",transition:"fade",delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose}},[a("div",{staticClass:"em-modal-header"},[a("div",{staticClass:"em-flex-row em-pointer",on:{click:function(t){return t.preventDefault(),e.$modal.hide("translationTool")}}},[a("span",{staticClass:"material-icons-outlined"},[e._v("arrow_back")]),a("span",{staticClass:"em-ml-8"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_ADD_RETOUR")))])])]),a("div",{staticClass:"em-modal-content"},[a("div",{staticClass:"em-modal-menu__sidebar"},e._l(e.menus,(function(t,s){return a("div",{key:"menu_"+t.index,on:{click:function(a){e.currentMenu=t.index}}},[a("p",{staticClass:"em-font-size-16 em-mb-8 em-p-16 pointer",class:e.currentMenu===t.index?"em-modal-menu__current":""},[e._v(e._s(e.translate(t.title)))])])})),0),a("transition",{attrs:{name:"fade"}},[1===e.currentMenu?a("Global",{staticClass:"em-modal-component"}):e._e(),2===e.currentMenu?a("Translations",{staticClass:"em-modal-component"}):e._e()],1)],1)])],1)},Wr=[],Xr=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_GLOBAL")))]),a("div",{staticClass:"em-mb-24 d-flex"},[a("div",{staticClass:"col-md-4"},[a("p",{staticClass:"em-body-16-semibold em-mb-8"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_DEFAULT")))]),a("p",{staticClass:"em-font-size-14"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_DEFAULT_DESC")))])]),a("div",{staticClass:"col-md-3"},[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:e.allLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!1},on:{select:e.updateDefaultLanguage},model:{value:e.defaultLang,callback:function(t){e.defaultLang=t},expression:"defaultLang"}})],1)]),a("div",{staticClass:"em-mb-24 d-flex"},[a("div",{staticClass:"col-md-4"},[a("p",{staticClass:"em-body-16-semibold em-mb-8"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SECONDARY")))]),a("p",{staticClass:"em-font-size-14"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SECONDARY_DESC")))])]),a("div",{staticClass:"col-md-3"},[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:e.otherLanguages,multiple:!0,taggable:!1,"select-label":"","selected-label":"","deselect-label":"","close-on-select":!1,"clear-on-select":!1,searchable:!1},on:{remove:e.unpublishLanguage,select:e.publishLanguage},model:{value:e.secondaryLanguages,callback:function(t){e.secondaryLanguages=t},expression:"secondaryLanguages"}})],1)])])},Qr=[],Kr=(e={"Content-Type":"application/json","Cache-Control":"no-cache"})=>d.a.create({timeout:3e4,headers:e,responseType:"json",withCredentials:!0}),Zr={async getDefaultLanguage(){try{const e=await Kr().get("index.php?option=com_emundus&controller=translations&task=getdefaultlanguage");return e.data}catch(e){return!1}},async updateLanguage(e,t,a=0){try{const s=new FormData;return s.append("published",t),s.append("lang_code",e),s.append("default_lang",a),await Kr().post("index.php?option=com_emundus&controller=translations&task=updatelanguage",s,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){return{status:!1,msg:s.message}}},async getObjects(){try{return await Kr().get("index.php?option=com_emundus&controller=translations&task=gettranslationsobjects")}catch(e){return{status:!1,msg:e.message}}},async getDatas(e,t,a,s){try{return await Kr().get("index.php?option=com_emundus&controller=translations&task=getdatas",{params:{table:e,reference_id:t,label:a,filters:s}})}catch(o){return{status:!1,msg:o.message}}},async getChildrens(e,t,a){try{return await Kr().get("index.php?option=com_emundus&controller=translations&task=getchildrens",{params:{table:e,reference_id:t,label:a}})}catch(s){return{status:!1,msg:s.message}}},async getTranslations(e,t,a,s,o,i=""){switch(e){case"falang":try{return await Kr().get("index.php?option=com_emundus&controller=translations&task=getfalangtranslations",{params:{default_lang:t,lang_to:a,reference_table:i,reference_id:s,fields:o}})}catch(n){return{status:!1,msg:n.message}}break;case"emundus":default:}},async updateTranslations(e,t,a,s,o,i){switch(t){case"falang":try{const t=new FormData;return t.append("value",e),t.append("lang_to",a),t.append("field",o),t.append("reference_table",i),t.append("reference_id",s),await Kr().post("index.php?option=com_emundus&controller=translations&task=updatefalangtranslation",t,{headers:{"Content-Type":"multipart/form-data"}})}catch(n){return{status:!1,msg:n.message}}break;default:}}},el={name:"global",props:{},components:{Multiselect:So.a},data(){return{defaultLang:null,secondaryLanguages:[],allLanguages:[],otherLanguages:[]}},created(){Zr.getDefaultLanguage().then(e=>{this.defaultLang=e,this.getAllLanguages()})},methods:{async getAllLanguages(){try{const e=await Kr().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=e.data,this.allLanguages.forEach(e=>{e.lang_code!==this.defaultLang.lang_code&&(1==e.published&&this.secondaryLanguages.push(e),this.otherLanguages.push(e))})}catch(e){return!1}},unpublishLanguage(e){Zr.updateLanguage(e.lang_code,0)},publishLanguage(e){Zr.updateLanguage(e.lang_code,1)},updateDefaultLanguage(e){Zr.updateLanguage(e.lang_code,1,1).then(()=>{let t=this.secondaryLanguages.findIndex(t=>t.lang_code==e.lang_code);-1!==t&&this.secondaryLanguages.splice(t,1),this.getAllLanguages()})}}},tl=el,al=Object(b["a"])(tl,Xr,Qr,!1,null,"bc5cffb4",null),sl=al.exports,ol=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h2",{staticClass:"em-h4 em-mb-8"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS")))]),e.saving||null!=e.last_save?e._e():a("p",{staticClass:"em-font-size-14 em-mb-24"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE")))]),e.saving?a("p",{staticClass:"em-font-size-14 em-mb-24"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_PROGRESS")))]):e._e(),e.saving||null==e.last_save?e._e():a("p",{staticClass:"em-font-size-14 em-mb-24"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS_AUTOSAVE_LAST")+e.last_save))]),a("div",{staticClass:"em-grid-4"},[a("div",[a("multiselect",{attrs:{label:"title_native","track-by":"lang_code",options:e.availableLanguages,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_LANGUAGE"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},on:{select:e.getObjects},model:{value:e.lang,callback:function(t){e.lang=t},expression:"lang"}})],1),e.lang?a("div",[a("multiselect",{attrs:{label:"name","track-by":"name",options:e.objects,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT_OBJECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:e.object,callback:function(t){e.object=t},expression:"object"}})],1):e._e(),e.object?a("div",[a("multiselect",{attrs:{label:"label","track-by":"id",options:e.datas,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1):e._e(),e.childrens.length>0?a("div",[a("multiselect",{attrs:{label:"label","track-by":"id",options:e.childrens,multiple:!1,taggable:!1,"select-label":"","selected-label":"","deselect-label":"",placeholder:e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_SELECT"),"close-on-select":!0,"clear-on-select":!1,searchable:!1,"allow-empty":!0},model:{value:e.children,callback:function(t){e.children=t},expression:"children"}})],1):e._e()]),a("hr",{staticClass:"col-md-12",staticStyle:{"z-index":"0"}}),a("div",{staticClass:"col-md-12"},[""===e.lang||null==e.lang||""===e.object||null==e.object||0===e.translations.length?a("div",{staticClass:"text-center em-mt-80"},[a("p",{staticClass:"em-h5 em-mb-8"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_TRANSLATION_TITLE")))]),a("p",{staticClass:"em-font-size-14 em-text-neutral-600"},[e._v(e._s(e.translate("COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_NO_TRANSLATION_TEXT")))])]):a("div",{staticClass:"em-neutral-100-box"},e._l(e.translations,(function(t,s){return a("div",{staticClass:"em-mb-32"},[a("p",[e._v(e._s(e.object.fields.IndexedFields[s].Lable.toUpperCase()))]),a("div",{staticClass:"justify-content-between em-mt-16 em-grid-50"},[a("p",{staticClass:"em-neutral-700-color"},[e._v(e._s(t.default_lang))]),"field"==e.object.fields.IndexedFields[s].Type?a("input",{staticClass:"mb-0 em-input",attrs:{type:"text"},domProps:{value:t.lang_to},on:{focusout:function(t){return e.saveTranslation(t.target.value,s)}}}):e._e(),"textarea"==e.object.fields.IndexedFields[s].Type?a("textarea",{staticClass:"mb-0 em-input",domProps:{value:t.lang_to},on:{focusout:function(t){return e.saveTranslation(t.target.value,s)}}}):e._e()])])})),0)])])},il=[],nl={async getUsers(){try{const e=await Kr().get("index.php?option=com_emundus&controller=users&task=getusers");return e.data}catch(e){return{status:!1,msg:e.message}}},async getUserById(e){try{const t=await Kr().get("index.php?option=com_emundus&controller=users&task=getuserbyid",{params:{id:e}});return t.data}catch(t){return{status:!1,msg:t.message}}},async getAccessRights(e,t){try{const a=await Kr().get("index.php?option=com_emundus&controller=users&task=getattachmentaccessrights",{params:{id:e,fnum:t}});return a.data}catch(a){return{status:!1,msg:a.message}}}},rl={async getAttachmentsByUser(e){try{const t=await Kr().get("index.php?option=com_emundus&controller=application&task=getuserattachments",{params:{user_id:e}});return t.data}catch(t){return{status:!1,msg:t.message}}},async getAttachmentsByFnum(e){try{const t=await Kr().get("index.php?option=com_emundus&controller=application&task=getattachmentsbyfnum",{params:{fnum:e}});return t.data.status&&("string"===typeof t.data.attachments&&(t.data.attachments=JSON.parse(t.data.attachments)),"object"===typeof t.data.attachments&&(t.data.attachments=Object.values(t.data.attachments)),t.data.attachments.forEach(e=>{e.show=!0})),t.data}catch(t){return{status:!1,msg:t.message}}},async getAttachmentCategories(){try{const e=await Kr().get("index.php?option=com_emundus&controller=files&task=getattachmentcategories");return e.data}catch(e){return{status:!1,msg:e.message}}},async deleteAttachments(e,t,a){try{const s=new FormData;return s.append("ids",JSON.stringify(a)),await Kr().post(`index.php?option=com_emundus&controller=application&task=deleteattachement&fnum=${e}&student_id=${t}`,s,{headers:{"Content-Type":"multipart/form-data"}})}catch(s){return{status:!1,msg:s.message}}},async updateAttachment(e){try{const t=await Kr().post("index.php?option=com_emundus&controller=application&task=updateattachment",e,{headers:{"Content-Type":"multipart/form-data"}});return t.data}catch(t){return{status:!1,msg:t.message}}},async getPreview(e,t){try{const a=await Kr().get("index.php?option=com_emundus&controller=application&task=getattachmentpreview",{params:{user:e,filename:t}});return a.data}catch(a){return{status:!1,msg:a.message}}},exportAttachments(e,t,a){const s=new FormData;return s.append("student_id",e),s.append("fnum",t),a.forEach(e=>{s.append("ids[]",e)}),Kr().post("index.php?option=com_emundus&controller=application&task=exportpdf",s,{headers:{"Content-Type":"multipart/form-data"}})}},ll={methods:{formattedDate:function(e="",t="LLLL"){return""!==e?y()(e).format(t):y()().format(t)},getUserNameById:function(e){let t="";if(e&&e.length>0){const a=this.$store.state.user.users[e];a?t=a.firstname+" "+a.lastname:nl.getUserById(e).then(a=>{a.status&&a.user[0]&&(t=a.user[0].firstname+" "+a.user[0].lastname,a.user[0].id=e,this.$store.dispatch("user/setUsers",a.user))})}return t},async getAttachmentCategories(){const e=await rl.getAttachmentCategories();return!0===e.status?(Object.entries(e.categories).forEach(([t,a])=>{e.categories[t]=this.translate(a)}),delete e.categories[""],this.$store.dispatch("attachment/setCategories",e.categories),this.$store.state.attachment.categories):{}}}},dl=ll,cl={name:"Translations",components:{Multiselect:So.a},mixins:[dl],data(){return{defaultLang:null,availableLanguages:[],objects:[],datas:[],childrens:[],translations:[],lang:null,object:null,data:null,children:null,saving:!1,last_save:null}},created(){Zr.getDefaultLanguage().then(e=>{this.defaultLang=e,this.getAllLanguages()})},methods:{async getAllLanguages(){try{const e=await Kr().get("index.php?option=com_emundus&controller=translations&task=getlanguages");this.allLanguages=e.data,this.allLanguages.forEach(e=>{e.lang_code!==this.defaultLang.lang_code&&1==e.published&&this.availableLanguages.push(e)})}catch(e){return!1}},async getObjects(){this.translations=[],this.childrens=[],this.datas=[],this.objects=[],this.object=null,this.data=null,this.children=null,Zr.getObjects().then(e=>{this.objects=e.data})},async saveTranslation(e,t){this.saving=!0,Zr.updateTranslations(e,this.object.table.type,this.lang.lang_code,this.data.id,t,this.object.table.name).then(e=>{this.last_save=this.formattedDate("","LT"),this.saving=!1})}},watch:{object:function(e){this.translations=[],this.childrens=[],this.children=null,this.data=null,null!=e?Zr.getDatas(e.table.name,e.table.reference,e.table.label,e.table.filters).then(e=>{this.datas=e.data}):this.datas=[]},data:function(e){this.translations=[],this.childrens=[],this.children=null;var t=!1;if(null!=e&&(this.object.fields.Fields.forEach(e=>{"children"===e.Type&&(t=!0,Zr.getChildrens(e.Lable,this.data.id,e.Name).then(e=>{this.childrens=e.data}))}),!t)){const t=Object.keys(this.object.fields.IndexedFields).join(",");Zr.getTranslations(this.object.table.type,this.defaultLang.lang_code,this.lang.lang_code,e.id,t,this.object.table.name).then(e=>{this.translations=e.data})}}}},ml=cl,ul=Object(b["a"])(ml,ol,il,!1,null,"65723498",null),pl=ul.exports,_l={name:"translationTool",props:{},components:{Translations:pl,Global:sl},data(){return{currentMenu:1,menus:[{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_GLOBAL",index:1},{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_TRANSLATIONS",index:2},{title:"COM_EMUNDUS_ONBOARD_TRANSLATION_TOOL_ORPHELINS",index:3}]}},methods:{beforeClose(e){this.$emit("resetMenuIndex")}}},hl=_l,gl=Object(b["a"])(hl,Yr,Wr,!1,null,"377bb04c",null),fl=gl.exports;const bl=a("bef5");var vl={name:"globalSettings",components:{TranslationTool:fl,EditApplicants:Vr,HelpSettings:jr,Tasks:Le,editStatus:Ki,editTags:nn,editCGV:Tr,editFooter:Jr,editHomepage:Cn,editStyle:Vn,editDatas:hr,editUsers:Dr},props:{actualLanguage:String,coordinatorAccess:Number,manyLanguages:Number},data:()=>({menuHighlight:0,currentTitle:"",langue:0,saving:!1,endSaving:!1,menus:[{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STYLE",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STYLE_DESC",icon:"style",index:1},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_HOMEPAGE",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_HOMEPAGE_DESC",icon:"home",index:2},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TERMS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TERMS_DESC",icon:"tune",index:3},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_FOOTER",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_FOOTER_DESC",icon:"info",index:4},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STATUS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_STATUS_DESC",icon:"bookmark_border",index:5},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TAGS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TAGS_DESC",icon:"label",index:6},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_APPLICANTS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_APPLICANTS_DESC",icon:"people",index:7},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_DATAS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_DATAS_DESC",icon:"list",index:8},{title:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TRANSLATIONS",description:"COM_EMUNDUS_ONBOARD_SETTINGS_MENU_TRANSLATIONS_DESC",icon:"language",index:9}],settingsCategories:[["Style","Page d'accueil","Conditions générales","Pied de page","Statuts","Etiquettes","Candidats","Référentiels de données"],["Styling","Home page","General Terms and Conditions","Footer","Status","Tags","Applicants","Data repository"]],Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),Save:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVE"),Saved:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVED"),Settings:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADDCAMP_PARAMETER")}),methods:{updateStatus(e){this.updateLoading(!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updatestatus",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:bl.stringify({status:e})}).then(()=>{this.updateLoading(!1)})},updateTags(e){this.updateLoading(!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updatetags",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:bl.stringify({tags:e})}).then(()=>{this.updateLoading(!1)})},updateFooter(e){this.updateLoading(!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updatefooter",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:bl.stringify({content:e})}).then(()=>{this.updateLoading(!1)})},updateHomepage(e,t,a){this.updateLoading(!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updatehomepage",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:bl.stringify({content:e,label:t,color:a})}).then(()=>{this.updateLoading(!1)})},updateCgv(e){this.updateLoading(!0),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=settings&task=updatecgv",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:bl.stringify({content:e})}).then(()=>{this.updateLoading(!1)})},saveCurrentPage(){switch(this.menuHighlight){case 1:this.updateHomepage(this.$refs.homepage.$data.form.content,this.$refs.homepage.$data.form.label,this.$refs.homepage.$data.form.titleColor);break;case 2:this.updateCgv(this.$refs.cgv.$data.form.content);break;case 3:this.updateFooter(this.$refs.footer.$data.form.content);break;case 4:this.updateStatus(this.$refs.status.$data.status);break;case 5:this.updateTags(this.$refs.tags.$data.tags);break;case 6:this.updateLoading(!0),setTimeout(()=>{this.updateLoading(!1)},500);break}},updateLoading(e){this.saving=e,!1===this.saving&&setTimeout(()=>{this.endSaving=!0},500),setTimeout(()=>{this.endSaving=!1},3e3)}},created(){"en"==this.actualLanguage&&(this.langue=1)},watch:{menuHighlight:function(e){9===e&&this.$modal.show("translationTool")}}},Cl=vl,Ol=(a("9919"),Object(b["a"])(Cl,$i,Gi,!1,null,"703d5686",null)),Dl=Ol.exports,El=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),-1!=e.indexHighlight?a("div",[a("ModalAffectCampaign",{attrs:{prid:e.prid,testing:e.testing}}),e.formObjectArray[e.indexHighlight]?a("ModalTestingForm",{attrs:{profileId:e.prid,actualLanguage:e.actualLanguage,campaigns:e.campaignsAffected,currentForm:e.formObjectArray[e.indexHighlight].object.id,currentMenu:e.formObjectArray[e.indexHighlight].object.menu_id},on:{testForm:e.testForm,modalClosed:function(t){e.optionsModal=!1}}}):e._e(),a("ModalMenu",{attrs:{profileId:e.prid,actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages,languages:e.languages},on:{AddMenu:e.pushMenu,modalClosed:function(t){e.optionsModal=!1}}}),e._l(e.formObjectArray,(function(t,s){return a("ModalSide",{directives:[{name:"show",rawName:"v-show",value:e.formObjectArray[e.indexHighlight],expression:"formObjectArray[indexHighlight]"}],key:s,attrs:{ID:t.rgt,element:t.object,link:e.formObjectArray[e.indexHighlight].link,menus:e.formObjectArray,index:s,files:e.files,actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages,languages:e.languages},on:{show:e.show,UpdateUx:e.UpdateUXT,UpdateName:e.UpdateName,UpdateIntro:e.UpdateIntro,UpdateVue:e.updateFormObjectAndComponent,removeMenu:e.removeMenu,modalClosed:function(t){e.optionsModal=!1}}})})),a("ModalAddDocuments",{attrs:{pid:e.prid,currentDoc:e.currentDoc,langue:e.actualLanguage,manyLanguages:e.manyLanguages},on:{modalClosed:function(t){e.optionsModal=!1},UpdateDocuments:e.getDocuments}})],2):e._e(),-1!=e.indexHighlight?a("div",{staticClass:"row"},[a("div",{staticClass:"sidebar-formbuilder",style:e.actions_menu?"width: 250px":""},[a("transition",{attrs:{name:"move-right"}},[a("div",{staticClass:"actions-menu menu-block"},[a("a",{staticClass:"d-flex back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:e.translations.Back}},[e._v(" "+e._s(e.translations.BuildYourForm)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("div",[a("div",{staticClass:"action-links"},[a("a",{staticClass:"d-flex action-link",staticStyle:{"padding-top":"2em"},attrs:{title:e.translations.addMenu},on:{click:function(t){return e.$modal.show("modalMenu")}}},[a("em",{staticClass:"add-page-icon"}),a("label",{staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[e._v(e._s(e.translations.addMenu))])]),a("a",{staticClass:"d-flex action-link",attrs:{title:e.translations.addGroup},on:{click:function(t){return e.createGroup()}}},[a("em",{staticClass:"add-group-icon"}),a("label",{staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[e._v(e._s(e.translations.addGroup))])]),a("a",{staticClass:"d-flex action-link",class:{"disable-element":e.elementDisabled},attrs:{title:e.translations.addItem},on:{click:e.showElements}},[a("em",{staticClass:"add-element-icon"}),a("label",{staticClass:"action-label col-md-offset-1 col-sm-offset-1",class:[{"disable-element":e.elementDisabled},e.addingElement?"down-arrow":"right-arrow"]},[e._v(e._s(e.translations.addItem))])]),a("transition",{attrs:{name:"slide-right",type:"transition"}},[e.addingElement?a("div",{staticClass:"plugins-list"},[a("a",{staticClass:"d-flex col-md-offset-1 back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:e.Back},on:{click:function(t){e.addingElement=!e.addingElement}}},[a("em",{staticClass:"fas fa-arrow-left mr-1"}),e._v(" "+e._s(e.translations.Back)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("draggable",e._b({staticStyle:{"padding-bottom":"2em","margin-top":"10%"},attrs:{handle:".handle","drag-class":"plugin-drag","chosen-class":"plugin-chosen","ghost-class":"plugin-ghost"},on:{start:function(t){e.startDragging(),e.dragging=!0,e.draggingIndex=e.index},end:function(t){return e.addingNewElement(t)}},model:{value:e.plugins,callback:function(t){e.plugins=t},expression:"plugins"}},"draggable",e.dragOptions,!1),e._l(e.plugins,(function(t,s){return a("div",{staticClass:"d-flex plugin-link col-md-offset-1 col-sm-offset-1 handle",attrs:{id:"plugin_"+t.value,title:t.name},on:{dblclick:function(a){return e.addingNewElementByDblClick(t.value)}}},[a("em",{class:t.icon}),a("span",{staticClass:"ml-10px"},[e._v(e._s(t.name))])])})),0)],1):e._e()])],1)])])])],1),a("div",{staticClass:"menu-block",class:e.actions_menu?"col-md-8 col-md-offset-4 col-sm-9 col-sm-offset-3":""},[a("div",{staticClass:"heading-block",class:e.addingElement||e.actions_menu?"col-md-6":"col-md-8"},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.updateFormLabel,expression:"!updateFormLabel"}],staticClass:"d-flex form-title-block"},[a("h2",{staticClass:"form-title",staticStyle:{padding:"0",margin:"0"},on:{click:e.enableUpdatingForm}},[e._v(e._s(e.profileLabel))]),a("a",{staticClass:"cta-block pointer",staticStyle:{"margin-left":"1em"},attrs:{title:e.Edit},on:{click:e.enableUpdatingForm}},[a("em",{staticClass:"fas fa-pen",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.updateFormLabel,expression:"updateFormLabel"}],staticStyle:{width:"max-content","margin-left":"20px"}},[a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.profileLabel,expression:"profileLabel"}],staticClass:"form__input field-general w-input",staticStyle:{width:"400px"},attrs:{id:"update_label_form_"+e.prid},domProps:{value:e.profileLabel},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateLabelForm()},input:function(t){t.target.composing||(e.profileLabel=t.target.value)}}}),a("div",{staticClass:"d-flex actions-update-label ml-10px"},[a("a",{attrs:{title:e.translations.Validate},on:{click:function(t){return e.updateLabelForm()}}},[a("em",{staticClass:"fas fa-check mr-1",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])])])]),0===e.menuHighlight?a("div",{staticClass:"form-builder"},[a("div",{staticClass:"form-viewer-builder",class:[e.addingElement||e.actions_menu?"col-sm-offset-5 col-md-offset-4 col-lg-offset-1 col-sm-7 col-md-6":"col-md-8",e.optionsModal?"col-sm-5 col-md-6":"col-md-8"]},[e.formObjectArray[e.indexHighlight]?a("Builder",{key:e.builderKey,ref:"builder",attrs:{object:e.formObjectArray[e.indexHighlight],UpdateUx:e.UpdateUx,rgt:e.rgt,prid:e.prid,eval:0,files:e.files,actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages},on:{show:e.show,UpdateFormBuilder:e.updateFormObjectAndComponent,removeGroup:e.removeGroup,modalClosed:function(t){e.optionsModal=!1},modalOpen:function(t){e.optionsModal=!0}}}):e._e()],1)]):e._e(),1===e.menuHighlight?a("div",{staticClass:"form-builder"},[a("div",{staticClass:"form-viewer-builder",class:[e.addingElement||e.actions_menu?"col-sm-offset-5 col-md-offset-4 col-lg-offset-1 col-sm-7 col-md-6":"col-md-8",e.optionsModal?"col-sm-5 col-md-6":"col-md-8"]},[e.submittionPages[e.indexHighlight]?a("Builder",{key:e.builderSubmitKey,ref:"builder_submit",attrs:{object:e.submittionPages[e.indexHighlight],UpdateUx:e.UpdateUx,rgt:e.rgt,prid:e.prid,eval:0,files:e.files,actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages},on:{show:e.show,UpdateFormBuilder:e.updateFormObjectAndComponent,removeGroup:e.removeGroup,modalClosed:function(t){e.optionsModal=!1},modalOpen:function(t){e.optionsModal=!0}}}):e._e()],1)]):e._e(),e.formObjectArray?a("ul",{staticClass:"col-md-3 sticky-form-pages",class:[e.addingElement||e.actions_menu&&e.formList.length>0?"ml-10px col-sm-offset-5 col-sm-7":"",e.optionsModal?"col-sm-5":"",0===e.formList.length?"col-sm-offset-5 col-sm-7":""],staticStyle:{"margin-top":"0"}},[a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("h3",{staticClass:"mb-0",staticStyle:{padding:"0"}},[e._v(e._s(e.translations.FormPage))]),a("label",{staticClass:"saving-at"},[e._v(e._s(e.translations.Savingat)+" "+e._s(e.lastUpdate)),a("em",{staticClass:"fas fa-sync ml-10px"})])]),a("div",{staticClass:"form-pages"},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{"margin-bottom":"0",padding:"0"}},[a("img",{staticClass:"mr-1",attrs:{src:"/images/emundus/menus/form.png",alt:e.translations.Form}}),e._v(e._s(e.translations.Form))]),a("draggable",{class:"draggables-list",attrs:{handle:".handle"},on:{end:e.SomethingChange},model:{value:e.formList,callback:function(t){e.formList=t},expression:"formList"}},e._l(e.formList,(function(t,s){return a("li",{key:s,staticClass:"MenuForm",on:{mouseover:function(t){return e.enableGrab(s)},mouseleave:function(t){return e.disableGrab()}}},[a("span",{staticClass:"icon-handle",style:e.grab&&e.indexGrab==s?"opacity: 1":"opacity: 0"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("a",{staticClass:"MenuFormItem",class:e.indexHighlight==s&&0===e.menuHighlight?"MenuFormItem_current":"",attrs:{title:t.label},on:{click:function(a){e.changeGroup(s,t.rgt),e.menuHighlight=0}}},[e._v(" "+e._s(t.label)+" ")])])})),0),a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{"margin-left":"30px"},attrs:{title:e.translations.addMenuAction},on:{click:function(t){e.$modal.show("modalMenu"),e.optionsModal=!0}}},[e._v(e._s(e.translations.addMenuAction))])],1),a("div",{staticClass:"form-pages"},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{"margin-bottom":"10px",padding:"0"}},[a("em",{staticClass:"far fa-folder-open mr-1",attrs:{alt:e.translations.Documents}}),e._v(e._s(e.translations.Documents))]),a("draggable",{class:"draggables-list",attrs:{handle:".handle"},on:{end:e.reorderingDocuments},model:{value:e.documentsList,callback:function(t){e.documentsList=t},expression:"documentsList"}},e._l(e.documentsList,(function(t,s){return 1==t.displayed?a("li",{key:s,staticClass:"MenuForm",on:{mouseover:function(t){return e.enableGrabDocuments(s)},mouseleave:function(t){return e.disableGrabDocuments()}}},[a("span",{staticClass:"icon-handle",style:e.grabDocs&&e.indexGrabDocuments==s?"opacity: 1":"opacity: 0"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),a("a",{staticClass:"MenuFormItem",attrs:{title:t.label}},[e._v(" "+e._s(t.label)),1==t.mandatory?a("span",{staticStyle:{color:"red"}},[e._v("*")]):e._e()]),a("a",{staticClass:"cta-block pointer",style:e.grabDocs&&e.indexGrabDocuments==s?"opacity: 1":"opacity: 0",on:{click:function(a){return e.removeDocument(s,t.id)}}},[a("i",{staticClass:"fas fa-times",staticStyle:{width:"15px",height:"15px"}})]),a("a",{staticClass:"cta-block pointer",style:e.grabDocs&&e.indexGrabDocuments==s?"opacity: 1":"opacity: 0",attrs:{title:e.translations.Edit},on:{click:function(a){e.currentDoc=t.docid,e.$modal.show("modalAddDocuments"),e.optionsModal=!0}}},[a("em",{staticClass:"fas fa-pen",staticStyle:{width:"15px",height:"14px"},attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]):e._e()})),0),a("button",{staticClass:"bouton-sauvergarder-et-continuer",staticStyle:{"margin-left":"30px"},attrs:{title:e.translations.AddNewDocument},on:{click:function(t){e.currentDoc=null,e.$modal.show("modalAddDocuments"),e.optionsModal=!0}}},[e._v(e._s(e.translations.AddNewDocument))])],1),e.submittionPages?a("div",{staticClass:"form-pages",staticStyle:{"padding-top":"20px"}},[a("h4",{staticClass:"ml-10px form-title",staticStyle:{"margin-bottom":"10px",padding:"0"}},[a("img",{staticClass:"mr-1",attrs:{src:"/images/emundus/menus/confirmation.png",alt:e.translations.SubmitPage}}),e._v(e._s(e.translations.SubmitPage))]),e._l(e.submittionPages,(function(t,s){return a("li",{key:s,staticClass:"MenuForm"},[a("a",{staticClass:"MenuFormItem",class:e.indexHighlight==s&&1===e.menuHighlight?"MenuFormItem_current":"",staticStyle:{"margin-left":"5px"},attrs:{title:""!=t.object.show_title.value?t.object.show_title.value:e.translations.SubmittionPage},on:{click:function(t){e.menuHighlight=1,e.indexHighlight=s}}},[e._v(" "+e._s(t.object.show_title.value?t.object.show_title.value:e.translations.SubmittionPage)+" ")])])}))],2):e._e(),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer bouton-sauvergarder-et-continuer-green mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:e.Validate},on:{click:e.sendForm}},[e._v(e._s(e.translations.Validate))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:e.translations.Validate},on:{click:e.exitForm}},[e._v(e._s(e.translations.ExitFormbuilder))])])]):e._e()])]):e._e(),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},yl=[],xl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid",attrs:{id:"FormBuilder"}},[a("div",{staticClass:"row"},[e.object_json?a("BuilderViewer",{key:e.builderViewKey,ref:"builder_viewer",staticClass:"col-md-12",attrs:{object:e.object,groups:e.GroupList,change:this.change,changedElement:this.changedElement,changedGroup:this.changedGroup,UpdateUx:e.UpdateUx,files:e.files,prid:e.prid,eval:e.eval,actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages},on:{show:e.show,modalClosed:function(t){return e.$emit("modalClosed")},modalOpen:function(t){return e.$emit("modalOpen")},UpdateUxf:e.UpdateUXF}}):e._e()],1)])},Nl=[],Ul=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"BuilderViewer",attrs:{id:"BuilderViewer"}},[a("link",{attrs:{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/4.17.37/css/bootstrap-datetimepicker.min.css"}}),e.object_json.show_page_heading?a("div",{class:e.object_json.show_page_heading.class,domProps:{innerHTML:e._s(e.object_json.show_page_heading.page_heading)}}):e._e(),0!=e.eval||e.updatePage?e._e():a("div",{staticClass:"d-flex header-form-page mb-1"},[e.object_json.show_title?a("h2",{staticClass:"page_header mr-1",domProps:{innerHTML:e._s(e.object_json.show_title.value)},on:{click:function(t){return e.enableUpdatingPage(e.object_json)}}}):e._e(),a("span",{staticClass:"cta-block pointer",staticStyle:{"font-size":"16px"},attrs:{title:e.translations.Edit},on:{click:function(t){e.$emit("modalOpen"),e.$modal.show("modalSide"+e.object.rgt)}}},[a("em",{staticClass:"fas fa-pen",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.updatePage&&e.indexPage==e.object_json.id,expression:"updatePage && indexPage == object_json.id"}],staticStyle:{width:"max-content","margin-left":"20px"}},[a("div",{staticClass:"input-can-translate",staticStyle:{"margin-top":"40px"}},[e.object_json.show_title?a("input",{directives:[{name:"model",rawName:"v-model",value:e.object_json.show_title.label[e.actualLanguage],expression:"object_json.show_title.label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:e.translate.label_page?"":"mb-1",staticStyle:{width:"400px"},attrs:{id:"update_input_"+e.object_json.id},domProps:{value:e.object_json.show_title.label[e.actualLanguage]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateLabelPage(e.object_json)},input:function(t){t.target.composing||e.$set(e.object_json.show_title.label,e.actualLanguage,t.target.value)}}}):e._e(),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:e.translate.label_page?"translate-icon-selected":" translate-builder",attrs:{type:"button"},on:{click:function(t){return e.enableTranslationPage(e.object_json.id)}}}):e._e(),a("div",{staticClass:"d-flex actions-update-label",class:"0"!==e.manyLanguages?"":"ml-10px",style:e.translate.label_page?"margin-bottom: 6px":"margin-bottom: 12px"},[a("a",{attrs:{title:e.translations.Validate},on:{click:function(t){return e.updateLabelPage(e.object_json)}}},[a("em",{staticClass:"fas fa-check mr-1",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])]),e.object_json.show_title&&e.translate.label_page?a("translation",{attrs:{label:e.object_json.show_title.label,actualLanguage:e.actualLanguage}}):e._e()],1),0!=e.eval||e.updateIntroPage?e._e():a("p",{staticClass:"introP",domProps:{innerHTML:e._s(e.object_json.intro_value)}}),a("form",{staticClass:"form-page",style:1==e.eval?"margin-top: 30px":"",attrs:{method:"post","object_json.attribs":"",id:"form_"+e.object_json.id},on:{submit:function(e){e.preventDefault()}}},[e.object_json.plugintop?a("div",{domProps:{innerHTML:e._s(e.object_json.plugintop)}}):e._e(),a("draggable",{staticClass:"groups-block",attrs:{handle:".handle"},on:{start:e.startGroupDrag,end:e.SomethingChangeInGroup},model:{value:e.groups,callback:function(t){e.groups=t},expression:"groups"}},e._l(e.orderedGroups,(function(t,s){return a("div",{key:t.index,staticClass:"group-item-block",on:{mouseover:function(a){return e.enableGroupHover(t.group_id)},mouseleave:function(t){return e.disableGroupHover()}}},[a("fieldset",{class:[t.group_class],staticStyle:{"background-size":"20px",width:"100%"},style:-1==t.hidden_group?"background: #e3e3e3;":"",attrs:{id:"group_"+t.group_id}},[-1==t.hidden_group?a("div",{staticClass:"hidden-notice d-flex"},[a("i",{staticClass:"fas fa-exclamation-circle"}),a("span",{staticClass:"ml-10px"},[e._v(e._s(e.translations.HiddenGroup))])]):e._e(),a("div",{staticClass:"d-flex justify-content-between",class:e.updateGroup&&e.indexGroup==t.group_id?"hidden":"",staticStyle:{width:"100%"}},[a("div",{staticClass:"d-flex justify-content-between",staticStyle:{width:"100%"}},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.hoverGroup&&e.indexGroup==t.group_id,expression:"hoverGroup && indexGroup == group.group_id"}],staticClass:"icon-handle-group"},[a("em",{staticClass:"fas fa-grip-vertical handle"})]),t.group_showLegend?a("legend",{staticClass:"legend ViewerLegend",on:{click:function(a){return e.enableUpdatingGroup(t)}}},[e._v(" "+e._s(t.group_showLegend)+" ")]):e._e(),a("div",{staticClass:"d-flex"},[a("a",{staticClass:"group-repeat-icon ml-10px pointer",class:t.repeat_group?"active-repeat":"",attrs:{title:e.translations.RepeatedGroup},on:{click:function(a){return e.enableRepatedGroup(t)}}},[a("em",{staticClass:"fas fa-clone",attrs:{"data-toggle":"tooltip","data-placement":"top"}})]),a("v-popover",{attrs:{popoverArrowClass:"custom-popover-arrow"}},[a("button",{staticClass:"tooltip-target b3 card-button"}),a("template",{slot:"popover"},[a("div",{staticClass:"container-2 w-container",staticStyle:{"max-width":"unset"}},[a("transition",{attrs:{name:"slide-down",type:"transition"}},[a("div",[a("nav",{staticClass:"actions-dropdown pointer",attrs:{"aria-label":"action"}},[a("a",{staticClass:"action-submenu",on:{click:function(a){return e.enableUpdatingGroup(t)}}},[e._v(" "+e._s(e.translations.EditName)+" ")]),a("a",{staticClass:"action-submenu",on:{click:function(a){return e.displayHideGroup(t)}}},[e._v(" "+e._s(e.translations.DisplayHide)+" ")]),0!=e.files||t.cannot_delete?e._e():a("a",{staticClass:"action-submenu",attrs:{title:e.translations.Delete},on:{click:function(a){return e.deleteAGroup(t,s)}}},[e._v(" "+e._s(e.translations.Delete)+" ")])])])])],1)])],2)],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.updateGroup&&e.indexGroup==t.group_id,expression:"updateGroup && indexGroup == group.group_id"}],staticStyle:{width:"max-content"}},[a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.label[e.actualLanguage],expression:"group.label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:e.translate.label_group?"":"mb-1",staticStyle:{width:"400px"},attrs:{id:"update_input_"+t.group_id},domProps:{value:t.label[e.actualLanguage]},on:{keyup:function(a){return!a.type.indexOf("key")&&e._k(a.keyCode,"enter",13,a.key,"Enter")?null:e.updateLabelGroup(t)},input:function(a){a.target.composing||e.$set(t.label,e.actualLanguage,a.target.value)}}}),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:e.translate.label_group?"translate-icon-selected":" translate-builder",attrs:{type:"button"},on:{click:function(a){return e.enableTranslationGroup(t.group_id)}}}):e._e(),a("div",{staticClass:"d-flex actions-update-label",class:"0"!==e.manyLanguages?"":"ml-10px",style:e.translate.label_group?"margin-bottom: 6px":"margin-bottom: 12px"},[a("a",{attrs:{title:e.translations.Validate},on:{click:function(a){return e.updateLabelGroup(t)}}},[a("em",{staticClass:"fas fa-check mr-1",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])]),e.translate.label_group?a("translation",{attrs:{label:t.label,actualLanguage:e.actualLanguage}}):e._e()],1),t.group_intro?a("div",{staticClass:"groupintro",domProps:{innerHTML:e._s(t.group_intro)}}):e._e(),"undefined"!==typeof t.elts?[0==t.elts.length?a("div",{staticClass:"no-elements-tip"},[e._v(e._s(e.translations.NoElementsTips))]):e._e()]:e._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:e.openGroup[t.group_id],expression:"openGroup[group.group_id]"}],staticClass:"elements-block"},[a("draggable",{staticClass:"draggable-span",attrs:{handle:".handle",group:"items"},on:{start:function(t){e.draggable=!0},end:e.SomethingChange},model:{value:t.elts,callback:function(a){e.$set(t,"elts",a)},expression:"group.elts"}},[a("transition-group",{attrs:{name:"slide-down",type:"transition"}},e._l(t.elts,(function(s,o){return a("div",{directives:[{name:"show",rawName:"v-show",value:!1===s.hidden,expression:"element.hidden === false"}],key:s.id,staticClass:"builder-item-element",on:{mouseover:function(t){return e.enableActionBar(s.id)},mouseleave:function(t){return e.disableActionBar()}}},[a("modalEditElement",{key:e.keyElements["element"+s.id],attrs:{ID:s.id,gid:s.group_id,files:e.files,manyLanguages:e.manyLanguages,actualLanguage:e.actualLanguage,id:s.id,profileId:e.prid},on:{reloadElement:function(t){return e.reloadElement(s)},publishUnpublishEvent:function(t){return e.publishUnpublishEvent(s)},updateRequireEvent:function(t){return e.updateRequireEvent(s)},modalClosed:function(t){return e.$emit("modalClosed")},show:e.show}}),a("modalDuplicateElement",{key:e.keyElements["element"+s.id],attrs:{ID:s.id,currentGroup:t.group_id,currentPage:e.object_json.id,id:s.id,prid:e.prid},on:{reloadElement:function(t){return e.reloadElement(s)},modalClosed:function(t){return e.$emit("modalClosed")}}}),a("div",{staticClass:"d-flex builder-item-element__properties",class:{"element-updating":e.hoverUpdating&&e.indexHighlight==s.id,unpublished:!s.publish,"draggable-item":e.draggable&&e.indexHighlight==s.id,handle:!e.clickUpdatingLabel}},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"d-flex",class:e.clickUpdatingLabel&&e.indexHighlight==s.id?"hidden":"",staticStyle:{"align-items":"baseline"}},[s.label_value?a("span",{directives:[{name:"show",rawName:"v-show",value:2!=s.labelsAbove,expression:"element.labelsAbove != 2"}],domProps:{innerHTML:e._s(s.label_value)},on:{click:function(t){return e.enableLabelInput(s.id)}}}):e._e(),a("a",{staticClass:"cta-block pointer",staticStyle:{"font-size":"16px"},style:e.hoverUpdating&&e.indexHighlight==s.id&&!e.clickUpdatingLabel?"opacity: 1":"opacity: 0",attrs:{title:e.translations.Edit},on:{click:function(t){return e.enableLabelInput(s.id)}}},[a("em",{staticClass:"fas fa-pen ml-10px",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.clickUpdatingLabel&&e.indexHighlight==s.id,expression:"clickUpdatingLabel && indexHighlight == element.id"}],staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.label[e.actualLanguage],expression:"element.label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:e.translate.label?"":"mb-1",attrs:{id:"label_"+s.id},domProps:{value:s.label[e.actualLanguage]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateLabelElement(s)},input:function(t){t.target.composing||e.$set(s.label,e.actualLanguage,t.target.value)}}}),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:e.translate.label?"translate-icon-selected":" translate-builder",attrs:{type:"button"},on:{click:function(t){return e.enableTranslationLabel(s.id)}}}):e._e(),a("div",{staticClass:"d-flex actions-update-label",class:"0"!==e.manyLanguages?"":"ml-10px",style:e.translate.label?"margin-bottom: 6px":"margin-bottom: 12px"},[a("a",{attrs:{title:e.translations.Validate},on:{click:function(t){return e.updateLabelElement(s)}}},[a("em",{staticClass:"fas fa-check",attrs:{"data-toggle":"tooltip","data-placement":"top"}})])])]),e.translate.label&&e.clickUpdatingLabel&&e.indexHighlight==s.id?a("translation",{attrs:{label:s.label,actualLanguage:e.actualLanguage}}):0==s.labelsAbove?a("div",{staticClass:"controls"},[s.error?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:e._s(s.error)}}):e._e(),s.element?a("div",{class:s.errorClass,domProps:{innerHTML:e._s(s.element)}}):e._e(),s.tipSide?a("span",{domProps:{innerHTML:e._s(s.tipSide)}}):e._e()]):a("span",{staticClass:"d-flex w-100"},[s.element?a("div",{staticClass:"fabrikElement",domProps:{innerHTML:e._s(s.error)}}):e._e(),s.element?a("div",{staticClass:"w-100",class:s.errorClass,domProps:{innerHTML:e._s(s.element)}}):e._e(),s.tipSide?a("span",{domProps:{innerHTML:e._s(s.tipSide)}}):e._e()]),s.tipBelow?a("span",{domProps:{innerHTML:e._s(s.tipBelow)}}):e._e()],1),a("div",{staticClass:"actions-item-bar",style:e.hoverUpdating&&e.indexHighlight==s.id?"opacity: 1":"opacity: 0"},["calc"!=s.plugin?a("a",{staticClass:"d-flex mr-2 mb-1",attrs:{title:e.translations.Settings},on:{click:function(t){return e.openParameters(s)}}},[a("em",{staticClass:"fas fa-cog settings-elt"})]):e._e(),0==e.files?a("a",{staticClass:"d-flex mr-2",staticStyle:{color:"red"},attrs:{title:e.translations.Delete},on:{click:function(t){return e.deleteElement(s,o)}}},[a("em",{staticClass:"fas fa-trash-alt delete-icon-elt"})]):e._e(),e.sysaccess?a("a",{staticClass:"d-flex mr-2 mt-1",attrs:{target:"_blank",href:"/administrator/index.php?option=com_fabrik&view=element&layout=edit&id="+s.id}},[a("em",{staticClass:"fas fa-link settings-elt"})]):e._e()]),"display"!=s.plugin?a("a",{staticClass:"d-flex mr-2",style:e.hoverUpdating&&e.indexHighlight==s.id?"opacity: 1":"opacity: 0"},[a("div",{staticClass:"toggle"},[a("input",{directives:[{name:"model",rawName:"v-model",value:s.FRequire,expression:"element.FRequire"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(s.FRequire)?e._i(s.FRequire,null)>-1:s.FRequire},on:{click:function(t){return e.updateRequireElement(s)},change:function(t){var a=s.FRequire,o=t.target,i=!!o.checked;if(Array.isArray(a)){var n=null,r=e._i(a,n);o.checked?r<0&&e.$set(s,"FRequire",a.concat([n])):r>-1&&e.$set(s,"FRequire",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(s,"FRequire",i)}}}),a("strong",{staticClass:"b switch"}),a("strong",{staticClass:"b track"})]),a("span",{staticClass:"ml-10px",staticStyle:{color:"black"}},[e._v(e._s(e.translations.Required)+" ")])]):e._e()])],1)})),0)],1)],1),t.group_outro?a("div",{staticClass:"groupoutro",domProps:{innerHTML:e._s(e.group_outro)}}):e._e()],2)])})),0),e.object_json.pluginbottom?a("div",{domProps:{innerHTML:e._s(e.object_json.pluginbottom)}}):e._e()],1)])},Tl=[],Al=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalDuplicateElement"}},[a("modal",{attrs:{name:"modalDuplicateElement"+e.ID,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalDuplicateElement"+e.ID)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.DuplicateElement)+" ")]),a("p",[e._v(e._s(e.Target))])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group mb-2"},[a("label",[e._v(e._s(e.Page)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.page,expression:"page"}],staticClass:"dropdown-toggle",class:{"is-invalid":e.errors.page},attrs:{id:"select_page"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.page=t.target.multiple?a:a[0]}}},e._l(e.pages,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(" "+e._s(t.label)+" ")])})),0)]),e.errors.page?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.PageRequired))])]):e._e(),a("transition",{attrs:{name:"slide-down",type:"transition"}},[-1!==e.page&&e.groups.length>1?a("div",{staticClass:"form-group mb-2"},[a("label",[e._v(e._s(e.Group)+"* :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.group,expression:"group"}],staticClass:"dropdown-toggle",class:{"is-invalid":e.errors.group},attrs:{id:"select_group"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.group=t.target.multiple?a:a[0]}}},e._l(e.groups,(function(t,s){return a("option",{key:s,domProps:{value:t.id}},[e._v(" "+e._s(t.label)+" ")])})),0)]):e._e()]),e.errors.group?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.GroupRequired))])]):e._e()],1),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalDuplicateElement"+e.ID)}}},[e._v(" "+e._s(e.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.duplicate()}}},[e._v(e._s(e.Continuer))])]),e.submitted?a("div",{staticClass:"loading-form",staticStyle:{top:"10vh"}},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()])],1)},Ml=[];const Rl=a("bef5");var Sl={name:"modalDuplicateElement",props:{ID:Number,prid:String,currentGroup:Number,currentPage:Number},data(){return{page:-1,group:-1,pages:[],groups:[],errors:{page:!1,group:!1},DuplicateElement:Joomla.JText._("COM_EMUNDUS_ONBOARD_DUPLICATE_ELEMENT"),Page:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDMENU"),Group:Joomla.JText._("COM_EMUNDUS_ONBOARD_GROUP"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVE"),PageRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_REQUIRED_FORM"),GroupRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_REQUIRED_GROUP"),Target:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_TARGET")}},methods:{beforeClose(e){!0===this.changes&&this.$emit("show","foo-velocity","warn",this.dataSaved,this.informations),this.$emit("modalClosed"),this.changes=!1},beforeOpen(e){this.page=-1,this.group=-1,this.errors={page:!1,group:!1},this.getFormPages()},duplicate(){return this.errors={page:!1,group:!1},-1==this.page?(this.errors.page=!0,0):-1==this.group?(this.errors.group=!0,0):void d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=duplicateelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Rl.stringify({id:this.ID,group:this.group,old_group:this.currentGroup,form_id:this.page})}).then(e=>{window.location.reload()})},getFormPages(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getFormsByProfileId",params:{profile_id:this.prid},paramsSerializer:e=>Rl.stringify(e)}).then(e=>{this.pages=e.data.data,this.page=this.currentPage})},getGroupsByForm(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getgroupsbyform",params:{form_id:this.page},paramsSerializer:e=>Rl.stringify(e)}).then(e=>{this.groups=e.data.data,this.groups.length<=1&&(this.group=this.groups[0].id)})}},watch:{page:function(){this.getGroupsByForm()}}},wl=Sl,Jl=Object(b["a"])(wl,Al,Ml,!1,null,"13f1ebdf",null),kl=Jl.exports;const Bl=a("bef5");var Ll={name:"BuilderViewer",props:{object:Object,groups:Array,change:Boolean,changedElement:Array,changedGroup:String,UpdateUx:Boolean,files:Number,eval:Number,prid:String,actualLanguage:String,manyLanguages:String,pid:Number},components:{Editor:et,datePicker:ia.a,draggable:Qa.a,modalEditElement:qs,modalDuplicateElement:kl,Translation:Eo},data(){return{object_json:"",sysaccess:!1,updatePage:!1,updateIntroPage:!1,indexPage:-1,openGroup:{},hoverGroup:!1,indexGroup:-1,updateGroup:!1,hoverUpdating:!1,indexHighlight:0,clickUpdatingLabel:!1,draggable:!1,fieldChanges:!1,repeat:!1,keyElements:{},date:new Date,options:{format:"DD/MM/YYYY",useCurrent:!1},translate:{label:!1,label_group:!1,label_page:!1,intro_page:!1},elementAssociateDocUpdateForm:{name:{fr:"",en:""},description:{fr:"",en:""},nbmax:1,selectedTypes:{pdf:!1,"jpg;png;gif":!1,"doc;docx;odt":!1,"xls;xlsx;odf":!1}},translations:{update:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),updating:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATING"),updateSuccess:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATESUCESS"),orderSuccess:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ORDERSUCESS"),orderFailed:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ORDERFAILED"),updateFailed:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATEFAILED"),sidemenuhelp:Joomla.JText._("COM_EMUNDUS_ONBOARD_SIDEMENUHELP"),TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),Unpublish:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_UNPUBLISH"),Publish:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_PUBLISH"),Required:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS_REQUIRED"),Settings:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS_SETTINGS"),Delete:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_DELETE"),Edit:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),Cancel:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),Validate:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),RepeatGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_REPEAT_GROUP"),RepeatedGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_REPEATED_GROUP"),Duplicate:Joomla.JText._("COM_EMUNDUS_ONBOARD_DUPLICATE"),NoElementsTips:Joomla.JText._("COM_EMUNDUS_ONBOARD_NO_ELEMENTS_TIPS"),EditName:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EDIT_NAME"),EditIntro:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EDIT_INTRO"),DisplayHide:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_HIDE"),HiddenGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_HIDDEN_GROUP")}}},methods:{splitProfileIdFromLabel(e){return e.split(/-(.+)/)[1]},async updateElementsOrder(e,t,a){var s=t.map((e,t)=>({id:e.id,order:t+1}));d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updateOrder",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({elements:s,group_id:e,moved_el:a})}).then(t=>{this.$emit("show","foo-velocity","success",this.orderSuccess,this.update);let s=this.object.link.replace("fabrik","emundus_onboard");d.a.get(s+"&format=vue_jsonclean").then(e=>{this.groups.forEach(t=>{this.$set(this.object_json.Groups["group_"+t.group_id],"elements",e.data.Groups["group_"+t.group_id].elements)})}),a.group_id=e}).catch(e=>{})},updateRequireElement(e){this.clickUpdatingLabel&&this.updateLabelElement(e),setTimeout(()=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=changerequire",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({element:e})}).then(()=>{this.updateRequireEvent(e)}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},300)},updateRequireEvent(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:e.id,gid:e.group_id},paramsSerializer:e=>Bl.stringify(e)}).then(t=>{e.label_value=t.data.label_value,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})},publishUnpublishEvent(e){e.publish=!e.publish,e.publish?(document.getElementById("publish_icon_"+e.id).classList.remove("fa-eye"),document.getElementById("publish_icon_"+e.id).classList.add("fa-eye-slash")):(document.getElementById("publish_icon_"+e.id).classList.add("fa-eye"),document.getElementById("publish_icon_"+e.id).classList.remove("fa-eye-slash"))},deleteAssociateElementDoc(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=deletedocumentdropfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({did:e})}).then(e=>{}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=removeDocumentFromProfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({did:e})}).then(e=>{}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=removeDocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({did:e,prid:this.prid,cid:this.cid})}).then(e=>{})},deleteElement(e,t){this.clickUpdatingLabel&&this.updateLabelElement(e),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEELEMENT"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(a=>{a.value&&("emundus_fileupload"==e.plugin&&this.deleteAssociateElementDoc(e.params.attachmentId),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=deleteElement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({element:e.id})}).then(()=>{T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ELEMENTDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.object_json.Groups["group_"+e.group_id].elts.splice(t,1),delete this.object_json.Groups["group_"+e.group_id].elements["element"+e.id],this.$forceUpdate()})}).catch(e=>{}))})},openDuplicate(e){this.clickUpdatingLabel&&this.updateLabelElement(e),this.$emit("modalOpen"),this.$modal.show("modalDuplicateElement"+e.id)},openParameters(e){this.clickUpdatingLabel&&this.updateLabelElement(e),this.repeat=!1,this.$emit("modalOpen"),this.$modal.show("modalEditElement"+e.id)},retrieveAssociateElementDoc(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=retriveElementFormAssociatedDoc",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({gid:2,docid:e})}).then(e=>{this.elementAssociateDocUpdateForm.description[this.actualLanguage]=e.data.description,e.data.allowed_types.includes("pdf")?this.elementAssociateDocUpdateForm.selectedTypes.pdf=!0:this.elementAssociateDocUpdateForm.selectedTypes.pdf=!1,e.data.allowed_types.includes("jpg")||e.data.allowed_types.includes("png")||e.data.allowed_types.includes("gif")?this.elementAssociateDocUpdateForm.selectedTypes["jpg;png;gif"]=!0:this.elementAssociateDocUpdateForm.selectedTypes["jpg;png;gif"]=!1,e.data.allowed_types.includes("xls")||e.data.allowed_types.includes("xlsx")||e.data.allowed_types.includes("odf")?this.elementAssociateDocUpdateForm.selectedTypes["xls;xlsx;odf"]=!0:this.elementAssociateDocUpdateForm.selectedTypes["xls;xlsx;odf"]=!1,this.elementAssociateDocUpdateForm.nbmax=e.data.nbmax})},updateAssociateDocElement(e){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updatedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify(e)}).then(t=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updateDocumentFalang",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify(e)}).then(e=>{})})},updateLabelElement(e){"emundus_fileupload"==e.plugin&&this.retrieveAssociateElementDoc(e.params.attachmentId);let t=e.label;"Unnamed item"===t.en&&(t.en=t.fr,e.label.en=t.fr),"emundus_fileupload"==e.plugin&&(this.elementAssociateDocUpdateForm.name.en=t.en,this.elementAssociateDocUpdateForm.name.fr=t.fr),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({element:e.id,labelTofind:e.label_tag,NewSubLabel:t})}).then(a=>{if(0==a.data.status)d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updateelementlabelwithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({eid:e.id,label:e.label[this.actualLanguage]})}).then(()=>{d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:e.id,gid:e.group_id},paramsSerializer:e=>Bl.stringify(e)}).then(t=>{e.label_value=t.data.label_value,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})});else{if("emundus_fileupload"==e.plugin){let a=[];Object.keys(this.elementAssociateDocUpdateForm.selectedTypes).forEach(e=>{1==this.elementAssociateDocUpdateForm.selectedTypes[e]&&a.push(e)});let s={document:this.elementAssociateDocUpdateForm,types:a,cid:this.cid,pid:this.prid,did:e.params.attachmentId,text_fr:t.fr,text_en:t.en};this.updateAssociateDocElement(s)}d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:e.id,gid:e.group_id},paramsSerializer:e=>Bl.stringify(e)}).then(t=>{this.$set(e,"element",t.data.element),e.label_value=t.data.label_value,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),this.translate.label=!1})}this.clickUpdatingLabel=!1}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},reloadElement(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:e.id,gid:e.group_id},paramsSerializer:e=>Bl.stringify(e)}).then(t=>{"databasejoin"===t.data.plugin&&!1===this.repeat?(this.repeat=!0,this.reloadElement(e)):(this.$set(e,"element",t.data.element),e=t.data,this.$set(this.keyElements,"element"+e.id,this.keyElements["element"+e.id]+1))}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},updateLabelGroup(e){let t=e.label;d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({group:e.group_id,labelTofind:e.group_tag,NewSubLabel:t})}).then(t=>{0==t.data.status&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updategrouplabelwithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({gid:e.group_id,label:e.label[this.actualLanguage]})}),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),e.group_showLegend=e.label[this.actualLanguage],this.translate.label_group=!1,this.updateGroup=!1}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},deleteAGroup(e,t){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGROUP"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGROUPWARNING"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(a=>{a.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=deleteGroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({gid:e.group_id})}).then(()=>{T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_GROUPDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.groups.splice(t,1),delete this.object_json.Groups["group_"+e.group_id],this.updateGroup=!1,this.$forceUpdate()})}).catch(e=>{})})},updateGroupsOrder(){var e=this.groups.map((e,t)=>(e.ordering=t+2,{id:e.group_id,order:t+2}));d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=reordergroups",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({groups:e,fid:this.object_json.id})}).then(e=>{this.$emit("show","foo-velocity","success",this.orderSuccess,this.update)}).catch(e=>{this.$emit("show","foo-velocity","error",this.orderFailed,this.updating)})},enableRepatedGroup(e){e.repeat_group?T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_REPEAT_GROUP_DISABLE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_REPEAT_GROUP_MESSAGE_DISABLE"),type:"info",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&d()({method:"POST",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=disablegrouprepeat",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({gid:e.group_id})}).then(t=>{1==t.data.status&&(e.repeat_group=0,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),e.group_showLegend=e.label[this.actualLanguage],this.translate.label_group=!1,this.updateGroup=!1)})}):T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_REPEAT_GROUP"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_REPEAT_GROUP_MESSAGE"),type:"info",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&d()({method:"POST",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=enablegrouprepeat",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({gid:e.group_id})}).then(t=>{1==t.data.status&&(e.repeat_group=1,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),e.group_showLegend=e.label[this.actualLanguage],this.translate.label_group=!1,this.updateGroup=!1)})})},displayHideGroup(e){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_HIDE"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DISPLAY_HIDE_MESSAGE"),type:"info",showCancelButton:!0,confirmButtonColor:"#12db42",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(t=>{t.value&&d()({method:"POST",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=displayhidegroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({gid:e.group_id})}).then(t=>{e.hidden_group=t.data.status,this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})})},updateLabelPage(e){let t=e.show_title.label;d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({page:e.id,labelTofind:e.show_title.titleraw,NewSubLabel:t})}).then(a=>{0==a.data.status&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updatepagelabelwithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({pid:e.id,label:e.show_title.label[this.actualLanguage]})}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updatemenulabel",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({pid:e.id,label:t})}).then(()=>{this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),e.show_title.value=e.show_title.label[this.actualLanguage],e.label=e.show_title.label[this.actualLanguage],this.updatePage=!1})}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},updateIntroValuePage(e){let t={fr:e.intro.fr,en:e.intro.en};d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({labelTofind:e.intro_raw,NewSubLabel:t})}).then(t=>{0==t.data.status&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updatepageintrowithouttranslation",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Bl.stringify({pid:e.id,intro:e.intro.fr})}),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update),e.intro_value=e.intro[this.actualLanguage],this.updateIntroPage=!1}).catch(e=>{this.$emit("show","foo-velocity","error",this.updateFailed,this.updating)})},getDataObject:Xe.a.debounce((function(){this.object_json=this.object.object,this.getElementsArray()}),500),getApiData:Xe.a.debounce((function(){this.$emit("show","foo-velocity","",this.updating,this.update);let e=this.object.link.replace("fabrik","emundus_onboard");d.a.get(e+"&format=vue_jsonclean").then(e=>{this.object_json=e.data,this.$emit("UpdateUxf"),this.$emit("show","foo-velocity","success",this.updateSuccess,this.update)})}),1e3),getElementsArray(){Object.keys(this.object_json.Groups).forEach(e=>{this.object_json.Groups[e].elts=[],this.openGroup[this.object_json.Groups[e].group_id]=!0,Object.keys(this.object_json.Groups[e].elements).forEach(t=>{this.object_json.Groups[e].elts.push(this.object_json.Groups[e].elements[t]),this.keyElements[t]=0})})},enableActionBar(e){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverUpdating=!0,this.indexHighlight=e)},disableActionBar(){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverUpdating=!1,this.clickUpdatingLabel=!1,this.indexHighlight=0,this.translate.label=!1)},enableLabelInput(e){this.updateGroup||this.updateIntroPage||this.updatePage||(this.clickUpdatingLabel=!0,setTimeout(()=>{document.getElementById("label_"+e).focus()},100))},enableTranslationLabel(e){this.translate.label=!this.translate.label,this.translate.label||setTimeout(()=>{document.getElementById("label_"+e).focus()},100)},enableUpdatingPage(e){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||(this.updatePage=!0,this.indexPage=e.id,setTimeout(()=>{document.getElementById("update_input_"+e.id).focus()},100))},enableUpdatingPageIntro(e){this.clickUpdatingLabel||this.updateGroup||this.updatePage||(this.updateIntroPage=!0,this.indexPage=e.id,setTimeout(()=>{document.getElementById("update_intro_"+e.id).focus()},100))},enableTranslationPage(e){this.translate.label_page=!this.translate.label_page,this.translate.label_page||setTimeout(()=>{document.getElementById("update_input_"+e).focus()},100)},enableTranslationPageIntro(e){this.translate.intro_page=!this.translate.intro_page,this.translate.intro_page||setTimeout(()=>{document.getElementById("update_intro_"+e).focus()},100)},enableUpdatingGroup(e){this.clickUpdatingLabel||this.updateIntroPage||this.updatePage||(this.updateGroup=!0,this.indexGroup=e.group_id,setTimeout(()=>{document.getElementById("update_input_"+e.group_id).focus()},100))},enableUpdatingIntroGroup(e){},enableTranslationGroup(e){this.translate.label_group=!this.translate.label_group,this.translate.label_group||setTimeout(()=>{document.getElementById("update_input_"+e).focus()},100)},enableGroupHover(e){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverGroup=!0,this.indexGroup=e)},disableGroupHover(){this.clickUpdatingLabel||this.updateGroup||this.updateIntroPage||this.updatePage||(this.hoverGroup=!1,this.updateGroup=!1,this.indexGroup=-1)},handleGroup(e){this.updateGroup||(this.openGroup[e]?this.$set(this.openGroup,e,!1):this.$set(this.openGroup,e,!0))},startGroupDrag(){this.draggable=!0},SomethingChange:function(e){let t=e.item.childNodes[0].id;this.groups.forEach(e=>{e.elts.forEach(a=>{a.id==t&&this.updateElementsOrder(e.group_id,e.elts,a)})}),this.draggable=!1},SomethingChangeInGroup:function(){this.draggable=!1,this.updateGroupsOrder(),Object.keys(this.openGroup).forEach((e,t)=>{this.openGroup[e]=!0})},getAccess(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getAccess"}).then(e=>{this.sysaccess=e.data.access})},show(e,t,a,s){this.$emit("show",e,t,a,s)}},created(){Xe.a.isEmpty(this.object.object)||(this.getDataObject(),this.getAccess())},watch:{object:function(){this.getDataObject()},UpdateUx:function(){!0===this.UpdateUx&&this.getApiData()}},computed:{orderedGroups:function(){return Xe.a.orderBy(this.groups,"ordering")}}},Il=Ll,Pl=(a("9a7c"),Object(b["a"])(Il,Ul,Tl,!1,null,"130618e4",null)),jl=Pl.exports;const Fl=a("bef5");var $l={name:"Builder",props:{object:Object,UpdateUx:Boolean,rgt:Number,files:Number,prid:String,eval:Number,actualLanguage:String,manyLanguages:Number},components:{draggable:Qa.a,BuilderViewer:jl},data(){return{newlabel:[],dblckickLabel:[],testastos:[],ElementList:[],GroupList:[],object_json:Object,GroupsObject:Object,change:!1,changedElement:"",changedGroup:"",update:!1,builderViewKey:0,addGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDGROUP"),addItem:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDITEM"),editGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EDITGROUP"),deleteGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEGROUP"),deleteMenu:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENU")}},methods:{UpdateUXT(){this.UpdateUx=!0},UpdateUXF(){this.UpdateUx=!1},UpdateLabel(e,t){e.label_raw=t},UpdateGroupName(e,t){this.object_json.Groups[e].group_showLegend=t},UpdateBuilderView(){this.$emit("UpdateFormBuilder")},show(e,t,a,s){this.$emit("show",e,t,a,s)},Initialised:function(){for(var e in this.GroupsObject){let t=this.object.rgt+"_"+this.GroupsObject[e].group_id;this.ElementList[t]=Object.values(this.GroupsObject[e].elements)}},deleteAMenu(e){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENU"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENUWARNING"),type:"warning",showCancelButton:!0}).then(t=>{t.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=deleteMenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Fl.stringify({mid:e})}).then(()=>{this.$modal.hide("modalSide"+this.ID),T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_MENUDELETED"),type:"success",showConfirmButton:!1,timer:2e3}).then(()=>{this.$emit("UpdateFormBuilder")})}).catch(e=>{console.log(e)})})},async updateOrder(e,t){await this.$refs.builder_viewer.updateElementsOrder(e,t)},getDataObject:function(){this.object_json=this.object.object,this.GroupList=Object.values(this.object_json.Groups),this.GroupsObject=this.object_json.Groups,this.Initialised()}},created(){Xe.a.isEmpty(this.object.object)||this.getDataObject()},watch:{object:function(){this.getDataObject()},update:function(){!0===this.update&&this.getDataObject()},UpdateUx:function(){!0===this.UpdateUx&&this.UpdateUXT()}}},Gl=$l,Hl=(a("3eac"),Object(b["a"])(Gl,xl,Nl,!1,null,"73e13148",null)),zl=Hl.exports,ql=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalSide"}},[a("modal",{attrs:{name:"modalSide"+e.ID,height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalSide"+e.ID)}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.translations.editMenu)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group",class:{"mb-0":e.translate.label}},[a("label",[e._v(e._s(e.translations.Name)+" :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.label[e.actualLanguage],expression:"label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40"},domProps:{value:e.label[e.actualLanguage]},on:{input:function(t){t.target.composing||e.$set(e.label,e.actualLanguage,t.target.value)}}}),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.label},attrs:{type:"button"},on:{click:function(t){e.translate.label=!e.translate.label}}}):e._e()]),e.translate.label?a("translation",{attrs:{label:e.label,actualLanguage:e.actualLanguage}}):e._e()],1),e.errors?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.LabelRequired))])]):e._e(),a("div",{staticClass:"form-group mt-1",class:{"mb-0":e.translate.intro}},[a("div",{staticClass:"d-flex"},[a("label",[e._v(e._s(e.translations.Intro))]),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.intro},staticStyle:{right:"0"},attrs:{type:"button"},on:{click:function(t){e.translate.intro=!e.translate.intro}}}):e._e()]),a("div",[e.translate.intro?a("div",{staticClass:"d-flex"},[a("span",[e._v(e._s(e.translations.TranslateIn)+" : ")]),"0"!==e.manyLanguages?a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLanguage,expression:"selectedLanguage"}],staticStyle:{margin:"10px 0"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedLanguage=t.target.multiple?a:a[0]},function(t){e.dynamicComponent++}]}},e._l(e.languages,(function(t,s){return a("option",{domProps:{value:t.sef}},[e._v(e._s(t.title_native))])})),0):e._e()]):e._e(),a("div",{staticClass:"input-can-translate"},e._l(e.languages,(function(t,s){return t.sef===e.selectedLanguage&&e.intro.hasOwnProperty(t.sef)?a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.intro[t.sef],lang:e.actualLanguage,enable_variables:!1,id:"editor_"+t.sef},model:{value:e.intro[t.sef],callback:function(a){e.$set(e.intro,t.sef,a)},expression:"intro[language.sef]"}}):e._e()})),1)])]),a("div",{staticClass:"form-group d-flex mb-1",staticStyle:{"align-items":"center"},attrs:{id:"template_checkbox"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.template,expression:"template"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.template)?e._i(e.template,null)>-1:e.template},on:{change:function(t){var a=e.template,s=t.target,o=!!s.checked;if(Array.isArray(a)){var i=null,n=e._i(a,i);s.checked?n<0&&(e.template=a.concat([i])):n>-1&&(e.template=a.slice(0,n).concat(a.slice(n+1)))}else e.template=o}}}),a("label",{staticClass:"ml-10px mb-0"},[e._v(e._s(e.translations.SaveAsTemplate))])]),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalSide"+e.ID)}}},[e._v(" "+e._s(e.translations.Retour)+" ")]),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer",on:{click:function(t){t.preventDefault(),e.$modal.hide("modalSide"+e.ID),e.UpdateParams()}}},[e._v(" "+e._s(e.translations.Continuer)+" ")])])]),a("div",{staticClass:"form-group d-flex mb-1"},[e.menus.length>1&&0==e.files?a("button",{staticClass:"bouton-sauvergarder-et-continuer w-delete",on:{click:function(t){return t.preventDefault(),e.deleteMenu()}}},[e._v(" "+e._s(e.translations.Delete)+" ")]):e._e()])])])],1)},Vl=[];const Yl=a("bef5");var Wl={name:"modalSide",components:{List:Fe,Editor:et,Translation:Eo},props:{ID:String,element:Object,index:Number,menus:Array,files:Number,link:String,manyLanguages:String,actualLanguage:String,languages:Array},data(){return{tempEl:[],translate:{label:!1,intro:!1},label:{},intro:{},dynamicComponent:0,template:!1,errors:!1,changes:!1,selectedLanguage:this.actualLanguage,translations:{Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),dataSaved:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DATASAVED"),informations:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_INFORMATIONS"),orderingMenu:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_MENUORDERING"),editMenu:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EDITMENU"),Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_NAME"),Intro:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_INTRO"),Delete:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTION_DELETE"),TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),LabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),SaveAsTemplate:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVE_AS_TEMPLATE"),TranslateIn:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_IN")}}},methods:{async UpdateParams(){this.changes=!0,await this.axioschange(this.intro,this.tempEl.intro_raw),await this.axioschange(this.label,this.tempEl.show_title.titleraw),await this.updatefalang(this.label),await this.saveAsTemplate(),this.element=JSON.parse(JSON.stringify(this.tempEl)),this.$emit("UpdateName",this.index,this.label[this.actualLanguage]),this.$emit("UpdateIntro",this.index,this.intro[this.actualLanguage])},beforeClose(e){!1!==this.changes&&(this.$emit("show","foo-velocity","success",this.dataSaved,this.informations),this.changes=!1),this.$emit("modalClosed")},beforeOpen(e){this.initialisation()},axioschange(e,t){return new Promise(a=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=formsTrad",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Yl.stringify({labelTofind:t,NewSubLabel:e})}).then(e=>{a(e.data.status)}).catch(e=>{console.log(e)})})},updatefalang(e){return new Promise(t=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updatemenulabel",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Yl.stringify({label:e,pid:this.element.id})}).then(e=>{t(e.data.status)})})},saveAsTemplate(){return new Promise(e=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=savemenuastemplate",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Yl.stringify({menu:this.element,template:this.template})}).then(t=>{e(t.data.scalar)})})},async axiostrad(e){return await d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getalltranslations",params:{toJTEXT:e},paramsSerializer:e=>Yl.stringify(e)}).then(e=>e.data)},deleteMenu(){T.a.fire({title:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DELETEMENU"),text:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANT_REVERT"),type:"warning",showCancelButton:!0,confirmButtonColor:"#de6339",confirmButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),cancelButtonText:Joomla.JText._("COM_EMUNDUS_ONBOARD_CANCEL"),reverseButtons:!0}).then(e=>{e.value&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=deletemenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Yl.stringify({mid:this.element.id})}).then(e=>{this.$emit("removeMenu",this.element.id),this.$modal.hide("modalSide"+this.ID)})})},checkIfTemplate(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getPagesModel"}).then(e=>{var t={};try{Object.values(e.data).forEach((e,a)=>{if(e.form_id==this.element.id)throw this.template=!0,t})}catch(a){if(a!==t)throw this.template=!1}})},initialisation(){this.tempEl=JSON.parse(JSON.stringify(this.element)),this.axiostrad(this.tempEl.intro_raw).then(e=>{this.intro=e}).catch((function(e){console.log(e)})),this.axiostrad(this.tempEl.show_title.titleraw).then(e=>{this.label=e}).catch((function(e){console.log(e)})),this.checkIfTemplate()}},watch:{element:function(){this.tempEl=JSON.parse(JSON.stringify(this.element))}},created:function(){}},Xl=Wl,Ql=(a("24e4"),Object(b["a"])(Xl,ql,Vl,!1,null,"dcebc2b2",null)),Kl=Ql.exports,Zl=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalMenu"}},[a("modal",{attrs:{name:"modalMenu",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalMenu")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.translations.addMenu)+" ")])])]),a("div",{staticClass:"modalC-content"},[a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.translations.ChooseExistingPageModel)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.model_id,expression:"model_id"}],staticClass:"dropdown-toggle",attrs:{disabled:Object.keys(e.models).length<=0},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.model_id=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"-1"}}),e._l(e.models,(function(t,s){return a("option",{domProps:{value:t.form_id}},[e._v(e._s(t.label[e.actualLanguage]))])}))],2)]),a("div",{staticClass:"form-group",class:{"mb-0":e.translate.label}},[a("label",[e._v(e._s(e.translations.Name)+"* :")]),a("div",{staticClass:"input-can-translate"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.label[e.actualLanguage],expression:"label[actualLanguage]"}],staticClass:"form__input field-general w-input",class:{"is-invalid":e.errors},staticStyle:{margin:"0"},attrs:{type:"text",maxlength:"40",id:"menu_label"},domProps:{value:e.label[e.actualLanguage]},on:{input:function(t){t.target.composing||e.$set(e.label,e.actualLanguage,t.target.value)}}}),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.label},attrs:{type:"button"},on:{click:function(t){e.translate.label=!e.translate.label}}}):e._e()])]),e.translate.label?a("translation",{attrs:{label:e.label,actualLanguage:e.actualLanguage}}):e._e(),e.errors&&-1==e.model_id?a("p",{staticClass:"error col-md-12 mb-2"},[a("span",{staticClass:"error"},[e._v(e._s(e.translations.LabelRequired))])]):e._e(),a("div",{staticClass:"form-group mt-1",class:{"mb-0":e.translate.intro}},[a("div",{staticClass:"d-flex"},[a("label",[e._v(e._s(e.translations.Intro))]),"0"!==e.manyLanguages?a("button",{staticClass:"translate-icon",class:{"translate-icon-selected":e.translate.intro},staticStyle:{right:"0"},attrs:{type:"button"},on:{click:function(t){e.translate.intro=!e.translate.intro}}}):e._e()]),a("div",[e.translate.intro?a("div",{staticClass:"d-flex"},[a("span",[e._v(e._s(e.translations.TranslateIn)+" : ")]),"0"!==e.manyLanguages?a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedLanguage,expression:"selectedLanguage"}],staticStyle:{margin:"10px 0"},on:{change:[function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedLanguage=t.target.multiple?a:a[0]},function(t){e.dynamicComponent++}]}},e._l(e.languages,(function(t,s){return a("option",{domProps:{value:t.sef}},[e._v(e._s(t.title_native))])})),0):e._e()]):e._e(),a("div",{staticClass:"input-can-translate"},e._l(e.languages,(function(t,s){return t.sef===e.selectedLanguage?a("editor",{key:e.dynamicComponent,attrs:{height:"30em",text:e.intro[t.sef],lang:e.actualLanguage,enable_variables:!1,id:"editor_"+t.sef},model:{value:e.intro[t.sef],callback:function(a){e.$set(e.intro,t.sef,a)},expression:"intro[language.sef]"}}):e._e()})),1)])])],1),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalMenu")}}},[e._v(" "+e._s(e.translations.Retour)+" ")]),a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.createMenu()}}},[e._v(" "+e._s(e.translations.Add)+" ")])]),e.submitted?a("div",{staticClass:"loading-form",staticStyle:{top:"10vh"}},[a("Ring-Loader",{attrs:{color:"#12db42"}})],1):e._e()])],1)},ed=[];const td=a("bef5");var ad={name:"modalMenu",components:{Editor:et,translation:Eo},props:{profileId:String,actualLanguage:String,manyLanguages:String,languages:Array},data(){return{translate:{label:!1,intro:!1},label:{fr:"",en:""},intro:{fr:"",en:""},dynamicComponent:0,model_id:-1,template:!1,models:[],errors:!1,changes:!1,submitted:!1,selectedLanguage:this.actualLanguage,translations:{Name:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_NAME"),Intro:Joomla.JText._("COM_EMUNDUS_ONBOARD_FIELD_INTRO"),Retour:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Add:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD"),dataSaved:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_DATASAVED"),informations:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_INFORMATIONS"),addMenu:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU"),LabelRequired:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_REQUIRED_NAME"),ChooseExistingPageModel:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_CHOOSE_EXISTING_MODEL_PAGE"),TranslateEnglish:Joomla.JText._("COM_EMUNDUS_ONBOARD_TRANSLATE_ENGLISH"),SaveAsTemplate:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVE_AS_TEMPLATE")}}},methods:{beforeClose(e){!0===this.changes&&this.$emit("show","foo-velocity","warn",this.dataSaved,this.informations),this.label={fr:"",en:""},this.intro={fr:"",en:""},this.$emit("modalClosed"),this.changes=!1},beforeOpen(e){this.getExistingPages()},getExistingPages(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getPagesModel"}).then(e=>{this.models=e.data})},createMenu(){this.changes=!0,""!=this.label[this.actualLanguage]||-1!=this.model_id?(this.submitted=!0,"fr"==this.actualLanguage&&""==this.label.en?this.label.en="My new page":"en"==this.actualLanguage&&""==this.label.fr?this.label.fr="Ma nouvelle page":(this.label.en=this.label.en,this.label.fr=this.label.fr),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createMenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:td.stringify({label:this.label,intro:this.intro,prid:this.profileId,modelid:this.model_id,template:this.template})}).then(e=>{this.submitted=!1,this.$modal.hide("modalMenu"),this.$emit("AddMenu",e.data)}).catch(e=>{console.log(e)})):this.errors=!0}},watch:{model_id:function(e){-1!=e?Object.values(this.models).forEach(e=>{if(e.form_id==this.model_id){this.label.fr=e.label.fr,this.label.en=e.label.en;var t=document.createElement("div"),a=document.createElement("div");t.innerHTML=e.intro.fr,a.innerHTML=e.intro.en,this.intro.fr=t.innerText,this.intro.en=a.innerText}}):(this.label.fr="",this.intro.fr="")}}},sd=ad,od=Object(b["a"])(sd,Zl,ed,!1,null,"27016828",null),id=od.exports,nd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalAffectCampaign"}},[a("modal",{attrs:{name:"modalAffectCampaign",height:"auto",transition:"nice-modal-fade","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!1},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalAffectCampaign")}}},[a("em",{staticClass:"fas fa-times-circle"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.translations.affectCampaigns)+" ")])])]),a("div",{staticClass:"modalC-content"},[0===e.campaigns.length?a("p",{staticClass:"mt-1 mb-1"},[e._v(e._s(e.translations.campaignsEmpty))]):e._e(),a("div",{staticClass:"wrap"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.searchTerm,expression:"searchTerm"}],staticClass:"searchTerm",attrs:{type:"text",placeholder:e.translations.Search},domProps:{value:e.searchTerm},on:{keyup:e.searchCampaignByTerm,input:function(t){t.target.composing||(e.searchTerm=t.target.value)}}}),a("button",{staticClass:"searchButton",attrs:{type:"button"},on:{click:e.searchCampaignByTerm}},[a("em",{staticClass:"fas fa-search"})])])]),a("div",{staticClass:"campaigns-list"},e._l(e.campaigns,(function(t,s){return a("div",{key:s,staticClass:"user-item"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.affectedCampaigns[t.id],expression:"affectedCampaigns[campaign.id]"}],staticClass:"form-check-input bigbox",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.affectedCampaigns[t.id])?e._i(e.affectedCampaigns[t.id],null)>-1:e.affectedCampaigns[t.id]},on:{change:function(a){var s=e.affectedCampaigns[t.id],o=a.target,i=!!o.checked;if(Array.isArray(s)){var n=null,r=e._i(s,n);o.checked?r<0&&e.$set(e.affectedCampaigns,t.id,s.concat([n])):r>-1&&e.$set(e.affectedCampaigns,t.id,s.slice(0,r).concat(s.slice(r+1)))}else e.$set(e.affectedCampaigns,t.id,i)}}}),a("div",{staticClass:"ml-10px"},[a("p",[e._v(e._s(t.label))])])])})),0)]),a("div",{staticClass:"d-flex justify-content-between mb-1"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.affectToForm.apply(null,arguments)}}},[e._v(" "+e._s(e.translations.Continuer)+" ")]),e.testing?e._e():a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.goAddCampaign.apply(null,arguments)}}},[e._v(" "+e._s(e.translations.addCampaign)+" ")])]),a("button",{staticClass:"bouton-sauvergarder-et-continuer w-retour",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.redirectJRoute("index.php?option=com_emundus_onboard&view=form")}}},[e._v(" "+e._s(e.translations.BackWithoutAssociation)+" ")])])],1)},rd=[];const ld=a("bef5");var dd={name:"modalAffectCampaign",props:{prid:String,testing:Boolean},data(){return{campaigns:[],affectedCampaigns:[],searchTerm:"",translations:{Continuer:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CONTINUER"),affectCampaigns:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_AFFECTCAMPAIGNS"),campaignsEmpty:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_CAMPAIGNSEMPTY"),addCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_CAMPAIGN"),BackWithoutAssociation:Joomla.JText._("COM_EMUNDUS_ONBOARD_BACK_WITHOUT_ASSOCIATION")}}},methods:{beforeClose(e){},beforeOpen(e){this.getCampaigns()},affectToForm(){let e=[];this.affectedCampaigns.length>0?(this.campaigns.forEach(t=>{this.affectedCampaigns[t.id]&&e.push(t.id)}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=affectcampaignstoform",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:ld.stringify({prid:this.prid,campaigns:e})}).then(()=>{this.testing?e.length>0&&(this.$emit("testForm"),this.$modal.hide("modalAffectCampaign")):this.redirectJRoute("index.php?option=com_emundus_onboard&view=form")})):this.testing?this.$modal.hide("modalAffectCampaign"):this.redirectJRoute("index.php?option=com_emundus_onboard&view=form")},goAddCampaign(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:"index.php?option=com_emundus_onboard&view=campaign&layout=add&cid="},paramsSerializer:e=>ld.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},getCampaigns(){d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getcampaignstoaffect").then(e=>{this.campaigns=e.data.data})},searchCampaignByTerm(){d.a.get("index.php?option=com_emundus_onboard&controller=campaign&task=getcampaignstoaffectbyterm&term="+this.searchTerm).then(e=>{this.campaigns=e.data.data})},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>ld.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})}}},cd=dd,md=(a("ac3f"),Object(b["a"])(cd,nd,rd,!1,null,"426d265c",null)),ud=md.exports,pd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",{attrs:{id:"modalTestingForm"}},[a("modal",{attrs:{name:"modalTestingForm",height:"auto",transition:"little-move-left","min-width":200,"min-height":200,delay:100,adaptive:!0,clickToClose:!0},on:{closed:e.beforeClose,"before-open":e.beforeOpen}},[a("div",{staticClass:"fixed-header-modal"},[a("div",{staticClass:"topright"},[a("button",{staticClass:"btnCloseModal",attrs:{type:"button"},on:{click:function(t){return t.preventDefault(),e.$modal.hide("modalTestingForm")}}},[a("em",{staticClass:"fas fa-times"})])]),a("div",{staticClass:"update-field-header"},[a("h2",{staticClass:"update-title-header"},[e._v(" "+e._s(e.testingForm)+" ")])])]),a("div",{staticClass:"modalC-content"},[e.campaigns.length>1?a("div",{staticClass:"form-group"},[a("label",[e._v(e._s(e.ChooseCampaign)+" :")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.cid,expression:"cid"}],staticClass:"dropdown-toggle",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.cid=t.target.multiple?a:a[0]}}},e._l(e.campaigns,(function(t,s){return a("option",{domProps:{value:t.id}},[e._v(e._s(t.label))])})),0)]):e._e(),e.filesExist?a("div",{staticClass:"form-group"},[a("p",[e._v(e._s(e.FileExistsBeforeTesting))])]):e._e()]),a("div",{staticClass:"d-flex justify-content-between mb-1"},[e.filesExist?a("button",{staticClass:"bouton-sauvergarder-et-continuer",attrs:{type:"button"},on:{click:e.goExistingFile}},[e._v(e._s(e.ContinueFile))]):e._e(),a("button",{staticClass:"bouton-sauvergarder-et-continuer ml-10px",attrs:{type:"button"},on:{click:e.createNewFile}},[e._v(e._s(e.CreateFile))])])])],1)},_d=[];const hd=a("bef5");var gd={name:"modalTestingForm",components:{},props:{profileId:String,actualLanguage:String,campaigns:Object,currentForm:Number,currentMenu:Number},data(){return{cid:-1,filesExist:!1,ContinueFile:Joomla.JText._("COM_EMUNDUS_ONBOARD_CONTINUE_FILE"),CreateFile:Joomla.JText._("COM_EMUNDUS_ONBOARD_CREATE_FILE"),ChooseCampaign:Joomla.JText._("COM_EMUNDUS_ONBOARD_CHOOSE_CAMPAIGN"),FileExistsBeforeTesting:Joomla.JText._("COM_EMUNDUS_ONBOARD_FILE_EXIST_BEFORE_TESTING"),testingForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_TESTING_FORM")}},methods:{beforeClose(e){this.$emit("modalClosed")},beforeOpen(e){setTimeout(()=>{this.cid=this.campaigns[0].id},100)},goExistingFile(){window.open("/index.php?option=com_fabrik&view=form&formid="+this.currentForm+"&Itemid="+this.currentMenu+"&usekey=fnum&rowid="+this.filesExist+"&r=1#em-panel"),this.$modal.hide("modalTestingForm")},createNewFile(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=deletetestingfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:hd.stringify({file:this.filesExist})}).then(e=>{1==e.data.status&&d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createtestingfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:hd.stringify({cid:this.cid})}).then(e=>{window.open("/index.php?option=com_emundus&task=openfile&fnum="+e.data.fnum+"&redirect=1==&Itemid=1079#em-panel"),this.$modal.hide("modalTestingForm")})})}},watch:{cid:function(e){this.campaigns.forEach(t=>{t.id==e&&(t.files.length>0?this.filesExist=t.files[0].fnum:this.filesExist=!1)})}}},fd=gd,bd=Object(b["a"])(fd,pd,_d,!1,null,"e3571fb4",null),vd=bd.exports;const Cd=a("bef5");var Od={name:"FormBuilder",props:{prid:String,index:String,cid:String,actualLanguage:String,manyLanguages:String},components:{ModalAddDocuments:ti,Tasks:Le,ModalTestingForm:vd,List:Fe,ModalAffectCampaign:ud,Builder:zl,ModalSide:Kl,ModalMenu:id,draggable:Qa.a},data(){return{actions_menu:!0,optionsModal:!1,UpdateUx:!1,menuHighlight:0,indexHighlight:-1,indexGrab:"0",indexGrabDocuments:"0",updateFormLabel:!1,animation:{enter:{opacity:[1,0],translateX:[0,-300],scale:[1,.2]},leave:{opacity:0,height:0}},loading:!1,first_loading:!1,lastUpdate:(new Date).getHours()+":"+((new Date).getMinutes()<10?"0":"")+(new Date).getMinutes(),formObjectArray:[],submittionPages:[],formList:[],profileLabel:"",id:0,grab:0,grabDocs:0,rgt:0,builderKey:0,builderSubmitKey:0,files:0,currentDoc:null,documentsList:[],campaignsAffected:{},testing:!1,link:"",languages:[],dragging:!1,draggingIndex:-1,elementDisabled:!1,addingElement:!1,plugins:{field:{id:0,value:"field",icon:"fas fa-font",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_FIELD")},nom:{id:8,value:"nom",icon:"fas fa-font",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_LASTNAME")},prenom:{id:9,value:"prenom",icon:"fas fa-font",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_FIRSTNAME")},email:{id:10,value:"email",icon:"fas fa-at",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_EMAIL")},yesno:{id:12,value:"yesno",icon:"fas fa-toggle-on",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_YESNO")},textarea:{id:5,value:"textarea",icon:"far fa-square",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_TEXTAREA")},checkbox:{id:2,value:"checkbox",icon:"far fa-check-square",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_CHECKBOX")},radiobutton:{id:4,value:"radiobutton",icon:"fas fa-list-ul",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_RADIOBUTTON")},dropdown:{id:3,value:"dropdown",icon:"fas fa-th-list",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_DROPDOWN")},birthday:{id:1,value:"birthday",icon:"far fa-calendar-alt",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_BIRTHDAY")},display:{id:6,value:"display",icon:"fas fa-paragraph",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_DISPLAY")}},docForm:{name:{fr:"Autres document",en:"Other documents"},description:{fr:"",en:""},nbmax:5,selectedTypes:{pdf:!0,jpg:!0,jpeg:!0}},translations:{addMenu:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU"),addMenuAction:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU_ACTION"),addGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDGROUP"),addItem:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDITEM"),Actions:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS"),sendFormButton:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEND_FORM"),Edit:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),FormPage:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_PAGE"),SubmitPage:Joomla.JText._("COM_EMUNDUS_ONBOARD_SUBMIT_PAGE"),testingForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_TESTING_FORM"),Form:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM"),Documents:Joomla.JText._("COM_EMUNDUS_ONBOARD_DOCUMENTS"),AddNewDocument:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_NEW_DOCUMENT"),Back:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Savingat:Joomla.JText._("COM_EMUNDUS_ONBOARD_SAVING_AT"),Validate:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),update:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),updating:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATING"),updateSuccess:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATESUCESS"),updateFailed:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATEFAILED"),ExitFormbuilder:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EXIT_FORMBUILDER"),BuildYourForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_BUILD_YOUR_FORM"),SubmittionPage:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_SUBMITTION_PAGE")}}},methods:{slpitProfileIdfromLabel(e){return e.split(/-(.+)/)[1]},showModal(){T.a.fire({text:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_NOFORMPAGEWARNING"),type:"warning"})},hide(){this.$modal.hide("my-first-modal")},createElement(e,t,a){let s=this.formObjectArray;if(1===this.menuHighlight&&(s=this.submittionPages),!Xe.a.isEmpty(s[this.indexHighlight].object.Groups))if(this.loading=!0,"emundus_fileupload"==t){let s=[];Object.keys(this.docForm.selectedTypes).forEach(e=>{1==this.docForm.selectedTypes[e]&&s.push(e)});let o={document:this.docForm,types:s,cid:this.cid,pid:this.prid,did:20};this.createElementEMundusFileUpload(o,e,t,a)}else d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createsimpleelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({gid:e,plugin:t})}).then(s=>{d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:s.data.scalar,gid:e},paramsSerializer:e=>Cd.stringify(e)}).then(s=>{s.data.params.password="email"==t?3:0,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=updateparams",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({element:s.data})}),this.menuHighlightCustumisation(s,e,a),this.loading=!1})})},createElementEMundusFileUpload(e,t,a,s){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=campaign&task=updatedocument",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify(e)}).then(e=>{this.$emit("UpdateDocuments"),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createsimpleelement",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({gid:t,plugin:a,attachementId:e.data.data})}).then(e=>{d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:e.data.scalar,gid:t},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{this.menuHighlightCustumisation(e,t,s),this.getDocuments(),this.loading=!1})})})},menuHighlightCustumisation(e,t,a){0===this.menuHighlight?(this.$set(this.formObjectArray[this.indexHighlight].object.Groups["group_"+t],"elements[element"+e.data.id+"]",e.data),this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts.splice(a,0,e.data),this.$refs.builder.updateOrder(t,this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts),this.$refs.builder.$refs.builder_viewer.keyElements["element"+e.data.id]=0,this.$refs.builder.$refs.builder_viewer.enableActionBar(e.data.id),this.$refs.builder.$refs.builder_viewer.enableLabelInput(e.data.id)):(this.$set(this.submittionPages[this.indexHighlight].object.Groups["group_"+t],"elements[element"+e.data.id+"]",e.data),this.submittionPages[this.indexHighlight].object.Groups["group_"+t].elts.splice(a,0,e.data),this.$refs.builder_submit.updateOrder(t,this.submittionPages[this.indexHighlight].object.Groups["group_"+t].elts),this.$refs.builder_submit.$refs.builder_viewer.keyElements["element"+e.data.id]=0,this.$refs.builder_submit.$refs.builder_viewer.enableActionBar(e.data.id),this.$refs.builder_submit.$refs.builder_viewer.enableLabelInput(e.data.id))},addingNewElement:function(e){this.dragging=!1,this.draggingIndex=-1,"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#e4e4e9",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #c3c3ce",document.getElementsByClassName("no-elements-tip")[0].innerHTML=Joomla.JText._("COM_EMUNDUS_ONBOARD_NO_ELEMENTS_TIPS"));let t=e.clone.id.split(/_(.+)/)[1],a=e.to.parentElement.parentElement.parentElement.id.split("_")[1];"undefined"!=typeof a&&this.createElement(a,t,e.newIndex)},addingNewElementByDblClick:Xe.a.debounce((function(e){let t=Object.keys(this.formObjectArray[this.indexHighlight].object.Groups)[Object.keys(this.formObjectArray[this.indexHighlight].object.Groups).length-1].split("_")[1],a=this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts.length;"undefined"!=typeof t&&this.createElement(t,e,a)}),250,{maxWait:1e3}),createGroup(){this.loading=!0;let e=this.formObjectArray[this.indexHighlight].object.id;1===this.menuHighlight&&(e=this.submittionPages[this.indexHighlight].object.id),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createsimplegroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({fid:e})}).then(e=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getJTEXT",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({toJTEXT:e.data.group_tag})}).then(t=>{e.data.group_showLegend=t.data,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getalltranslations",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({toJTEXT:e.data.group_tag})}).then(t=>{e.data.label.fr=t.data.fr,e.data.label.en=t.data.en,this.loading=!1,this.pushGroup(e.data)})})})},UpdateName(e,t){this.formObjectArray[e].object.show_title.value=t},UpdateIntro(e,t){this.formObjectArray[e].object.intro_value=t},UpdateUXT(){this.UpdateUx=!0},updateLabelForm(){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=updateformlabel",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({label:this.profileLabel,prid:this.prid})}).then(e=>{this.show("foo-velocity","success",this.updateSuccess,this.update),this.updateFormLabel=!1}).catch(e=>{this.show("foo-velocity","error",this.updateFailed,this.updating),console.log(e)})},pushGroup(e){0===this.menuHighlight?(this.formObjectArray.forEach((t,a)=>{t.object.id==e.formid&&(this.formObjectArray[a]["object"]["Groups"]["group_"+e.group_id]={elements:{},elts:[],group_id:e.group_id,group_showLegend:e.group_showLegend,label:{fr:e.label.fr,en:e.label.en},group_tag:e.group_tag,ordering:e.ordering})}),this.$refs.builder.getDataObject(),this.$refs.builder.$refs.builder_viewer.openGroup[e.group_id]=!0):(this.submittionPages.forEach((t,a)=>{t.object.id==e.formid&&(this.submittionPages[a]["object"]["Groups"]["group_"+e.group_id]={elements:{},elts:[],group_id:e.group_id,group_showLegend:e.group_showLegend,label:{fr:e.label.fr,en:e.label.en},group_tag:e.group_tag,ordering:e.ordering})}),this.$refs.builder_submit.getDataObject(),this.$refs.builder_submit.$refs.builder_viewer.openGroup[e.group_id]=!0),this.elementDisabled=!1,setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)},200)},pushMenu(e){this.formList.push(e),d.a.get("index.php?option=com_emundus_onboard&view=form&formid="+e.id+"&format=vue_jsonclean").then(t=>{this.formObjectArray.push({object:t.data,rgt:e.rgt,link:e.link}),this.indexHighlight=this.formObjectArray.length-1})},removeMenu(e){this.formObjectArray.forEach((t,a)=>{t.object.id==e&&this.formObjectArray.splice(a,1)}),this.formList.forEach((t,a)=>{t.id==e&&this.formList.splice(a,1)}),this.builderKey+=1,this.indexHighlight-=1},removeGroup(e,t){this.formObjectArray.forEach((a,s)=>{a.object.id==t&&delete this.formObjectArray[s]["object"]["Groups"]["group_"+e]}),this.builderKey+=1},updateFormObjectAndComponent(){this.formObjectArray=[],this.getDataObjectSingle(this.indexHighlight),this.builderKey+=1},getElement(e,t){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:e,gid:t},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elements["element"+e.data.id]=e.data,this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts.push(e.data),this.builderKey+=1})},tip(){this.showTip("foo-velocity",Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP")+"<br/>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP1")+"<br/>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP2"),Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP"))},show(e,t="",a="",s="Information"){this.$notify({group:e,title:""+s,text:a,type:t}),this.lastUpdate=(new Date).getHours()+":"+((new Date).getMinutes()<10?"0":"")+(new Date).getMinutes(),document.getElementsByClassName("fa-sync")[0].style.transform="rotate(360deg)",setTimeout(()=>{document.getElementsByClassName("fa-sync")[0].style.transform="unset"},1500)},showTip(e,t="",a="Information"){this.$notify({group:e,title:""+a,text:t,duration:2e4})},clean(e){this.$notify({group:e,clean:!0})},enableUpdatingForm(){this.updateFormLabel=!0,setTimeout(()=>{document.getElementById("update_label_form_"+this.prid).focus()},100)},async getDataObject(){await this.asyncForEach(this.formList,async e=>{let t=e.link.replace("fabrik","emundus_onboard");await d.a.get(t+"&format=vue_jsonclean").then(t=>{this.formObjectArray.push({object:t.data,rgt:e.rgt,link:e.link})}).then(e=>{this.formObjectArray.sort((e,t)=>e.rgt-t.rgt)}).catch(e=>{console.log(e)})}),this.loading=!1,this.indexHighlight=0,this.elementDisabled=Xe.a.isEmpty(this.formObjectArray[this.indexHighlight].object.Groups),this.rgt=this.formObjectArray[this.indexHighlight].rgt},async getDataObjectSingle(e){if(this.formList.length>0){let t=this.formList[e].link.replace("fabrik","emundus_onboard");await d.a.get(t+"&format=vue_jsonclean").then(t=>{this.formObjectArray[e].object=t.data}).then(e=>{this.formObjectArray.sort((e,t)=>e.rgt-t.rgt)}).catch(e=>{console.log(e)}),this.elementDisabled=Xe.a.isEmpty(this.formObjectArray[e].object.Groups),this.rgt=this.formObjectArray[e].rgt}this.loading=!1,this.indexHighlight=e},async asyncForEach(e,t){for(let a=0;a<e.length;a++)await t(e[a],a,e)},getCookie(e){for(var t=e+"=",a=decodeURIComponent(document.cookie),s=a.split(";"),o=0;o<s.length;o++){var i=s[o];while(" "==i.charAt(0))i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""},getFilesByForm(){d.a.get("index.php?option=com_emundus_onboard&controller=form&task=getfilesbyform&pid="+this.prid).then(e=>{this.files=e.data.data,0!=this.files&&this.tip()})},getSubmittionPage(){d()({method:"GET",url:"index.php?option=com_emundus_onboard&controller=form&task=getsubmittionpage",params:{prid:this.prid},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{let t=e.data.link.replace("fabrik","emundus_onboard");d.a.get(t+"&format=vue_jsonclean").then(t=>{this.submittionPages.push({object:t.data,rgt:e.data.rgt,link:e.data.link})})})},getForms(){this.loading=!0,d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getFormsByProfileId",params:{profile_id:this.prid},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{this.formList=e.data.data,setTimeout(()=>{this.formList.length>0?this.formList.forEach(e=>{this.formObjectArray.push({object:{},rgt:e.rgt,link:e.link})}):this.showModal(),this.loading=!1,this.getDataObjectSingle(0),this.getProfileLabel(this.prid)},100)}).catch(e=>{console.log(e)})},getDocuments(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getDocuments",params:{pid:this.prid},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{this.documentsList=e.data.data})},removeDocument(e,t){d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=removeDocumentFromProfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({did:t})}).then(()=>{this.documentsList.splice(e,1)})},getProfileLabel(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getProfileLabelByProfileId",params:{profile_id:e},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{this.profileLabel=e.data.data.label}).catch(e=>{console.log(e)})},exitForm(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:"index.php?option=com_emundus_onboard&view=form"},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},sendForm(){this.formList.length>0?0!=this.cid?d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:"index.php?option=com_emundus_onboard&view=form&layout=addnextcampaign&cid="+this.cid+"&index=4"},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data}):d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getassociatedcampaign",params:{pid:this.prid},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{e.data.data.length>0?history.go(-1):this.$modal.show("modalAffectCampaign")}).catch(e=>{console.log(e)}):this.showModal()},testForm(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=gettestingparams",params:{prid:this.prid},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{this.campaignsAffected=e.data.campaign_files,Object.keys(this.campaignsAffected).length>1?this.$modal.show("modalTestingForm"):Object.keys(this.campaignsAffected).length>0?this.campaignsAffected[0].files.length>0?this.$modal.show("modalTestingForm"):d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createtestingfile",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({cid:this.campaignsAffected[0].id})}).then(e=>{window.open("/index.php?option=com_emundus&task=openfile&fnum="+e.data.fnum+"&redirect=1==&Itemid=1079#em-panel")}):(this.testing=!0,d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=form&task=getassociatedcampaign",params:{pid:this.prid},paramsSerializer:e=>Cd.stringify(e)}).then(e=>{this.$modal.show("modalAffectCampaign")}))})},changeGroup(e,t){this.loading=!0,Xe.a.isEmpty(this.formObjectArray[e].object)?this.getDataObjectSingle(e).then(()=>{this.loading=!1}):(this.elementDisabled=Xe.a.isEmpty(this.formObjectArray[e].object.Groups),this.rgt=this.formObjectArray[e].rgt,this.indexHighlight=e,this.loading=!1),1===this.menuHighlight?(this.$refs.builder_submit.$refs.builder_viewer.clickUpdatingLabel=!1,this.$refs.builder_submit.$refs.builder_viewer.translate.label=!1):(this.$refs.builder.$refs.builder_viewer.clickUpdatingLabel=!1,this.$refs.builder.$refs.builder_viewer.translate.label=!1),document.cookie="page_"+this.prid+"="+e+"; expires=Session; path=/"},SomethingChange:function(e){this.dragging=!0;this.formList.forEach((e,t)=>{e.rgt=this.formObjectArray[t].rgt}),this.reorderItems()},showElements(){this.elementDisabled?this.addingElement=!1:this.addingElement=!this.addingElement},reorderingDocuments:function(){this.documentsList.forEach((e,t)=>{e.ordering=t}),d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=form&task=reorderDocuments",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({documents:this.documentsList})})},reorderItems(){this.formList.forEach(e=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=reordermenu",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Cd.stringify({rgt:e.rgt,link:e.link})}).catch(e=>{console.log(e)})})},enableGrab(e){1!==this.formList.length&&(this.indexGrab=e,this.grab=!0)},disableGrab(){this.indexGrab=0,this.grab=!1},enableGrabDocuments(e){this.indexGrabDocuments=e,this.grabDocs=!0},disableGrabDocuments(){this.indexGrabDocuments=0,this.grabDocs=!1},startDragging(){"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#fff",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #16afe1",document.getElementsByClassName("no-elements-tip")[0].innerHTML="")},enableActionsMenu(){const e=document.getElementsByClassName("action-label");this.actions_menu=!this.actions_menu,this.addingElement=!1,this.actions_menu?setTimeout(()=>{e.forEach(e=>{e.style.display="block"})},300):e.forEach(e=>{e.style.display="none"})},getLanguages(){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=getactivelanguages"}).then(e=>{this.languages=e.data.data})}},created(){this.getForms(),this.getDocuments(),this.getSubmittionPage(),this.getFilesByForm(),this.getLanguages()},computed:{dragOptions(){return{group:{name:"items",pull:"clone",put:!1},sort:!1,disabled:!1,ghostClass:"ghost"}}}},Dd=Od,Ed=(a("51f7"),Object(b["a"])(Dd,El,yl,!1,null,"534f9c99",null)),yd=Ed.exports,xd=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid"},[a("notifications",{attrs:{group:"foo-velocity","animation-type":"velocity",speed:500,position:"bottom left",classes:"vue-notification-custom"}}),a("div",{staticClass:"row"},[a("div",{staticClass:"sidebar-formbuilder",style:e.actions_menu?"width: 250px":""},[a("transition",{attrs:{name:"move-right"}},[a("div",{staticClass:"actions-menu menu-block"},[a("a",{staticClass:"d-flex back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:e.Back}},[e._v(" "+e._s(e.BuildYourForm)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("div",[a("div",{staticClass:"action-links"},[a("a",{staticClass:"d-flex action-link",staticStyle:{"padding-top":"2em"},attrs:{title:e.addMenu},on:{click:function(t){return e.$modal.show("modalMenu")}}},[a("em",{staticClass:"add-page-icon"}),a("label",{directives:[{name:"show",rawName:"v-show",value:e.actions_menu,expression:"actions_menu"}],staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[e._v(e._s(e.addMenu))])]),a("a",{staticClass:"d-flex action-link",attrs:{title:e.addGroup},on:{click:function(t){return e.createGroup()}}},[a("em",{staticClass:"add-group-icon"}),a("label",{directives:[{name:"show",rawName:"v-show",value:e.actions_menu,expression:"actions_menu"}],staticClass:"action-label col-md-offset-1 col-sm-offset-1"},[e._v(e._s(e.addGroup))])]),a("a",{staticClass:"d-flex action-link",class:{"disable-element":e.elementDisabled},attrs:{title:e.addItem},on:{click:e.showElements}},[a("em",{staticClass:"add-element-icon"}),a("label",{directives:[{name:"show",rawName:"v-show",value:e.actions_menu,expression:"actions_menu"}],staticClass:"action-label col-md-offset-1 col-sm-offset-1",class:[{"disable-element":e.elementDisabled},e.addingElement?"down-arrow":"right-arrow"]},[e._v(e._s(e.addItem))])]),a("transition",{attrs:{name:"slide-right",type:"transition"}},[e.addingElement?a("div",{staticClass:"plugins-list"},[a("a",{staticClass:"d-flex col-md-offset-1 back-button-action pointer",staticStyle:{padding:"0 15px"},attrs:{title:e.Back},on:{click:function(t){e.addingElement=!e.addingElement}}},[a("em",{staticClass:"fas fa-arrow-left mr-1"}),e._v(" "+e._s(e.Back)+" ")]),a("hr",{staticStyle:{width:"80%",margin:"10px auto"}}),a("draggable",e._b({staticStyle:{"padding-bottom":"2em","margin-top":"10%"},attrs:{handle:".handle","drag-class":"plugin-drag","chosen-class":"plugin-chosen","ghost-class":"plugin-ghost"},on:{start:function(t){e.startDragging(),e.dragging=!0,e.draggingIndex=e.index},end:function(t){return e.addingNewElement(t)}},model:{value:e.plugins,callback:function(t){e.plugins=t},expression:"plugins"}},"draggable",e.dragOptions,!1),e._l(e.plugins,(function(t,s){return a("div",{staticClass:"d-flex plugin-link col-md-offset-1 col-sm-offset-1 handle",attrs:{id:"plugin_"+t.value,title:t.name},on:{dblclick:function(a){return e.addingNewElementByDblClick(t.value)}}},[a("em",{class:t.icon}),a("span",{staticClass:"ml-10px"},[e._v(e._s(t.name))])])})),0)],1):e._e()])],1)])])])],1),a("div",{staticClass:"menu-block",class:e.actions_menu?"col-md-8 col-md-offset-4 col-sm-9 col-sm-offset-3":""},[a("div",{staticClass:"heading-block",class:e.addingElement||e.actions_menu?"col-md-offset-2 col-md-9":"col-md-12"},[e._m(0),a("div",{staticClass:"d-flex"},[a("button",{staticClass:"bouton-sauvergarder-et-continuer bouton-sauvergarder-et-continuer-green mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:e.Validate},on:{click:e.sendForm}},[e._v(e._s(e.Validate))]),a("button",{staticClass:"bouton-sauvergarder-et-continuer mt-1",staticStyle:{"margin-left":"10px"},attrs:{title:e.Validate},on:{click:e.sendForm}},[e._v(e._s(e.ExitFormbuilder))])])]),a("div",{staticClass:"form-viewer-builder",class:[e.addingElement||e.actions_menu?"col-sm-offset-5 col-md-offset-4 col-lg-offset-1 col-sm-7":"col-md-10",e.optionsModal?"col-sm-5 col-md-6":"col-md-10"]},[e.formObjectArray[e.indexHighlight]?a("Builder",{key:e.builderKey,ref:"builder",attrs:{object:e.formObjectArray[e.indexHighlight],UpdateUx:e.UpdateUx,rgt:e.rgt,prid:e.prid,eval:1,files:e.files,actualLanguage:e.actualLanguage,manyLanguages:e.manyLanguages},on:{show:e.show,UpdateFormBuilder:e.updateFormObjectAndComponent,removeGroup:e.removeGroup,modalClosed:function(t){e.optionsModal=!1},modalOpen:function(t){e.optionsModal=!0}}}):e._e()],1)])]),e.loading?a("div",{staticClass:"loading-form"},[a("Ring-Loader",{attrs:{color:"#12DB42"}})],1):e._e()],1)},Nd=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("h2",{staticClass:"form-title",staticStyle:{padding:"0",margin:"0"}},[a("img",{staticClass:"mr-1",attrs:{src:"/images/emundus/menus/form.png"}}),e._v("Evaluation")])}];const Ud=a("bef5");var Td={name:"EvaluationBuilder",props:{prid:String,index:Number,cid:Number,eval:Number,actualLanguage:String,manyLanguages:Number},components:{Tasks:Le,List:Fe,ModalAffectCampaign:ud,Builder:zl,ModalSide:Kl,ModalMenu:id,draggable:Qa.a},data(){return{actions_menu:!0,optionsModal:!1,UpdateUx:!1,indexHighlight:0,animation:{enter:{opacity:[1,0],translateX:[0,-300],scale:[1,.2]},leave:{opacity:0,height:0}},loading:!1,first_loading:!1,formObjectArray:[],rgt:0,builderKey:0,files:0,link:"",dragging:!1,draggingIndex:-1,elementDisabled:!1,addingElement:!1,plugins:{field:{id:0,value:"field",icon:"fas fa-font",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_FIELD")},textarea:{id:5,value:"textarea",icon:"far fa-square",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_TEXTAREA")},checkbox:{id:2,value:"checkbox",icon:"far fa-check-square",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_CHECKBOX")},radiobutton:{id:4,value:"radiobutton",icon:"fas fa-list-ul",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_RADIOBUTTON")},dropdown:{id:3,value:"dropdown",icon:"fas fa-th-list",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_DROPDOWN")},birthday:{id:1,value:"birthday",icon:"far fa-calendar-alt",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_BIRTHDAY")},display:{id:6,value:"display",icon:"fas fa-paragraph",name:Joomla.JText._("COM_EMUNDUS_ONBOARD_TYPE_DISPLAY")}},addMenu:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU"),addMenuAction:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDMENU_ACTION"),addGroup:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDGROUP"),addItem:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_ADDITEM"),Actions:Joomla.JText._("COM_EMUNDUS_ONBOARD_ACTIONS"),sendFormButton:Joomla.JText._("COM_EMUNDUS_ONBOARD_SEND_FORM"),Edit:Joomla.JText._("COM_EMUNDUS_ONBOARD_MODIFY"),FormPage:Joomla.JText._("COM_EMUNDUS_ONBOARD_FORM_PAGE"),SubmitPage:Joomla.JText._("COM_EMUNDUS_ONBOARD_SUBMIT_PAGE"),groupCreated:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_CREATEDGROUPSUCCES"),update:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_UPDATE"),Back:Joomla.JText._("COM_EMUNDUS_ONBOARD_ADD_RETOUR"),Validate:Joomla.JText._("COM_EMUNDUS_ONBOARD_OK"),ExitFormbuilder:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_EXIT_FORMBUILDER"),BuildYourForm:Joomla.JText._("COM_EMUNDUS_ONBOARD_BUILDER_BUILD_YOUR_FORM")}},methods:{createElement(e,t,a){Xe.a.isEmpty(this.formObjectArray[this.indexHighlight].object.Groups)||(this.loading=!0,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createcriteria",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ud.stringify({gid:e,plugin:t})}).then(t=>{d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:t.data.scalar,gid:e},paramsSerializer:e=>Ud.stringify(e)}).then(t=>{this.$set(this.formObjectArray[this.indexHighlight].object.Groups["group_"+e],"elements[element"+t.data.id+"]",t.data),this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts.splice(a,0,t.data),this.$refs.builder.updateOrder(e,this.formObjectArray[this.indexHighlight].object.Groups["group_"+e].elts),this.$refs.builder.$refs.builder_viewer.keyElements["element"+t.data.id]=0,this.$refs.builder.$refs.builder_viewer.enableActionBar(t.data.id),this.$refs.builder.$refs.builder_viewer.enableLabelInput(t.data.id),this.loading=!1})}))},addingNewElement:function(e){this.dragging=!1,this.draggingIndex=-1,"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#e4e4e9",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #c3c3ce",document.getElementsByClassName("no-elements-tip")[0].innerHTML=Joomla.JText._("COM_EMUNDUS_ONBOARD_NO_ELEMENTS_TIPS"));let t=e.clone.id.split("_")[1],a=e.to.parentElement.parentElement.parentElement.id.split("_")[1];"undefined"!=typeof a&&this.createElement(a,t,e.newIndex)},addingNewElementByDblClick:Xe.a.debounce((function(e){let t=Object.keys(this.formObjectArray[this.indexHighlight].object.Groups)[Object.keys(this.formObjectArray[this.indexHighlight].object.Groups).length-1].split("_")[1],a=this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts.length;"undefined"!=typeof t&&this.createElement(t,e,a)}),250,{maxWait:1e3}),createGroup(){this.loading=!0,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=createsimplegroup",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ud.stringify({fid:this.formObjectArray[this.indexHighlight].object.id})}).then(e=>{d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getJTEXT",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ud.stringify({toJTEXT:e.data.group_tag})}).then(t=>{e.data.group_showLegend=t.data,d()({method:"post",url:"index.php?option=com_emundus_onboard&controller=program&task=affectgrouptoprogram",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:Ud.stringify({group:e.data.group_id,pid:this.cid})}).then(e=>{this.show("foo-velocity","success",this.groupCreated,this.update)}),this.loading=!1,this.pushGroup(e.data)})})},UpdateName(e,t){this.formObjectArray[e].object.show_title.value=t},UpdateUXT(){this.UpdateUx=!0},pushGroup(e){this.formObjectArray[this.indexHighlight]["object"]["Groups"]["group_"+e.group_id]={elements:{},elts:[],group_id:e.group_id,group_showLegend:e.group_showLegend,label:{fr:e.label.fr,en:e.label.en},group_tag:e.group_tag,ordering:e.ordering},this.elementDisabled=!1,this.$refs.builder.getDataObject(),this.$refs.builder.$refs.builder_viewer.openGroup[e.group_id]=!0,setTimeout(()=>{window.scrollTo(0,document.body.scrollHeight)},200)},removeGroup(e,t){this.formObjectArray.forEach((a,s)=>{a.object.id==t&&delete this.formObjectArray[s]["object"]["Groups"]["group_"+e]}),this.builderKey+=1},updateFormObjectAndComponent(){this.formObjectArray=[],this.getDataObject(),this.builderKey+=1},getElement(e,t){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=formbuilder&task=getElement",params:{element:e,gid:t},paramsSerializer:e=>Ud.stringify(e)}).then(e=>{this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elements["element"+e.data.id]=e.data,this.formObjectArray[this.indexHighlight].object.Groups["group_"+t].elts.push(e.data),this.builderKey+=1})},tip(){this.showTip("foo-velocity",Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP")+"<br/>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP1")+"<br/>"+Joomla.JText._("COM_EMUNDUS_ONBOARD_UPDATEFORMTIP2"),Joomla.JText._("COM_EMUNDUS_ONBOARD_TIP"))},show(e,t="",a="",s="Information"){this.$notify({group:e,title:""+s,text:a,type:t})},showTip(e,t="",a="Information"){this.$notify({group:e,title:""+a,text:t,duration:2e4})},clean(e){this.$notify({group:e,clean:!0})},async getDataObject(){let e=this.link.replace("fabrik","emundus_onboard");await d.a.get(e+"&format=vue_jsonclean").then(e=>{this.formObjectArray.push({object:e.data,link:this.link}),this.loading=!1,this.indexHighlight=0,this.elementDisabled=Xe.a.isEmpty(this.formObjectArray[this.indexHighlight].object.Groups)})},sendForm(){this.redirectJRoute("index.php?option=com_emundus_onboard&view=campaign&layout=addnextcampaign&cid="+this.cid+"&index=0")},redirectJRoute(e){d()({method:"get",url:"index.php?option=com_emundus_onboard&controller=settings&task=redirectjroute",params:{link:e},paramsSerializer:e=>Ud.stringify(e)}).then(e=>{window.location.href=window.location.pathname+e.data.data})},showElements(){this.elementDisabled?this.addingElement=!1:this.addingElement=!this.addingElement},startDragging(){"undefined"!=typeof document.getElementsByClassName("no-elements-tip")[0]&&(document.getElementsByClassName("no-elements-tip")[0].style.background="#fff",document.getElementsByClassName("no-elements-tip")[0].style.border="2px dashed #16afe1",document.getElementsByClassName("no-elements-tip")[0].innerHTML="")}},created(){this.link="index.php?option=com_fabrik&view=form&formid="+this.eval,this.getDataObject()},computed:{dragOptions(){return{group:{name:"items",pull:"clone",put:!1},sort:!1,disabled:!1,ghostClass:"ghost"}}}},Ad=Td,Md=(a("2667"),Object(b["a"])(Ad,xd,Nd,!1,null,"c44e2750",null)),Rd=Md.exports,Sd=a("209f"),wd=a.n(Sd),Jd=a("3332"),kd=a("4859"),Bd=(a("9e26"),a("c2ca")),Ld={methods:{translate(e){return void 0!=typeof e&&null!=e?Joomla.JText._(e)?Joomla.JText._(e):e:""}}},Id=a("7cdb"),Pd=a("66d6"),jd=a.n(Pd),Fd=a("6db0"),$d=a.n(Fd);s["default"].directive("tooltip",Jd["c"]),s["default"].directive("close-popover",Jd["a"]),s["default"].component("v-popover",Jd["b"]),s["default"].component("table-component",Bd["TableComponent"]),s["default"].component("table-column",Bd["TableColumn"]),s["default"].use(jd.a,{velocity:$d.a}),s["default"].use(i.a),s["default"].use(wd.a),s["default"].use(kd),s["default"].use(Jd["c"]),s["default"].use(Id["a"]),s["default"].mixin(Ld),s["default"].config.productionTip=!1,s["default"].config.devtools=!0,document.getElementById("em-list-vue")&&new s["default"]({el:"list",render(e){return e(Fe,{props:{type:this.$el.attributes.type.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value,actualLanguage:this.$el.attributes}})}}),document.getElementById("em-addProgram-vue")&&new s["default"]({el:"#em-addProgram-vue",render(e){return e(mt,{props:{prog:this.$el.attributes.prog.value,actualLanguage:this.$el.attributes.actualLanguage.value}})}}),document.getElementById("em-addProgramAdvancedSettings-vue")&&new s["default"]({el:"#em-addProgramAdvancedSettings-vue",render(e){return e(_o,{props:{prog:this.$el.attributes.prog.value,actualLanguage:this.$el.attributes.actualLanguage.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value}})}}),document.getElementById("em-addCampaign-vue")&&new s["default"]({el:"#em-addCampaign-vue",render(e){return e(To,{props:{campaign:this.$el.attributes.campaign.value,actualLanguage:this.$el.attributes.actualLanguage.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-addEmail-vue")&&new s["default"]({el:"#em-addEmail-vue",render(e){return e(Lo,{props:{email:this.$el.attributes.email.value,actualLanguage:this.$el.attributes.actualLanguage.value}})}}),document.getElementById("em-addForm-vue")&&new s["default"]({el:"#em-addForm-vue",render(e){return e(Ho,{props:{profileId:this.$el.attributes.profileId.value,campaignId:this.$el.attributes.campaignId.value}})}}),document.getElementById("em-addFormNextCampaign-vue")&&new s["default"]({el:"#em-addFormNextCampaign-vue",render(e){return e(Fi,{props:{campaignId:this.$el.attributes.campaignId.value,actualLanguage:this.$el.attributes.actualLanguage.value,index:this.$el.attributes.index.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-formBuilder-vue")&&new s["default"]({el:"#em-formBuilder-vue",render(e){return e(yd,{props:{prid:this.$el.attributes.prid.value,index:this.$el.attributes.index.value,cid:this.$el.attributes.cid.value,eval:this.$el.attributes.eval.value,actualLanguage:this.$el.attributes.actualLanguage.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-evaluationBuilder-vue")&&new s["default"]({el:"#em-evaluationBuilder-vue",render(e){return e(Rd,{props:{prid:this.$el.attributes.prid.value,index:this.$el.attributes.index.value,cid:this.$el.attributes.cid.value,eval:this.$el.attributes.eval.value,actualLanguage:this.$el.attributes.actualLanguage.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-globalSettings-vue")&&new s["default"]({el:"#em-globalSettings-vue",render(e){return e(Dl,{props:{actualLanguage:this.$el.attributes.actualLanguage.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}})},"57ce":function(e,t,a){"use strict";a("4ecd")},"5a0c":function(e,t,a){"use strict";a("6ae7")},"5c32":function(e,t,a){"use strict";a("e283")},"5c70":function(e,t,a){},"5cee":function(e,t,a){"use strict";a("d12c")},"5f49":function(e,t,a){},"5fa4":function(e,t,a){"use strict";a("7f4c")},"6ae7":function(e,t,a){},"6c82":function(e,t,a){},"6d71":function(e,t,a){"use strict";a("5c70")},"6f4e":function(e,t,a){"use strict";a("a393")},7011:function(e,t,a){"use strict";a("c3bb")},"74c0":function(e,t,a){"use strict";a("5f49")},"7a8c":function(e,t,a){"use strict";a("ac5d")},"7b7e":function(e,t,a){},"7dea":function(e,t,a){"use strict";a("8aba")},"7f30":function(e,t,a){},"7f4c":function(e,t,a){},"7fe1":function(e,t,a){"use strict";a("1cb5")},"81b3":function(e,t,a){},"82f3":function(e,t,a){"use strict";a("a961")},"83f5":function(e,t,a){},"870a":function(e,t,a){"use strict";a("e078")},8755:function(e,t,a){},"8aba":function(e,t,a){},"8d23":function(e,t,a){},"8d2f":function(e,t,a){},"8dc1":function(e,t,a){"use strict";a("b649")},"90fa":function(e,t,a){"use strict";a("0bb5")},9234:function(e,t,a){},"946e":function(e,t,a){"use strict";a("ef80")},"96d5":function(e,t,a){"use strict";a("b0af")},9852:function(e,t,a){},9919:function(e,t,a){"use strict";a("3c8f")},"9a7c":function(e,t,a){"use strict";a("b8ed")},a078:function(e,t,a){"use strict";a("b850")},a393:function(e,t,a){},a450:function(e,t,a){"use strict";a("4001")},a4c6:function(e,t,a){},a592:function(e,t,a){"use strict";a("d804")},a5c2:function(e,t,a){},a722:function(e,t,a){"use strict";a("9852")},a7fe:function(e,t,a){"use strict";a("c137")},a933:function(e,t,a){},a961:function(e,t,a){},aaeb:function(e,t,a){},ac3f:function(e,t,a){"use strict";a("d660")},ac5d:function(e,t,a){},ac7f:function(e,t,a){"use strict";a("3c88")},b0af:function(e,t,a){},b182:function(e,t,a){},b649:function(e,t,a){},b850:function(e,t,a){},b8ed:function(e,t,a){},bb8f:function(e,t,a){"use strict";a("8755")},bca8:function(e,t,a){"use strict";a("3852")},c137:function(e,t,a){},c2b1:function(e,t,a){},c3bb:function(e,t,a){},c40c:function(e,t,a){},c4e8:function(e,t,a){},c890:function(e,t,a){},ca99:function(e,t,a){"use strict";a("0227")},d12c:function(e,t,a){},d465:function(e,t,a){"use strict";a("8d23")},d660:function(e,t,a){},d804:function(e,t,a){},e078:function(e,t,a){},e283:function(e,t,a){},e382:function(e,t,a){},e55b:function(e,t,a){"use strict";a("aaeb")},ea74:function(e,t,a){},ef80:function(e,t,a){},ef86:function(e,t,a){},f1cf:function(e,t,a){"use strict";a("6c82")},f3a0:function(e,t,a){"use strict";a("c890")},f54e:function(e,t,a){},f717:function(e,t,a){},f739:function(e,t,a){},ffd0:function(e,t,a){"use strict";a("f54e")}});
//# sourceMappingURL=app_onboard.js.map
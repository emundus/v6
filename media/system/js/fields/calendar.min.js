!function(e,t){"use strict";var a=function(e){if(!e)throw new Error("Calendar setup failed:\n  No valid element found, Please check your code");if("function"!=typeof Date.parseFieldDate)throw new Error("Calendar setup failed:\n  No valid date helper, Please check your code");if(e._joomlaCalendar)throw new Error("JoomlaCalendar instance already exists for the element");e._joomlaCalendar=this;var a=this;if(this.writable=!0,this.hidden=!0,this.params={},this.element=e,this.inputField=e.getElementsByTagName("input")[0],this.button=e.getElementsByTagName("button")[0],!this.inputField)throw new Error("Calendar setup failed:\n  No valid input found, Please check your code");this.params={debug:!1,clicked:!1,element:{style:{display:"none"}},writable:!0};var s=Joomla.Text._;this.strings={today:s("JLIB_HTML_BEHAVIOR_TODAY","Today"),wk:s("JLIB_HTML_BEHAVIOR_WK","wk"),days:["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"],shortDays:["SUN","MON","TUE","WED","THU","FRI","SAT"],months:["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],shortMonths:["JANUARY_SHORT","FEBRUARY_SHORT","MARCH_SHORT","APRIL_SHORT","MAY_SHORT","JUNE_SHORT","JULY_SHORT","AUGUST_SHORT","SEPTEMBER_SHORT","OCTOBER_SHORT","NOVEMBER_SHORT","DECEMBER_SHORT"],am:s("JLIB_HTML_BEHAVIOR_AM","am"),pm:s("JLIB_HTML_BEHAVIOR_PM","pm"),exit:s("JCLOSE","Close"),clear:s("JCLEAR","Clear")},this.strings.days=this.strings.days.map((function(e){return s(e)})),this.strings.shortDays=this.strings.shortDays.map((function(e){return s(e)})),this.strings.months=this.strings.months.map((function(e){return s(e)})),this.strings.shortMonths=this.strings.shortMonths.map((function(e){return s(e)}));var i=this.button,r={inputField:this.inputField,dateType:i.dataset.dateType||"gregorian",direction:t.dir?t.dir:t.getElementsByTagName("html")[0].getAttribute("dir"),firstDayOfWeek:i.dataset.firstday?parseInt(i.dataset.firstday,10):0,dateFormat:i.dataset.dateFormat||"%Y-%m-%d %H:%M:%S",weekend:[0,6],minYear:1e3,maxYear:2100,time24:!0,showsOthers:!0,showsTime:!0,weekNumbers:!0,showsTodayBtn:!0,compressedHeader:!1};for(var n in"showOthers"in i.dataset&&(r.showsOthers=1===parseInt(i.dataset.showOthers,10)),"weekNumbers"in i.dataset&&(r.weekNumbers=1===parseInt(i.dataset.weekNumbers,10)),"onlyMonthsNav"in i.dataset&&(r.compressedHeader=1===parseInt(i.dataset.onlyMonthsNav,10)),"time24"in i.dataset&&(r.time24=24===parseInt(i.dataset.time24,10)),"showTime"in i.dataset&&(r.showsTime=1===parseInt(i.dataset.showTime,10)),"todayBtn"in i.dataset&&(r.showsTodayBtn=1===parseInt(i.dataset.todayBtn,10)),r)this.params[n]=r[n];i.dataset.minYear&&(a.params.minYear=parseInt(i.dataset.minYear,10)),i.dataset.maxYear&&(a.params.maxYear=parseInt(i.dataset.maxYear,10)),i.dataset.weekend&&(a.params.weekend=i.dataset.weekend.split(",").map((function(e){return parseInt(e,10)}))),"rtl"===this.params.direction&&(this.strings.days=this.strings.days.reverse(),this.strings.shortDays=this.strings.shortDays.reverse()),this.strings.months=Date.monthsToLocalOrder(this.strings.months,this.params.dateType),this.strings.shortMonths=Date.monthsToLocalOrder(this.strings.shortMonths,this.params.dateType),this._dayMouseDown=function(e){return a._handleDayMouseDown(e)},this._calKeyEvent=function(e){return a._handleCalKeyEvent(e)},this._documentClick=function(e){return a._handleDocumentClick(e)},this.checkInputs(),this.inputField.getAttribute("readonly")||(this._create(),this._bindEvents())};a.prototype.checkInputs=function(){var e=Date.parseFieldDate(this.inputField.getAttribute("data-alt-value"),this.params.dateFormat,"gregorian",this.strings);""!==this.inputField.value?(this.date=e,this.inputField.value=e.print(this.params.dateFormat,this.params.dateType,!0,this.strings)):this.date=new Date},a.prototype.recreate=function(){var e=this.element,t=e.querySelector(".js-calendar");t&&(e._joomlaCalendar=null,t.parentNode.removeChild(t),new a(e))},a.prototype.updateTime=function(e,t,a){var s=this,i=s.date,r=s.date.getLocalDate(s.params.dateType),n=s.date.getLocalMonth(s.params.dateType),d=s.date.getLocalFullYear(s.params.dateType),l=this.inputField.parentNode.parentNode.querySelectorAll(".time-ampm")[0];s.params.time24||(/pm/i.test(l.value)&&e<12?e=parseInt(e)+12:/am/i.test(l.value)&&12==e&&(e=0)),i.setHours(e),i.setMinutes(parseInt(t,10)),i.setSeconds(i.getSeconds()),i.setLocalFullYear(s.params.dateType,d),i.setLocalMonth(s.params.dateType,n),i.setLocalDate(s.params.dateType,r),s.dateClicked=!1,this.callHandler()},a.prototype.setDate=function(e){e.equalsTo(this.date)||(this.date=e,this.processCalendar(this.params.firstDayOfWeek,e))},a.prototype.moveCursorBy=function(e){var t=new Date(this.date);t.setDate(t.getDate()-e),this.setDate(t)},a.prototype.resetSelected=function(e){for(var t=e.options,a=t.length;a--;){var s=t[a];s.selected&&(s.selected=!1)}},a.prototype.callHandler=function(){this.inputField.setAttribute("data-alt-value",this.date.print(this.params.dateFormat,"gregorian",!1,this.strings)),this.inputField.getAttribute("data-alt-value")&&"0000-00-00 00:00:00"!==this.inputField.getAttribute("data-alt-value")&&(this.inputField.value=this.date.print(this.params.dateFormat,this.params.dateType,!0,this.strings),"gregorian"!==this.params.dateType&&this.inputField.setAttribute("data-local-value",this.date.print(this.params.dateFormat,this.params.dateType,!0,this.strings))),this.inputField.value=this.date.print(this.params.dateFormat,this.params.dateType,!0,this.strings),this.dateClicked&&"function"==typeof this.params.onUpdate&&this.params.onUpdate(this),this.inputField.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0})),this.dateClicked?this.close():this.processCalendar()},a.prototype.close=function(){this.hide()},a.prototype.show=function(){this.checkInputs(),this.inputField.focus(),this.dropdownElement.classList.add("open"),this.dropdownElement.removeAttribute("hidden"),this.hidden=!1,t.addEventListener("keydown",this._calKeyEvent,!0),t.addEventListener("keypress",this._calKeyEvent,!0),t.addEventListener("mousedown",this._documentClick,!0);var a=this.element.querySelector(".js-calendar");e.innerHeight<a.getBoundingClientRect().bottom+20&&(a.style.marginTop=-(a.getBoundingClientRect().height+this.inputField.getBoundingClientRect().height)+"px"),this.processCalendar()},a.prototype.hide=function(){t.removeEventListener("keydown",this._calKeyEvent,!0),t.removeEventListener("keypress",this._calKeyEvent,!0),t.removeEventListener("mousedown",this._documentClick,!0),this.dropdownElement.classList.remove("open"),this.dropdownElement.setAttribute("hidden",""),this.hidden=!0},a.prototype._handleDocumentClick=function(e){var a=e.target;if(null!==a&&!a.classList.contains("time"))for(;null!==a&&a!==this.element;a=a.parentNode);if(null===a)return t.activeElement.blur(),this.hide(),s(e)},a.prototype._handleDayMouseDown=function(e){var t=this,a=e.currentTarget,i=e.target||e.srcElement;if(!i||!i.hasAttribute("data-action")){if("TD"!==a.nodeName){var r=a.getParent("TD");"TD"===r.nodeName?a=r:(a=a.getParent("TD")).classList.contains("js-calendar")&&(a=a.getElementsByTagName("table")[0])}else if(!i.classList.contains("js-btn")&&!a.classList.contains("day")&&!a.classList.contains("title"))return;if(!a||a.disabled)return!1;if(void 0===a.navtype||300!==a.navtype){50===a.navtype&&(a._current=a.innerHTML),i!==a&&i.parentNode!==a||t.cellClick(a,e);var n=null;void 0!==a.month&&(n=a),void 0!==a.parentNode.month&&(n=a.parentNode);var d=null;if(n)d=new Date(t.date),n.month!==d.getLocalMonth(t.params.dateType)&&(d.setLocalMonth(t.params.dateType,n.month),t.setDate(d),t.dateClicked=!1,this.callHandler());else{var l=null;void 0!==a.year&&(l=i),void 0!==a.parentNode.year&&(l=i.parentNode),l&&(d=new Date(t.date),l.year!==d.getLocalFullYear(t.params.dateType)&&(d.setFullYear(t.params.dateType,l.year),t.setDate(d),t.dateClicked=!1,this.callHandler()))}}return s(e)}},a.prototype.cellClick=function(e,t){var a=this,s=!1,i=!1,r=null;if(void 0===e.navtype){a.currentDateEl&&(e.classList.add("selected"),a.currentDateEl=e.caldate,(s=a.currentDateEl===e.caldate)||(a.currentDateEl=e.caldate)),a.date.setLocalDateOnly("gregorian",e.caldate);var n=!(a.dateClicked=!e.otherMonth);a.currentDateEl&&(i=!e.disabled),n&&this.processCalendar()}else{r=new Date(a.date),a.dateClicked=!1;var d=r.getOtherFullYear(a.params.dateType),l=r.getLocalMonth(a.params.dateType);switch(e.navtype){case 400:break;case-2:a.params.compressedHeader||d>a.params.minYear&&r.setOtherFullYear(a.params.dateType,d-1);break;case-1:var o=r.getLocalDate(a.params.dateType);if(l>0)o>(p=r.getLocalMonthDays(a.params.dateType,l-1))&&r.setLocalDate(a.params.dateType,p),r.setLocalMonth(a.params.dateType,l-1);else if(d-- >a.params.minYear){r.setOtherFullYear(a.params.dateType,d),o>(p=r.getLocalMonthDays(a.params.dateType,11))&&r.setLocalDate(a.params.dateType,p),r.setLocalMonth(a.params.dateType,11)}break;case 1:o=r.getLocalDate(a.params.dateType);if(l<11)o>(p=r.getLocalMonthDays(a.params.dateType,l+1))&&r.setLocalDate(a.params.dateType,p),r.setLocalMonth(a.params.dateType,l+1);else if(d<a.params.maxYear){var p;r.setOtherFullYear(a.params.dateType,d+1),o>(p=r.getLocalMonthDays(a.params.dateType,0))&&r.setLocalDate(a.params.dateType,p),r.setLocalMonth(a.params.dateType,0)}break;case 2:a.params.compressedHeader||d<a.params.maxYear&&r.setOtherFullYear(a.params.dateType,d+1)}r.equalsTo(a.date)?0===e.navtype&&(i=s=!0):(this.setDate(r),i=!0)}i&&(a.params.showsTime&&(this.dateClicked=!1),t&&this.callHandler()),e.classList.remove("hilite"),s&&!a.params.showsTime&&(a.dateClicked=!1,t&&this.close())},a.prototype._handleCalKeyEvent=function(e){var t=this,a=e.keyCode;if(e.target!==this.inputField||13!==a&&9!==a||this.close(),"rtl"===t.params.direction&&(37===a?a=39:39===a&&(a=37)),32===a&&e.shiftKey&&(e.preventDefault(),this.cellClick(t._nav_now,e),t.close()),27===a&&this.close(),38===a&&this.moveCursorBy(7),40===a&&this.moveCursorBy(-7),37===a&&this.moveCursorBy(1),39===a&&this.moveCursorBy(-1),e.target===this.inputField&&!(a>48||a<57||186===a||189===a||190===a||32===a))return s(e)},a.prototype._create=function(){var e=this,t=this.element,a=i("table"),s=i("div");this.table=a,a.className="table",a.style.marginBottom=0,this.dropdownElement=s,t.appendChild(s),this.params.direction&&(s.style.direction=this.params.direction),s.className="js-calendar",s.style.position="absolute",s.style.boxShadow="0 0 70px 0 rgba(0,0,0,0.67)",s.style.minWidth=this.inputField.width,s.style.padding="0",s.setAttribute("hidden",""),s.style.left="auto",s.style.top="auto",s.style.zIndex=1060,s.style.borderRadius="20px",this.wrapper=i("div"),this.wrapper.className="calendar-container",s.appendChild(this.wrapper),this.wrapper.appendChild(a);var r=i("thead",a);r.className="calendar-header";var n=null,d=null,l=this,o=function(t,a,s,r,o,p,h){for(var m in o=o||{},n=i(r=r||"td",d),a&&(p=p?'class="'+p+'"':"",n.colSpan=a),o)n.style[m]=o[m];for(var m in h)n.setAttribute(m,h[m]);return 0!==s&&Math.abs(s)<=2&&(n.className+=" nav"),a&&n.addEventListener("mousedown",e._dayMouseDown,!0),n.calendar=l,n.navtype=s,0!==s&&Math.abs(s)<=2?n.innerHTML=Joomla.sanitizeHtml("<a "+p+" style='display:inline;padding:2px 6px;cursor:pointer;text-decoration:none;' unselectable='on'>"+t+"</a>"):(n.innerHTML=a?Joomla.sanitizeHtml("<div unselectable='on'"+p+">"+t+"</div>"):Joomla.sanitizeHtml(t),!a&&p&&(n.className=p)),n};!1===this.params.compressedHeader&&((d=i("tr",r)).className="calendar-head-row",this._nav_py=o("&lsaquo;",1,-2,"",{"text-align":"center","font-size":"18px","line-height":"18px"},"js-btn btn-prev-year"),this.title=o('<div style="text-align:center;font-size:18px"><span></span></div>',this.params.weekNumbers?6:5,300),this.title.className="title",this._nav_ny=o(" &rsaquo;",1,2,"",{"text-align":"center","font-size":"18px","line-height":"18px"},"js-btn btn-next-year")),(d=i("tr",r)).className="calendar-head-row",this._nav_pm=o("&lsaquo;",1,-1,"",{"text-align":"center","font-size":"2em","line-height":"1em"},"js-btn btn-prev-month"),this._nav_month=o('<div style="text-align:center;font-size:1.2em"><span></span></div>',this.params.weekNumbers?6:5,888,"td",{textAlign:"center"}),this._nav_month.className="title",this._nav_nm=o(" &rsaquo;",1,1,"",{"text-align":"center","font-size":"2em","line-height":"1em"},"js-btn btn-next-month"),(d=i("tr",r)).className=e.params.weekNumbers?"daynames wk":"daynames",this.params.weekNumbers&&((n=i("td",d)).className="day-name wn",n.textContent=e.strings.wk);for(var p=7;p>0;--p)n=i("td",d),p||(n.calendar=e);this.firstdayname=this.params.weekNumbers?d.firstChild.nextSibling:d.firstChild;var h=this.params.firstDayOfWeek,m=(n=this.firstdayname,this.params.weekend);for(p=0;p<7;++p){var c=(p+h)%7;n.classList.add("day-name"),this.params.weekNumbers&&n.classList.add("day-name-week"),p&&(n.calendar=e,n.fdow=c),-1!==m.indexOf(m)&&n.classList.add("weekend"),n.textContent=this.strings.shortDays[(p+h)%7],n=n.nextSibling}var u=i("tbody",a);for(this.tbody=u,p=6;p>0;--p){d=i("tr",u),this.params.weekNumbers&&(n=i("td",d));for(var y=7;y>0;--y)(n=i("td",d)).calendar=this,n.addEventListener("mousedown",this._dayMouseDown,!0)}if(this.params.showsTime){(d=i("tr",u)).className="time",(n=i("td",d)).className="time time-title",n.colSpan=1,n.style.verticalAlign="middle",n.innerHTML=" ";var v=i("td",d);v.className="time hours-select",v.colSpan=2;var g=i("td",d);g.className="time minutes-select",g.colSpan=2,function(){function t(t,a,s,r,n){var d,l=i("select",n);l.calendar=e,l.className=t,l.setAttribute("data-chosen",!0),l.style.width="100%",l.navtype=50,l._range=[];for(var o=s;o<=r;++o){var p,h="";o===a&&(h=!0),o<10&&r>=10?(d="0"+o,p=Date.convertNumbers("0")+Date.convertNumbers(o)):(d=""+o,p=""+Date.convertNumbers(o)),l.options.add(new Option(p,d,h,h))}return l}var a=e.date.getHours(),s=e.date.getMinutes(),r=!e.params.time24,l=e.date.getHours()>12;r&&l&&(a-=12);var o=t("time time-hours",a,r?1:0,r?12:23,v),p=t("time time-minutes",s,0,59,g);if((n=i("td",d)).className="time ampm-select",n.colSpan=e.params.weekNumbers?2:3,r){var h=!0;l=Date.parseFieldDate(e.inputField.getAttribute("data-alt-value"),e.params.dateFormat,"gregorian",e.strings).getHours()>=12;var m=i("select",n);m.className="time-ampm",m.style.width="100%",m.options.add(new Option(e.strings.pm,"pm",l?h:"",l?h:"")),m.options.add(new Option(e.strings.am,"am",l?"":h,l?"":h)),m.addEventListener("change",(function(t){e.updateTime(t.target.parentNode.parentNode.childNodes[1].childNodes[0].value,t.target.parentNode.parentNode.childNodes[2].childNodes[0].value,t.target.parentNode.parentNode.childNodes[3].childNodes[0].value)}),!1)}else n.innerHTML="&#160;",n.colSpan=e.params.weekNumbers?3:2;o.addEventListener("change",(function(t){e.updateTime(t.target.parentNode.parentNode.childNodes[1].childNodes[0].value,t.target.parentNode.parentNode.childNodes[2].childNodes[0].value,t.target.parentNode.parentNode.childNodes[3].childNodes[0].value)}),!1),p.addEventListener("change",(function(t){e.updateTime(t.target.parentNode.parentNode.childNodes[1].childNodes[0].value,t.target.parentNode.parentNode.childNodes[2].childNodes[0].value,t.target.parentNode.parentNode.childNodes[3].childNodes[0].value)}),!1)}()}((d=i("div",this.wrapper)).className="buttons-wrapper btn-group",this._nav_clear=o(this.strings.clear,"",100,"button","","js-btn btn btn-clear",{type:"button","data-action":"clear"}),d.querySelector('[data-action="clear"]').addEventListener("click",(function(t){t.preventDefault();for(var a=e.table.querySelectorAll("td"),s=0;s<a.length;s++)if(a[s].classList.contains("selected")){a[s].classList.remove("selected");break}e.inputField.setAttribute("data-alt-value","0000-00-00 00:00:00"),e.inputField.setAttribute("value",""),e.inputField.value="",e.inputField.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0}))})),this.params.showsTodayBtn)&&(this._nav_now=o(this.strings.today,"",0,"button","","js-btn btn btn-today",{type:"button","data-action":"today"}),this.wrapper.querySelector('[data-action="today"]').addEventListener("click",(function(t){t.preventDefault(),e.date.setLocalDateOnly("gregorian",new Date),e.dateClicked=!0,e.callHandler(),e.close()})));this._nav_exit=o(this.strings.exit,"",999,"button","","js-btn btn btn-exit",{type:"button","data-action":"exit"}),this.wrapper.querySelector('[data-action="exit"]').addEventListener("click",(function(t){t.preventDefault(),e.dateClicked||(e.inputField.value?("gregorian"!==e.params.dateType&&e.inputField.setAttribute("data-local-value",e.inputField.value),void 0===e.dateClicked?e.inputField.setAttribute("data-alt-value",Date.parseFieldDate(e.inputField.value,e.params.dateFormat,e.params.dateType,e.strings).print(e.params.dateFormat,"gregorian",!1,e.strings)):e.inputField.setAttribute("data-alt-value",e.date.print(e.params.dateFormat,"gregorian",!1,e.strings))):e.inputField.setAttribute("data-alt-value","0000-00-00 00:00:00"),e.date=Date.parseFieldDate(e.inputField.getAttribute("data-alt-value"),e.params.dateFormat,e.params.dateType,e.strings)),e.close()})),this.processCalendar()},a.prototype.processCalendar=function(){this.table.style.visibility="hidden";var e=this.params.firstDayOfWeek,t=this.date,a=new Date,s=a.getLocalFullYear(this.params.dateType),i=a.getLocalMonth(this.params.dateType),r=a.getLocalDate(this.params.dateType),n=t.getOtherFullYear(this.params.dateType),d=t.getHours(),l=t.getMinutes(),o=(t.getSeconds(),!this.params.time24);n<this.params.minYear?(n=this.params.minYear,t.setOtherFullYear(this.params.dateType,n)):n>this.params.maxYear&&(n=this.params.maxYear,t.setOtherFullYear(this.params.dateType,n)),this.params.firstDayOfWeek=e,this.date=new Date(t);var p=t.getLocalMonth(this.params.dateType),h=t.getLocalDate(this.params.dateType);t.setLocalDate(this.params.dateType,1);var m=(t.getLocalDay(this.params.dateType)-this.params.firstDayOfWeek)%7;m<0&&(m+=7),t.setLocalDate(this.params.dateType,-m),t.setLocalDate(this.params.dateType,t.getLocalDate(this.params.dateType)+1);for(var c=this.tbody.firstChild,u=this.ar_days=new Array,y=this.params.weekend,v=parseInt(t.getLocalWeekDays(this.params.dateType)),g=0;g<v;++g,c=c.nextSibling){var b=c.firstChild;this.params.weekNumbers&&(b.className="day wn",b.textContent=t.getLocalWeekNumber(this.params.dateType),b=b.nextSibling),c.className=this.params.weekNumbers?"daysrow wk":"daysrow";for(var f,T=!1,N=u[g]=[],w=v+1,D=0;D<w;++D,b=b.nextSibling,t.setLocalDate(this.params.dateType,f+1)){b.className="day",b.style.textAlign="center",f=t.getLocalDate(this.params.dateType);var L=t.getLocalDay(this.params.dateType);b.pos=g<<4|D,N[D]=b;var F=t.getLocalMonth(this.params.dateType)===p;if(F)b.otherMonth=!1,T=!0,b.style.cursor="pointer";else{if(!this.params.showsOthers){b.className+=" emptycell",b.innerHTML="&#160;",b.disabled=!0;continue}b.className+=" disabled othermonth ",b.otherMonth=!0}b.disabled=!1,b.textContent=this.params.debug?f:Date.convertNumbers(f),b.disabled||(b.caldate=new Date(t),F&&f===h&&(b.className+=" selected",this.currentDateEl=b),t.getLocalFullYear(this.params.dateType)===s&&t.getLocalMonth(this.params.dateType)===i&&f===r&&(b.className+=" today"),-1!==y.indexOf(L)&&(b.className+=" weekend"))}T||this.params.showsOthers?(c.classList.remove("hidden"),c.removeAttribute("hidden","")):(c.classList.add("hidden"),c.setAttribute("hidden",""),c.className="emptyrow")}if(this.params.showsTime){d>12&&o&&(d-=12),d=d<10?"0"+d:d,l=l<10?"0"+l:l;var E=this.table.querySelector(".time-hours"),k=this.table.querySelector(".time-minutes");if(this.resetSelected(E),this.params.time24?E.value=d:E.value="00"==d?"12":d,this.resetSelected(k),k.value=l,!this.params.time24){var C=new Date(this.inputField.getAttribute("data-alt-value")),A=this.table.querySelector(".time-ampm");C.getHours()>12&&(this.resetSelected(A),A.value="pm")}}if(this.params.compressedHeader){var _=Date.convertNumbers(n.toString());this._nav_month.getElementsByTagName("span")[0].textContent=this.params.monthBefore?_+" - "+this.strings.months[p]:this.strings.months[p]+" - "+_}else this._nav_month.getElementsByTagName("span")[0].textContent=this.params.debug?p+" "+this.strings.months[p]:this.strings.months[p],this.title.getElementsByTagName("span")[0].textContent=this.params.debug?n+" "+Date.convertNumbers(n.toString()):Date.convertNumbers(n.toString());this.table.style.visibility="visible"},a.prototype._bindEvents=function(){var e=this;this.inputField.addEventListener("blur",(function(t){var s=a.getCalObject(this)._joomlaCalendar;if(s.dropdownElement.hasAttribute("hidden")){if(s){if(s.inputField.value)if(void 0===s.params.dateClicked)if(s.inputField.setAttribute("data-local-value",s.inputField.value),"gregorian"!==s.params.dateType){var i,r=Date.parseFieldDate(s.inputField.value,s.params.dateFormat,s.params.dateType,s.strings);i=Date.localCalToGregorian(r.getFullYear(),r.getMonth(),r.getDate()),r.setFullYear(i[0]),r.setMonth(i[1]),r.setDate(i[2]),s.inputField.setAttribute("data-alt-value",r.print(s.params.dateFormat,"gregorian",!1,s.strings))}else s.inputField.setAttribute("data-alt-value",Date.parseFieldDate(s.inputField.value,s.params.dateFormat,s.params.dateType,s.strings).print(s.params.dateFormat,"gregorian",!1,s.strings));else s.inputField.setAttribute("data-alt-value",s.date.print(s.params.dateFormat,"gregorian",!1,s.strings));else s.inputField.setAttribute("data-alt-value","0000-00-00 00:00:00");s.date=Date.parseFieldDate(s.inputField.getAttribute("data-alt-value"),s.params.dateFormat,s.params.dateType,s.strings)}e.close()}else t.preventDefault()}),!0),this.button.addEventListener("click",(function(){e.show()}),!1)};var s=function(t){return t||(t=e.event),t.preventDefault(),t.stopPropagation(),!1},i=function(e,a){var s;return s=t.createElement(e),void 0!==a&&a.appendChild(s),s};function r(e){for(var t=e.target.querySelectorAll(".field-calendar"),s=0,i=t.length;s<i;s++)a.init(t[s])}a.getCalObject=function(e){if(!e)return!1;for(;e.parentNode;)if((e=e.parentNode).classList.contains("field-calendar"))return e;return!1},a.prototype.setAltValue=function(){var e=this.inputField;e.getAttribute("disabled")||(e.value=e.getAttribute("data-alt-value")&&"0000-00-00 00:00:00"!==e.getAttribute("data-alt-value")?e.getAttribute("data-alt-value"):"")},a.onSubmit=function(){if(Joomla=e.Joomla||{},!Joomla.calendarProcessed){Joomla.calendarProcessed=!0;for(var a=t.querySelectorAll(".field-calendar"),s=0;s<a.length;s++){var i=a[s]._joomlaCalendar;i&&i.setAltValue()}}},a.init=function(e,t){var s=e._joomlaCalendar;s?s.recreate():new a(e),e&&e.getElementsByTagName("input")[0]&&e.getElementsByTagName("input")[0].form&&!e.getElementsByTagName("input")[0].disabled&&e.getElementsByTagName("input")[0].form.addEventListener("submit",a.onSubmit)},e.JoomlaCalendar=a,t.addEventListener("DOMContentLoaded",r),t.addEventListener("joomla:updated",r),e.Calendar={},Calendar.setup=function(e){if(e.inputField&&t.getElementById(e.inputField)){var s=t.getElementById(e.inputField),i=s.parentNode.querySelectorAll("button")[0];for(var r in e)if(e.hasOwnProperty(r))switch(r){case"ifFormat":i&&i.setAttribute("data-dayformat",e.ifFormat);break;case"firstDay":i&&i.setAttribute("data-firstday",parseInt(e.firstDay));break;case"weekNumbers":i&&i.setAttribute("data-week-numbers","true"===e.weekNumbers||!0===e.weekNumbers?"1":"0");break;case"showOthers":i&&i.setAttribute("data-show-others","true"===e.showOthers||!0===e.showOthers?"1":"0");break;case"showsTime":i&&i.setAttribute("data-show-time","true"===e.showsTime||!0===e.showsTime?"1":"0");break;case"timeFormat":i&&i.setAttribute("data-time-24",parseInt(e.timeFormat))}a.init(s.parentNode.parentNode)}return null}}(window,document);
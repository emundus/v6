(function(e){function t(t){for(var s,u,i=t[0],l=t[1],o=t[2],m=0,g=[];m<i.length;m++)u=i[m],Object.prototype.hasOwnProperty.call(n,u)&&n[u]&&g.push(n[u][0]),n[u]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);c&&c(t);while(g.length)g.shift()();return r.push.apply(r,o||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],s=!0,i=1;i<a.length;i++){var l=a[i];0!==n[l]&&(s=!1)}s&&(r.splice(t--,1),e=u(u.s=a[0]))}return e}var s={},n={app:0},r=[];function u(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,u),a.l=!0,a.exports}u.m=e,u.c=s,u.d=function(e,t,a){u.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},u.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},u.t=function(e,t){if(1&t&&(e=u(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(u.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)u.d(a,s,function(t){return e[t]}.bind(null,s));return a},u.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return u.d(t,"a",t),t},u.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},u.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var o=0;o<i.length;o++)t(i[o]);var c=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"16b4":function(e,t,a){},"27c3":function(e,t,a){"use strict";a("c9a7")},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"messages__vue"},[a("div",{staticClass:"col-md-3"},e._l(e.campaigns,(function(t){return a("div",{staticClass:"messages__block",class:t.fnum==e.campaignSelected?"messages__active-campaign":"",on:{click:function(a){e.campaignSelected=t.fnum}}},[a("div",{staticClass:"messages__campaign-block"},[a("span",[e._v(e._s(t.label))])]),a("hr",{class:t.fnum==e.campaignSelected?"messages__active-hr":""})])})),0),a("div",{staticClass:"col-md-8 messages__list"},[a("label",{staticClass:"text-center",staticStyle:{width:"100%"}},[e._v(e._s(e.translations.messages))]),a("div",{staticClass:"messages__list-block"},e._l(e.messages,(function(t){return a("div",{staticClass:"messages__message-item",class:e.currentUser==t.user_id_from?"messages__current_user":""},[a("div",{staticClass:"messages__message-item-block"},[a("p",[a("em",{staticClass:"messages__message-item-from"},[e._v(e._s(t.name))])]),a("span",{staticClass:"messages__message-item-span"},[e._v(e._s(t.message))])])])})),0),a("div",{staticClass:"messages__bottom-input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{type:"text"},domProps:{value:e.message},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage.apply(null,arguments)},input:function(t){t.target.composing||(e.message=t.target.value)}}}),a("i",{staticClass:"far fa-paper-plane messages__send-icon",on:{click:e.sendMessage}})])])])},r=[],u=a("bc3a"),i=a.n(u),l=(a("16b4"),a("4328")),o={name:"Messages",props:{},components:{},data:function(){return{messages:[],campaigns:[],campaignSelected:0,currentUser:null,message:"",translations:{messages:Joomla.JText._("COM_EMUNDUS_MESSENGER_TITLE")}}},methods:{getCampaignsByUser:function(){var e=this;i()({method:"get",url:"index.php?option=com_emundus_messenger&controller=messages&task=getcampaignsbyuser"}).then((function(t){e.campaigns=t.data.data,e.currentUser=t.data.current_user,e.campaignSelected=e.campaigns[0].fnum}))},getMessagesByFnum:function(){var e=this;i()({method:"get",url:"index.php?option=com_emundus_messenger&controller=messages&task=getmessagesbyfnum",params:{fnum:this.campaignSelected},paramsSerializer:function(e){return l.stringify(e)}}).then((function(t){e.messages=t.data.data,e.scrollToBottom()}))},sendMessage:function(){var e=this;i()({method:"post",url:"index.php?option=com_emundus_messenger&controller=messages&task=sendmessage",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:l.stringify({message:this.message,fnum:this.campaignSelected})}).then((function(t){e.message="",e.messages.push(t.data),e.scrollToBottom()}))},scrollToBottom:function(){setTimeout((function(){var e=document.getElementsByClassName("messages__list-block")[0];e.scrollTop=e.scrollHeight}),500)}},created:function(){this.getCampaignsByUser()},watch:{campaignSelected:function(){this.getMessagesByFnum()}}},c=o,m=(a("27c3"),a("2877")),g=Object(m["a"])(c,n,r,!1,null,"43e0b3f4",null),d=g.exports;s["a"].config.productionTip=!1,s["a"].config.devtools=!0,document.getElementById("em-messages-vue")&&new s["a"]({el:"#em-messages-vue",render:function(e){return e(d,{props:{}})}}),document.getElementById("em-addProgram-vue")&&new s["a"]({el:"#em-addProgram-vue",render:function(e){return e(AddProgram,{props:{prog:this.$el.attributes.prog.value,actualLanguage:this.$el.attributes.actualLanguage.value}})}}),document.getElementById("em-addProgramAdvancedSettings-vue")&&new s["a"]({el:"#em-addProgramAdvancedSettings-vue",render:function(e){return e(AddProgramAdvancedSettings,{props:{prog:this.$el.attributes.prog.value,actualLanguage:this.$el.attributes.actualLanguage.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value}})}}),document.getElementById("em-addCampaign-vue")&&new s["a"]({el:"#em-addCampaign-vue",render:function(e){return e(AddCampaign,{props:{campaign:this.$el.attributes.campaign.value,actualLanguage:this.$el.attributes.actualLanguage.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-addEmail-vue")&&new s["a"]({el:"#em-addEmail-vue",render:function(e){return e(AddEmail,{props:{email:this.$el.attributes.email.value,actualLanguage:this.$el.attributes.actualLanguage.value}})}}),document.getElementById("em-addForm-vue")&&new s["a"]({el:"#em-addForm-vue",render:function(e){return e(AddForm,{props:{profileId:this.$el.attributes.profileId.value,campaignId:this.$el.attributes.campaignId.value}})}}),document.getElementById("em-addFormNextCampaign-vue")&&new s["a"]({el:"#em-addFormNextCampaign-vue",render:function(e){return e(AddFormNextCampaign,{props:{campaignId:this.$el.attributes.campaignId.value,actualLanguage:this.$el.attributes.actualLanguage.value,index:this.$el.attributes.index.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-formBuilder-vue")&&new s["a"]({el:"#em-formBuilder-vue",render:function(e){return e(formBuilder,{props:{prid:this.$el.attributes.prid.value,index:this.$el.attributes.index.value,cid:this.$el.attributes.cid.value,eval:this.$el.attributes.eval.value,actualLanguage:this.$el.attributes.actualLanguage.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-evaluationBuilder-vue")&&new s["a"]({el:"#em-evaluationBuilder-vue",render:function(e){return e(evaluationBuilder,{props:{prid:this.$el.attributes.prid.value,index:this.$el.attributes.index.value,cid:this.$el.attributes.cid.value,eval:this.$el.attributes.eval.value,actualLanguage:this.$el.attributes.actualLanguage.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}}),document.getElementById("em-globalSettings-vue")&&new s["a"]({el:"#em-globalSettings-vue",render:function(e){return e(GlobalSettings,{props:{actualLanguage:this.$el.attributes.actualLanguage.value,coordinatorAccess:this.$el.attributes.coordinatorAccess.value,manyLanguages:this.$el.attributes.manyLanguages.value}})}})},c9a7:function(e,t,a){}});
//# sourceMappingURL=app.js.map
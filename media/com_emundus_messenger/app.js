(function(e){function s(s){for(var n,i,o=s[0],c=s[1],l=s[2],m=0,g=[];m<o.length;m++)i=o[m],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&g.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(s);while(g.length)g.shift()();return r.push.apply(r,l||[]),t()}function t(){for(var e,s=0;s<r.length;s++){for(var t=r[s],n=!0,o=1;o<t.length;o++){var c=t[o];0!==a[c]&&(n=!1)}n&&(r.splice(s--,1),e=i(i.s=t[0]))}return e}var n={},a={app:0},r=[];function i(s){if(n[s])return n[s].exports;var t=n[s]={i:s,l:!1,exports:{}};return e[s].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=n,i.d=function(e,s,t){i.o(e,s)||Object.defineProperty(e,s,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,s){if(1&s&&(e=i(e)),8&s)return e;if(4&s&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&s&&"string"!=typeof e)for(var n in e)i.d(t,n,function(s){return e[s]}.bind(null,n));return t},i.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(s,"a",s),s},i.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=s,o=o.slice();for(var l=0;l<o.length;l++)s(o[l]);var u=c;r.push([0,"chunk-vendors"]),t()})({0:function(e,s,t){e.exports=t("56d7")},"16b4":function(e,s,t){},"56d7":function(e,s,t){"use strict";t.r(s);t("e260"),t("e6cf"),t("cca6"),t("a79d");var n=t("2b0e"),a=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticClass:"messages__vue"},[""==e.fnum?t("div",{staticClass:"col-md-3"},e._l(e.campaigns,(function(s){return t("div",{staticClass:"messages__block",class:s.fnum==e.campaignSelected?"messages__active-campaign":"",on:{click:function(t){e.campaignSelected=s.fnum}}},[t("div",{staticClass:"messages__campaign-block"},[t("span",[e._v(e._s(s.label))])]),t("hr",{class:s.fnum==e.campaignSelected?"messages__active-hr":""})])})),0):e._e(),t("div",{staticClass:"messages__list",class:""!=e.fnum?"col-md-10 col-md-offset-1":"col-md-8"},[t("label",{staticClass:"text-center",staticStyle:{width:"100%"}},[e._v(e._s(e.translations.messages))]),t("div",{staticClass:"messages__list-block"},e._l(e.messages,(function(s){return t("div",{staticClass:"messages__message-item",class:e.user==s.user_id_from?"messages__current_user":""},[t("div",{staticClass:"messages__message-item-block"},[t("p",[t("em",{staticClass:"messages__message-item-from"},[e._v(e._s(s.name))])]),t("span",{staticClass:"messages__message-item-span"},[e._v(e._s(s.message))])])])})),0),t("div",{staticClass:"messages__bottom-input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.message,expression:"message"}],attrs:{type:"text"},domProps:{value:e.message},on:{keyup:function(s){return!s.type.indexOf("key")&&e._k(s.keyCode,"enter",13,s.key,"Enter")||s.ctrlKey||s.shiftKey||s.altKey||s.metaKey?null:(s.preventDefault(),e.sendMessage(s))},input:function(s){s.target.composing||(e.message=s.target.value)}}}),t("i",{staticClass:"far fa-paper-plane messages__send-icon",on:{click:e.sendMessage}})])])])},r=[],i=(t("a9e3"),t("bc3a")),o=t.n(i),c=(t("16b4"),t("b367"),t("4328")),l={name:"Messages",props:{fnum:String,user:Number},components:{},data:function(){return{messages:[],campaigns:[],campaignSelected:0,message:"",translations:{messages:Joomla.JText._("COM_EMUNDUS_MESSENGER_TITLE")}}},methods:{getCampaignsByUser:function(){var e=this;o()({method:"get",url:"index.php?option=com_emundus_messenger&controller=messages&task=getcampaignsbyuser"}).then((function(s){e.campaigns=s.data.data,e.campaignSelected=e.campaigns[0].fnum}))},getMessagesByFnum:function(){var e=this;o()({method:"get",url:"index.php?option=com_emundus_messenger&controller=messages&task=getmessagesbyfnum",params:{fnum:this.campaignSelected},paramsSerializer:function(e){return c.stringify(e)}}).then((function(s){e.messages=s.data.data,e.scrollToBottom()}))},sendMessage:function(){var e=this;o()({method:"post",url:"index.php?option=com_emundus_messenger&controller=messages&task=sendmessage",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:c.stringify({message:this.message,fnum:this.campaignSelected})}).then((function(s){e.message="",e.messages.push(s.data),e.scrollToBottom()}))},scrollToBottom:function(){setTimeout((function(){var e=document.getElementsByClassName("messages__list-block")[0];e.scrollTop=e.scrollHeight}),500)}},created:function(){""!=this.fnum?this.campaignSelected=this.fnum:this.getCampaignsByUser()},watch:{campaignSelected:function(){this.getMessagesByFnum()}}},u=l,m=t("2877"),g=Object(m["a"])(u,a,r,!1,null,null,null),p=g.exports;n["a"].config.productionTip=!1,n["a"].config.devtools=!0,document.getElementById("em-messages-vue")&&new n["a"]({el:"#em-messages-vue",render:function(e){return e(p,{props:{fnum:this.$el.attributes.fnum.value,user:this.$el.attributes.user.value}})}})},b367:function(e,s,t){}});
//# sourceMappingURL=app.js.map